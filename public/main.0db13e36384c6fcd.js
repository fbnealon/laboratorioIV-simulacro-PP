(self.webpackChunksimulacro=self.webpackChunksimulacro||[]).push([[179],{2011:(Dt,Se,V)=>{"use strict";V.d(Se,{Dh:()=>Le,GT:()=>_e,cc:()=>je,on:()=>Oe,pX:()=>ae,xv:()=>Ee});var d=V(4650),B=V(9260);Dt=V.hmd(Dt);const F=["ngOnDestroy"],ae=(se,Pe,De,$e={})=>new Proxy(se,{get:(Ie,ge)=>De.runOutsideAngular(()=>{var Te;if(se[ge])return!(null===(Te=$e?.spy)||void 0===Te)&&Te.get&&$e.spy.get(ge,se[ge]),se[ge];if(F.indexOf(ge)>-1)return()=>{};const Ve=Pe.toPromise().then(z=>{const te=z&&z[ge];return"function"==typeof te?te.bind(z):te&&te.then?te.then(He=>De.run(()=>He)):De.run(()=>te)});return new Proxy(()=>{},{get:(z,te)=>Ve[te],apply:(z,te,He)=>Ve.then(Et=>{var qe;const it=Et&&Et(...He);return!(null===(qe=$e?.spy)||void 0===qe)&&qe.apply&&$e.spy.apply(ge,He,it),it})})})}),_e=(se,Pe)=>{Pe.forEach(De=>{Object.getOwnPropertyNames(De.prototype||De).forEach($e=>{Object.defineProperty(se.prototype,$e,Object.getOwnPropertyDescriptor(De.prototype||De,$e))})})};class pe{constructor(Pe){return Pe}}const Le=new d.OlP("angularfire2.app.options"),Ee=new d.OlP("angularfire2.app.name");function Oe(se,Pe,De){const Ie="object"==typeof De&&De||{};Ie.name=Ie.name||"string"==typeof De&&De||"[DEFAULT]";const Te=B.Z.apps.filter(Ve=>Ve&&Ve.name===Ie.name)[0]||Pe.runOutsideAngular(()=>B.Z.initializeApp(se,Ie));try{JSON.stringify(se)!==JSON.stringify(Te.options)&&G("error",`${Te.name} Firebase App already initialized with different options${Dt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new pe(Te)}const G=(se,...Pe)=>{(0,d.X6Q)()&&typeof console<"u"&&console[se](...Pe)};function je(se,Pe,De,$e,Ie){const[,ge,Te]=globalThis.\u0275AngularfireInstanceCache.find(Ve=>Ve[0]===se)||[];if(ge)return function ke(se,Pe){try{return se.toString()===Pe.toString()}catch{return se===Pe}}(Ie,Te)||(rt("error",`${Pe} was already initialized on the ${De} Firebase App with different settings.${nt?" You may need to reload as Firebase is not HMR aware.":""}`),rt("warn",{is:Ie,was:Te})),ge;{const Ve=$e();return globalThis.\u0275AngularfireInstanceCache.push([se,Ve,Ie]),Ve}}const nt=!!Dt.hot,rt=(se,...Pe)=>{(0,d.X6Q)()&&typeof console<"u"&&console[se](...Pe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8502:(Dt,Se,V)=>{"use strict";V.d(Se,{$:()=>Rt,A:()=>q,D:()=>ke,I:()=>In,J:()=>ni,L:()=>Ai,N:()=>ti,P:()=>Zi,Q:()=>zl,R:()=>uc,U:()=>Gl,V:()=>pu,W:()=>gu,X:()=>xi,Y:()=>fa,Z:()=>mu,_:()=>pa,a:()=>si,a0:()=>Vf,a1:()=>_u,a2:()=>Od,a3:()=>Fd,a4:()=>Mi,a5:()=>wa,a6:()=>Kl,a7:()=>Pr,a8:()=>ro,a9:()=>Wi,aA:()=>te,aB:()=>ep,aC:()=>zn,aD:()=>Wr,aE:()=>Go,aF:()=>Na,aG:()=>ka,aH:()=>un,aL:()=>io,aO:()=>bs,aa:()=>Iu,ab:()=>Uf,ac:()=>Bf,ad:()=>Yl,ae:()=>Ld,af:()=>Vd,ai:()=>Su,aj:()=>jf,ak:()=>Rr,an:()=>Nd,ao:()=>xu,aq:()=>Dn,ar:()=>Pu,as:()=>Et,at:()=>Ct,au:()=>he,av:()=>Ie,aw:()=>Ba,ax:()=>Nr,ay:()=>$t,az:()=>ge,b:()=>rc,c:()=>Qd,d:()=>zo,e:()=>cc,f:()=>hc,g:()=>pc,h:()=>fc,i:()=>qd,j:()=>Am,k:()=>uo,l:()=>Kd,m:()=>ah,o:()=>_c,p:()=>Ee,r:()=>Hw,s:()=>Ma,u:()=>Ri});var d=V(5861),B=V(2090),F=V(6881),ae=V(655),_e=V(1877),pe=V(4859);const Ee={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},q={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const ke=function Q(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},nt=function je(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},rt=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Pe=new _e.Yd("@firebase/auth");function $e(_,...f){Pe.logLevel<=_e.in.ERROR&&Pe.error(`Auth (${F.SDK_VERSION}): ${_}`,...f)}function Ie(_,...f){throw z(_,...f)}function ge(_,...f){return z(_,...f)}function Te(_,f,m){const w=Object.assign(Object.assign({},nt()),{[f]:m});return new B.LL("auth","Firebase",w).create(f,{appName:_.name})}function Ve(_,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&Ie(_,"argument-error"),Te(_,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function z(_,...f){if("string"!=typeof _){const m=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=_.name),_._errorFactory.create(m,...w)}return rt.create(_,...f)}function te(_,f,...m){if(!_)throw z(f,...m)}function He(_){const f="INTERNAL ASSERTION FAILED: "+_;throw $e(f),new Error(f)}function Et(_,f){_||He(f)}function qe(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function it(){return"http:"===ot()||"https:"===ot()}function ot(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class me{constructor(f,m){this.shortDelay=f,this.longDelay=m,Et(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function ce(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(it()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function we(_,f){Et(_.emulator,"Emulator should always be set here");const{url:m}=_.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class Ue{static initialize(f,m,w){this.fetchImpl=f,m&&(this.headersImpl=m),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void He("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void He("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void He("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const xe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},et=new me(3e4,6e4);function Be(_,f){return _.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:_.tenantId}):f}function Tt(_,f,m,w){return lt.apply(this,arguments)}function lt(){return(lt=(0,d.Z)(function*(_,f,m,w,A={}){return zt(_,A,(0,d.Z)(function*(){let k={},Y={};w&&("GET"===f?Y=w:k={body:JSON.stringify(w)});const oe=(0,B.xO)(Object.assign({key:_.config.apiKey},Y)).slice(1),Ne=yield _._getAdditionalHeaders();return Ne["Content-Type"]="application/json",_.languageCode&&(Ne["X-Firebase-Locale"]=_.languageCode),Ue.fetch()(xn(_,_.config.apiHost,m,oe),Object.assign({method:f,headers:Ne,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function zt(_,f,m){return bt.apply(this,arguments)}function bt(){return(bt=(0,d.Z)(function*(_,f,m){_._canInitEmulator=!1;const w=Object.assign(Object.assign({},xe),f);try{const A=new mr(_),k=yield Promise.race([m(),A.promise]);A.clearNetworkTimeout();const Y=yield k.json();if("needConfirmation"in Y)throw Nn(_,"account-exists-with-different-credential",Y);if(k.ok&&!("errorMessage"in Y))return Y;{const oe=k.ok?Y.errorMessage:Y.error.message,[Ne,Ze]=oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ne)throw Nn(_,"credential-already-in-use",Y);if("EMAIL_EXISTS"===Ne)throw Nn(_,"email-already-in-use",Y);if("USER_DISABLED"===Ne)throw Nn(_,"user-disabled",Y);const gt=w[Ne]||Ne.toLowerCase().replace(/[_\s]+/g,"-");if(Ze)throw Te(_,gt,Ze);Ie(_,gt)}}catch(A){if(A instanceof B.ZR)throw A;Ie(_,"network-request-failed",{message:String(A)})}})).apply(this,arguments)}function Bt(_,f,m,w){return En.apply(this,arguments)}function En(){return(En=(0,d.Z)(function*(_,f,m,w,A={}){const k=yield Tt(_,f,m,w,A);return"mfaPendingCredential"in k&&Ie(_,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function xn(_,f,m,w){const A=`${f}${m}?${w}`;return _.config.emulator?we(_.config,A):`${_.config.apiScheme}://${A}`}class mr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,w)=>{this.timer=setTimeout(()=>w(ge(this.auth,"network-request-failed")),et.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Nn(_,f,m){const w={appName:_.name};m.email&&(w.email=m.email),m.phoneNumber&&(w.phoneNumber=m.phoneNumber);const A=ge(_,f,w);return A.customData._tokenResponse=m,A}function Xr(){return(Xr=(0,d.Z)(function*(_,f){return Tt(_,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function yn(){return(yn=(0,d.Z)(function*(_,f){return Tt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function On(){return(On=(0,d.Z)(function*(_,f){return Tt(_,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Je(_){if(_)try{const f=new Date(Number(_));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function Mn(){return(Mn=(0,d.Z)(function*(_,f=!1){const m=(0,B.m9)(_),w=yield m.getIdToken(f),A=_n(w);te(A&&A.exp&&A.auth_time&&A.iat,m.auth,"internal-error");const k="object"==typeof A.firebase?A.firebase:void 0,Y=k?.sign_in_provider;return{claims:A,token:w,authTime:Je(Pt(A.auth_time)),issuedAtTime:Je(Pt(A.iat)),expirationTime:Je(Pt(A.exp)),signInProvider:Y||null,signInSecondFactor:k?.sign_in_second_factor||null}})).apply(this,arguments)}function Pt(_){return 1e3*Number(_)}function _n(_){const[f,m,w]=_.split(".");if(void 0===f||void 0===m||void 0===w)return $e("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,B.tV)(m);return A?JSON.parse(A):($e("Failed to decode base64 JWT payload"),null)}catch(A){return $e("Caught error parsing JWT payload as JSON",A?.toString()),null}}function qt(_,f){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,d.Z)(function*(_,f,m=!1){if(m)return f;try{return yield f}catch(w){throw w instanceof B.ZR&&function dt({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}(w)&&_.auth.currentUser===_&&(yield _.auth.signOut()),w}})).apply(this,arguments)}class Pn{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const A=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,d.Z)(function*(){yield m.iteration()}),w)}iteration(){var f=this;return(0,d.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&f.schedule(!0))}f.schedule()})()}}class Ln{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Je(this.lastLoginAt),this.creationTime=Je(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function sn(_){return Ur.apply(this,arguments)}function Ur(){return Ur=(0,d.Z)(function*(_){var f;const m=_.auth,w=yield _.getIdToken(),A=yield qt(_,function Sr(_,f){return On.apply(this,arguments)}(m,{idToken:w}));te(A?.users.length,m,"internal-error");const k=A.users[0];_._notifyReloadListener(k);const Y=null!==(f=k.providerUserInfo)&&void 0!==f&&f.length?function ei(_){return _.map(f=>{var{providerId:m}=f,w=(0,ae._T)(f,["providerId"]);return{providerId:m,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}(k.providerUserInfo):[],oe=function jt(_,f){return[..._.filter(w=>!f.some(A=>A.providerId===w.providerId)),...f]}(_.providerData,Y),gt=!!_.isAnonymous&&!(_.email&&k.passwordHash||oe?.length),Ut={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:oe,metadata:new Ln(k.createdAt,k.lastLoginAt),isAnonymous:gt};Object.assign(_,Ut)}),Ur.apply(this,arguments)}function Jn(){return(Jn=(0,d.Z)(function*(_){const f=(0,B.m9)(_);yield sn(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function as(){return(as=(0,d.Z)(function*(_,f){const m=yield zt(_,{},(0,d.Z)(function*(){const w=(0,B.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:A,apiKey:k}=_.config,Y=xn(_,A,"/v1/token",`key=${k}`),oe=yield _._getAdditionalHeaders();return oe["Content-Type"]="application/x-www-form-urlencoded",Ue.fetch()(Y,{method:"POST",headers:oe,body:w})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class ze{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){te(f.idToken,"internal-error"),te(typeof f.idToken<"u","internal-error"),te(typeof f.refreshToken<"u","internal-error");const m="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function Gt(_){const f=_n(_);return te(f,"internal-error"),te(typeof f.exp<"u","internal-error"),te(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var w=this;return(0,d.Z)(function*(){return te(!w.accessToken||w.refreshToken,f,"user-token-expired"),m||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var w=this;return(0,d.Z)(function*(){const{accessToken:A,refreshToken:k,expiresIn:Y}=yield function Wt(_,f){return as.apply(this,arguments)}(f,m);w.updateTokensAndExpiration(A,k,Number(Y))})()}updateTokensAndExpiration(f,m,w){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,m){const{refreshToken:w,accessToken:A,expirationTime:k}=m,Y=new ze;return w&&(te("string"==typeof w,"internal-error",{appName:f}),Y.refreshToken=w),A&&(te("string"==typeof A,"internal-error",{appName:f}),Y.accessToken=A),k&&(te("number"==typeof k,"internal-error",{appName:f}),Y.expirationTime=k),Y}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new ze,this.toJSON())}_performRefresh(){return He("not implemented")}}function Hn(_,f){te("string"==typeof _||typeof _>"u","internal-error",{appName:f})}class Vn{constructor(f){var{uid:m,auth:w,stsTokenManager:A}=f,k=(0,ae._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Pn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=w,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new Ln(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,d.Z)(function*(){const w=yield qt(m,m.stsTokenManager.getToken(m.auth,f));return te(w,m.auth,"internal-error"),m.accessToken!==w&&(m.accessToken=w,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),w})()}getIdTokenResult(f){return function fi(_){return Mn.apply(this,arguments)}(this,f)}reload(){return function lr(_){return Jn.apply(this,arguments)}(this)}_assign(f){this!==f&&(te(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){const m=new Vn(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(f){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var w=this;return(0,d.Z)(function*(){let A=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),A=!0),m&&(yield sn(w)),yield w.auth._persistUserIfCurrent(w),A&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,d.Z)(function*(){const m=yield f.getIdToken();return yield qt(f,function yr(_,f){return Xr.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var w,A,k,Y,oe,Ne,Ze,gt;const Ut=null!==(w=m.displayName)&&void 0!==w?w:void 0,Hr=null!==(A=m.email)&&void 0!==A?A:void 0,Rs=null!==(k=m.phoneNumber)&&void 0!==k?k:void 0,co=null!==(Y=m.photoURL)&&void 0!==Y?Y:void 0,Gu=null!==(oe=m.tenantId)&&void 0!==oe?oe:void 0,Ji=null!==(Ne=m._redirectEventId)&&void 0!==Ne?Ne:void 0,dh=null!==(Ze=m.createdAt)&&void 0!==Ze?Ze:void 0,wc=null!==(gt=m.lastLoginAt)&&void 0!==gt?gt:void 0,{uid:qu,emailVerified:ho,isAnonymous:Ec,providerData:bc,stsTokenManager:za}=m;te(qu&&za,f,"internal-error");const Ic=ze.fromJSON(this.name,za);te("string"==typeof qu,f,"internal-error"),Hn(Ut,f.name),Hn(Hr,f.name),te("boolean"==typeof ho,f,"internal-error"),te("boolean"==typeof Ec,f,"internal-error"),Hn(Rs,f.name),Hn(co,f.name),Hn(Gu,f.name),Hn(Ji,f.name),Hn(dh,f.name),Hn(wc,f.name);const Ga=new Vn({uid:qu,auth:f,email:Hr,emailVerified:ho,displayName:Ut,isAnonymous:Ec,photoURL:co,phoneNumber:Rs,tenantId:Gu,stsTokenManager:Ic,createdAt:dh,lastLoginAt:wc});return bc&&Array.isArray(bc)&&(Ga.providerData=bc.map(fo=>Object.assign({},fo))),Ji&&(Ga._redirectEventId=Ji),Ga}static _fromIdTokenResponse(f,m,w=!1){return(0,d.Z)(function*(){const A=new ze;A.updateFromServerResponse(m);const k=new Vn({uid:m.localId,auth:f,stsTokenManager:A,isAnonymous:w});return yield sn(k),k})()}}const Ar=new Map;function zn(_){Et(_ instanceof Function,"Expected a class definition");let f=Ar.get(_);return f?(Et(f instanceof _,"Instance stored in cache mismatched with class"),f):(f=new _,Ar.set(_,f),f)}const ti=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(m,w){var A=this;return(0,d.Z)(function*(){A.storage[m]=w})()}_get(m){var w=this;return(0,d.Z)(function*(){const A=w.storage[m];return void 0===A?null:A})()}_remove(m){var w=this;return(0,d.Z)(function*(){delete w.storage[m]})()}_addListener(m,w){}_removeListener(m,w){}}return _.type="NONE",_})();function Wr(_,f,m){return`firebase:${_}:${f}:${m}`}class H{constructor(f,m,w){this.persistence=f,this.auth=m,this.userKey=w;const{config:A,name:k}=this.auth;this.fullUserKey=Wr(this.userKey,A.apiKey,k),this.fullPersistenceKey=Wr("persistence",A.apiKey,k),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,d.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?Vn._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,d.Z)(function*(){if(m.persistence===f)return;const w=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,w?m.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,w="authUser"){return(0,d.Z)(function*(){if(!m.length)return new H(zn(ti),f,w);const A=(yield Promise.all(m.map(function(){var Ze=(0,d.Z)(function*(gt){if(yield gt._isAvailable())return gt});return function(gt){return Ze.apply(this,arguments)}}()))).filter(Ze=>Ze);let k=A[0]||zn(ti);const Y=Wr(w,f.config.apiKey,f.name);let oe=null;for(const Ze of m)try{const gt=yield Ze._get(Y);if(gt){const Ut=Vn._fromJSON(f,gt);Ze!==k&&(oe=Ut),k=Ze;break}}catch{}const Ne=A.filter(Ze=>Ze._shouldAllowMigration);return k._shouldAllowMigration&&Ne.length?(k=Ne[0],oe&&(yield k._set(Y,oe.toJSON())),yield Promise.all(m.map(function(){var Ze=(0,d.Z)(function*(gt){if(gt!==k)try{yield gt._remove(Y)}catch{}});return function(gt){return Ze.apply(this,arguments)}}())),new H(k,f,w)):new H(k,f,w)})()}}function U(_){const f=_.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(W(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(N(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(tt(f))return"Blackberry";if(At(f))return"Webos";if(O(f))return"Safari";if((f.includes("chrome/")||R(f))&&!f.includes("edge/"))return"Chrome";if(he(f))return"Android";{const w=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function N(_=(0,B.z$)()){return/firefox\//i.test(_)}function O(_=(0,B.z$)()){const f=_.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function R(_=(0,B.z$)()){return/crios\//i.test(_)}function W(_=(0,B.z$)()){return/iemobile/i.test(_)}function he(_=(0,B.z$)()){return/android/i.test(_)}function tt(_=(0,B.z$)()){return/blackberry/i.test(_)}function At(_=(0,B.z$)()){return/webos/i.test(_)}function Ct(_=(0,B.z$)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function $t(_=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}function Ft(_=(0,B.z$)()){return Ct(_)||he(_)||At(_)||tt(_)||/windows phone/i.test(_)||W(_)}function ws(_,f=[]){let m;switch(_){case"Browser":m=U((0,B.z$)());break;case"Worker":m=`${U((0,B.z$)())}-${_}`;break;default:m=_}const w=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${F.SDK_VERSION}/${w}`}function ne(){return(ne=(0,d.Z)(function*(_){return(yield Tt(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Me(_,f){return ht.apply(this,arguments)}function ht(){return(ht=(0,d.Z)(function*(_,f){return Tt(_,"GET","/v2/recaptchaConfig",Be(_,f))})).apply(this,arguments)}function Mt(_){return void 0!==_&&void 0!==_.getResponse}function Yt(_){return void 0!==_&&void 0!==_.enterprise}class pt{constructor(f){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===f.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=f.recaptchaKey.split("/")[3],this.emailPasswordEnabled=f.recaptchaEnforcementState.some(m=>"EMAIL_PASSWORD_PROVIDER"===m.provider&&"OFF"!==m.enforcementState)}}function Zt(_){return new Promise((f,m)=>{const w=document.createElement("script");w.setAttribute("src",_),w.onload=f,w.onerror=A=>{const k=ge("internal-error");k.customData=A,m(k)},w.type="text/javascript",w.charset="UTF-8",function on(){var _,f;return null!==(f=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==f?f:document}().appendChild(w)})}function cr(_){return`__${_}${Math.floor(1e6*Math.random())}`}const Ad="NO_RECAPTCHA";class Gs{constructor(f){this.type="recaptcha-enterprise",this.auth=un(f)}verify(f="verify",m=!1){var w=this;return(0,d.Z)(function*(){function k(){return k=(0,d.Z)(function*(oe){if(!m){if(null==oe.tenantId&&null!=oe._agentRecaptchaConfig)return oe._agentRecaptchaConfig.siteKey;if(null!=oe.tenantId&&void 0!==oe._tenantRecaptchaConfigs[oe.tenantId])return oe._tenantRecaptchaConfigs[oe.tenantId].siteKey}return new Promise(function(){var Ne=(0,d.Z)(function*(Ze,gt){Me(oe,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Ut=>{if(void 0!==Ut.recaptchaKey){const Hr=new pt(Ut);return null==oe.tenantId?oe._agentRecaptchaConfig=Hr:oe._tenantRecaptchaConfigs[oe.tenantId]=Hr,Ze(Hr.siteKey)}gt(new Error("recaptcha Enterprise site key undefined"))}).catch(Ut=>{gt(Ut)})});return function(Ze,gt){return Ne.apply(this,arguments)}}())}),k.apply(this,arguments)}function Y(oe,Ne,Ze){const gt=window.grecaptcha;Yt(gt)?gt.enterprise.ready(()=>{gt.enterprise.execute(oe,{action:f}).then(Ut=>{Ne(Ut)}).catch(()=>{Ne(Ad)})}):Ze(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((oe,Ne)=>{(function A(oe){return k.apply(this,arguments)})(w.auth).then(Ze=>{if(!m&&Yt(window.grecaptcha))Y(Ze,oe,Ne);else{if(typeof window>"u")return void Ne(new Error("RecaptchaVerifier is only supported in browser"));Zt("https://www.google.com/recaptcha/enterprise.js?render="+Ze).then(()=>{Y(Ze,oe,Ne)}).catch(gt=>{Ne(gt)})}}).catch(Ze=>{Ne(Ze)})})})()}}function Xn(_,f,m){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,d.Z)(function*(_,f,m,w=!1){const A=new Gs(_);let k;try{k=yield A.verify(m)}catch{k=yield A.verify(m,!0)}const Y=Object.assign({},f);return Object.assign(Y,w?{captchaResp:k}:{captchaResponse:k}),Object.assign(Y,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Y,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Y})).apply(this,arguments)}class Vt{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,m){const w=k=>new Promise((Y,oe)=>{try{Y(f(k))}catch(Ne){oe(Ne)}});w.onAbort=m,this.queue.push(w);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(f){var m=this;return(0,d.Z)(function*(){if(m.auth.currentUser===f)return;const w=[];try{for(const A of m.queue)yield A(f),A.onAbort&&w.push(A.onAbort)}catch(A){w.reverse();for(const k of w)try{k()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:A?.message})}})()}}class Rn{constructor(f,m,w,A){this.app=f,this.heartbeatServiceProvider=m,this.appCheckServiceProvider=w,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Si(this),this.idTokenSubscription=new Si(this),this.beforeStateQueue=new Vt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=A.sdkClientVersion}_initializeWithPersistence(f,m){var w=this;return m&&(this._popupRedirectResolver=zn(m)),this._initializationPromise=this.queue((0,d.Z)(function*(){var A,k;if(!w._deleted&&(w.persistenceManager=yield H.create(w,f),!w._deleted)){if(null!==(A=w._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(m),w.lastNotifiedUid=(null===(k=w.currentUser)||void 0===k?void 0:k.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,d.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m,!0)}})()}initializeCurrentUser(f){var m=this;return(0,d.Z)(function*(){var w;const A=yield m.assertedPersistence.getCurrentUser();let k=A,Y=!1;if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const oe=null===(w=m.redirectUser)||void 0===w?void 0:w._redirectEventId,Ne=k?._redirectEventId,Ze=yield m.tryRedirectSignIn(f);(!oe||oe===Ne)&&Ze?.user&&(k=Ze.user,Y=!0)}if(!k)return m.directlySetCurrentUser(null);if(!k._redirectEventId){if(Y)try{yield m.beforeStateQueue.runMiddleware(k)}catch(oe){k=A,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(oe))}return k?m.reloadAndSetCurrentUserOrClear(k):m.directlySetCurrentUser(null)}return te(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===k._redirectEventId?m.directlySetCurrentUser(k):m.reloadAndSetCurrentUserOrClear(k)})()}tryRedirectSignIn(f){var m=this;return(0,d.Z)(function*(){let w=null;try{w=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch{yield m._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,d.Z)(function*(){try{yield sn(f)}catch(w){if("auth/network-request-failed"!==w?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function le(){if(typeof navigator>"u")return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var f=this;return(0,d.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,d.Z)(function*(){const w=f?(0,B.m9)(f):null;return w&&te(w.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(w&&w._clone(m))})()}_updateCurrentUser(f,m=!1){var w=this;return(0,d.Z)(function*(){if(!w._deleted)return f&&te(w.tenantId===f.tenantId,w,"tenant-id-mismatch"),m||(yield w.beforeStateQueue.runMiddleware(f)),w.queue((0,d.Z)(function*(){yield w.directlySetCurrentUser(f),w.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,d.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var m=this;return this.queue((0,d.Z)(function*(){yield m.assertedPersistence.setPersistence(zn(f))}))}initializeRecaptchaConfig(){var f=this;return(0,d.Z)(function*(){const m=yield Me(f,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),w=new pt(m);null==f.tenantId?f._agentRecaptchaConfig=w:f._tenantRecaptchaConfigs[f.tenantId]=w,w.emailPasswordEnabled&&new Gs(f).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new B.LL("auth","Firebase",f())}onAuthStateChanged(f,m,w){return this.registerStateListener(this.authStateSubscription,f,m,w)}beforeAuthStateChanged(f,m){return this.beforeStateQueue.pushCallback(f,m)}onIdTokenChanged(f,m,w){return this.registerStateListener(this.idTokenSubscription,f,m,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var w=this;return(0,d.Z)(function*(){const A=yield w.getOrInitRedirectPersistenceManager(m);return null===f?A.removeCurrentUser():A.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,d.Z)(function*(){if(!m.redirectPersistenceManager){const w=f&&zn(f)||m._popupRedirectResolver;te(w,m,"argument-error"),m.redirectPersistenceManager=yield H.create(m,[zn(w._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,d.Z)(function*(){var w,A;return m._isInitialized&&(yield m.queue((0,d.Z)(function*(){}))),(null===(w=m._currentUser)||void 0===w?void 0:w._redirectEventId)===f?m._currentUser:(null===(A=m.redirectUser)||void 0===A?void 0:A._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,d.Z)(function*(){if(f===m.currentUser)return m.queue((0,d.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,w,A){if(this._deleted)return()=>{};const k="function"==typeof m?m:m.next.bind(m),Y=this._isInitialized?Promise.resolve():this._initializationPromise;return te(Y,this,"internal-error"),Y.then(()=>k(this.currentUser)),"function"==typeof m?f.addObserver(m,w,A):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,d.Z)(function*(){m.currentUser&&m.currentUser!==f&&m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh(),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=ws(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,d.Z)(function*(){var m;const w={"X-Client-Version":f.clientVersion};f.app.options.appId&&(w["X-Firebase-gmpid"]=f.app.options.appId);const A=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();A&&(w["X-Firebase-Client"]=A);const k=yield f._getAppCheckToken();return k&&(w["X-Firebase-AppCheck"]=k),w})()}_getAppCheckToken(){var f=this;return(0,d.Z)(function*(){var m;const w=yield null===(m=f.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getToken();return w?.error&&function De(_,...f){Pe.logLevel<=_e.in.WARN&&Pe.warn(`Auth (${F.SDK_VERSION}): ${_}`,...f)}(`Error while retrieving App Check token: ${w.error}`),w?.token})()}}function un(_){return(0,B.m9)(_)}class Si{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,B.ne)(m=>this.observer=m)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function In(_,f,m){const w=un(_);te(w._canInitEmulator,w,"emulator-config-failed"),te(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const A=!!m?.disableWarnings,k=Do(f),{host:Y,port:oe}=function qs(_){const f=Do(_),m=/(\/\/)?([^?#/]+)/.exec(_.substr(f.length));if(!m)return{host:"",port:null};const w=m[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(w);if(A){const k=A[1];return{host:k,port:Ht(w.substr(k.length+1))}}{const[k,Y]=w.split(":");return{host:k,port:Ht(Y)}}}(f);w.config.emulator={url:`${k}//${Y}${null===oe?"":`:${oe}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:Y,port:oe,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function da(){function _(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}function Do(_){const f=_.indexOf(":");return f<0?"":_.substr(0,f+1)}function Ht(_){if(!_)return null;const f=Number(_);return isNaN(f)?null:f}class ni{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return He("not implemented")}_getIdTokenResponse(f){return He("not implemented")}_linkToIdToken(f,m){return He("not implemented")}_getReauthenticationResolver(f){return He("not implemented")}}function To(_,f){return ji.apply(this,arguments)}function ji(){return(ji=(0,d.Z)(function*(_,f){return Tt(_,"POST","/v1/accounts:resetPassword",Be(_,f))})).apply(this,arguments)}function kn(_,f){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,d.Z)(function*(_,f){return Tt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ri(){return(ri=(0,d.Z)(function*(_,f){return Tt(_,"POST","/v1/accounts:update",Be(_,f))})).apply(this,arguments)}function Zs(_,f){return hu.apply(this,arguments)}function hu(){return(hu=(0,d.Z)(function*(_,f){return Bt(_,"POST","/v1/accounts:signInWithPassword",Be(_,f))})).apply(this,arguments)}function gn(_,f){return ii.apply(this,arguments)}function ii(){return(ii=(0,d.Z)(function*(_,f){return Tt(_,"POST","/v1/accounts:sendOobCode",Be(_,f))})).apply(this,arguments)}function ha(){return(ha=(0,d.Z)(function*(_,f){return gn(_,f)})).apply(this,arguments)}function Ks(_,f){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,d.Z)(function*(_,f){return gn(_,f)})).apply(this,arguments)}function Br(_,f){return er.apply(this,arguments)}function er(){return(er=(0,d.Z)(function*(_,f){return gn(_,f)})).apply(this,arguments)}function xr(){return(xr=(0,d.Z)(function*(_,f){return gn(_,f)})).apply(this,arguments)}function So(){return(So=(0,d.Z)(function*(_,f){return Bt(_,"POST","/v1/accounts:signInWithEmailLink",Be(_,f))})).apply(this,arguments)}function Qs(){return(Qs=(0,d.Z)(function*(_,f){return Bt(_,"POST","/v1/accounts:signInWithEmailLink",Be(_,f))})).apply(this,arguments)}class Mr extends ni{constructor(f,m,w,A=null){super("password",w),this._email=f,this._password=m,this._tenantId=A}static _fromEmailAndPassword(f,m){return new Mr(f,m,"password")}static _fromEmailAndCode(f,m,w=null){return new Mr(f,m,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,d.Z)(function*(){var w;switch(m.signInMethod){case"password":const A={returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(w=f._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const k=yield Xn(f,A,"signInWithPassword");return Zs(f,k)}return Zs(f,A).catch(function(){var k=(0,d.Z)(function*(Y){if("auth/missing-recaptcha-token"===Y.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const oe=yield Xn(f,A,"signInWithPassword");return Zs(f,oe)}return Promise.reject(Y)});return function(Y){return k.apply(this,arguments)}}());case"emailLink":return function gi(_,f){return So.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:Ie(f,"internal-error")}})()}_linkToIdToken(f,m){var w=this;return(0,d.Z)(function*(){switch(w.signInMethod){case"password":return kn(f,{idToken:m,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Ao(_,f){return Qs.apply(this,arguments)}(f,{idToken:m,email:w._email,oobCode:w._password});default:Ie(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function $i(_,f){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,d.Z)(function*(_,f){return Bt(_,"POST","/v1/accounts:signInWithIdp",Be(_,f))})).apply(this,arguments)}class Ai extends ni{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new Ai(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):Ie("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:A}=m,k=(0,ae._T)(m,["providerId","signInMethod"]);if(!w||!A)return null;const Y=new Ai(w,A);return Y.idToken=k.idToken||void 0,Y.accessToken=k.accessToken||void 0,Y.secret=k.secret,Y.nonce=k.nonce,Y.pendingToken=k.pendingToken||null,Y}_getIdTokenResponse(f){return $i(f,this.buildRequest())}_linkToIdToken(f,m){const w=this.buildRequest();return w.idToken=m,$i(f,w)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,$i(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,B.xO)(m)}return f}}function Vl(){return(Vl=(0,d.Z)(function*(_,f){return Tt(_,"POST","/v1/accounts:sendVerificationCode",Be(_,f))})).apply(this,arguments)}function Bl(){return(Bl=(0,d.Z)(function*(_,f){return Bt(_,"POST","/v1/accounts:signInWithPhoneNumber",Be(_,f))})).apply(this,arguments)}function jl(){return(jl=(0,d.Z)(function*(_,f){const m=yield Bt(_,"POST","/v1/accounts:signInWithPhoneNumber",Be(_,f));if(m.temporaryProof)throw Nn(_,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const $l={USER_NOT_FOUND:"user-not-found"};function Js(){return(Js=(0,d.Z)(function*(_,f){return Bt(_,"POST","/v1/accounts:signInWithPhoneNumber",Be(_,Object.assign(Object.assign({},f),{operation:"REAUTH"})),$l)})).apply(this,arguments)}class xo extends ni{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new xo({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new xo({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function Ul(_,f){return Bl.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function Md(_,f){return jl.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Hl(_,f){return Js.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:w,verificationCode:A}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:w,code:A}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:w,phoneNumber:A,temporaryProof:k}=f;return w||m||A||k?new xo({verificationId:m,verificationCode:w,phoneNumber:A,temporaryProof:k}):null}}class Xs{constructor(f){var m,w,A,k,Y,oe;const Ne=(0,B.zd)((0,B.pd)(f)),Ze=null!==(m=Ne.apiKey)&&void 0!==m?m:null,gt=null!==(w=Ne.oobCode)&&void 0!==w?w:null,Ut=function Lf(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Ne.mode)&&void 0!==A?A:null);te(Ze&&gt&&Ut,"argument-error"),this.apiKey=Ze,this.operation=Ut,this.code=gt,this.continueUrl=null!==(k=Ne.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(Y=Ne.languageCode)&&void 0!==Y?Y:null,this.tenantId=null!==(oe=Ne.tenantId)&&void 0!==oe?oe:null}static parseLink(f){const m=function Pd(_){const f=(0,B.zd)((0,B.pd)(_)).link,m=f?(0,B.zd)((0,B.pd)(f)).deep_link_id:null,w=(0,B.zd)((0,B.pd)(_)).deep_link_id;return(w?(0,B.zd)((0,B.pd)(w)).link:null)||w||m||f||_}(f);try{return new Xs(m)}catch{return null}}}let zl=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(m,w){return Mr._fromEmailAndPassword(m,w)}static credentialWithLink(m,w){const A=Xs.parseLink(w);return te(A,"argument-error"),Mr._fromEmailAndCode(m,A.code,A.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class Es{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class eo extends Es{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class xi extends eo{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return te("providerId"in m&&"signInMethod"in m,"argument-error"),Ai._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return te(f.idToken||f.accessToken,"argument-error"),Ai._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return xi.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return xi.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:w,oauthTokenSecret:A,pendingToken:k,nonce:Y,providerId:oe}=f;if(!w&&!A&&!m&&!k||!oe)return null;try{return new xi(oe)._credential({idToken:m,accessToken:w,nonce:Y,pendingToken:k})}catch{return null}}}let Gl=(()=>{class _ extends eo{constructor(){super("facebook.com")}static credential(m){return Ai._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch{return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),pu=(()=>{class _ extends eo{constructor(){super("google.com"),this.addScope("profile")}static credential(m,w){return Ai._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:w})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:w,oauthAccessToken:A}=m;if(!w&&!A)return null;try{return _.credential(w,A)}catch{return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),gu=(()=>{class _ extends eo{constructor(){super("github.com")}static credential(m){return Ai._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch{return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class bs extends ni{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return $i(f,this.buildRequest())}_linkToIdToken(f,m){const w=this.buildRequest();return w.idToken=m,$i(f,w)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,$i(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:A,pendingToken:k}=m;return w&&A&&k&&w===A?new bs(w,k):null}static _create(f,m){return new bs(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class fa extends Es{constructor(f){te(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return fa.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return fa.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=bs.fromJSON(f);return te(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:w}=f;if(!m||!w)return null;try{return bs._create(w,m)}catch{return null}}}let mu=(()=>{class _ extends eo{constructor(){super("twitter.com")}static credential(m,w){return Ai._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:w})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:w,oauthTokenSecret:A}=m;if(!w||!A)return null;try{return _.credential(w,A)}catch{return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function Mo(_,f){return Po.apply(this,arguments)}function Po(){return(Po=(0,d.Z)(function*(_,f){return Bt(_,"POST","/v1/accounts:signUp",Be(_,f))})).apply(this,arguments)}class Cn{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,w,A=!1){return(0,d.Z)(function*(){const k=yield Vn._fromIdTokenResponse(f,w,A),Y=yu(w);return new Cn({user:k,providerId:Y,_tokenResponse:w,operationType:m})})()}static _forOperation(f,m,w){return(0,d.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const A=yu(w);return new Cn({user:f,providerId:A,_tokenResponse:w,operationType:m})})()}}function yu(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function pa(_){return Un.apply(this,arguments)}function Un(){return(Un=(0,d.Z)(function*(_){var f;const m=un(_);if(yield m._initializationPromise,null!==(f=m.currentUser)&&void 0!==f&&f.isAnonymous)return new Cn({user:m.currentUser,providerId:null,operationType:"signIn"});const w=yield Mo(m,{returnSecureToken:!0}),A=yield Cn._fromIdTokenResponse(m,"signIn",w,!0);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class Is extends B.ZR{constructor(f,m,w,A){var k;super(m.code,m.message),this.operationType=w,this.user=A,Object.setPrototypeOf(this,Is.prototype),this.customData={appName:f.name,tenantId:null!==(k=f.tenantId)&&void 0!==k?k:void 0,_serverResponse:m.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,m,w,A){return new Is(f,m,w,A)}}function Ro(_,f,m,w){return("reauthenticate"===f?m._getReauthenticationResolver(_):m._getIdTokenResponse(_)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?Is._fromErrorAndOperation(_,k,f,w):k})}function dr(_){return new Set(_.map(({providerId:f})=>f).filter(f=>!!f))}function Nd(_,f){return ga.apply(this,arguments)}function ga(){return ga=(0,d.Z)(function*(_,f){const m=(0,B.m9)(_);yield ma(!0,m,f);const{providerUserInfo:w}=yield function ur(_,f){return yn.apply(this,arguments)}(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),A=dr(w||[]);return m.providerData=m.providerData.filter(k=>A.has(k.providerId)),A.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m}),ga.apply(this,arguments)}function Cs(_,f){return hr.apply(this,arguments)}function hr(){return(hr=(0,d.Z)(function*(_,f,m=!1){const w=yield qt(_,f._linkToIdToken(_.auth,yield _.getIdToken()),m);return Cn._forOperation(_,"link",w)})).apply(this,arguments)}function ma(_,f,m){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,d.Z)(function*(_,f,m){yield sn(f);const A=!1===_?"provider-already-linked":"no-such-provider";te(dr(f.providerData).has(m)===_,f.auth,A)})).apply(this,arguments)}function ql(_,f){return zi.apply(this,arguments)}function zi(){return(zi=(0,d.Z)(function*(_,f,m=!1){const{auth:w}=_,A="reauthenticate";try{const k=yield qt(_,Ro(w,A,f,_),m);te(k.idToken,w,"internal-error");const Y=_n(k.idToken);te(Y,w,"internal-error");const{sub:oe}=Y;return te(_.uid===oe,w,"user-mismatch"),Cn._forOperation(_,A,k)}catch(k){throw"auth/user-not-found"===k?.code&&Ie(w,"user-mismatch"),k}})).apply(this,arguments)}function vu(_,f){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,d.Z)(function*(_,f,m=!1){const w="signIn",A=yield Ro(_,w,f),k=yield Cn._fromIdTokenResponse(_,w,A);return m||(yield _._updateCurrentUser(k.user)),k})).apply(this,arguments)}function Rt(_,f){return ya.apply(this,arguments)}function ya(){return(ya=(0,d.Z)(function*(_,f){return vu(un(_),f)})).apply(this,arguments)}function Vf(_,f){return va.apply(this,arguments)}function va(){return(va=(0,d.Z)(function*(_,f){const m=(0,B.m9)(_);return yield ma(!1,m,f.providerId),Cs(m,f)})).apply(this,arguments)}function _u(_,f){return _a.apply(this,arguments)}function _a(){return(_a=(0,d.Z)(function*(_,f){return ql((0,B.m9)(_),f)})).apply(this,arguments)}function Zl(){return(Zl=(0,d.Z)(function*(_,f){return Bt(_,"POST","/v1/accounts:signInWithCustomToken",Be(_,f))})).apply(this,arguments)}function Od(_,f){return de.apply(this,arguments)}function de(){return de=(0,d.Z)(function*(_,f){const m=un(_),w=yield function Wl(_,f){return Zl.apply(this,arguments)}(m,{token:f,returnSecureToken:!0}),A=yield Cn._fromIdTokenResponse(m,"signIn",w);return yield m._updateCurrentUser(A.user),A}),de.apply(this,arguments)}class Jt{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?wu._fromServerResponse(f,m):"totpInfo"in m?Eu._fromServerResponse(f,m):Ie(f,"internal-error")}}class wu extends Jt{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new wu(m)}}class Eu extends Jt{constructor(f){super("totp",f)}static _fromServerResponse(f,m){return new Eu(m)}}function Fn(_,f,m){var w;te((null===(w=m.url)||void 0===w?void 0:w.length)>0,_,"invalid-continue-uri"),te(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(te(m.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(te(m.android.packageName.length>0,_,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function Fd(_,f,m){return no.apply(this,arguments)}function no(){return no=(0,d.Z)(function*(_,f,m){var w;const A=un(_),k={requestType:"PASSWORD_RESET",email:f,clientType:"CLIENT_TYPE_WEB"};if(null!==(w=A._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const Y=yield Xn(A,k,"getOobCode",!0);m&&Fn(A,Y,m),yield Ks(A,Y)}else m&&Fn(A,k,m),yield Ks(A,k).catch(function(){var Y=(0,d.Z)(function*(oe){if("auth/missing-recaptcha-token"!==oe.code)return Promise.reject(oe);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Ne=yield Xn(A,k,"getOobCode",!0);m&&Fn(A,Ne,m),yield Ks(A,Ne)}});return function(oe){return Y.apply(this,arguments)}}())}),no.apply(this,arguments)}function Mi(_,f,m){return ko.apply(this,arguments)}function ko(){return(ko=(0,d.Z)(function*(_,f,m){yield To((0,B.m9)(_),{oobCode:f,newPassword:m})})).apply(this,arguments)}function wa(_,f){return bu.apply(this,arguments)}function bu(){return bu=(0,d.Z)(function*(_,f){yield function us(_,f){return ri.apply(this,arguments)}((0,B.m9)(_),{oobCode:f})}),bu.apply(this,arguments)}function Kl(_,f){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,d.Z)(function*(_,f){const m=(0,B.m9)(_),w=yield To(m,{oobCode:f}),A=w.requestType;switch(te(A,m,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(w.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(w.mfaInfo,m,"internal-error");default:te(w.email,m,"internal-error")}let k=null;return w.mfaInfo&&(k=Jt._fromServerResponse(un(m),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:k},operation:A}})).apply(this,arguments)}function Pr(_,f){return jr.apply(this,arguments)}function jr(){return(jr=(0,d.Z)(function*(_,f){const{data:m}=yield Kl((0,B.m9)(_),f);return m.email})).apply(this,arguments)}function ro(_,f,m){return qi.apply(this,arguments)}function qi(){return qi=(0,d.Z)(function*(_,f,m){var w;const A=un(_),k={returnSecureToken:!0,email:f,password:m,clientType:"CLIENT_TYPE_WEB"};let Y;if(null!==(w=A._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const Ze=yield Xn(A,k,"signUpPassword");Y=Mo(A,Ze)}else Y=Mo(A,k).catch(function(){var Ze=(0,d.Z)(function*(gt){if("auth/missing-recaptcha-token"===gt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Ut=yield Xn(A,k,"signUpPassword");return Mo(A,Ut)}return Promise.reject(gt)});return function(gt){return Ze.apply(this,arguments)}}());const oe=yield Y.catch(Ze=>Promise.reject(Ze)),Ne=yield Cn._fromIdTokenResponse(A,"signIn",oe);return yield A._updateCurrentUser(Ne.user),Ne}),qi.apply(this,arguments)}function Wi(_,f,m){return Rt((0,B.m9)(_),zl.credential(f,m))}function Iu(_,f,m){return Ds.apply(this,arguments)}function Ds(){return Ds=(0,d.Z)(function*(_,f,m){var w;const A=un(_),k={requestType:"EMAIL_SIGNIN",email:f,clientType:"CLIENT_TYPE_WEB"};function Y(oe,Ne){te(Ne.handleCodeInApp,A,"argument-error"),Ne&&Fn(A,oe,Ne)}if(null!==(w=A._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const oe=yield Xn(A,k,"getOobCode",!0);Y(oe,m),yield Br(A,oe)}else Y(k,m),yield Br(A,k).catch(function(){var oe=(0,d.Z)(function*(Ne){if("auth/missing-recaptcha-token"!==Ne.code)return Promise.reject(Ne);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ze=yield Xn(A,k,"getOobCode",!0);Y(Ze,m),yield Br(A,Ze)}});return function(Ne){return oe.apply(this,arguments)}}())}),Ds.apply(this,arguments)}function Uf(_,f){return"EMAIL_SIGNIN"===Xs.parseLink(f)?.operation}function Bf(_,f,m){return No.apply(this,arguments)}function No(){return(No=(0,d.Z)(function*(_,f,m){const w=(0,B.m9)(_),A=zl.credentialWithLink(f,m||qe());return te(A._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Rt(w,A)})).apply(this,arguments)}function Cu(){return(Cu=(0,d.Z)(function*(_,f){return Tt(_,"POST","/v1/accounts:createAuthUri",Be(_,f))})).apply(this,arguments)}function Yl(_,f){return Ql.apply(this,arguments)}function Ql(){return Ql=(0,d.Z)(function*(_,f){const w={identifier:f,continueUri:it()?qe():"http://localhost"},{signinMethods:A}=yield function Ts(_,f){return Cu.apply(this,arguments)}((0,B.m9)(_),w);return A||[]}),Ql.apply(this,arguments)}function Ld(_,f){return Oo.apply(this,arguments)}function Oo(){return Oo=(0,d.Z)(function*(_,f){const m=(0,B.m9)(_),A={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};f&&Fn(m.auth,A,f);const{email:k}=yield function fu(_,f){return ha.apply(this,arguments)}(m.auth,A);k!==_.email&&(yield _.reload())}),Oo.apply(this,arguments)}function Vd(_,f,m){return Du.apply(this,arguments)}function Du(){return Du=(0,d.Z)(function*(_,f,m){const w=(0,B.m9)(_),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:f};m&&Fn(w.auth,k,m);const{email:Y}=yield function Of(_,f){return xr.apply(this,arguments)}(w.auth,k);Y!==_.email&&(yield _.reload())}),Du.apply(this,arguments)}function Tu(){return(Tu=(0,d.Z)(function*(_,f){return Tt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Su(_,f){return ba.apply(this,arguments)}function ba(){return ba=(0,d.Z)(function*(_,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const w=(0,B.m9)(_),k={idToken:yield w.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},Y=yield qt(w,function Ud(_,f){return Tu.apply(this,arguments)}(w.auth,k));w.displayName=Y.displayName||null,w.photoURL=Y.photoUrl||null;const oe=w.providerData.find(({providerId:Ne})=>"password"===Ne);oe&&(oe.displayName=w.displayName,oe.photoURL=w.photoURL),yield w._updateTokensIfNecessary(Y)}),ba.apply(this,arguments)}function jf(_,f){return ls((0,B.m9)(_),f,null)}function Rr(_,f){return ls((0,B.m9)(_),null,f)}function ls(_,f,m){return vn.apply(this,arguments)}function vn(){return(vn=(0,d.Z)(function*(_,f,m){const{auth:w}=_,k={idToken:yield _.getIdToken(),returnSecureToken:!0};f&&(k.email=f),m&&(k.password=m);const Y=yield qt(_,kn(w,k));yield _._updateTokensIfNecessary(Y,!0)})).apply(this,arguments)}class Fo{constructor(f,m,w={}){this.isNewUser=f,this.providerId=m,this.profile=w}}class Bd extends Fo{constructor(f,m,w,A){super(f,m,w),this.username=A}}class $f extends Fo{constructor(f,m){super(f,"facebook.com",m)}}class Xl extends Bd{constructor(f,m){super(f,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class Lo extends Fo{constructor(f,m){super(f,"google.com",m)}}class Au extends Bd{constructor(f,m,w){super(f,"twitter.com",m,w)}}function xu(_){const{user:f,_tokenResponse:m}=_;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Jl(_){var f,m;if(!_)return null;const{providerId:w}=_,A=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},k=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!w&&_?.idToken){const Y=null===(m=null===(f=_n(_.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(Y)return new Fo(k,"anonymous"!==Y&&"custom"!==Y?Y:null)}if(!w)return null;switch(w){case"facebook.com":return new $f(k,A);case"github.com":return new Xl(k,A);case"google.com":return new Lo(k,A);case"twitter.com":return new Au(k,A,_.screenName||null);case"custom":case"anonymous":return new Fo(k,null);default:return new Fo(k,w,A)}}(m)}class ye{constructor(f,m,w){this.type=f,this.credential=m,this.auth=w}static _fromIdtoken(f,m){return new ye("enroll",f,m)}static _fromMfaPendingCredential(f){return new ye("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,w;if(f?.multiFactorSession){if(null!==(m=f.multiFactorSession)&&void 0!==m&&m.pendingCredential)return ye._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(w=f.multiFactorSession)&&void 0!==w&&w.idToken)return ye._fromIdtoken(f.multiFactorSession.idToken)}return null}}class ft{constructor(f,m,w){this.session=f,this.hints=m,this.signInResolver=w}static _fromError(f,m){const w=un(f),A=m.customData._serverResponse,k=(A.mfaInfo||[]).map(oe=>Jt._fromServerResponse(w,oe));te(A.mfaPendingCredential,w,"internal-error");const Y=ye._fromMfaPendingCredential(A.mfaPendingCredential);return new ft(Y,k,function(){var oe=(0,d.Z)(function*(Ne){const Ze=yield Ne._process(w,Y);delete A.mfaInfo,delete A.mfaPendingCredential;const gt=Object.assign(Object.assign({},A),{idToken:Ze.idToken,refreshToken:Ze.refreshToken});switch(m.operationType){case"signIn":const Ut=yield Cn._fromIdTokenResponse(w,m.operationType,gt);return yield w._updateCurrentUser(Ut.user),Ut;case"reauthenticate":return te(m.user,w,"internal-error"),Cn._forOperation(m.user,m.operationType,gt);default:Ie(w,"internal-error")}});return function(Ne){return oe.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,d.Z)(function*(){return m.signInResolver(f)})()}}function Dn(_,f){var m;const w=(0,B.m9)(_),A=f;return te(f.customData.operationType,w,"argument-error"),te(null===(m=A.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,w,"argument-error"),ft._fromError(w,A)}class Ca{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(w=>Jt._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new Ca(f)}getSession(){var f=this;return(0,d.Z)(function*(){return ye._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,m){var w=this;return(0,d.Z)(function*(){const A=f,k=yield w.getSession(),Y=yield qt(w.user,A._process(w.user.auth,k,m));return yield w.user._updateTokensIfNecessary(Y),w.user.reload()})()}unenroll(f){var m=this;return(0,d.Z)(function*(){const w="string"==typeof f?f:f.uid,A=yield m.user.getIdToken();try{const k=yield qt(m.user,function Bo(_,f){return Tt(_,"POST","/v2/accounts/mfaEnrollment:withdraw",Be(_,f))}(m.user.auth,{idToken:A,mfaEnrollmentId:w}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Y})=>Y!==w),yield m.user._updateTokensIfNecessary(k),yield m.user.reload()}catch(k){throw k}})()}}const Mu=new WeakMap;function Pu(_){const f=(0,B.m9)(_);return Mu.has(f)||Mu.set(f,Ca._fromUser(f)),Mu.get(f)}const nc="__sak";class Ru{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(nc,"1"),this.storage.removeItem(nc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const rc=(()=>{class _ extends Ru{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,w)=>this.onStorageEvent(m,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function jd(){const _=(0,B.z$)();return O(_)||Ct(_)}()&&function vr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ft(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const w of Object.keys(this.listeners)){const A=this.storage.getItem(w),k=this.localCache[w];A!==k&&m(w,k,A)}}onStorageEvent(m,w=!1){if(!m.key)return void this.forAllChangedKeys((oe,Ne,Ze)=>{this.notifyListeners(oe,Ze)});const A=m.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const oe=this.storage.getItem(A);if(m.newValue!==oe)null!==m.newValue?this.storage.setItem(A,m.newValue):this.storage.removeItem(A);else if(this.localCache[A]===m.newValue&&!w)return}const k=()=>{const oe=this.storage.getItem(A);!w&&this.localCache[A]===oe||this.notifyListeners(A,oe)},Y=this.storage.getItem(A);!function wn(){return(0,B.w1)()&&10===document.documentMode}()||Y===m.newValue||m.newValue===m.oldValue?k():setTimeout(k,10)}notifyListeners(m,w){this.localCache[m]=w;const A=this.listeners[m];if(A)for(const k of Array.from(A))k(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,w,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:w,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,w){var A=()=>super._set,k=this;return(0,d.Z)(function*(){yield A().call(k,m,w),k.localCache[m]=JSON.stringify(w)})()}_get(m){var w=()=>super._get,A=this;return(0,d.Z)(function*(){const k=yield w().call(A,m);return A.localCache[m]=JSON.stringify(k),k})()}_remove(m){var w=()=>super._remove,A=this;return(0,d.Z)(function*(){yield w().call(A,m),delete A.localCache[m]})()}}return _.type="LOCAL",_})(),si=(()=>{class _ extends Ru{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,w){}_removeListener(m,w){}}return _.type="SESSION",_})();let ic=(()=>{class _{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const w=this.receivers.find(k=>k.isListeningto(m));if(w)return w;const A=new _(m);return this.receivers.push(A),A}isListeningto(m){return this.eventTarget===m}handleEvent(m){var w=this;return(0,d.Z)(function*(){const A=m,{eventId:k,eventType:Y,data:oe}=A.data,Ne=w.handlersMap[Y];if(!Ne?.size)return;A.ports[0].postMessage({status:"ack",eventId:k,eventType:Y});const Ze=Array.from(Ne).map(function(){var Ut=(0,d.Z)(function*(Hr){return Hr(A.origin,oe)});return function(Hr){return Ut.apply(this,arguments)}}()),gt=yield function $d(_){return Promise.all(_.map(function(){var f=(0,d.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(w){return{fulfilled:!1,reason:w}}});return function(m){return f.apply(this,arguments)}}()))}(Ze);A.ports[0].postMessage({status:"done",eventId:k,eventType:Y,response:gt})})()}_subscribe(m,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(w)}_unsubscribe(m,w){this.handlersMap[m]&&w&&this.handlersMap[m].delete(w),(!w||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function io(_="",f=10){let m="";for(let w=0;w<f;w++)m+=Math.floor(10*Math.random());return _+m}class Hd{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,w=50){var A=this;return(0,d.Z)(function*(){const k=typeof MessageChannel<"u"?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let Y,oe;return new Promise((Ne,Ze)=>{const gt=io("",20);k.port1.start();const Ut=setTimeout(()=>{Ze(new Error("unsupported_event"))},w);oe={messageChannel:k,onMessage(Hr){const Rs=Hr;if(Rs.data.eventId===gt)switch(Rs.data.status){case"ack":clearTimeout(Ut),Y=setTimeout(()=>{Ze(new Error("timeout"))},3e3);break;case"done":clearTimeout(Y),Ne(Rs.data.response);break;default:clearTimeout(Ut),clearTimeout(Y),Ze(new Error("invalid_response"))}}},A.handlers.add(oe),k.port1.addEventListener("message",oe.onMessage),A.target.postMessage({eventType:f,eventId:gt,data:m},[k.port2])}).finally(()=>{oe&&A.removeMessageHandler(oe)})})()}}function Bn(){return window}function sc(){return typeof Bn().WorkerGlobalScope<"u"&&"function"==typeof Bn().importScripts}function Ou(){return(Ou=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const qf="firebaseLocalStorageDb",Da=1,As="firebaseLocalStorage",ym="fbase_key";class jo{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function oc(_,f){return _.transaction([As],f?"readwrite":"readonly").objectStore(As)}function zd(){const _=indexedDB.open(qf,Da);return new Promise((f,m)=>{_.addEventListener("error",()=>{m(_.error)}),_.addEventListener("upgradeneeded",()=>{const w=_.result;try{w.createObjectStore(As,{keyPath:ym})}catch(A){m(A)}}),_.addEventListener("success",(0,d.Z)(function*(){const w=_.result;w.objectStoreNames.contains(As)?f(w):(w.close(),yield function Ta(){const _=indexedDB.deleteDatabase(qf);return new jo(_).toPromise()}(),f(yield zd()))}))})}function Gd(_,f,m){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,d.Z)(function*(_,f,m){const w=oc(_,!0).put({[ym]:f,value:m});return new jo(w).toPromise()})).apply(this,arguments)}function Fu(){return(Fu=(0,d.Z)(function*(_,f){const m=oc(_,!1).get(f),w=yield new jo(m).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Lu(_,f){const m=oc(_,!0).delete(f);return new jo(m).toPromise()}const qd=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,d.Z)(function*(){return m.db||(m.db=yield zd()),m.db})()}_withRetries(m){var w=this;return(0,d.Z)(function*(){let A=0;for(;;)try{const k=yield w._openDb();return yield m(k)}catch(k){if(A++>3)throw k;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,d.Z)(function*(){return sc()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,d.Z)(function*(){m.receiver=ic._getInstance(function Gf(){return sc()?self:null}()),m.receiver._subscribe("keyChanged",function(){var w=(0,d.Z)(function*(A,k){return{keyProcessed:(yield m._poll()).includes(k.key)}});return function(A,k){return w.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var w=(0,d.Z)(function*(A,k){return["keyChanged"]});return function(A,k){return w.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,d.Z)(function*(){var w,A;if(m.activeServiceWorker=yield function Hf(){return Ou.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Hd(m.activeServiceWorker);const k=yield m.sender._send("ping",{},800);k&&null!==(w=k[0])&&void 0!==w&&w.fulfilled&&null!==(A=k[0])&&void 0!==A&&A.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var w=this;return(0,d.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function zf(){var _;return(null===(_=navigator?.serviceWorker)||void 0===_?void 0:_.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:m},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const m=yield zd();return yield Gd(m,nc,"1"),yield Lu(m,nc),!0}catch{}return!1})()}_withPendingWrite(m){var w=this;return(0,d.Z)(function*(){w.pendingWrites++;try{yield m()}finally{w.pendingWrites--}})()}_set(m,w){var A=this;return(0,d.Z)(function*(){return A._withPendingWrite((0,d.Z)(function*(){return yield A._withRetries(k=>Gd(k,m,w)),A.localCache[m]=w,A.notifyServiceWorker(m)}))})()}_get(m){var w=this;return(0,d.Z)(function*(){const A=yield w._withRetries(k=>function vm(_,f){return Fu.apply(this,arguments)}(k,m));return w.localCache[m]=A,A})()}_remove(m){var w=this;return(0,d.Z)(function*(){return w._withPendingWrite((0,d.Z)(function*(){return yield w._withRetries(A=>Lu(A,m)),delete w.localCache[m],w.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,d.Z)(function*(){const w=yield m._withRetries(Y=>{const oe=oc(Y,!1).getAll();return new jo(oe).toPromise()});if(!w)return[];if(0!==m.pendingWrites)return[];const A=[],k=new Set;for(const{fbase_key:Y,value:oe}of w)k.add(Y),JSON.stringify(m.localCache[Y])!==JSON.stringify(oe)&&(m.notifyListeners(Y,oe),A.push(Y));for(const Y of Object.keys(m.localCache))m.localCache[Y]&&!k.has(Y)&&(m.notifyListeners(Y,null),A.push(Y));return A})()}notifyListeners(m,w){this.localCache[m]=w;const A=this.listeners[m];if(A)for(const k of Array.from(A))k(w)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})(),Wd=1e12;class $w{constructor(f){this.auth=f,this.counter=Wd,this._widgets=new Map}render(f,m){const w=this.counter;return this._widgets.set(w,new Kf(f,this.auth.name,m||{})),this.counter++,w}reset(f){var m;const w=f||Wd;null===(m=this._widgets.get(w))||void 0===m||m.delete(),this._widgets.delete(w)}getResponse(f){var m;return(null===(m=this._widgets.get(f||Wd))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,d.Z)(function*(){var w;return null===(w=m._widgets.get(f||Wd))||void 0===w||w.execute(),""})()}}class Kf{constructor(f,m,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof f?document.getElementById(f):f;te(A,"argument-error",{appName:m}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function wm(_){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<_;w++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Em=cr("rcb"),uD=new me(3e4,6e4);class Vu{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=Bn().grecaptcha)||void 0===f||!f.render)}load(f,m=""){return te(function cD(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(m),f,"argument-error"),this.shouldResolveImmediately(m)&&Mt(Bn().grecaptcha)?Promise.resolve(Bn().grecaptcha):new Promise((w,A)=>{const k=Bn().setTimeout(()=>{A(ge(f,"network-request-failed"))},uD.get());Bn()[Em]=()=>{Bn().clearTimeout(k),delete Bn()[Em];const oe=Bn().grecaptcha;if(!oe||!Mt(oe))return void A(ge(f,"internal-error"));const Ne=oe.render;oe.render=(Ze,gt)=>{const Ut=Ne(Ze,gt);return this.counter++,Ut},this.hostLanguage=m,w(oe)},Zt(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:Em,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(k),A(ge(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var m;return!(null===(m=Bn().grecaptcha)||void 0===m||!m.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class dD{load(f){return(0,d.Z)(function*(){return new $w(f)})()}clearedOneInstance(){}}const fr="recaptcha",Yf={theme:"light",type:"image"};class uc{constructor(f,m=Object.assign({},Yf),w){this.parameters=m,this.type=fr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=un(w),this.isInvisible="invisible"===this.parameters.size,te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof f?document.getElementById(f):f;te(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new dD:new Vu,this.validateStartingState()}verify(){var f=this;return(0,d.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(m)||new Promise(k=>{const Y=oe=>{oe&&(f.tokenChangeListeners.delete(Y),k(oe))};f.tokenChangeListeners.add(Y),f.isInvisible&&w.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(w=>w(m)),"function"==typeof f)f(m);else if("string"==typeof f){const w=Bn()[f];"function"==typeof w&&w(m)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,d.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const w=document.createElement("div");m.appendChild(w),m=w}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,d.Z)(function*(){te(it()&&!sc(),f.auth,"internal-error"),yield function bm(){let _=null;return new Promise(f=>{"complete"!==document.readyState?(_=()=>f(),window.addEventListener("load",_)):f()}).catch(f=>{throw _&&window.removeEventListener("load",_),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function X(_){return ne.apply(this,arguments)}(f.auth);te(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class mi{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=xo._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function Ma(_,f,m){return Zd.apply(this,arguments)}function Zd(){return(Zd=(0,d.Z)(function*(_,f,m){const w=un(_),A=yield Yd(w,f,(0,B.m9)(m));return new mi(A,k=>Rt(w,k))})).apply(this,arguments)}function Kd(_,f,m){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,d.Z)(function*(_,f,m){const w=(0,B.m9)(_);yield ma(!1,w,"phone");const A=yield Yd(w.auth,f,(0,B.m9)(m));return new mi(A,k=>Vf(w,k))})).apply(this,arguments)}function Hw(_,f,m){return Im.apply(this,arguments)}function Im(){return(Im=(0,d.Z)(function*(_,f,m){const w=(0,B.m9)(_),A=yield Yd(w.auth,f,(0,B.m9)(m));return new mi(A,k=>_u(w,k))})).apply(this,arguments)}function Yd(_,f,m){return Qf.apply(this,arguments)}function Qf(){return Qf=(0,d.Z)(function*(_,f,m){var w;const A=yield m.verify();try{let k;if(te("string"==typeof A,_,"argument-error"),te(m.type===fr,_,"argument-error"),k="string"==typeof f?{phoneNumber:f}:f,"session"in k){const Y=k.session;if("phoneNumber"in k)return te("enroll"===Y.type,_,"internal-error"),(yield function kr(_,f){return Tt(_,"POST","/v2/accounts/mfaEnrollment:start",Be(_,f))}(_,{idToken:Y.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{te("signin"===Y.type,_,"internal-error");const oe=(null===(w=k.multiFactorHint)||void 0===w?void 0:w.uid)||k.multiFactorUid;return te(oe,_,"missing-multi-factor-info"),(yield function Wf(_,f){return Tt(_,"POST","/v2/accounts/mfaSignIn:start",Be(_,f))}(_,{mfaPendingCredential:Y.credential,mfaEnrollmentId:oe,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Y}=yield function Ff(_,f){return Vl.apply(this,arguments)}(_,{phoneNumber:k.phoneNumber,recaptchaToken:A});return Y}}finally{m._reset()}}),Qf.apply(this,arguments)}function Ri(_,f){return mn.apply(this,arguments)}function mn(){return(mn=(0,d.Z)(function*(_,f){yield Cs((0,B.m9)(_),f)})).apply(this,arguments)}let Zi=(()=>{class _{constructor(m){this.providerId=_.PROVIDER_ID,this.auth=un(m)}verifyPhoneNumber(m,w){return Yd(this.auth,m,(0,B.m9)(w))}static credential(m,w){return xo._fromVerification(m,w)}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:w,temporaryProof:A}=m;return w&&A?xo._fromTokenResponse(w,A):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function ct(_,f){return f?zn(f):(te(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class Ki extends ni{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return $i(f,this._buildIdpRequest())}_linkToIdToken(f,m){return $i(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return $i(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function Yi(_){return vu(_.auth,new Ki(_),_.bypassAuthState)}function Cm(_){const{auth:f,user:m}=_;return te(m,f,"internal-error"),ql(m,new Ki(_),_.bypassAuthState)}function lc(_){return oi.apply(this,arguments)}function oi(){return(oi=(0,d.Z)(function*(_){const{auth:f,user:m}=_;return te(m,f,"internal-error"),Cs(m,new Ki(_),_.bypassAuthState)})).apply(this,arguments)}class Jf{constructor(f,m,w,A,k=!1){this.auth=f,this.resolver=w,this.user=A,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,d.Z)(function*(w,A){f.pendingPromise={resolve:w,reject:A};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(k){f.reject(k)}});return function(w,A){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,d.Z)(function*(){const{urlResponse:w,sessionId:A,postBody:k,tenantId:Y,error:oe,type:Ne}=f;if(oe)return void m.reject(oe);const Ze={auth:m.auth,requestUri:w,sessionId:A,tenantId:Y||void 0,postBody:k||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Ne)(Ze))}catch(gt){m.reject(gt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Yi;case"linkViaPopup":case"linkViaRedirect":return lc;case"reauthViaPopup":case"reauthViaRedirect":return Cm;default:Ie(this.auth,"internal-error")}}resolve(f){Et(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Et(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Dm=new me(2e3,1e4);function Qd(_,f,m){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,d.Z)(function*(_,f,m){const w=un(_);Ve(_,f,Es);const A=ct(w,m);return new Jd(w,"signInViaPopup",f,A).executeNotNull()})).apply(this,arguments)}function cc(_,f,m){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,d.Z)(function*(_,f,m){const w=(0,B.m9)(_);Ve(w.auth,f,Es);const A=ct(w.auth,m);return new Jd(w.auth,"reauthViaPopup",f,A,w).executeNotNull()})).apply(this,arguments)}function zo(_,f,m){return vt.apply(this,arguments)}function vt(){return(vt=(0,d.Z)(function*(_,f,m){const w=(0,B.m9)(_);Ve(w.auth,f,Es);const A=ct(w.auth,m);return new Jd(w.auth,"linkViaPopup",f,A,w).executeNotNull()})).apply(this,arguments)}let Jd=(()=>{class _ extends Jf{constructor(m,w,A,k,Y){super(m,w,k,Y),this.provider=A,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var m=this;return(0,d.Z)(function*(){const w=yield m.execute();return te(w,m.auth,"internal-error"),w})()}onExecution(){var m=this;return(0,d.Z)(function*(){Et(1===m.filter.length,"Popup operations only handle one event");const w=io();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],w),m.authWindow.associatedEvent=w,m.resolver._originValidation(m.auth).catch(A=>{m.reject(A)}),m.resolver._isIframeWebStorageSupported(m.auth,A=>{A||m.reject(ge(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(ge(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const m=()=>{var w,A;this.pollId=null!==(A=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ge(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(m,Dm.get())};m()}}return _.currentPopupAction=null,_})();const Xf="pendingRedirect",ds=new Map;class Uu extends Jf{constructor(f,m,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,d.Z)(function*(){let w=ds.get(m.auth._key());if(!w){try{const k=(yield function wr(_,f){return Xd.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;w=()=>Promise.resolve(k)}catch(A){w=()=>Promise.reject(A)}ds.set(m.auth._key(),w)}return m.bypassAuthState||ds.set(m.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,w=this;return(0,d.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(w,f);if("unknown"!==f.type){if(f.eventId){const A=yield w.auth._redirectUserForId(f.eventId);if(A)return w.user=A,m().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function Xd(){return(Xd=(0,d.Z)(function*(_,f){const m=Bu(f),w=Tm(_);if(!(yield w._isAvailable()))return!1;const A="true"===(yield w._get(m));return yield w._remove(m),A})).apply(this,arguments)}function dc(_,f){return so.apply(this,arguments)}function so(){return(so=(0,d.Z)(function*(_,f){return Tm(_)._set(Bu(f),"true")})).apply(this,arguments)}function ka(){ds.clear()}function Na(_,f){ds.set(_._key(),f)}function Tm(_){return zn(_._redirectPersistence)}function Bu(_){return Wr(Xf,_.config.apiKey,_.name)}function hc(_,f,m){return function Sm(_,f,m){return eh.apply(this,arguments)}(_,f,m)}function eh(){return(eh=(0,d.Z)(function*(_,f,m){const w=un(_);Ve(_,f,Es),yield w._initializationPromise;const A=ct(w,m);return yield dc(A,w),A._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function fc(_,f,m){return function ju(_,f,m){return yi.apply(this,arguments)}(_,f,m)}function yi(){return(yi=(0,d.Z)(function*(_,f,m){const w=(0,B.m9)(_);Ve(w.auth,f,Es),yield w.auth._initializationPromise;const A=ct(w.auth,m);yield dc(A,w.auth);const k=yield vi(w);return A._openRedirect(w.auth,f,"reauthViaRedirect",k)})).apply(this,arguments)}function pc(_,f,m){return function $r(_,f,m){return Oa.apply(this,arguments)}(_,f,m)}function Oa(){return(Oa=(0,d.Z)(function*(_,f,m){const w=(0,B.m9)(_);Ve(w.auth,f,Es),yield w.auth._initializationPromise;const A=ct(w.auth,m);yield ma(!1,w,f.providerId),yield dc(A,w.auth);const k=yield vi(w);return A._openRedirect(w.auth,f,"linkViaRedirect",k)})).apply(this,arguments)}function Am(_,f){return qn.apply(this,arguments)}function qn(){return(qn=(0,d.Z)(function*(_,f){return yield un(_)._initializationPromise,Go(_,f,!1)})).apply(this,arguments)}function Go(_,f){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,d.Z)(function*(_,f,m=!1){const w=un(_),A=ct(w,f),Y=yield new Uu(w,A,m).execute();return Y&&!m&&(delete Y.user._redirectEventId,yield w._persistUserIfCurrent(Y.user),yield w._setRedirectUser(null,f)),Y})).apply(this,arguments)}function vi(_){return pr.apply(this,arguments)}function pr(){return(pr=(0,d.Z)(function*(_){const f=io(`${_.uid}:::`);return _._redirectEventId=f,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),f})).apply(this,arguments)}class ep{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(m=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function qo(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xs(_);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var w;if(f.error&&!xs(f)){const A=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";m.onError(ge(this.auth,A))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const w=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(gc(f))}saveEventToCache(f){this.cachedEventUids.add(gc(f)),this.lastProcessedEventTime=Date.now()}}function gc(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(f=>f).join("-")}function xs({type:_,error:f}){return"unknown"===_&&"auth/no-auth-event"===f?.code}function Nr(_){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,d.Z)(function*(_,f={}){return Tt(_,"GET","/v1/projects",f)})).apply(this,arguments)}const zw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$u=/^https?/;function La(){return(La=(0,d.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:f}=yield Nr(_);for(const m of f)try{if(tp(m))return}catch{}Ie(_,"unauthorized-domain")})).apply(this,arguments)}function tp(_){const f=qe(),{protocol:m,hostname:w}=new URL(f);if(_.startsWith("chrome-extension://")){const Y=new URL(_);return""===Y.hostname&&""===w?"chrome-extension:"===m&&_.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&Y.hostname===w}if(!$u.test(m))return!1;if(zw.test(_))return w===_;const A=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(w)}const np=new me(3e4,6e4);function Hu(){const _=Bn().___jsl;if(_?.H)for(const f of Object.keys(_.H))if(_.H[f].r=_.H[f].r||[],_.H[f].L=_.H[f].L||[],_.H[f].r=[..._.H[f].L],_.CP)for(let m=0;m<_.CP.length;m++)_.CP[m]=null}let oo=null;const Va=new me(5e3,15e3),rp="__/auth/iframe",nh="emulator/auth/iframe",hs={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ip=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sp(_){const f=_.config;te(f.authDomain,_,"auth-domain-config-required");const m=f.emulator?we(f,nh):`https://${_.config.authDomain}/${rp}`,w={apiKey:f.apiKey,appName:_.name,v:F.SDK_VERSION},A=ip.get(_.config.apiHost);A&&(w.eid=A);const k=_._getFrameworks();return k.length&&(w.fw=k.join(",")),`${m}?${(0,B.xO)(w).slice(1)}`}function op(){return op=(0,d.Z)(function*(_){const f=yield function xm(_){return oo=oo||function xt(_){return new Promise((f,m)=>{var w,A,k;function Y(){Hu(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Hu(),m(ge(_,"network-request-failed"))},timeout:np.get()})}if(null!==(A=null===(w=Bn().gapi)||void 0===w?void 0:w.iframes)&&void 0!==A&&A.Iframe)f(gapi.iframes.getContext());else{if(null===(k=Bn().gapi)||void 0===k||!k.load){const oe=cr("iframefcb");return Bn()[oe]=()=>{gapi.load?Y():m(ge(_,"network-request-failed"))},Zt(`https://apis.google.com/js/api.js?onload=${oe}`).catch(Ne=>m(Ne))}Y()}}).catch(f=>{throw oo=null,f})}(_),oo}(_),m=Bn().gapi;return te(m,_,"internal-error"),f.open({where:document.body,url:sp(_),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hs,dontclear:!0},w=>new Promise(function(){var A=(0,d.Z)(function*(k,Y){yield w.restyle({setHideOnLeave:!1});const oe=ge(_,"network-request-failed"),Ne=Bn().setTimeout(()=>{Y(oe)},Va.get());function Ze(){Bn().clearTimeout(Ne),k(w)}w.ping(Ze).then(Ze,()=>{Y(oe)})});return function(k,Y){return A.apply(this,arguments)}}()))}),op.apply(this,arguments)}const Or={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Wn=500,Ua=600,ap="_blank",yc="http://localhost";class Er{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const up="__/auth/handler",lp="emulator/auth/handler",sh=encodeURIComponent("fac");function Ba(_,f,m,w,A,k){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,d.Z)(function*(_,f,m,w,A,k){te(_.config.authDomain,_,"auth-domain-config-required"),te(_.config.apiKey,_,"invalid-api-key");const Y={apiKey:_.config.apiKey,appName:_.name,authType:m,redirectUrl:w,v:F.SDK_VERSION,eventId:A};if(f instanceof Es){f.setDefaultLanguage(_.languageCode),Y.providerId=f.providerId||"",(0,B.xb)(f.getCustomParameters())||(Y.customParameters=JSON.stringify(f.getCustomParameters()));for(const[gt,Ut]of Object.entries(k||{}))Y[gt]=Ut}if(f instanceof eo){const gt=f.getScopes().filter(Ut=>""!==Ut);gt.length>0&&(Y.scopes=gt.join(","))}_.tenantId&&(Y.tid=_.tenantId);const oe=Y;for(const gt of Object.keys(oe))void 0===oe[gt]&&delete oe[gt];const Ne=yield _._getAppCheckToken(),Ze=Ne?`#${sh}=${encodeURIComponent(Ne)}`:"";return`${function Xt({config:_}){return _.emulator?we(_,lp):`https://${_.authDomain}/${up}`}(_)}?${(0,B.xO)(oe).slice(1)}${Ze}`})).apply(this,arguments)}const ao="webStorageSupport",uo=class Mm{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=si,this._completeRedirectFn=Go,this._overrideRedirectResult=Na}_openPopup(f,m,w,A){var k=this;return(0,d.Z)(function*(){var Y;Et(null===(Y=k.eventManagers[f._key()])||void 0===Y?void 0:Y.manager,"_initialize() not called before _openPopup()");const oe=yield Ba(f,m,w,qe(),A);return function zu(_,f,m,w=Wn,A=Ua){const k=Math.max((window.screen.availHeight-A)/2,0).toString(),Y=Math.max((window.screen.availWidth-w)/2,0).toString();let oe="";const Ne=Object.assign(Object.assign({},Or),{width:w.toString(),height:A.toString(),top:k,left:Y}),Ze=(0,B.z$)().toLowerCase();m&&(oe=R(Ze)?ap:m),N(Ze)&&(f=f||yc,Ne.scrollbars="yes");const gt=Object.entries(Ne).reduce((Hr,[Rs,co])=>`${Hr}${Rs}=${co},`,"");if(function St(_=(0,B.z$)()){var f;return Ct(_)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(Ze)&&"_self"!==oe)return function ih(_,f){const m=document.createElement("a");m.href=_,m.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(w)}(f||"",oe),new Er(null);const Ut=window.open(f||"",oe,gt);te(Ut,_,"popup-blocked");try{Ut.focus()}catch{}return new Er(Ut)}(f,oe,io())})()}_openRedirect(f,m,w,A){var k=this;return(0,d.Z)(function*(){return yield k._originValidation(f),function Nu(_){Bn().location.href=_}(yield Ba(f,m,w,qe(),A)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:A,promise:k}=this.eventManagers[m];return A?Promise.resolve(A):(Et(k,"If manager is not set, promise should be"),k)}const w=this.initAndGetManager(f);return this.eventManagers[m]={promise:w},w.catch(()=>{delete this.eventManagers[m]}),w}initAndGetManager(f){var m=this;return(0,d.Z)(function*(){const w=yield function rh(_){return op.apply(this,arguments)}(f),A=new ep(f);return w.register("authEvent",k=>(te(k?.authEvent,f,"invalid-auth-event"),{status:A.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:A},m.iframes[f._key()]=w,A})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(ao,{type:ao},A=>{var k;const Y=null===(k=A?.[0])||void 0===k?void 0:k[ao];void 0!==Y&&m(!!Y),Ie(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function mc(_){return La.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return Ft()||O()||Ct()}};class oh{constructor(f){this.factorId=f}_process(f,m,w){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,w);case"signin":return this._finalizeSignIn(f,m.credential);default:return He("unexpected MultiFactorSessionType")}}}class Ps extends oh{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Ps(f)}_finalizeEnroll(f,m,w){return function tr(_,f){return Tt(_,"POST","/v2/accounts/mfaEnrollment:finalize",Be(_,f))}(f,{idToken:m,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function xa(_,f){return Tt(_,"POST","/v2/accounts/mfaSignIn:finalize",Be(_,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ah=(()=>{class _{constructor(){}static assertion(m){return Ps._fromCredential(m)}}return _.FACTOR_ID="phone",_})();var Zo="@firebase/auth";class lo{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,d.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(w=>{f(w?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);m&&(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const ch=(0,B.Pz)("authIdTokenMaxAge")||300;let dp=null;const Pm=_=>function(){var f=(0,d.Z)(function*(m){const w=m&&(yield m.getIdTokenResult()),A=w&&((new Date).getTime()-Date.parse(w.issuedAtTime))/1e3;if(A&&A>ch)return;const k=w?.token;dp!==k&&(dp=k,yield fetch(_,{method:k?"POST":"DELETE",headers:k?{Authorization:`Bearer ${k}`}:{}}))});return function(m){return f.apply(this,arguments)}}();function _c(_=(0,F.getApp)()){const f=(0,F._getProvider)(_,"auth");if(f.isInitialized())return f.getImmediate();const m=function _r(_,f){const m=(0,F._getProvider)(_,"auth");if(m.isInitialized()){const A=m.getImmediate(),k=m.getOptions();if((0,B.vZ)(k,f??{}))return A;Ie(A,"already-initialized")}return m.initialize({options:f})}(_,{popupRedirectResolver:uo,persistence:[qd,rc,si]}),w=(0,B.Pz)("authTokenSyncURL");if(w){const k=Pm(w);(function Vo(_,f,m){(0,B.m9)(_).beforeAuthStateChanged(f,m)})(m,k,()=>k(m.currentUser)),function Ia(_,f,m,w){(0,B.m9)(_).onIdTokenChanged(f,m,w)}(m,Y=>k(Y))}const A=(0,B.q4)("auth");return A&&In(m,`http://${A}`),m}!function lh(_){(0,F._registerComponent)(new pe.wA("auth",(f,{options:m})=>{const w=f.getProvider("app").getImmediate(),A=f.getProvider("heartbeat"),k=f.getProvider("app-check-internal"),{apiKey:Y,authDomain:oe}=w.options;te(Y&&!Y.includes(":"),"invalid-api-key",{appName:w.name}),te(!oe?.includes(":"),"argument-error",{appName:w.name});const Ne={apiKey:Y,authDomain:oe,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ws(_)},Ze=new Rn(w,A,k,Ne);return function pi(_,f){const m=f?.persistence||[],w=(Array.isArray(m)?m:[m]).map(zn);f?.errorMap&&_._updateErrorMap(f.errorMap),_._initializeWithPersistence(w,f?.popupRedirectResolver)}(Ze,m),Ze},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,w)=>{f.getProvider("auth-internal").initialize()})),(0,F._registerComponent)(new pe.wA("auth-internal",f=>{const m=un(f.getProvider("auth").getImmediate());return new lo(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,F.registerVersion)(Zo,"0.23.1",function Ha(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,F.registerVersion)(Zo,"0.23.1","esm2017")}("Browser")},2090:(Dt,Se,V)=>{"use strict";V.d(Se,{$s:()=>zn,BH:()=>Te,G6:()=>we,L:()=>Oe,LL:()=>lt,P0:()=>$e,Pz:()=>ge,Sg:()=>Ve,UG:()=>He,US:()=>pe,ZB:()=>Q,ZR:()=>Tt,aH:()=>Ie,b$:()=>it,eu:()=>xe,hl:()=>Ue,jU:()=>Et,m9:()=>Wr,ne:()=>qt,pd:()=>_n,q4:()=>De,r3:()=>ur,ru:()=>qe,tV:()=>G,uI:()=>te,vZ:()=>Je,w1:()=>ce,xO:()=>Mn,xb:()=>Sr,z$:()=>z,zI:()=>et,zd:()=>Pt});const ae=function(H){const U=[];let N=0;for(let O=0;O<H.length;O++){let R=H.charCodeAt(O);R<128?U[N++]=R:R<2048?(U[N++]=R>>6|192,U[N++]=63&R|128):55296==(64512&R)&&O+1<H.length&&56320==(64512&H.charCodeAt(O+1))?(R=65536+((1023&R)<<10)+(1023&H.charCodeAt(++O)),U[N++]=R>>18|240,U[N++]=R>>12&63|128,U[N++]=R>>6&63|128,U[N++]=63&R|128):(U[N++]=R>>12|224,U[N++]=R>>6&63|128,U[N++]=63&R|128)}return U},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,U){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const N=U?this.byteToCharMapWebSafe_:this.byteToCharMap_,O=[];for(let R=0;R<H.length;R+=3){const W=H[R],he=R+1<H.length,tt=he?H[R+1]:0,At=R+2<H.length,Ct=At?H[R+2]:0;let wn=(15&tt)<<2|Ct>>6,Ft=63&Ct;At||(Ft=64,he||(wn=64)),O.push(N[W>>2],N[(3&W)<<4|tt>>4],N[wn],N[Ft])}return O.join("")},encodeString(H,U){return this.HAS_NATIVE_SUPPORT&&!U?btoa(H):this.encodeByteArray(ae(H),U)},decodeString(H,U){return this.HAS_NATIVE_SUPPORT&&!U?atob(H):function(H){const U=[];let N=0,O=0;for(;N<H.length;){const R=H[N++];if(R<128)U[O++]=String.fromCharCode(R);else if(R>191&&R<224){const W=H[N++];U[O++]=String.fromCharCode((31&R)<<6|63&W)}else if(R>239&&R<365){const At=((7&R)<<18|(63&H[N++])<<12|(63&H[N++])<<6|63&H[N++])-65536;U[O++]=String.fromCharCode(55296+(At>>10)),U[O++]=String.fromCharCode(56320+(1023&At))}else{const W=H[N++],he=H[N++];U[O++]=String.fromCharCode((15&R)<<12|(63&W)<<6|63&he)}}return U.join("")}(this.decodeStringToByteArray(H,U))},decodeStringToByteArray(H,U){this.init_();const N=U?this.charToByteMapWebSafe_:this.charToByteMap_,O=[];for(let R=0;R<H.length;){const W=N[H.charAt(R++)],tt=R<H.length?N[H.charAt(R)]:0;++R;const Ct=R<H.length?N[H.charAt(R)]:64;++R;const St=R<H.length?N[H.charAt(R)]:64;if(++R,null==W||null==tt||null==Ct||null==St)throw new Le;O.push(W<<2|tt>>4),64!==Ct&&(O.push(tt<<4&240|Ct>>2),64!==St&&O.push(Ct<<6&192|St))}return O},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}};class Le extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Oe=function(H){return function(H){const U=ae(H);return pe.encodeByteArray(U,!0)}(H).replace(/\./g,"")},G=function(H){try{return pe.decodeString(H,!0)}catch(U){console.error("base64Decode failed: ",U)}return null};function Q(H,U){if(!(U instanceof Object))return U;switch(U.constructor){case Date:return new Date(U.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return U}for(const N in U)!U.hasOwnProperty(N)||!je(N)||(H[N]=Q(H[N],U[N]));return H}function je(H){return"__proto__"!==H}const Pe=()=>{try{return function ke(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const H=process.env.__FIREBASE_DEFAULTS__;return H?JSON.parse(H):void 0})()||(()=>{if(typeof document>"u")return;let H;try{H=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const U=H&&G(H[1]);return U&&JSON.parse(U)})()}catch(H){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${H}`)}},De=H=>{var U,N;return null===(N=null===(U=Pe())||void 0===U?void 0:U.emulatorHosts)||void 0===N?void 0:N[H]},$e=H=>{const U=De(H);if(!U)return;const N=U.lastIndexOf(":");if(N<=0||N+1===U.length)throw new Error(`Invalid host ${U} with no separate hostname and port!`);const O=parseInt(U.substring(N+1),10);return"["===U[0]?[U.substring(1,N-1),O]:[U.substring(0,N),O]},Ie=()=>{var H;return null===(H=Pe())||void 0===H?void 0:H.config},ge=H=>{var U;return null===(U=Pe())||void 0===U?void 0:U[`_${H}`]};class Te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((U,N)=>{this.resolve=U,this.reject=N})}wrapCallback(U){return(N,O)=>{N?this.reject(N):this.resolve(O),"function"==typeof U&&(this.promise.catch(()=>{}),1===U.length?U(N):U(N,O))}}}function Ve(H,U){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const O=U||"demo-project",R=H.iat||0,W=H.sub||H.user_id;if(!W)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const he=Object.assign({iss:`https://securetoken.google.com/${O}`,aud:O,iat:R,exp:R+3600,auth_time:R,sub:W,user_id:W,firebase:{sign_in_provider:"custom",identities:{}}},H);return[Oe(JSON.stringify({alg:"none",type:"JWT"})),Oe(JSON.stringify(he)),""].join(".")}function z(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function te(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(z())}function He(){var H;const U=null===(H=Pe())||void 0===H?void 0:H.forceEnvironment;if("node"===U)return!0;if("browser"===U)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Et(){return"object"==typeof self&&self.self===self}function qe(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function it(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ce(){const H=z();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function we(){return!He()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ue(){try{return"object"==typeof indexedDB}catch{return!1}}function xe(){return new Promise((H,U)=>{try{let N=!0;const O="validate-browser-context-for-indexeddb-analytics-module",R=self.indexedDB.open(O);R.onsuccess=()=>{R.result.close(),N||self.indexedDB.deleteDatabase(O),H(!0)},R.onupgradeneeded=()=>{N=!1},R.onerror=()=>{var W;U((null===(W=R.error)||void 0===W?void 0:W.message)||"")}}catch(N){U(N)}})}function et(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Tt extends Error{constructor(U,N,O){super(N),this.code=U,this.customData=O,this.name="FirebaseError",Object.setPrototypeOf(this,Tt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lt.prototype.create)}}class lt{constructor(U,N,O){this.service=U,this.serviceName=N,this.errors=O}create(U,...N){const O=N[0]||{},R=`${this.service}/${U}`,W=this.errors[U],he=W?function zt(H,U){return H.replace(bt,(N,O)=>{const R=U[O];return null!=R?String(R):`<${O}?>`})}(W,O):"Error";return new Tt(R,`${this.serviceName}: ${he} (${R}).`,O)}}const bt=/\{\$([^}]+)}/g;function ur(H,U){return Object.prototype.hasOwnProperty.call(H,U)}function Sr(H){for(const U in H)if(Object.prototype.hasOwnProperty.call(H,U))return!1;return!0}function Je(H,U){if(H===U)return!0;const N=Object.keys(H),O=Object.keys(U);for(const R of N){if(!O.includes(R))return!1;const W=H[R],he=U[R];if(bn(W)&&bn(he)){if(!Je(W,he))return!1}else if(W!==he)return!1}for(const R of O)if(!N.includes(R))return!1;return!0}function bn(H){return null!==H&&"object"==typeof H}function Mn(H){const U=[];for(const[N,O]of Object.entries(H))Array.isArray(O)?O.forEach(R=>{U.push(encodeURIComponent(N)+"="+encodeURIComponent(R))}):U.push(encodeURIComponent(N)+"="+encodeURIComponent(O));return U.length?"&"+U.join("&"):""}function Pt(H){const U={};return H.replace(/^\?/,"").split("&").forEach(O=>{if(O){const[R,W]=O.split("=");U[decodeURIComponent(R)]=decodeURIComponent(W)}}),U}function _n(H){const U=H.indexOf("?");if(!U)return"";const N=H.indexOf("#",U);return H.substring(U,N>0?N:void 0)}function qt(H,U){const N=new Ke(H,U);return N.subscribe.bind(N)}class Ke{constructor(U,N){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=N,this.task.then(()=>{U(this)}).catch(O=>{this.error(O)})}next(U){this.forEachObserver(N=>{N.next(U)})}error(U){this.forEachObserver(N=>{N.error(U)}),this.close(U)}complete(){this.forEachObserver(U=>{U.complete()}),this.close()}subscribe(U,N,O){let R;if(void 0===U&&void 0===N&&void 0===O)throw new Error("Missing Observer.");R=function Pn(H,U){if("object"!=typeof H||null===H)return!1;for(const N of U)if(N in H&&"function"==typeof H[N])return!0;return!1}(U,["next","error","complete"])?U:{next:U,error:N,complete:O},void 0===R.next&&(R.next=Ln),void 0===R.error&&(R.error=Ln),void 0===R.complete&&(R.complete=Ln);const W=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?R.error(this.finalError):R.complete()}catch{}}),this.observers.push(R),W}unsubscribeOne(U){void 0===this.observers||void 0===this.observers[U]||(delete this.observers[U],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(U){if(!this.finalized)for(let N=0;N<this.observers.length;N++)this.sendOne(N,U)}sendOne(U,N){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[U])try{N(this.observers[U])}catch(O){typeof console<"u"&&console.error&&console.error(O)}})}close(U){this.finalized||(this.finalized=!0,void 0!==U&&(this.finalError=U),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ln(){}const ze=1e3,Hn=2,Vn=144e5,Ar=.5;function zn(H,U=ze,N=Hn){const O=U*Math.pow(N,H),R=Math.round(Ar*O*(Math.random()-.5)*2);return Math.min(Vn,O+R)}function Wr(H){return H&&H._delegate?H._delegate:H}},6459:(Dt,Se,V)=>{"use strict";var d=V(4650);let B=null;function F(){return B}class _e{}const pe=new d.OlP("DocumentToken");let Le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ee(){return(0,d.LFG)(G)}()},providedIn:"platform"}),n})();const Oe=new d.OlP("Location Initialized");let G=(()=>{class n extends Le{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){q()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){q()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Q(){return new G((0,d.LFG)(pe))}()},providedIn:"platform"}),n})();function q(){return!!window.history.pushState}function je(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function ke(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function nt(n){return n&&"?"!==n[0]?"?"+n:n}let rt=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Pe)},providedIn:"root"}),n})();const se=new d.OlP("appBaseHref");let Pe=(()=>{class n extends rt{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(pe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return je(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+nt(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const l=this.prepareExternalUrl(i+nt(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,u){const l=this.prepareExternalUrl(i+nt(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Le),d.LFG(se,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),De=(()=>{class n extends rt{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=je(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let l=this.prepareExternalUrl(i+nt(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,u){let l=this.prepareExternalUrl(i+nt(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Le),d.LFG(se,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),$e=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Ve(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(ke(Te(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+nt(r))}normalize(t){return n.stripTrailingSlash(function ge(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Te(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+nt(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+nt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=nt,n.joinWithSlash=je,n.stripTrailingSlash=ke,n.\u0275fac=function(t){return new(t||n)(d.LFG(rt))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ie(){return new $e((0,d.LFG)(rt))}()},providedIn:"root"}),n})();function Te(n){return n.replace(/\/index.html$/,"")}function Gs(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}const Xn=/\s+/,Qe=[];let Vt=(()=>{class n{constructor(t,r,i,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=u,this.initialClasses=Qe,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(Xn):Qe}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(Xn):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,Boolean(t[r]));this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(Xn).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class _r{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let pi=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new _r(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,l),In(g,i)}});for(let i=0,u=r.length;i<u;i++){const g=r.get(i).context;g.index=i,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{In(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function In(n,e){n.context.$implicit=e.item}let qs=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Ht,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){da("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){da("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Ht{constructor(){this.$implicit=null,this.ngIf=null}}function da(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let Lf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const Xs="server";function eo(n){return n===Xs}let gu=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new kd((0,d.LFG)(pe),window)}),n})();class kd{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function to(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=bs(this.window.history)||bs(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function bs(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class mu{}class tc extends _e{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ia extends tc{static makeCurrent(){!function ae(n){B||(B=n)}(new Ia)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Uo(){return Vo=Vo||document.querySelector("base"),Vo?Vo.getAttribute("href"):null}();return null==t?null:function I(n){Pi=Pi||document.createElement("a"),Pi.setAttribute("href",n);const e=Pi.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Vo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Gs(document.cookie,e)}}let Pi,Vo=null;const C=new d.OlP("TRANSITION_ID"),j=[{provide:d.ip1,useFactory:function x(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=F(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[C,pe,d.zs3],multi:!0}];let ft=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Dn=new d.OlP("EventManagerPlugins");let kr=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const l=i[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Dn),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class tr{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=F().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Ss=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let u=i.get(t)??0;return u+=r,u>0?i.set(t,u):i.delete(t),u}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),cs=(()=>{class n extends Ss{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(u=>u.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const u=this.styleRef.get(r);u?u.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Bo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ca=/%COMP%/g,ku=new d.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function rc(n,e){return e.flat(100).map(t=>t.replace(Ca,n))}function mm(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let si=(()=>{class n{constructor(t,r,i,u){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=u,this.rendererByCompId=new Map,this.defaultRenderer=new $d(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof sc?i.applyToHost(t):i instanceof Nu&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let u=i.get(r.id);if(!u){const l=this.eventManager,g=this.sharedStylesHost,v=this.removeStylesOnCompDestory;switch(r.encapsulation){case d.ifc.Emulated:u=new sc(l,g,r,this.appId,v);break;case d.ifc.ShadowDom:return new Bn(l,g,t,r);default:u=new Nu(l,g,r,v)}u.onDestroy=()=>i.delete(r.id),i.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(kr),d.LFG(cs),d.LFG(d.AFp),d.LFG(ku))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class $d{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Bo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Hd(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Hd(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=Bo[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Bo[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,mm(r)):this.eventManager.addEventListener(e,t,mm(r))}}function Hd(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Bn extends $d{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=rc(i.id,i.styles);for(const l of u){const g=document.createElement("style");g.textContent=l,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Nu extends $d{constructor(e,t,r,i,u=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=rc(u,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class sc extends Nu{constructor(e,t,r,i,u){const l=i+"-"+r.id;super(e,t,r,u,l),this.contentAttr=function jw(n){return"_ngcontent-%COMP%".replace(Ca,n)}(l),this.hostAttr=function gm(n){return"_nghost-%COMP%".replace(Ca,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Hf=(()=>{class n extends tr{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ou=["alt","control","meta","shift"],zf={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Gf={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let qf=(()=>{class n extends tr{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let l="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),l="code."),Ou.forEach(b=>{const T=r.indexOf(b);T>-1&&(r.splice(T,1),l+=b+".")}),l+=u,0!=r.length||0===u.length)return null;const v={};return v.domEventName=i,v.fullKey=l,v}static matchEventFullKeyCode(t,r){let i=zf[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(i=t.code,u="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Ou.forEach(l=>{l!==i&&(0,Gf[l])(t)&&(u+=l+".")}),u+=i,u===r)}static eventCallback(t,r,i){return u=>{n.matchEventFullKeyCode(u,t)&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const vm=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function Ta(){Ia.makeCurrent()},multi:!0},{provide:pe,useFactory:function Gd(){return(0,d.RDi)(document),document},deps:[]}]),Fu=new d.OlP(""),Lu=[{provide:d.rWj,useClass:class ye{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let u=i.length,l=!1;const g=function(v){l=l||v,u--,0==u&&r(l)};i.forEach(function(v){v.whenStable(g)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],$o=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function zd(){return new d.qLn},deps:[]},{provide:Dn,useClass:Hf,multi:!0,deps:[pe,d.R0b,d.Lbi]},{provide:Dn,useClass:qf,multi:!0,deps:[pe]},{provide:si,useClass:si,deps:[kr,cs,d.AFp,ku]},{provide:d.FYo,useExisting:si},{provide:Ss,useExisting:cs},{provide:cs,useClass:cs,deps:[pe]},{provide:kr,useClass:kr,deps:[Dn,d.R0b]},{provide:mu,useClass:ft,deps:[]},[]];let Aa=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:C,useExisting:d.AFp},j]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Fu,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...$o,...Lu],imports:[Lf,d.hGG]}),n})(),_m=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function xa(){return new _m((0,d.LFG)(pe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var mn=V(8996),Zi=V(7669);function ct(...n){const e=(0,Zi.yG)(n);return(0,mn.D)(n,e)}var Ki=V(7579);class Yi extends Ki.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const lc=(0,V(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var oi=V(9751);const{isArray:Jf}=Array,{getPrototypeOf:Dm,prototype:Qd,keys:Ra}=Object;function cc(n){if(1===n.length){const e=n[0];if(Jf(e))return{args:e,keys:null};if(function Ho(n){return n&&"object"==typeof n&&Dm(n)===Qd}(e)){const t=Ra(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var zo=V(4671),vt=V(4004);const{isArray:Jd}=Array;function ds(n){return(0,vt.U)(e=>function Xf(n,e){return Jd(e)?n(...e):n(e)}(n,e))}function Uu(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var wr=V(5403),Xd=V(9672);function dc(...n){const e=(0,Zi.yG)(n),t=(0,Zi.jO)(n),{args:r,keys:i}=cc(n);if(0===r.length)return(0,mn.D)([],e);const u=new oi.y(function so(n,e,t=zo.y){return r=>{ka(e,()=>{const{length:i}=n,u=new Array(i);let l=i,g=i;for(let v=0;v<i;v++)ka(e,()=>{const b=(0,mn.D)(n[v],e);let T=!1;b.subscribe((0,wr.x)(r,M=>{u[v]=M,T||(T=!0,g--),g||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>Uu(i,l):zo.y));return t?u.pipe(ds(t)):u}function ka(n,e,t){n?(0,Xd.f)(t,n,e):e()}var Na=V(8189);function Bu(...n){return function Tm(){return(0,Na.J)(1)}()((0,mn.D)(n,(0,Zi.yG)(n)))}var hc=V(8421);function Sm(n){return new oi.y(e=>{(0,hc.Xf)(n()).subscribe(e)})}var eh=V(9635),fc=V(576);function ju(n,e){const t=(0,fc.m)(n)?n:()=>n,r=i=>i.error(t());return new oi.y(e?i=>e.schedule(r,0,i):r)}var yi=V(515),pc=V(727),$r=V(4482);function Oa(){return(0,$r.e)((n,e)=>{let t=null;n._refCount++;const r=(0,wr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Am extends oi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,$r.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new pc.w0;const t=this.getSubject();e.add(this.source.subscribe((0,wr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=pc.w0.EMPTY)}return e}refCount(){return Oa()(this)}}function qn(n,e){return(0,$r.e)((t,r)=>{let i=null,u=0,l=!1;const g=()=>l&&!i&&r.complete();t.subscribe((0,wr.x)(r,v=>{i?.unsubscribe();let b=0;const T=u++;(0,hc.Xf)(n(v,T)).subscribe(i=(0,wr.x)(r,M=>r.next(e?e(v,M,T,b++):M),()=>{i=null,g()}))},()=>{l=!0,g()}))})}function Go(n){return n<=0?()=>yi.E:(0,$r.e)((e,t)=>{let r=0;e.subscribe((0,wr.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Fa(...n){const e=(0,Zi.yG)(n);return(0,$r.e)((t,r)=>{(e?Bu(n,t,e):Bu(n,t)).subscribe(r)})}function vi(n,e){return(0,$r.e)((t,r)=>{let i=0;t.subscribe((0,wr.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}var pr=V(5577);function th(n){return(0,$r.e)((e,t)=>{let r=!1;e.subscribe((0,wr.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ep(n=gc){return(0,$r.e)((e,t)=>{let r=!1;e.subscribe((0,wr.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function gc(){return new lc}function xs(n,e){const t=arguments.length>=2;return r=>r.pipe(n?vi((i,u)=>n(i,u,r)):zo.y,Go(1),t?th(e):ep(()=>new lc))}function qo(n,e){return(0,fc.m)(e)?(0,pr.z)(n,e,1):(0,pr.z)(n,1)}function Nr(n,e,t){const r=(0,fc.m)(n)||e||t?{next:n,error:e,complete:t}:n;return r?(0,$r.e)((i,u)=>{var l;null===(l=r.subscribe)||void 0===l||l.call(r);let g=!0;i.subscribe((0,wr.x)(u,v=>{var b;null===(b=r.next)||void 0===b||b.call(r,v),u.next(v)},()=>{var v;g=!1,null===(v=r.complete)||void 0===v||v.call(r),u.complete()},v=>{var b;g=!1,null===(b=r.error)||void 0===b||b.call(r,v),u.error(v)},()=>{var v,b;g&&(null===(v=r.unsubscribe)||void 0===v||v.call(r)),null===(b=r.finalize)||void 0===b||b.call(r)}))}):zo.y}function Ms(n){return(0,$r.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,wr.x)(t,void 0,void 0,l=>{u=(0,hc.Xf)(n(l,Ms(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}function $u(n,e){return(0,$r.e)(function zw(n,e,t,r,i){return(u,l)=>{let g=t,v=e,b=0;u.subscribe((0,wr.x)(l,T=>{const M=b++;v=g?n(v,T,M):(g=!0,T),r&&l.next(v)},i&&(()=>{g&&l.next(v),l.complete()})))}}(n,e,arguments.length>=2,!0))}function mc(n){return n<=0?()=>yi.E:(0,$r.e)((e,t)=>{let r=[];e.subscribe((0,wr.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function La(n,e){const t=arguments.length>=2;return r=>r.pipe(n?vi((i,u)=>n(i,u,r)):zo.y,mc(1),t?th(e):ep(()=>new lc))}function Hu(n){return(0,$r.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const xt="primary",oo=Symbol("RouteTitle");class xm{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Va(n){return new xm(n)}function rp(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const l=r[u],g=n[u];if(l.startsWith(":"))i[l.substring(1)]=g;else if(l!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function hs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!ip(n[i],e[i]))return!1;return!0}function ip(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function sp(n){return Array.prototype.concat.apply([],n)}function rh(n){return n.length>0?n[n.length-1]:null}function Or(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Wn(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,mn.D)(Promise.resolve(n)):ct(n)}const Ua=!1,ap={exact:function ih(n,e,t){if(!uo(n.segments,e.segments)||!Ba(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ih(n.children[r],e.children[r],t))return!1;return!0},subset:lp},yc={exact:function zu(n,e){return hs(n,e)},subset:function up(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ip(n[t],e[t]))},ignored:()=>!0};function Er(n,e,t){return ap[t.paths](n.root,e.root,t.matrixParams)&&yc[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function lp(n,e,t){return sh(n,e,e.segments,t)}function sh(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!uo(i,t)||e.hasChildren()||!Ba(i,t,r))}if(n.segments.length===t.length){if(!uo(n.segments,t)||!Ba(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!lp(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(uo(n.segments,i)&&Ba(n.segments,i,r)&&n.children[xt])&&sh(n.children[xt],e,u,r)}}function Ba(n,e,t){return e.every((r,i)=>yc[t](n[i].parameters,r.parameters))}class Qi{constructor(e=new Xt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Va(this.queryParams)),this._queryParamMap}toString(){return vc.serialize(this)}}class Xt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Or(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ja(this)}}class ao{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Va(this.parameters)),this._parameterMap}toString(){return cp(this)}}function uo(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Ps=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new ah},providedIn:"root"}),n})();class ah{parse(e){const t=new A(e);return new Qi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${$a(e.root,!0)}`,r=function dp(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Zo(t)}=${Zo(i)}`).join("&"):`${Zo(t)}=${Zo(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function uh(n){return encodeURI(n)}(e.fragment)}`:""}`}}const vc=new ah;function ja(n){return n.segments.map(e=>cp(e)).join("/")}function $a(n,e){if(!n.hasChildren())return ja(n);if(e){const t=n.children[xt]?$a(n.children[xt],!1):"",r=[];return Or(n.children,(i,u)=>{u!==xt&&r.push(`${u}:${$a(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function oh(n,e){let t=[];return Or(n.children,(r,i)=>{i===xt&&(t=t.concat(e(r,i)))}),Or(n.children,(r,i)=>{i!==xt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===xt?[$a(n.children[xt],!1)]:[`${i}:${$a(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[xt]?`${ja(n)}/${t[0]}`:`${ja(n)}/(${t.join("//")})`}}function Wo(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Zo(n){return Wo(n).replace(/%3B/gi,";")}function lo(n){return Wo(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ha(n){return decodeURIComponent(n)}function lh(n){return Ha(n.replace(/\+/g,"%20"))}function cp(n){return`${lo(n.path)}${function ch(n){return Object.keys(n).map(e=>`;${lo(e)}=${lo(n[e])}`).join("")}(n.parameters)}`}const Pm=/^[^\/()?;=#]+/;function _c(n){const e=n.match(Pm);return e?e[0]:""}const _=/^[^=?&#]+/,m=/^[^&#]+/;class A{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xt([],{}):new Xt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[xt]=new Xt(e,t)),r}parseSegment(){const e=_c(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,Ua);return this.capture(e),new ao(Ha(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=_c(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=_c(this.remaining);i&&(r=i,this.capture(r))}e[Ha(t)]=Ha(r)}parseQueryParam(e){const t=function f(n){const e=n.match(_);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function w(n){const e=n.match(m);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=lh(t),u=lh(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=_c(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,Ua);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=xt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[xt]:new Xt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,Ua)}}function k(n){return n.segments.length>0?new Xt([],{[xt]:n}):n}function Y(n){const e={};for(const r of Object.keys(n.children)){const u=Y(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function oe(n){if(1===n.numberOfChildren&&n.children[xt]){const e=n.children[xt];return new Xt(n.segments.concat(e.segments),e.children)}return n}(new Xt(n.segments,e))}function Ne(n){return n instanceof Qi}const Ze=!1;function Rs(n,e,t,r,i){if(0===t.length)return Ji(e.root,e.root,e.root,r,i);const u=function qu(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new wc(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return Or(u.outlets,(v,b)=>{g[b]="string"==typeof v?v.split("/"):v}),[...i,{outlets:g}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===l?(u.split("/").forEach((g,v)=>{0==v&&"."===g||(0==v&&""===g?t=!0:".."===g?e++:""!=g&&i.push(g))}),i):[...i,u]},[]);return new wc(t,e,r)}(t);return u.toRoot()?Ji(e.root,e.root,new Xt([],{}),r,i):function l(v){const b=function bc(n,e,t,r){if(n.isAbsolute)return new ho(e.root,!0,0);if(-1===r)return new ho(t,t===e.root,0);return function za(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new d.vHH(4005,Ze&&"Invalid number of '../'");i=r.segments.length}return new ho(r,!1,i-u)}(t,r+(co(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,v),T=b.processChildren?fo(b.segmentGroup,b.index,u.commands):Ga(b.segmentGroup,b.index,u.commands);return Ji(e.root,b.segmentGroup,T,r,i)}(n.snapshot?._lastPathIndex)}function co(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Gu(n){return"object"==typeof n&&null!=n&&n.outlets}function Ji(n,e,t,r,i){let l,u={};r&&Or(r,(v,b)=>{u[b]=Array.isArray(v)?v.map(T=>`${T}`):`${v}`}),l=n===e?t:dh(n,e,t);const g=k(Y(l));return new Qi(g,u,i)}function dh(n,e,t){const r={};return Or(n.children,(i,u)=>{r[u]=i===e?t:dh(i,e,t)}),new Xt(n.segments,r)}class wc{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&co(r[0]))throw new d.vHH(4003,Ze&&"Root segment cannot have matrix parameters");const i=r.find(Gu);if(i&&i!==rh(r))throw new d.vHH(4004,Ze&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ho{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ga(n,e,t){if(n||(n=new Xt([],{})),0===n.segments.length&&n.hasChildren())return fo(n,e,t);const r=function Rm(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const l=n.segments[i],g=t[r];if(Gu(g))break;const v=`${g}`,b=r<t.length-1?t[r+1]:null;if(i>0&&void 0===v)break;if(v&&b&&"object"==typeof b&&void 0===b.outlets){if(!km(v,b,l))return u;r+=2}else{if(!km(v,{},l))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Xt(n.segments.slice(0,r.pathIndex),{});return u.children[xt]=new Xt(n.segments.slice(r.pathIndex),n.children),fo(u,0,i)}return r.match&&0===i.length?new Xt(n.segments,{}):r.match&&!n.hasChildren()?hh(n,e,t):r.match?fo(n,0,i):hh(n,e,t)}function fo(n,e,t){if(0===t.length)return new Xt(n.segments,{});{const r=function Ic(n){return Gu(n[0])?n[0].outlets:{[xt]:n}}(t),i={};if(!r[xt]&&n.children[xt]&&1===n.numberOfChildren&&0===n.children[xt].segments.length){const u=fo(n.children[xt],e,t);return new Xt(n.segments,u.children)}return Or(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[l]=Ga(n.children[l],e,u))}),Or(n.children,(u,l)=>{void 0===r[l]&&(i[l]=u)}),new Xt(n.segments,i)}}function hh(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(Gu(u)){const v=fh(u.outlets);return new Xt(r,v)}if(0===i&&co(t[0])){r.push(new ao(n.segments[e].path,Gw(t[0]))),i++;continue}const l=Gu(u)?u.outlets[xt]:`${u}`,g=i<t.length-1?t[i+1]:null;l&&g&&co(g)?(r.push(new ao(l,Gw(g))),i+=2):(r.push(new ao(l,{})),i++)}return new Xt(r,{})}function fh(n){const e={};return Or(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=hh(new Xt([],{}),0,t))}),e}function Gw(n){const e={};return Or(n,(t,r)=>e[r]=`${t}`),e}function km(n,e,t){return n==t.path&&hs(e,t.parameters)}const ph="imperative";class po{constructor(e,t){this.id=e,this.url=t}}class Nm extends po{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class qa extends po{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class gh extends po{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Wu extends po{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class mh extends po{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Cc extends po{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hD extends po{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fD extends po{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class wP extends po{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pD extends po{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Om{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class gD{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class qw{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hp{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fm{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ww{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lm{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let mD=(()=>{class n{createUrlTree(t,r,i,u,l,g){return Rs(t||r.root,i,u,l,g)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),vD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(e){return mD.\u0275fac(e)},providedIn:"root"}),n})();class Yw{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Vm(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Vm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=go(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return go(e,this._root).map(t=>t.value)}}function Vm(n,e){if(n===e.value)return e;for(const t of e.children){const r=Vm(n,t);if(r)return r}return null}function go(n,e){if(n===e.value)return[e];for(const t of e.children){const r=go(n,t);if(r.length)return r.unshift(e),r}return[]}class Xi{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Dc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class _D extends Yw{constructor(e,t){super(e),this.snapshot=t,Um(this,e)}toString(){return this.snapshot.toString()}}function wD(n,e){const t=function EP(n,e){const l=new fp([],{},{},"",{},xt,e,null,n.root,-1,{});return new Jw("",new Xi(l,[]))}(n,e),r=new Yi([new ao("",{})]),i=new Yi({}),u=new Yi({}),l=new Yi({}),g=new Yi(""),v=new yh(r,i,l,g,u,xt,e,t.root);return v.snapshot=t.root,new _D(new Xi(v,[]),t)}class yh{constructor(e,t,r,i,u,l,g,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=l,this.component=g,this.title=this.data?.pipe((0,vt.U)(b=>b[oo]))??ct(void 0),this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,vt.U)(e=>Va(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,vt.U)(e=>Va(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ED(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function Qw(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class fp{get title(){return this.data?.[oo]}constructor(e,t,r,i,u,l,g,v,b,T,M){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=l,this.component=g,this.routeConfig=v,this._urlSegment=b,this._lastPathIndex=T,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Va(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Va(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Jw extends Yw{constructor(e,t){super(t),this.url=e,Um(this,t)}toString(){return Xw(this._root)}}function Um(n,e){e.value._routerState=n,e.children.forEach(t=>Um(n,t))}function Xw(n){const e=n.children.length>0?` { ${n.children.map(Xw).join(", ")} } `:"";return`${n.value}${e}`}function vh(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,hs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),hs(e.params,t.params)||n.params.next(t.params),function nh(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!hs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),hs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ks(n,e){const t=hs(n.params,e.params)&&function Mm(n,e){return uo(n,e)&&n.every((t,r)=>hs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ks(n.parent,e.parent))}function Tc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function e0(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Tc(n,r,i);return Tc(n,r)})}(n,e,t);return new Xi(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(g=>Tc(n,g)),l}}const r=function t0(n){return new yh(new Yi(n.url),new Yi(n.params),new Yi(n.queryParams),new Yi(n.fragment),new Yi(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>Tc(n,u));return new Xi(r,i)}}const n0="ngNavigationCancelingError";function bD(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Ne(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=ID(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function ID(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[n0]=!0,r.cancellationCode=e,t&&(r.url=t),r}function pp(n){return gp(n)&&Ne(n.url)}function gp(n){return n&&n[n0]}class bP{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new mp,this.attachRef=null}}let mp=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new bP,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const wh=!1;let Bm=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=xt,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.parentContexts=(0,d.f3M)(mp),this.location=(0,d.f3M)(d.s_b),this.changeDetector=(0,d.f3M)(d.sBO),this.environmentInjector=(0,d.f3M)(d.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,wh);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,wh);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,wh);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,wh);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,v=new CD(t,g,i.injector);if(r&&function DD(n){return!!n.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(l);this.activated=i.createComponent(b,i.length,v)}else this.activated=i.createComponent(l,{index:i.length,injector:v,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[d.TTD]}),n})();class CD{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===yh?this.route:e===mp?this.childContexts:this.parent.get(e,t)}}let jm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[Bm],encapsulation:2}),n})();function $m(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function yp(n){const e=n.children&&n.children.map(yp),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==xt&&(t.component=jm),t}function fs(n){return n.outlet||xt}function s0(n,e){const t=n.filter(r=>fs(r)===e);return t.push(...n.filter(r=>fs(r)!==e)),t}function Eh(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class o0{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),vh(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Dc(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,i[l],r),delete i[l]}),Or(i,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Dc(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],i);if(r&&r.outlet){const l=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Dc(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Dc(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new Ww(u.value.snapshot))}),e.children.length&&this.forwardEvent(new hp(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(vh(i),i===u)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const g=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(g.contexts),l.attachRef=g.componentRef,l.route=g.route.value,l.outlet&&l.outlet.attach(g.componentRef,g.route.value),vh(g.route.value),this.activateChildRoutes(e,null,l.children)}else{const g=Eh(i.snapshot),v=g?.get(d._Vd)??null;l.attachRef=null,l.route=i,l.resolver=v,l.injector=g,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class xD{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Gm{constructor(e,t){this.component=e,this.route=t}}function bh(n,e,t){const r=n._root;return Sc(r,e?e._root:null,t,[r.value])}function Zu(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function Sc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=Dc(e);return n.children.forEach(l=>{(function a0(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const v=function MD(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!uo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!uo(n.url,e.url)||!hs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ks(n,e)||!hs(n.queryParams,e.queryParams);default:return!ks(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);v?i.canActivateChecks.push(new xD(r)):(u.data=l.data,u._resolvedData=l._resolvedData),Sc(n,e,u.component?g?g.children:null:t,r,i),v&&g&&g.outlet&&g.outlet.isActivated&&i.canDeactivateChecks.push(new Gm(g.outlet.component,l))}else l&&Ih(e,g,i),i.canActivateChecks.push(new xD(r)),Sc(n,null,u.component?g?g.children:null:t,r,i)})(l,u[l.value.outlet],t,r.concat([l.value]),i),delete u[l.value.outlet]}),Or(u,(l,g)=>Ih(l,t.getContext(g),i)),i}function Ih(n,e,t){const r=Dc(n),i=n.value;Or(r,(u,l)=>{Ih(u,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Gm(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Ac(n){return"function"==typeof n}function Ko(n){return n instanceof lc||"EmptyError"===n?.name}const vp=Symbol("INITIAL_VALUE");function Wa(){return qn(n=>dc(n.map(e=>e.pipe(Go(1),Fa(vp)))).pipe((0,vt.U)(e=>{for(const t of e)if(!0!==t){if(t===vp)return vp;if(!1===t||t instanceof Qi)return t}return!0}),vi(e=>e!==vp),Go(1)))}function Jm(n){return(0,eh.z)(Nr(e=>{if(Ne(e))throw bD(0,e)}),(0,vt.U)(e=>!0===e))}const Xm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function d0(n,e,t,r,i){const u=ey(n,e,t);return u.matched?function xc(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?ct(i.map(l=>{const g=Zu(l,n);return Wn(function Km(n){return n&&Ac(n.canMatch)}(g)?g.canMatch(e,t):n.runInContext(()=>g(e,t)))})).pipe(Wa(),Jm()):ct(!0)}(r=$m(e,r),e,t).pipe((0,vt.U)(l=>!0===l?u:{...Xm})):ct(u)}function ey(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Xm}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||rp)(t,n,e);if(!i)return{...Xm};const u={};Or(i.posParams,(g,v)=>{u[v]=g.path});const l=i.consumed.length>0?{...u,...i.consumed[i.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function Mc(n,e,t,r){if(t.length>0&&function LD(n,e,t){return t.some(r=>ty(n,e,r)&&fs(r)!==xt)}(n,t,r)){const u=new Xt(e,function h0(n,e,t,r){const i={};i[xt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&fs(u)!==xt){const l=new Xt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[fs(u)]=l}return i}(n,e,r,new Xt(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function f0(n,e,t){return t.some(r=>ty(n,e,r))}(n,t,r)){const u=new Xt(n.segments,function FD(n,e,t,r,i){const u={};for(const l of r)if(ty(n,t,l)&&!i[fs(l)]){const g=new Xt([],{});g._sourceSegment=n,g._segmentIndexShift=e.length,u[fs(l)]=g}return{...i,...u}}(n,e,t,r,n.children));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const i=new Xt(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function ty(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function p0(n,e,t,r){return!!(fs(n)===r||r!==xt&&ty(e,t,n))&&("**"===n.path||ey(e,n,t).matched)}function Pc(n,e,t){return 0===e.length&&!n.children[t]}const Ep=!1;class Yo{constructor(e){this.segmentGroup=e||null}}class Rc{constructor(e){this.urlTree=e}}function Ch(n){return ju(new Yo(n))}function ny(n){return ju(new Rc(n))}class g0{constructor(e,t,r,i,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0}apply(){const e=Mc(this.urlTree.root,[],[],this.config).segmentGroup,t=new Xt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,xt).pipe((0,vt.U)(u=>this.createUrlTree(Y(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ms(u=>{if(u instanceof Rc)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Yo?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,xt).pipe((0,vt.U)(i=>this.createUrlTree(Y(i),e.queryParams,e.fragment))).pipe(Ms(i=>{throw i instanceof Yo?this.noMatchError(i):i}))}noMatchError(e){return new d.vHH(4002,Ep)}createUrlTree(e,t,r){const i=k(e);return new Qi(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,vt.U)(u=>new Xt([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,mn.D)(i).pipe(qo(u=>{const l=r.children[u],g=s0(t,u);return this.expandSegmentGroup(e,g,l,u).pipe((0,vt.U)(v=>({segment:v,outlet:u})))}),$u((u,l)=>(u[l.outlet]=l.segment,u),{}),La())}expandSegment(e,t,r,i,u,l){return(0,mn.D)(r).pipe(qo(g=>this.expandSegmentAgainstRoute(e,t,r,g,i,u,l).pipe(Ms(b=>{if(b instanceof Yo)return ct(null);throw b}))),xs(g=>!!g),Ms((g,v)=>{if(Ko(g))return Pc(t,i,u)?ct(new Xt([],{})):Ch(t);throw g}))}expandSegmentAgainstRoute(e,t,r,i,u,l,g){return p0(i,t,u,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,l):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l):Ch(t):Ch(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?ny(u):this.lineralizeSegments(r,u).pipe((0,pr.z)(l=>{const g=new Xt(l,{});return this.expandSegment(e,g,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,l){const{matched:g,consumedSegments:v,remainingSegments:b,positionalParamSegments:T}=ey(t,i,u);if(!g)return Ch(t);const M=this.applyRedirectCommands(v,i.redirectTo,T);return i.redirectTo.startsWith("/")?ny(M):this.lineralizeSegments(i,M).pipe((0,pr.z)($=>this.expandSegment(e,t,r,$.concat(b),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){return"**"===r.path?(e=$m(r,e),r.loadChildren?(r._loadedRoutes?ct({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,vt.U)(g=>(r._loadedRoutes=g.routes,r._loadedInjector=g.injector,new Xt(i,{})))):ct(new Xt(i,{}))):d0(t,r,i,e).pipe(qn(({matched:l,consumedSegments:g,remainingSegments:v})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,pr.z)(T=>{const M=T.injector??e,$=T.routes,{segmentGroup:Z,slicedSegments:ie}=Mc(t,g,v,$),ve=new Xt(Z.segments,Z.children);if(0===ie.length&&ve.hasChildren())return this.expandChildren(M,$,ve).pipe((0,vt.U)(yt=>new Xt(g,yt)));if(0===$.length&&0===ie.length)return ct(new Xt(g,{}));const Ae=fs(r)===u;return this.expandSegment(M,ve,$,ie,Ae?xt:u,!0).pipe((0,vt.U)(mt=>new Xt(g.concat(mt.segments),mt.children)))})):Ch(t)))}getChildConfig(e,t,r){return t.children?ct({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ct({routes:t._loadedRoutes,injector:t._loadedInjector}):function OD(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?ct(!0):ct(i.map(l=>{const g=Zu(l,n);return Wn(function Wm(n){return n&&Ac(n.canLoad)}(g)?g.canLoad(e,t):n.runInContext(()=>g(e,t)))})).pipe(Wa(),Jm())}(e,t,r).pipe((0,pr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe(Nr(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function UD(n){return ju(ID(Ep,3))}())):ct({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ct(r);if(i.numberOfChildren>1||!i.children[xt])return e.redirectTo,ju(new d.vHH(4e3,Ep));i=i.children[xt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new Qi(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Or(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const g=i.substring(1);r[u]=t[g]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let l={};return Or(t.children,(g,v)=>{l[v]=this.createSegmentGroup(e,g,r,i)}),new Xt(u,l)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,Ep);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class ry{}class Dh{constructor(e,t,r,i,u,l,g){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=u,this.paramsInheritanceStrategy=l,this.urlSerializer=g}recognize(){const e=Mc(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,xt).pipe((0,vt.U)(t=>{if(null===t)return null;const r=new fp([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},xt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Xi(r,t),u=new Jw(this.url,i);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=ED(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,mn.D)(Object.keys(r.children)).pipe(qo(i=>{const u=r.children[i],l=s0(t,i);return this.processSegmentGroup(e,l,u,i)}),$u((i,u)=>i&&u?(i.push(...u),i):null),function tp(n,e=!1){return(0,$r.e)((t,r)=>{let i=0;t.subscribe((0,wr.x)(r,u=>{const l=n(u,i++);(l||e)&&r.next(u),!l&&r.complete()}))})}(i=>null!==i),th(null),La(),(0,vt.U)(i=>{if(null===i)return null;const u=y0(i);return function $D(n){n.sort((e,t)=>e.value.outlet===xt?-1:t.value.outlet===xt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,i,u){return(0,mn.D)(t).pipe(qo(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,u)),xs(l=>!!l),Ms(l=>{if(Ko(l))return Pc(r,i,u)?ct([]):ct(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,u){if(t.redirectTo||!p0(t,r,i,u))return ct(null);let l;if("**"===t.path){const g=i.length>0?rh(i).parameters:{},v=_0(r)+i.length;l=ct({snapshot:new fp(i,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,mo(t),fs(t),t.component??t._loadedComponent??null,t,v0(r),v,w0(t)),consumedSegments:[],remainingSegments:[]})}else l=d0(r,t,i,e).pipe((0,vt.U)(({matched:g,consumedSegments:v,remainingSegments:b,parameters:T})=>{if(!g)return null;const M=_0(r)+v.length;return{snapshot:new fp(v,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,mo(t),fs(t),t.component??t._loadedComponent??null,t,v0(r),M,w0(t)),consumedSegments:v,remainingSegments:b}}));return l.pipe(qn(g=>{if(null===g)return ct(null);const{snapshot:v,consumedSegments:b,remainingSegments:T}=g;e=t._injector??e;const M=t._loadedInjector??e,$=function HD(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:Z,slicedSegments:ie}=Mc(r,b,T,$.filter(Ae=>void 0===Ae.redirectTo));if(0===ie.length&&Z.hasChildren())return this.processChildren(M,$,Z).pipe((0,vt.U)(Ae=>null===Ae?null:[new Xi(v,Ae)]));if(0===$.length&&0===ie.length)return ct([new Xi(v,[])]);const ve=fs(t)===u;return this.processSegment(M,$,Z,ie,ve?xt:u).pipe((0,vt.U)(Ae=>null===Ae?null:[new Xi(v,Ae)]))}))}}function zD(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function y0(n){const e=[],t=new Set;for(const r of n){if(!zD(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=y0(r.children);e.push(new Xi(r.value,i))}return e.filter(r=>!t.has(r))}function v0(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function _0(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function mo(n){return n.data||{}}function w0(n){return n.resolve||{}}function sy(n){return"string"==typeof n.title||null===n.title}function oy(n){return qn(e=>{const t=n(e);return t?(0,mn.D)(t).pipe((0,vt.U)(()=>e)):ct(e)})}const kc=new d.OlP("ROUTES");let uy=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,d.f3M)(d.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ct(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Wn(t.loadComponent()).pipe((0,vt.U)(I0),Nr(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),Hu(()=>{this.componentLoaders.delete(t)})),i=new Am(r,()=>new Ki.x).pipe(Oa());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ct({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,vt.U)(g=>{this.onLoadEndListener&&this.onLoadEndListener(r);let v,b,T=!1;Array.isArray(g)?b=g:(v=g.create(t).injector,b=sp(v.get(kc,[],d.XFs.Self|d.XFs.Optional)));return{routes:b.map(yp),injector:v}}),Hu(()=>{this.childrenLoaders.delete(r)})),l=new Am(u,()=>new Ki.x).pipe(Oa());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Wn(t()).pipe((0,vt.U)(I0),(0,pr.z)(r=>r instanceof d.YKP||Array.isArray(r)?ct(r):(0,mn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function I0(n){return function Ns(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Ip=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Ki.x,this.configLoader=(0,d.f3M)(uy),this.environmentInjector=(0,d.f3M)(d.lqb),this.urlSerializer=(0,d.f3M)(Ps),this.rootContexts=(0,d.f3M)(mp),this.navigationId=0,this.afterPreactivation=()=>ct(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new gD(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Om(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Yi({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ph,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(vi(r=>0!==r.id),(0,vt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),qn(r=>{let i=!1,u=!1;return ct(r).pipe(Nr(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),qn(l=>{const g=t.browserUrlTree.toString(),v=!t.navigated||l.extractedUrl.toString()!==g||g!==t.currentUrlTree.toString();if(!v&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const T="";return this.events.next(new Wu(l.id,t.serializeUrl(r.rawUrl),T,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),yi.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return C0(l.source)&&(t.browserUrlTree=l.extractedUrl),ct(l).pipe(qn(T=>{const M=this.transitions?.getValue();return this.events.next(new Nm(T.id,this.urlSerializer.serialize(T.extractedUrl),T.source,T.restoredState)),M!==this.transitions?.getValue()?yi.E:Promise.resolve(T)}),function m0(n,e,t,r){return qn(i=>function BD(n,e,t,r,i){return new g0(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,vt.U)(u=>({...i,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),Nr(T=>{this.currentNavigation={...this.currentNavigation,finalUrl:T.urlAfterRedirects},r.urlAfterRedirects=T.urlAfterRedirects}),function qD(n,e,t,r,i){return(0,pr.z)(u=>function iy(n,e,t,r,i,u,l="emptyOnly"){return new Dh(n,e,t,r,i,l,u).recognize().pipe(qn(g=>null===g?function jD(n){return new oi.y(e=>e.error(n))}(new ry):ct(g)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,i).pipe((0,vt.U)(l=>({...u,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Nr(T=>{if(r.targetSnapshot=T.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!T.extras.skipLocationChange){const $=t.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);t.setBrowserUrl($,T)}t.browserUrlTree=T.urlAfterRedirects}const M=new Cc(T.id,this.urlSerializer.serialize(T.extractedUrl),this.urlSerializer.serialize(T.urlAfterRedirects),T.targetSnapshot);this.events.next(M)}));if(v&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:T,extractedUrl:M,source:$,restoredState:Z,extras:ie}=l,ve=new Nm(T,this.urlSerializer.serialize(M),$,Z);this.events.next(ve);const Ae=wD(M,this.rootComponentType).snapshot;return ct(r={...l,targetSnapshot:Ae,urlAfterRedirects:M,extras:{...ie,skipLocationChange:!1,replaceUrl:!1}})}{const T="";return this.events.next(new Wu(l.id,t.serializeUrl(r.extractedUrl),T,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),yi.E}}),Nr(l=>{const g=new hD(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(g)}),(0,vt.U)(l=>r={...l,guards:bh(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function _p(n,e){return(0,pr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?ct({...t,guardsResult:!0}):function kD(n,e,t,r){return(0,mn.D)(n).pipe((0,pr.z)(i=>function ND(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?ct(u.map(g=>{const v=Eh(e)??i,b=Zu(g,v);return Wn(function PD(n){return n&&Ac(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):v.runInContext(()=>b(n,e,t,r))).pipe(xs())})).pipe(Wa()):ct(!0)}(i.component,i.route,t,e,r)),xs(i=>!0!==i,!0))}(l,r,i,n).pipe((0,pr.z)(g=>g&&function u0(n){return"boolean"==typeof n}(g)?function Ym(n,e,t,r){return(0,mn.D)(e).pipe(qo(i=>Bu(function Ku(n,e){return null!==n&&e&&e(new qw(n)),ct(!0)}(i.route.parent,r),function wp(n,e){return null!==n&&e&&e(new Fm(n)),ct(!0)}(i.route,r),function Qm(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function qm(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Sm(()=>ct(l.guards.map(v=>{const b=Eh(l.node)??t,T=Zu(v,b);return Wn(function Zm(n){return n&&Ac(n.canActivateChild)}(T)?T.canActivateChild(r,n):b.runInContext(()=>T(r,n))).pipe(xs())})).pipe(Wa())));return ct(u).pipe(Wa())}(n,i.path,t),function c0(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ct(!0);const i=r.map(u=>Sm(()=>{const l=Eh(e)??t,g=Zu(u,l);return Wn(function DP(n){return n&&Ac(n.canActivate)}(g)?g.canActivate(e,n):l.runInContext(()=>g(e,n))).pipe(xs())}));return ct(i).pipe(Wa())}(n,i.route,t))),xs(i=>!0!==i,!0))}(r,u,n,e):ct(g)),(0,vt.U)(g=>({...t,guardsResult:g})))})}(this.environmentInjector,l=>this.events.next(l)),Nr(l=>{if(r.guardsResult=l.guardsResult,Ne(l.guardsResult))throw bD(0,l.guardsResult);const g=new fD(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(g)}),vi(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),oy(l=>{if(l.guards.canActivateChecks.length)return ct(l).pipe(Nr(g=>{const v=new wP(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(v)}),qn(g=>{let v=!1;return ct(g).pipe(function TP(n,e){return(0,pr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ct(t);let u=0;return(0,mn.D)(i).pipe(qo(l=>function SP(n,e,t,r){const i=n.routeConfig,u=n._resolve;return void 0!==i?.title&&!sy(i)&&(u[oo]=i.title),function E0(n,e,t,r){const i=function AP(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return ct({});const u={};return(0,mn.D)(i).pipe((0,pr.z)(l=>function b0(n,e,t,r){const i=Eh(e)??r,u=Zu(n,i);return Wn(u.resolve?u.resolve(e,t):i.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(xs(),Nr(g=>{u[l]=g}))),mc(1),function np(n){return(0,vt.U)(()=>n)}(u),Ms(l=>Ko(l)?yi.E:ju(l)))}(u,n,e,r).pipe((0,vt.U)(l=>(n._resolvedData=l,n.data=ED(n,t).resolve,i&&sy(i)&&(n.data[oo]=i.title),null)))}(l.route,r,n,e)),Nr(()=>u++),mc(1),(0,pr.z)(l=>u===i.length?ct(t):yi.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),Nr({next:()=>v=!0,complete:()=>{v||(t.restoreHistory(g),this.cancelNavigationTransition(g,"",2))}}))}),Nr(g=>{const v=new pD(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(v)}))}),oy(l=>{const g=v=>{const b=[];v.routeConfig?.loadComponent&&!v.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(v.routeConfig).pipe(Nr(T=>{v.component=T}),(0,vt.U)(()=>{})));for(const T of v.children)b.push(...g(T));return b};return dc(g(l.targetSnapshot.root)).pipe(th(),Go(1))}),oy(()=>this.afterPreactivation()),(0,vt.U)(l=>{const g=function _h(n,e,t){const r=Tc(n,e._root,t?t._root:void 0);return new _D(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:g}}),Nr(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,vt.U)(r=>(new o0(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),Go(1),Nr({next:l=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new qa(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{i=!0}}),Hu(()=>{i||u||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Ms(l=>{if(u=!0,gp(l)){pp(l)||(t.navigated=!0,t.restoreHistory(r,!0));const g=new gh(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(g),pp(l)){const v=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),b={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||C0(r.source)};t.scheduleNavigation(v,ph,null,b,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const g=new mh(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(g);try{r.resolve(t.errorHandler(l))}catch(v){r.reject(v)}}return yi.E}))}))}cancelNavigationTransition(t,r,i){const u=new gh(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(u),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function C0(n){return n!==ph}let D0=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(u=>u.outlet===xt);return r}getResolvedTitleForRoute(t){return t.data[oo]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(WD)},providedIn:"root"}),n})(),WD=(()=>{class n extends D0{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(_m))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),T0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(KD)},providedIn:"root"}),n})();class ZD{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let KD=(()=>{class n extends ZD{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Lt=new d.OlP("",{providedIn:"root",factory:()=>({})});let S0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(A0)},providedIn:"root"}),n})(),A0=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function QD(n){throw n}function JD(n,e,t){return e.parse("/")}const x0={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},XD={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ki=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,d.f3M)(d.c2e),this.isNgZoneEnabled=!1,this.options=(0,d.f3M)(Lt,{optional:!0})||{},this.errorHandler=this.options.errorHandler||QD,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||JD,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,d.f3M)(S0),this.routeReuseStrategy=(0,d.f3M)(T0),this.urlCreationStrategy=(0,d.f3M)(vD),this.titleStrategy=(0,d.f3M)(D0),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=sp((0,d.f3M)(kc,{optional:!0})??[]),this.navigationTransitions=(0,d.f3M)(Ip),this.urlSerializer=(0,d.f3M)(Ps),this.location=(0,d.f3M)($e),this.isNgZoneEnabled=(0,d.f3M)(d.R0b)instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Qi,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=wD(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ph,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const u={replaceUrl:!0},l=i?.navigationId?i:null;if(i){const v={...i};delete v.navigationId,delete v.\u0275routerPageId,0!==Object.keys(v).length&&(u.state=v)}const g=this.parseUrl(t);this.scheduleNavigation(g,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(yp),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:l,queryParamsHandling:g,preserveFragment:v}=r,b=v?this.currentUrlTree.fragment:l;let T=null;switch(g){case"merge":T={...this.currentUrlTree.queryParams,...u};break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=u||null}return null!==T&&(T=this.removeEmptyProps(T)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,T,b??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Ne(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,ph,null,r)}navigate(t,r={skipLocationChange:!1}){return function eT(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new d.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...x0}:!1===r?{...XD}:r,Ne(t))return Er(this.currentUrlTree,t,i);const u=this.parseUrl(t);return Er(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}scheduleNavigation(t,r,i,u,l){if(this.disposed)return Promise.resolve(!1);let g,v,b,T;return l?(g=l.resolve,v=l.reject,b=l.promise):b=new Promise((M,$)=>{g=M,v=$}),T="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:T,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:g,reject:v,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(M=>Promise.reject(M))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",l)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(i,"",u)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-(this.browserPageId??this.currentPageId);0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class cy{}let dy=(()=>{class n{constructor(t,r,i,u,l){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(vi(t=>t instanceof qa),qo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,d.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,g=u._loadedInjector??l;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&i.push(this.preloadConfig(l,u)),(u.children||u._loadedRoutes)&&i.push(this.processRoutes(g,u.children??u._loadedRoutes))}return(0,mn.D)(i).pipe((0,Na.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ct(null);const u=i.pipe((0,pr.z)(l=>null===l?ct(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,mn.D)([u,l]).pipe((0,Na.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ki),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(cy),d.LFG(uy))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ah=new d.OlP("");let P0=(()=>{class n{constructor(t,r,i,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Nm?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof qa&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Lm&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Lm(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();var ps=(()=>((ps=ps||{})[ps.COMPLETE=0]="COMPLETE",ps[ps.FAILED=1]="FAILED",ps[ps.REDIRECTING=2]="REDIRECTING",ps))();const xh=!1;function Yu(n,e){return{\u0275kind:n,\u0275providers:e}}const fy=new d.OlP("",{providedIn:"root",factory:()=>!1});function Mh(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(ki),i=n.get(R0);1===n.get(Dp)&&r.initialNavigation(),n.get(k0,null,d.XFs.Optional)?.setUpPreloading(),n.get(Ah,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const R0=new d.OlP(xh?"bootstrap done indicator":"",{factory:()=>new Ki.x}),Dp=new d.OlP(xh?"initial navigation":"",{providedIn:"root",factory:()=>1});function iT(){let n=[];return n=xh?[{provide:d.Xts,multi:!0,useFactory:()=>{const e=(0,d.f3M)(ki);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function Zw(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],Yu(1,n)}const k0=new d.OlP(xh?"router preloader":"");function sT(n){return Yu(0,[{provide:k0,useExisting:dy},{provide:cy,useExisting:n}])}const Fc=!1,uT=new d.OlP(Fc?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),py=[$e,{provide:Ps,useClass:ah},ki,mp,{provide:yh,useFactory:function hy(n){return n.routerState.root},deps:[ki]},uy,Fc?{provide:fy,useValue:!0}:[]];function lT(){return new d.PXZ("Router",ki)}let cT=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[py,Fc&&r?.enableTracing?iT().\u0275providers:[],{provide:kc,multi:!0,useValue:t},{provide:uT,useFactory:F0,deps:[[ki,new d.FiY,new d.tp0]]},{provide:Lt,useValue:r||{}},r?.useHash?{provide:rt,useClass:De}:{provide:rt,useClass:Pe},{provide:Ah,useFactory:()=>{const n=(0,d.f3M)(gu),e=(0,d.f3M)(d.R0b),t=(0,d.f3M)(Lt),r=(0,d.f3M)(Ip),i=(0,d.f3M)(Ps);return t.scrollOffset&&n.setOffset(t.scrollOffset),new P0(i,r,n,e,t)}},r?.preloadingStrategy?sT(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:lT},r?.initialNavigation?hT(r):[],[{provide:L0,useFactory:Mh},{provide:d.tb,multi:!0,useExisting:L0}]]}}static forChild(t){return{ngModule:n,providers:[{provide:kc,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(uT,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[jm]}),n})();function F0(n){if(Fc&&n)throw new d.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function hT(n){return["disabled"===n.initialNavigation?Yu(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(ki);return()=>{e.setUpLocationChangeListener()}}},{provide:Dp,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Yu(2,[{provide:Dp,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(Oe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(ki),u=e.get(R0);(function PP(n,e){n.events.pipe(vi(t=>t instanceof qa||t instanceof gh||t instanceof mh||t instanceof Wu),(0,vt.U)(t=>t instanceof qa||t instanceof Wu?ps.COMPLETE:t instanceof gh&&(0===t.code||1===t.code)?ps.REDIRECTING:ps.FAILED),vi(t=>t!==ps.REDIRECTING),Go(1)).subscribe(()=>{e()})})(i,()=>{r(!0)}),e.get(Ip).afterPreactivation=()=>(r(!0),u.closed?ct(void 0):u),i.initialNavigation()}))}}]).\u0275providers:[]]}const L0=new d.OlP(Fc?"Router Initializer":"");class Vc{}class Qu{}class Os{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),u=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,u),this.headers.has(u)?this.headers.get(u).push(l):this.headers.set(u,[l])}})}:()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{let i;if(i="string"==typeof r?[r]:"number"==typeof r?[r.toString()]:r.map(u=>u.toString()),i.length>0){const u=t.toLowerCase();this.headers.set(u,i),this.maybeSetNormalizedName(t,u)}})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Os?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Os;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Os?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const u=e.value;if(u){let l=this.headers.get(t);if(!l)return;l=l.filter(g=>-1===u.indexOf(g)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class V0{encodeKey(e){return _y(e)}encodeValue(e){return _y(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const yy=/%(\d[a-f0-9])/gi,vy={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function _y(n){return encodeURIComponent(n).replace(yy,(e,t)=>vy[t]??e)}function Uc(n){return`${n}`}class Za{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new V0,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function my(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const u=i.indexOf("="),[l,g]=-1==u?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,u)),e.decodeValue(i.slice(u+1))],v=t.get(l)||[];v.push(g),t.set(l,v)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(Uc):[Uc(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Za({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Uc(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(Uc(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class U0{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function wy(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Ey(n){return typeof Blob<"u"&&n instanceof Blob}function B0(n){return typeof FormData<"u"&&n instanceof FormData}class Zr{constructor(e,t,r,i){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function fT(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,u=i):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new Os),this.context||(this.context=new U0),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const g=t.indexOf("?");this.urlWithParams=t+(-1===g?"?":g<t.length-1?"&":"")+l}}else this.params=new Za,this.urlWithParams=t}serializeBody(){return null===this.body?null:wy(this.body)||Ey(this.body)||B0(this.body)||function pT(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Za?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||B0(this.body)?null:Ey(this.body)?this.body.type||null:wy(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Za?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,g=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let v=e.headers||this.headers,b=e.params||this.params;const T=e.context??this.context;return void 0!==e.setHeaders&&(v=Object.keys(e.setHeaders).reduce((M,$)=>M.set($,e.setHeaders[$]),v)),e.setParams&&(b=Object.keys(e.setParams).reduce((M,$)=>M.set($,e.setParams[$]),b)),new Zr(t,r,u,{params:b,headers:v,context:T,reportProgress:g,responseType:i,withCredentials:l})}}var br=(()=>((br=br||{})[br.Sent=0]="Sent",br[br.UploadProgress=1]="UploadProgress",br[br.ResponseHeader=2]="ResponseHeader",br[br.DownloadProgress=3]="DownloadProgress",br[br.Response=4]="Response",br[br.User=5]="User",br))();class by{constructor(e,t=200,r="OK"){this.headers=e.headers||new Os,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class j0 extends by{constructor(e={}){super(e),this.type=br.ResponseHeader}clone(e={}){return new j0({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Bc extends by{constructor(e={}){super(e),this.type=br.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Bc({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Iy extends by{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Cy(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Dy=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let u;if(t instanceof Zr)u=t;else{let v,b;v=i.headers instanceof Os?i.headers:new Os(i.headers),i.params&&(b=i.params instanceof Za?i.params:new Za({fromObject:i.params})),u=new Zr(t,r,void 0!==i.body?i.body:null,{headers:v,context:i.context,params:b,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=ct(u).pipe(qo(v=>this.handler.handle(v)));if(t instanceof Zr||"events"===i.observe)return l;const g=l.pipe(vi(v=>v instanceof Bc));switch(i.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return g.pipe((0,vt.U)(v=>{if(null!==v.body&&!(v.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return v.body}));case"blob":return g.pipe((0,vt.U)(v=>{if(null!==v.body&&!(v.body instanceof Blob))throw new Error("Response is not a Blob.");return v.body}));case"text":return g.pipe((0,vt.U)(v=>{if(null!==v.body&&"string"!=typeof v.body)throw new Error("Response is not a string.");return v.body}));default:return g.pipe((0,vt.U)(v=>v.body))}case"response":return g;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Za).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Cy(i,r))}post(t,r,i={}){return this.request("POST",t,Cy(i,r))}put(t,r,i={}){return this.request("PUT",t,Cy(i,r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Vc))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function $0(n,e){return e(n)}function H0(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const mT=new d.OlP("HTTP_INTERCEPTORS"),Ju=new d.OlP("HTTP_INTERCEPTOR_FNS");function yT(){let n=null;return(e,t)=>(null===n&&(n=((0,d.f3M)(mT,{optional:!0})??[]).reduceRight(H0,$0)),n(e,t))}let z0=(()=>{class n extends Vc{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=Array.from(new Set(this.injector.get(Ju)));this.chain=r.reduceRight((i,u)=>function gT(n,e,t){return(r,i)=>t.runInContext(()=>e(r,u=>n(u,i)))}(i,u,this.injector),$0)}return this.chain(t,r=>this.backend.handle(r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Qu),d.LFG(d.lqb))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ty=/^\)\]\}',?\n/;let Z0=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new oi.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((Z,ie)=>i.setRequestHeader(Z,ie.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const Z=t.detectContentTypeHeader();null!==Z&&i.setRequestHeader("Content-Type",Z)}if(t.responseType){const Z=t.responseType.toLowerCase();i.responseType="json"!==Z?Z:"text"}const u=t.serializeBody();let l=null;const g=()=>{if(null!==l)return l;const Z=i.statusText||"OK",ie=new Os(i.getAllResponseHeaders()),ve=function wT(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return l=new j0({headers:ie,status:i.status,statusText:Z,url:ve}),l},v=()=>{let{headers:Z,status:ie,statusText:ve,url:Ae}=g(),Ge=null;204!==ie&&(Ge=typeof i.response>"u"?i.responseText:i.response),0===ie&&(ie=Ge?200:0);let mt=ie>=200&&ie<300;if("json"===t.responseType&&"string"==typeof Ge){const yt=Ge;Ge=Ge.replace(Ty,"");try{Ge=""!==Ge?JSON.parse(Ge):null}catch(en){Ge=yt,mt&&(mt=!1,Ge={error:en,text:Ge})}}mt?(r.next(new Bc({body:Ge,headers:Z,status:ie,statusText:ve,url:Ae||void 0})),r.complete()):r.error(new Iy({error:Ge,headers:Z,status:ie,statusText:ve,url:Ae||void 0}))},b=Z=>{const{url:ie}=g(),ve=new Iy({error:Z,status:i.status||0,statusText:i.statusText||"Unknown Error",url:ie||void 0});r.error(ve)};let T=!1;const M=Z=>{T||(r.next(g()),T=!0);let ie={type:br.DownloadProgress,loaded:Z.loaded};Z.lengthComputable&&(ie.total=Z.total),"text"===t.responseType&&i.responseText&&(ie.partialText=i.responseText),r.next(ie)},$=Z=>{let ie={type:br.UploadProgress,loaded:Z.loaded};Z.lengthComputable&&(ie.total=Z.total),r.next(ie)};return i.addEventListener("load",v),i.addEventListener("error",b),i.addEventListener("timeout",b),i.addEventListener("abort",b),t.reportProgress&&(i.addEventListener("progress",M),null!==u&&i.upload&&i.upload.addEventListener("progress",$)),i.send(u),r.next({type:br.Sent}),()=>{i.removeEventListener("error",b),i.removeEventListener("abort",b),i.removeEventListener("load",v),i.removeEventListener("timeout",b),t.reportProgress&&(i.removeEventListener("progress",M),null!==u&&i.upload&&i.upload.removeEventListener("progress",$)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(mu))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const jc=new d.OlP("XSRF_ENABLED"),Rh=new d.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Ap=new d.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class ET{}let K0=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Gs(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe),d.LFG(d.Lbi),d.LFG(Rh))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Y0(n,e){const t=n.url.toLowerCase();if(!(0,d.f3M)(jc)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,d.f3M)(ET).getToken(),i=(0,d.f3M)(Ap);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var rr=(()=>((rr=rr||{})[rr.Interceptors=0]="Interceptors",rr[rr.LegacyInterceptors=1]="LegacyInterceptors",rr[rr.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",rr[rr.NoXsrfProtection=3]="NoXsrfProtection",rr[rr.JsonpSupport=4]="JsonpSupport",rr[rr.RequestsMadeViaParent=5]="RequestsMadeViaParent",rr))();function Ka(n,e){return{\u0275kind:n,\u0275providers:e}}function Jo(...n){const e=[Dy,Z0,z0,{provide:Vc,useExisting:z0},{provide:Qu,useExisting:Z0},{provide:Ju,useValue:Y0,multi:!0},{provide:jc,useValue:!0},{provide:ET,useClass:K0}];for(const t of n)e.push(...t.\u0275providers);return(0,d.MR2)(e)}const kh=new d.OlP("LEGACY_INTERCEPTOR_FN");let Oh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Jo(Ka(rr.LegacyInterceptors,[{provide:kh,useFactory:yT},{provide:Ju,useExisting:kh,multi:!0}]))]}),n})(),DT=(()=>{class n{constructor(t){this.http=t}traerPaises(){return this.http.get("https://restcountries.com/v3.1/all")}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Dy))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function TT(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",2),d.NdJ("click",function(){const u=d.CHM(t).$implicit,l=d.oxw();return d.KtG(l.enviarUnPais(u))}),d.TgZ(1,"div",3),d._uU(2),d.qZA(),d.TgZ(3,"div",3),d._UZ(4,"img",4),d.qZA()()}if(2&n){const t=e.$implicit;d.xp6(2),d.Oqu(t.name.common),d.xp6(2),d.s9C("src",t.flags.png,d.LSH)}}let Q0=(()=>{class n{constructor(t){this.apiCountries=t,this.enviamosUnPais=new d.vpe,this.listadoPaises=[],this.listadoPaises=[]}ngOnInit(){this.obtenerListadoPaises()}obtenerListadoPaises(){this.apiCountries.traerPaises().subscribe(t=>{for(let r of t)this.listadoPaises.push(r);this.listadoPaises.sort((r,i)=>r.name.common.localeCompare(i.name.common))})}enviarUnPais(t){this.enviamosUnPais.emit(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(DT))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-tabla-paises"]],outputs:{enviamosUnPais:"enviamosUnPais"},decls:2,vars:1,consts:[[1,"container"],["class","row pais",3,"click",4,"ngFor","ngForOf"],[1,"row","pais",3,"click"],[1,"col"],["alt","bandera",2,"width","40px","height","40px","border-radius","50%",3,"src"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.YNc(1,TT,5,2,"div",1),d.qZA()),2&t&&(d.xp6(1),d.Q6J("ngForOf",r.listadoPaises))},dependencies:[pi],styles:[".container[_ngcontent-%COMP%]{height:16rem;overflow:scroll}.pais[_ngcontent-%COMP%]{font-weight:bolder;padding:10px}.pais[_ngcontent-%COMP%]:hover{background:#666;color:#fff;transition:background .5s;cursor:pointer}"]}),n})();function ST(n,e){if(1&n&&(d.TgZ(0,"tr",3)(1,"td"),d._uU(2),d.qZA(),d.TgZ(3,"td"),d._uU(4),d.qZA(),d.TgZ(5,"td"),d._uU(6),d.qZA(),d.TgZ(7,"td"),d._uU(8),d.qZA(),d.TgZ(9,"td"),d._uU(10),d.qZA(),d.TgZ(11,"td"),d._UZ(12,"img",4),d.qZA()()),2&n){const t=e.$implicit;d.xp6(2),d.Oqu(t.nombre),d.xp6(2),d.Oqu(t.apellido),d.xp6(2),d.Oqu(t.edad),d.xp6(2),d.Oqu(t.sexo),d.xp6(2),d.Oqu(t.nombrePais),d.xp6(2),d.s9C("src",t.banderaPais,d.LSH)}}let J0=(()=>{class n{constructor(){this.detallarActor=new d.vpe}seleccionarActor(t){this.detallarActor.emit(t),console.info("En listado",t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-actor-listado"]],inputs:{listaRecibida:"listaRecibida"},outputs:{detallarActor:"detallarActor"},decls:15,vars:1,consts:[[1,"table","table-hover"],["scope","col"],["style","cursor: pointer",4,"ngFor","ngForOf"],[2,"cursor","pointer"],["alt","bandera",2,"width","80px","height","80px","border-radius","50%",3,"src"]],template:function(t,r){1&t&&(d.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),d._uU(4,"Nombre"),d.qZA(),d.TgZ(5,"th",1),d._uU(6,"Apellido"),d.qZA(),d.TgZ(7,"th",1),d._uU(8,"Edad"),d.qZA(),d.TgZ(9,"th",1),d._uU(10,"Sexo"),d.qZA(),d.TgZ(11,"th",1),d._uU(12,"Pa\xeds"),d.qZA()()(),d.TgZ(13,"tbody"),d.YNc(14,ST,13,6,"tr",2),d.qZA()()),2&t&&(d.xp6(14),d.Q6J("ngForOf",r.listaRecibida))},dependencies:[pi]}),n})(),X0=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),Ya=(()=>{class n extends X0{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const gs=new d.OlP("NgValueAccessor"),MT={provide:gs,useExisting:(0,d.Gpc)(()=>Mp),multi:!0},RT=new d.OlP("CompositionEventMode");let Mp=(()=>{class n extends X0{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function PT(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(RT,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[d._Bn([MT]),d.qOj]}),n})();const kT=!1;function Qa(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function eE(n){return null!=n&&"number"==typeof n.length}const Kr=new d.OlP("NgValidators"),Xo=new d.OlP("NgAsyncValidators"),NT=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Xu{static min(e){return function Ay(n){return e=>{if(Qa(e.value)||Qa(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function OT(n){return e=>{if(Qa(e.value)||Qa(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return Fh(e)}static requiredTrue(e){return function tE(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function nE(n){return Qa(n.value)||NT.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Pp(n){return e=>Qa(e.value)||!eE(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function rE(n){return e=>eE(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Fs(n){if(!n)return Ja;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Qa(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return tl(e)}static composeAsync(e){return nl(e)}}function Fh(n){return Qa(n.value)?{required:!0}:null}function Ja(n){return null}function Yr(n){return null!=n}function Xa(n){const e=(0,d.QGY)(n)?(0,mn.D)(n):n;if(kT&&!(0,d.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new d.vHH(-1101,t)}return e}function Lh(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function es(n,e){return e.map(t=>t(n))}function el(n){return n.map(e=>function xy(n){return!n.validate}(e)?e:t=>e.validate(t))}function tl(n){if(!n)return null;const e=n.filter(Yr);return 0==e.length?null:function(t){return Lh(es(t,e))}}function eu(n){return null!=n?tl(el(n)):null}function nl(n){if(!n)return null;const e=n.filter(Yr);return 0==e.length?null:function(t){return function AT(...n){const e=(0,Zi.jO)(n),{args:t,keys:r}=cc(n),i=new oi.y(u=>{const{length:l}=t;if(!l)return void u.complete();const g=new Array(l);let v=l,b=l;for(let T=0;T<l;T++){let M=!1;(0,hc.Xf)(t[T]).subscribe((0,wr.x)(u,$=>{M||(M=!0,b--),g[T]=$},()=>v--,void 0,()=>{(!v||!M)&&(b||u.next(r?Uu(r,g):g),u.complete())}))}});return e?i.pipe(ds(e)):i}(es(t,e).map(Xa)).pipe((0,vt.U)(Lh))}}function tu(n){return null!=n?nl(el(n)):null}function rl(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function il(n){return n._rawValidators}function sl(n){return n._rawAsyncValidators}function nu(n){return n?Array.isArray(n)?n:[n]:[]}function Vh(n,e){return Array.isArray(n)?n.includes(e):n===e}function My(n,e){const t=nu(e);return nu(n).forEach(i=>{Vh(t,i)||t.push(i)}),t}function Py(n,e){return nu(e).filter(t=>!Vh(n,t))}class Ry{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=eu(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=tu(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ai extends Ry{get formDirective(){return null}get path(){return null}}class ea extends Ry{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ky{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let iE=(()=>{class n extends ky{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ea,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.qOj]}),n})(),sE=(()=>{class n extends ky{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ai,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[d.qOj]}),n})();function Ly(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const Bh=!1,$c="VALID",Np="INVALID",ol="PENDING",Hc="DISABLED";function Op(n){return(Fp(n)?n.validators:n)||null}function Uy(n,e){return(Fp(e)?e.asyncValidators:n)||null}function Fp(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function Lp(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,Bh?function Vy(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new d.vHH(1001,Bh?function cE(n,e){return`Cannot find form control ${Ly(n,e)}`}(e,t):"")}function Vp(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new d.vHH(1002,Bh?function dE(n,e){return`Must supply a value for form control ${Ly(n,e)}`}(e,i):"")})}class jh{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===$c}get invalid(){return this.status===Np}get pending(){return this.status==ol}get disabled(){return this.status===Hc}get enabled(){return this.status!==Hc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(My(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(My(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Py(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Py(e,this._rawAsyncValidators))}hasValidator(e){return Vh(this._rawValidators,e)}hasAsyncValidator(e){return Vh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ol,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Hc,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=$c,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===$c||this.status===ol)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Hc:$c}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ol,this._hasOwnPendingAsyncValidator=!0;const t=Xa(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?Hc:this.errors?Np:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ol)?ol:this._anyControlsHaveStatus(Np)?Np:$c}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Fp(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function hE(n){return Array.isArray(n)?eu(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function UT(n){return Array.isArray(n)?tu(n):n||null}(this._rawAsyncValidators)}}class zc extends jh{constructor(e,t,r){super(Op(t),Uy(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Vp(this,!0,e),Object.keys(e).forEach(r=>{Lp(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class By extends zc{}const al=new d.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>$h}),$h="always";function ms(n,e,t=$h){ta(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function HT(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&zT(n,e)})}(n,e),function ZP(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function $y(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&zT(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function jy(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Up(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Gc(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Bp(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ta(n,e){const t=il(n);null!==e.validator?n.setValidators(rl(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=sl(n);null!==e.asyncValidator?n.setAsyncValidators(rl(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Bp(e._rawValidators,i),Bp(e._rawAsyncValidators,i)}function Gc(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=il(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(l=>l!==e.validator);u.length!==i.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const i=sl(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(l=>l!==e.asyncValidator);u.length!==i.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return Bp(e._rawValidators,r),Bp(e._rawAsyncValidators,r),t}function zT(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function yE(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function zy(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Hp=class extends jh{constructor(e=null,t,r){super(Op(t),Uy(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Fp(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=zy(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){yE(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){yE(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){zy(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let EE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const QT={provide:gs,useExisting:(0,d.Gpc)(()=>Gh),multi:!0};let Gh=(()=>{class n extends Ya{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[d._Bn([QT]),d.qOj]}),n})(),Wy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const qc=new d.OlP("NgModelWithFormControlWarning"),CE={provide:ai,useExisting:(0,d.Gpc)(()=>Wc)};let Wc=(()=>{class n extends ai{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Gc(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return ms(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Up(t.control||null,t,!1),function mE(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function gE(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Up(r||null,t),(n=>n instanceof Hp)(i)&&(ms(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function fE(n,e){ta(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function GT(n,e){return Gc(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ta(this.form,this),this._oldForm&&Gc(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Kr,10),d.Y36(Xo,10),d.Y36(al,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([CE]),d.qOj,d.TTD]}),n})();const TE={provide:ea,useExisting:(0,d.Gpc)(()=>qp)};let qp=(()=>{class n extends ea{set isDisabled(t){}constructor(t,r,i,u,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new d.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function jp(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===Mp?t=u:function pE(n){return Object.getPrototypeOf(n.constructor)===Ya}(u)?r=u:i=u}),i||r||t||null}(0,u)}ngOnChanges(t){this._added||this._setUpControl(),function Hy(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function ul(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(d.Y36(ai,13),d.Y36(Kr,10),d.Y36(Xo,10),d.Y36(gs,10),d.Y36(qc,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[d._Bn([TE]),d.qOj,d.TTD]}),n})();const SE={provide:gs,useExisting:(0,d.Gpc)(()=>Wp),multi:!0};function Qy(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Wp=(()=>{class n extends Ya{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=Qy(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function eS(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&d.NdJ("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[d._Bn([SE]),d.qOj]}),n})(),AE=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(Qy(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(Wp,9))},n.\u0275dir=d.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const tS={provide:gs,useExisting:(0,d.Gpc)(()=>Jy),multi:!0};function xE(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Jy=(()=>{class n extends Ya{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(u=>this._getOptionId(u));r=(u,l)=>{u._setSelected(i.indexOf(l.toString())>-1)}}else r=(i,u)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],u=r.selectedOptions;if(void 0!==u){const l=u;for(let g=0;g<l.length;g++){const b=this._getOptionValue(l[g].value);i.push(b)}}else{const l=r.options;for(let g=0;g<l.length;g++){const v=l[g];if(v.selected){const b=this._getOptionValue(v.value);i.push(b)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function nS(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&d.NdJ("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[d._Bn([tS]),d.qOj]}),n})(),ME=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(xE(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(xE(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(Jy,9))},n.\u0275dir=d.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),ll=(()=>{class n{constructor(){this._validator=Ja}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Ja,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,features:[d.TTD]}),n})();const sS={provide:Kr,useExisting:(0,d.Gpc)(()=>Zh),multi:!0};let Zh=(()=>{class n extends ll{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=d.D6c,this.createValidator=t=>Fh}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[d._Bn([sS]),d.qOj]}),n})(),uS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Wy]}),n})();class cl extends jh{constructor(e,t,r){super(Op(t),Uy(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Vp(this,!1,e),e.forEach((r,i)=>{Lp(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function lS(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let BE=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let u={};return lS(r)?u=r:null!==r&&(u.validators=r.validator,u.asyncValidators=r.asyncValidator),new zc(i,u)}record(t,r=null){const i=this._reduceControls(t);return new By(i,r)}control(t,r,i){let u={};return this.useNonNullable?(lS(r)?u=r:(u.validators=r,u.asyncValidators=i),new Hp(t,{...u,nonNullable:!0})):new Hp(t,r,i)}array(t,r,i){const u=t.map(l=>this._createControl(l));return new cl(u,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof Hp||t instanceof jh?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),dS=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:qc,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:al,useValue:t.callSetDisabledState??$h}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[uS]}),n})();class Kh{constructor(e,t,r,i,u,l,g){this.id=e,this.nombre=t,this.apellido=r,this.edad=i,this.sexo=u,this.nombrePais=l,this.banderaPais=g}}var Kc=V(5226),hS=V.n(Kc);class Zp extends pc.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const dl={setInterval(n,e,...t){const{delegate:r}=dl;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=dl;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ir=V(8737);class fS extends Zp{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,u=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(u,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(u,this.id,t),this}requestAsyncId(e,t,r=0){return dl.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&dl.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(u){r=!0,i=u||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ir.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const Kp={now:()=>(Kp.delegate||Date).now(),delegate:void 0};class Yc{constructor(e,t=Yc.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Yc.now=Kp.now;class jE extends Yc{constructor(e,t=Yc.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const iv=new jE(fS);var nn=V(6881);(0,nn.registerVersion)("firebase","9.21.0","app");var J=V(5861),_t=V(2090),_i=V(4859),Us=V(1877);const mS=(n,e)=>e.some(t=>n instanceof t);let HE,Yh;const sv=new WeakMap,ov=new WeakMap,Qc=new WeakMap,hl=new WeakMap,av=new WeakMap;let Yp={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return ov.get(n);if("objectStoreNames"===e)return n.objectStoreNames||Qc.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ra(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function _S(n){return"function"==typeof n?function WE(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function GE(){return Yh||(Yh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(uv(this),e),ra(sv.get(this))}:function(...e){return ra(n.apply(uv(this),e))}:function(e,...t){const r=n.call(uv(this),e,...t);return Qc.set(r,e.sort?e.sort():[e]),ra(r)}}(n):(n instanceof IDBTransaction&&function vS(n){if(ov.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",u),n.removeEventListener("error",l),n.removeEventListener("abort",l)},u=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",u),n.addEventListener("error",l),n.addEventListener("abort",l)});ov.set(n,e)}(n),mS(n,function zE(){return HE||(HE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,Yp):n)}function ra(n){if(n instanceof IDBRequest)return function yS(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",u),n.removeEventListener("error",l)},u=()=>{t(ra(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",u),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&sv.set(t,n)}).catch(()=>{}),av.set(e,n),e}(n);if(hl.has(n))return hl.get(n);const e=_S(n);return e!==n&&(hl.set(n,e),av.set(e,n)),e}const uv=n=>av.get(n),nR=["get","getKey","getAll","getAllKeys","count"],rR=["put","add","delete","clear"],ZE=new Map;function lv(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(ZE.get(e))return ZE.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=rR.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!nR.includes(t))return;const u=function(){var l=(0,J.Z)(function*(g,...v){const b=this.transaction(g,i?"readwrite":"readonly");let T=b.store;return r&&(T=T.index(v.shift())),(yield Promise.all([T[t](...v),i&&b.done]))[0]});return function(v){return l.apply(this,arguments)}}();return ZE.set(e,u),u}!function qE(n){Yp=n(Yp)}(n=>({...n,get:(e,t,r)=>lv(e,t)||n.get(e,t,r),has:(e,t)=>!!lv(e,t)||n.has(e,t)}));const Qh="@firebase/installations",cv="0.6.4",KE=1e4,dv=`w:${cv}`,Jc="FIS_v2",ES="https://firebaseinstallations.googleapis.com/v1",bS=36e5,ia=new _t.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function hv(n){return n instanceof _t.ZR&&n.code.includes("request-failed")}function fv({projectId:n}){return`${ES}/projects/${n}/installations`}function YE(n){return{token:n.token,requestStatus:2,expiresIn:JE(n.expiresIn),creationTime:Date.now()}}function fl(n,e){return pv.apply(this,arguments)}function pv(){return(pv=(0,J.Z)(function*(n,e){const r=(yield e.json()).error;return ia.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function gv({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Qp(n){return mv.apply(this,arguments)}function mv(){return(mv=(0,J.Z)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function JE(n){return Number(n.replace("s","000"))}function vv(){return(vv=(0,J.Z)(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=fv(n),i=gv(n),u=e.getImmediate({optional:!0});if(u){const b=yield u.getHeartbeatsHeader();b&&i.append("x-firebase-client",b)}const g={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:Jc,appId:n.appId,sdkVersion:dv})},v=yield Qp(()=>fetch(r,g));if(v.ok){const b=yield v.json();return{fid:b.fid||t,registrationStatus:2,refreshToken:b.refreshToken,authToken:YE(b.authToken)}}throw yield fl("Create Installation",v)})).apply(this,arguments)}function _v(n){return new Promise(e=>{setTimeout(e,n)})}const TS=/^[cdef][\w-]{21}$/,wv="";function SS(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function Ev(n){return function XE(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return TS.test(t)?t:wv}catch{return wv}}function Xc(n){return`${n.appName}!${n.appId}`}const pl=new Map;function eb(n,e){const t=Xc(n);tb(t,e),function MS(n,e){const t=function nb(){return!gl&&"BroadcastChannel"in self&&(gl=new BroadcastChannel("[Firebase] FID Change"),gl.onmessage=n=>{tb(n.data.key,n.data.fid)}),gl}();t&&t.postMessage({key:n,fid:e}),function rb(){0===pl.size&&gl&&(gl.close(),gl=null)}()}(t,e)}function tb(n,e){const t=pl.get(n);if(t)for(const r of t)r(e)}let gl=null;const ib="firebase-installations-database",sb=1,ml="firebase-installations-store";let bv=null;function Jp(){return bv||(bv=function wS(n,e,{blocked:t,upgrade:r,blocking:i,terminated:u}={}){const l=indexedDB.open(n,e),g=ra(l);return r&&l.addEventListener("upgradeneeded",v=>{r(ra(l.result),v.oldVersion,v.newVersion,ra(l.transaction))}),t&&l.addEventListener("blocked",()=>t()),g.then(v=>{u&&v.addEventListener("close",()=>u()),i&&v.addEventListener("versionchange",()=>i())}).catch(()=>{}),g}(ib,sb,{upgrade:(n,e)=>{0===e&&n.createObjectStore(ml)}})),bv}function Xp(n,e){return Iv.apply(this,arguments)}function Iv(){return(Iv=(0,J.Z)(function*(n,e){const t=Xc(n),i=(yield Jp()).transaction(ml,"readwrite"),u=i.objectStore(ml),l=yield u.get(t);return yield u.put(e,t),yield i.done,(!l||l.fid!==e.fid)&&eb(n,e.fid),e})).apply(this,arguments)}function Cv(n){return Jh.apply(this,arguments)}function Jh(){return(Jh=(0,J.Z)(function*(n){const e=Xc(n),r=(yield Jp()).transaction(ml,"readwrite");yield r.objectStore(ml).delete(e),yield r.done})).apply(this,arguments)}function yl(n,e){return eg.apply(this,arguments)}function eg(){return(eg=(0,J.Z)(function*(n,e){const t=Xc(n),i=(yield Jp()).transaction(ml,"readwrite"),u=i.objectStore(ml),l=yield u.get(t),g=e(l);return void 0===g?yield u.delete(t):yield u.put(g,t),yield i.done,g&&(!l||l.fid!==g.fid)&&eb(n,g.fid),g})).apply(this,arguments)}function Xh(n){return Dv.apply(this,arguments)}function Dv(){return Dv=(0,J.Z)(function*(n){let e;const t=yield yl(n.appConfig,r=>{const i=function PS(n){return kS(n||{fid:SS(),registrationStatus:0})}(r),u=function Tv(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(ia.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function RS(n,e){return tg.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:ed(n)}:{installationEntry:e}}(n,i);return e=u.registrationPromise,u.installationEntry});return t.fid===wv?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),Dv.apply(this,arguments)}function tg(){return tg=(0,J.Z)(function*(n,e){try{const t=yield function yv(n,e){return vv.apply(this,arguments)}(n,e);return Xp(n.appConfig,t)}catch(t){throw hv(t)&&409===t.customData.serverCode?yield Cv(n.appConfig):yield Xp(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),tg.apply(this,arguments)}function ed(n){return ng.apply(this,arguments)}function ng(){return(ng=(0,J.Z)(function*(n){let e=yield ob(n.appConfig);for(;1===e.registrationStatus;)yield _v(100),e=yield ob(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield Xh(n);return r||t}return e})).apply(this,arguments)}function ob(n){return yl(n,e=>{if(!e)throw ia.create("installation-not-found");return kS(e)})}function kS(n){return function ab(n){return 1===n.registrationStatus&&n.registrationTime+KE<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function Av(){return(Av=(0,J.Z)(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=function xv(n,{fid:e}){return`${fv(n)}/${e}/authTokens:generate`}(n,t),i=function QE(n,{refreshToken:e}){const t=gv(n);return t.append("Authorization",function DS(n){return`${Jc} ${n}`}(e)),t}(n,t),u=e.getImmediate({optional:!0});if(u){const b=yield u.getHeartbeatsHeader();b&&i.append("x-firebase-client",b)}const g={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:dv,appId:n.appId}})},v=yield Qp(()=>fetch(r,g));if(v.ok)return YE(yield v.json());throw yield fl("Generate Auth Token",v)})).apply(this,arguments)}function Mv(n){return rg.apply(this,arguments)}function rg(){return rg=(0,J.Z)(function*(n,e=!1){let t;const r=yield yl(n.appConfig,u=>{if(!lb(u))throw ia.create("not-registered");const l=u.authToken;if(!e&&function NS(n){return 2===n.requestStatus&&!function OS(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+bS}(n)}(l))return u;if(1===l.requestStatus)return t=function Pv(n,e){return ig.apply(this,arguments)}(n,e),u;{if(!navigator.onLine)throw ia.create("app-offline");const g=function FS(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}(u);return t=function ub(n,e){return sg.apply(this,arguments)}(n,g),g}});return t?yield t:r.authToken}),rg.apply(this,arguments)}function ig(){return(ig=(0,J.Z)(function*(n,e){let t=yield Rv(n.appConfig);for(;1===t.authToken.requestStatus;)yield _v(100),t=yield Rv(n.appConfig);const r=t.authToken;return 0===r.requestStatus?Mv(n,e):r})).apply(this,arguments)}function Rv(n){return yl(n,e=>{if(!lb(e))throw ia.create("not-registered");return function cb(n){return 1===n.requestStatus&&n.requestTime+KE<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function sg(){return sg=(0,J.Z)(function*(n,e){try{const t=yield function Sv(n,e){return Av.apply(this,arguments)}(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield Xp(n.appConfig,r),t}catch(t){if(!hv(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Xp(n.appConfig,r)}else yield Cv(n.appConfig);throw t}}),sg.apply(this,arguments)}function lb(n){return void 0!==n&&2===n.registrationStatus}function og(){return(og=(0,J.Z)(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield Xh(e);return r?r.catch(console.error):Mv(e).catch(console.error),t.fid})).apply(this,arguments)}function kv(){return kv=(0,J.Z)(function*(n,e=!1){const t=n;return yield function oR(n){return Nv.apply(this,arguments)}(t),(yield Mv(t,e)).token}),kv.apply(this,arguments)}function Nv(){return(Nv=(0,J.Z)(function*(n){const{registrationPromise:e}=yield Xh(n);e&&(yield e)})).apply(this,arguments)}function Lv(n){return ia.create("missing-app-config-values",{valueName:n})}const db="installations",ef=n=>{const e=n.getProvider("app").getImmediate(),t=function BS(n){if(!n||!n.options)throw Lv("App Configuration");if(!n.name)throw Lv("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Lv(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:(0,nn._getProvider)(e,"heartbeat"),_delete:()=>Promise.resolve()}},hb=n=>{const e=n.getProvider("app").getImmediate(),t=(0,nn._getProvider)(e,db).getImmediate();return{getId:()=>function sR(n){return og.apply(this,arguments)}(t),getToken:i=>function LS(n){return kv.apply(this,arguments)}(t,i)}};(function fb(){(0,nn._registerComponent)(new _i.wA(db,ef,"PUBLIC")),(0,nn._registerComponent)(new _i.wA("installations-internal",hb,"PRIVATE"))})(),(0,nn.registerVersion)(Qh,cv),(0,nn.registerVersion)(Qh,cv,"esm2017");const ag="@firebase/remote-config",ts=new _t.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class yb{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return(0,J.Z)(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const u=yield t.client.fetch(e),l=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===u.status&&l.push(t.storage.setLastSuccessfulFetchResponse(u)),yield Promise.all(l),u})()}}function vb(n=navigator){return n.languages&&n.languages[0]||n.language}class $v{constructor(e,t,r,i,u,l){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=u,this.appId=l}fetch(e){var t=this;return(0,J.Z)(function*(){const[r,i]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),l=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,g={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},v={sdk_version:t.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:t.appId,language_code:vb()},b={method:"POST",headers:g,body:JSON.stringify(v)},T=fetch(l,b),M=new Promise((Ge,mt)=>{e.signal.addEventListener(()=>{const yt=new Error("The operation was aborted.");yt.name="AbortError",mt(yt)})});let $;try{yield Promise.race([T,M]),$=yield T}catch(Ge){let mt="fetch-client-network";throw"AbortError"===Ge?.name&&(mt="fetch-timeout"),ts.create(mt,{originalErrorMessage:Ge?.message})}let Z=$.status;const ie=$.headers.get("ETag")||void 0;let ve,Ae;if(200===$.status){let Ge;try{Ge=yield $.json()}catch(mt){throw ts.create("fetch-client-parse",{originalErrorMessage:mt?.message})}ve=Ge.entries,Ae=Ge.state}if("INSTANCE_STATE_UNSPECIFIED"===Ae?Z=500:"NO_CHANGE"===Ae?Z=304:("NO_TEMPLATE"===Ae||"EMPTY_CONFIG"===Ae)&&(ve={}),304!==Z&&200!==Z)throw ts.create("fetch-status",{httpStatus:Z});return{status:Z,eTag:ie,config:ve}})()}}class zv{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,J.Z)(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var i=this;return(0,J.Z)(function*(){yield function _b(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),u=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(u),r(ts.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const u=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),u}catch(u){if(!function Hv(n){if(!(n instanceof _t.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(u))throw u;const l={throttleEndTimeMillis:Date.now()+(0,_t.$s)(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(l),i.attemptFetch(e,l)}})()}}class qv{constructor(e,t,r,i,u){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=u,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ug(n,e){const t=n.target.error||void 0;return ts.create(e,{originalErrorMessage:t&&t?.message})}const El="app_namespace_store";class Wv{constructor(e,t,r,i=function Eb(){return new Promise((n,e)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=r=>{e(ug(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(El,{keyPath:"compositeKey"})}}catch(t){e(ts.create("storage-open",{originalErrorMessage:t?.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,J.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,u)=>{const g=r.transaction([El],"readonly").objectStore(El),v=t.createCompositeKey(e);try{const b=g.get(v);b.onerror=T=>{u(ug(T,"storage-get"))},b.onsuccess=T=>{const M=T.target.result;i(M?M.value:void 0)}}catch(b){u(ts.create("storage-get",{originalErrorMessage:b?.message}))}})})()}set(e,t){var r=this;return(0,J.Z)(function*(){const i=yield r.openDbPromise;return new Promise((u,l)=>{const v=i.transaction([El],"readwrite").objectStore(El),b=r.createCompositeKey(e);try{const T=v.put({compositeKey:b,value:t});T.onerror=M=>{l(ug(M,"storage-set"))},T.onsuccess=()=>{u()}}catch(T){l(ts.create("storage-set",{originalErrorMessage:T?.message}))}})})()}delete(e){var t=this;return(0,J.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,u)=>{const g=r.transaction([El],"readwrite").objectStore(El),v=t.createCompositeKey(e);try{const b=g.delete(v);b.onerror=T=>{u(ug(T,"storage-delete"))},b.onsuccess=()=>{i()}}catch(b){u(ts.create("storage-delete",{originalErrorMessage:b?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class bb{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,J.Z)(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),u=yield t;u&&(e.lastFetchStatus=u);const l=yield r;l&&(e.lastSuccessfulFetchTimestampMillis=l);const g=yield i;g&&(e.activeConfig=g)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function XS(){return cg.apply(this,arguments)}function cg(){return(cg=(0,J.Z)(function*(){if(!(0,_t.hl)())return!1;try{return yield(0,_t.eu)()}catch{return!1}})).apply(this,arguments)}!function QS(){(0,nn._registerComponent)(new _i.wA("remote-config",function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ts.create("registration-window");if(!(0,_t.hl)())throw ts.create("indexed-db-unavailable");const{projectId:u,apiKey:l,appId:g}=r.options;if(!u)throw ts.create("registration-project-id");if(!l)throw ts.create("registration-api-key");if(!g)throw ts.create("registration-app-id");const v=new Wv(g,r.name,t=t||"firebase"),b=new bb(v),T=new Us.Yd(ag);T.logLevel=Us.in.ERROR;const M=new $v(i,nn.SDK_VERSION,t,u,l,g),$=new zv(M,v),Z=new yb($,v,b,T),ie=new qv(r,Z,b,v,T);return function WS(n){const e=(0,_t.m9)(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(ie),ie},"PUBLIC").setMultipleInstances(!0)),(0,nn.registerVersion)(ag,"0.4.4"),(0,nn.registerVersion)(ag,"0.4.4","esm2017")}();const Ib=(n,e)=>e.some(t=>n instanceof t);let Cb,Zv;const bl=new WeakMap,Kv=new WeakMap,Db=new WeakMap,Tb=new WeakMap,Sb=new WeakMap;let Il={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return Kv.get(n);if("objectStoreNames"===e)return n.objectStoreNames||Db.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return vo(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function nA(n){return"function"==typeof n?function Qv(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function wi(){return Zv||(Zv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(Jv(this),e),vo(bl.get(this))}:function(...e){return vo(n.apply(Jv(this),e))}:function(e,...t){const r=n.call(Jv(this),e,...t);return Db.set(r,e.sort?e.sort():[e]),vo(r)}}(n):(n instanceof IDBTransaction&&function Yv(n){if(Kv.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",u),n.removeEventListener("error",l),n.removeEventListener("abort",l)},u=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",u),n.addEventListener("error",l),n.addEventListener("abort",l)});Kv.set(n,e)}(n),Ib(n,function eA(){return Cb||(Cb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,Il):n)}function vo(n){if(n instanceof IDBRequest)return function Ab(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",u),n.removeEventListener("error",l)},u=()=>{t(vo(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",u),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&bl.set(t,n)}).catch(()=>{}),Sb.set(e,n),e}(n);if(Tb.has(n))return Tb.get(n);const e=nA(n);return e!==n&&(Tb.set(n,e),Sb.set(e,n)),e}const Jv=n=>Sb.get(n);function xb(n,e,{blocked:t,upgrade:r,blocking:i,terminated:u}={}){const l=indexedDB.open(n,e),g=vo(l);return r&&l.addEventListener("upgradeneeded",v=>{r(vo(l.result),v.oldVersion,v.newVersion,vo(l.transaction))}),t&&l.addEventListener("blocked",()=>t()),g.then(v=>{u&&v.addEventListener("close",()=>u()),i&&v.addEventListener("versionchange",()=>i())}).catch(()=>{}),g}function Xv(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),vo(t).then(()=>{})}const e_=["get","getKey","getAll","getAllKeys","count"],Mb=["put","add","delete","clear"],dg=new Map;function tf(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(dg.get(e))return dg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Mb.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!e_.includes(t))return;const u=function(){var l=(0,J.Z)(function*(g,...v){const b=this.transaction(g,i?"readwrite":"readonly");let T=b.store;return r&&(T=T.index(v.shift())),(yield Promise.all([T[t](...v),i&&b.done]))[0]});return function(v){return l.apply(this,arguments)}}();return dg.set(e,u),u}!function tA(n){Il=n(Il)}(n=>({...n,get:(e,t,r)=>tf(e,t)||n.get(e,t,r),has:(e,t)=>!!tf(e,t)||n.has(e,t)}));const t_="/firebase-messaging-sw.js",gR="/firebase-cloud-messaging-push-scope",n_="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",rA="https://fcmregistrations.googleapis.com/v1",r_="google.c.a.c_id",td="google.c.a.c_l",iA="google.c.a.ts",Pb="google.c.a.e";var nf=(()=>{return(n=nf||(nf={})).PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",nf;var n})();function sa(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function mR(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let u=0;u<r.length;++u)i[u]=r.charCodeAt(u);return i}const i_="fcm_token_details_db",sA=5,kb="fcm_token_object_Store";function hg(){return hg=(0,J.Z)(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(u=>u.name).includes(i_))return null;let e=null;return(yield xb(i_,sA,{upgrade:(r=(0,J.Z)(function*(i,u,l,g){var v;if(u<2||!i.objectStoreNames.contains(kb))return;const b=g.objectStore(kb),T=yield b.index("fcmSenderId").get(n);if(yield b.clear(),T)if(2===u){const M=T;if(!M.auth||!M.p256dh||!M.endpoint)return;e={token:M.fcmToken,createTime:null!==(v=M.createTime)&&void 0!==v?v:Date.now(),subscriptionOptions:{auth:M.auth,p256dh:M.p256dh,endpoint:M.endpoint,swScope:M.swScope,vapidKey:"string"==typeof M.vapidKey?M.vapidKey:sa(M.vapidKey)}}}else if(3===u){const M=T;e={token:M.fcmToken,createTime:M.createTime,subscriptionOptions:{auth:sa(M.auth),p256dh:sa(M.p256dh),endpoint:M.endpoint,swScope:M.swScope,vapidKey:sa(M.vapidKey)}}}else if(4===u){const M=T;e={token:M.fcmToken,createTime:M.createTime,subscriptionOptions:{auth:sa(M.auth),p256dh:sa(M.p256dh),endpoint:M.endpoint,swScope:M.swScope,vapidKey:sa(M.vapidKey)}}}}),function(u,l,g,v){return r.apply(this,arguments)})})).close(),yield Xv(i_),yield Xv("fcm_vapid_details_db"),yield Xv("undefined"),function oA(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),hg.apply(this,arguments)}const Ob="firebase-messaging-database",Fb=1,Cl="firebase-messaging-store";let s_=null;function fg(){return s_||(s_=xb(Ob,Fb,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Cl)}})),s_}function Lb(n){return pg.apply(this,arguments)}function pg(){return pg=(0,J.Z)(function*(n){const e=a_(n),r=yield(yield fg()).transaction(Cl).objectStore(Cl).get(e);if(r)return r;{const i=yield function Nb(n){return hg.apply(this,arguments)}(n.appConfig.senderId);if(i)return yield gg(n,i),i}}),pg.apply(this,arguments)}function gg(n,e){return mg.apply(this,arguments)}function mg(){return(mg=(0,J.Z)(function*(n,e){const t=a_(n),i=(yield fg()).transaction(Cl,"readwrite");return yield i.objectStore(Cl).put(e,t),yield i.done,e})).apply(this,arguments)}function o_(){return(o_=(0,J.Z)(function*(n){const e=a_(n),r=(yield fg()).transaction(Cl,"readwrite");yield r.objectStore(Cl).delete(e),yield r.done})).apply(this,arguments)}function a_({appConfig:n}){return n.appId}const zr=new _t.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function vR(n,e){return Ub.apply(this,arguments)}function Ub(){return(Ub=(0,J.Z)(function*(n,e){const t=yield Hb(n),r=uA(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let u;try{u=yield(yield fetch($b(n.appConfig),i)).json()}catch(l){throw zr.create("token-subscribe-failed",{errorInfo:l?.toString()})}if(u.error)throw zr.create("token-subscribe-failed",{errorInfo:u.error.message});if(!u.token)throw zr.create("token-subscribe-no-token");return u.token})).apply(this,arguments)}function Bb(){return(Bb=(0,J.Z)(function*(n,e){const t=yield Hb(n),r=uA(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let u;try{u=yield(yield fetch(`${$b(n.appConfig)}/${e.token}`,i)).json()}catch(l){throw zr.create("token-update-failed",{errorInfo:l?.toString()})}if(u.error)throw zr.create("token-update-failed",{errorInfo:u.error.message});if(!u.token)throw zr.create("token-update-no-token");return u.token})).apply(this,arguments)}function aA(n,e){return jb.apply(this,arguments)}function jb(){return(jb=(0,J.Z)(function*(n,e){const r={method:"DELETE",headers:yield Hb(n)};try{const u=yield(yield fetch(`${$b(n.appConfig)}/${e}`,r)).json();if(u.error)throw zr.create("token-unsubscribe-failed",{errorInfo:u.error.message})}catch(i){throw zr.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})).apply(this,arguments)}function $b({projectId:n}){return`${rA}/projects/${n}/registrations`}function Hb(n){return nd.apply(this,arguments)}function nd(){return(nd=(0,J.Z)(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})})).apply(this,arguments)}function uA({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==n_&&(i.web.applicationPubKey=r),i}const zb=6048e5;function vg(){return vg=(0,J.Z)(function*(n){const e=yield function wR(n,e){return c_.apply(this,arguments)}(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:sa(e.getKey("auth")),p256dh:sa(e.getKey("p256dh"))},r=yield Lb(n.firebaseDependencies);if(r){if(function lA(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}(r.subscriptionOptions,t))return Date.now()>=r.createTime+zb?function l_(n,e){return _g.apply(this,arguments)}(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield aA(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return qb(n.firebaseDependencies,t)}return qb(n.firebaseDependencies,t)}),vg.apply(this,arguments)}function Gb(){return Gb=(0,J.Z)(function*(n){const e=yield Lb(n.firebaseDependencies);e&&(yield aA(n.firebaseDependencies,e.token),yield function Vb(n){return o_.apply(this,arguments)}(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()}),Gb.apply(this,arguments)}function _g(){return _g=(0,J.Z)(function*(n,e){try{const t=yield function _R(n,e){return Bb.apply(this,arguments)}(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield gg(n.firebaseDependencies,r),t}catch(t){throw yield function u_(n){return Gb.apply(this,arguments)}(n),t}}),_g.apply(this,arguments)}function qb(n,e){return Wb.apply(this,arguments)}function Wb(){return(Wb=(0,J.Z)(function*(n,e){const r={token:yield vR(n,e),createTime:Date.now(),subscriptionOptions:e};return yield gg(n,r),r.token})).apply(this,arguments)}function c_(){return(c_=(0,J.Z)(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:mR(e)})})).apply(this,arguments)}function rf(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function cA(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const u=e.notification.icon;u&&(n.notification.icon=u)}(e,n),function ER(n,e){e.data&&(n.data=e.data)}(e,n),function bR(n,e){var t,r,i,u,l;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const g=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(u=e.notification)||void 0===u?void 0:u.click_action;g&&(n.fcmOptions.link=g);const v=null===(l=e.fcmOptions)||void 0===l?void 0:l.analytics_label;v&&(n.fcmOptions.analyticsLabel=v)}(e,n),e}function Zb(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function d_(n){return zr.create("missing-app-config-values",{valueName:n})}Zb("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Zb("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class CR{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function dA(n){if(!n||!n.options)throw d_("App Configuration Object");if(!n.name)throw d_("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw d_(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function Kb(n){return wg.apply(this,arguments)}function wg(){return(wg=(0,J.Z)(function*(n){try{n.swRegistration=yield navigator.serviceWorker.register(t_,{scope:gR}),n.swRegistration.update().catch(()=>{})}catch(e){throw zr.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function Qb(){return(Qb=(0,J.Z)(function*(n,e){if(!e&&!n.swRegistration&&(yield Kb(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw zr.create("invalid-sw-registration");n.swRegistration=e}})).apply(this,arguments)}function h_(){return(h_=(0,J.Z)(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=n_)})).apply(this,arguments)}function f_(){return f_=(0,J.Z)(function*(n,e){if(!navigator)throw zr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw zr.create("permission-blocked");return yield function Bs(n,e){return h_.apply(this,arguments)}(n,e?.vapidKey),yield function Yb(n,e){return Qb.apply(this,arguments)}(n,e?.serviceWorkerRegistration),function yg(n){return vg.apply(this,arguments)}(n)}),f_.apply(this,arguments)}function Ni(){return(Ni=(0,J.Z)(function*(n,e,t){const r=function hA(n){switch(n){case nf.NOTIFICATION_CLICKED:return"notification_open";case nf.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[r_],message_name:t[td],message_time:t[iA],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function g_(){return g_=(0,J.Z)(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===nf.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(rf(t)):n.onMessageHandler.next(rf(t)));const r=t.data;(function IR(n){return"object"==typeof n&&!!n&&r_ in n})(r)&&"1"===r[Pb]&&(yield function DR(n,e,t){return Ni.apply(this,arguments)}(n,t.messageType,r))}),g_.apply(this,arguments)}const Jb="@firebase/messaging",Xb=n=>{const e=new CR(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function p_(n,e){return g_.apply(this,arguments)}(e,t)),e},eI=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function Eg(n,e){return f_.apply(this,arguments)}(e,r)}};function m_(){return Ig.apply(this,arguments)}function Ig(){return(Ig=(0,J.Z)(function*(){try{yield(0,_t.eu)()}catch{return!1}return typeof window<"u"&&(0,_t.hl)()&&(0,_t.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function fA(){(0,nn._registerComponent)(new _i.wA("messaging",Xb,"PUBLIC")),(0,nn._registerComponent)(new _i.wA("messaging-internal",eI,"PRIVATE")),(0,nn.registerVersion)(Jb,"0.12.4"),(0,nn.registerVersion)(Jb,"0.12.4","esm2017")}();const sf="analytics",yA="firebase_id",TR="origin",vA=6e4,_A="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",y_="https://www.googletagmanager.com/gtag/js",Gr=new Us.Yd("@firebase/analytics"),Oi=new _t.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function iI(n){if(!n.startsWith(y_)){const e=Oi.create("invalid-gtag-resource",{gtagURL:n});return Gr.warn(e.message),""}return n}function sI(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function Dg(){return(Dg=(0,J.Z)(function*(n,e,t,r,i,u){const l=r[i];try{if(l)yield e[l];else{const v=(yield sI(t)).find(b=>b.measurementId===i);v&&(yield e[v.appId])}}catch(g){Gr.error(g)}n("config",i,u)})).apply(this,arguments)}function Tg(){return(Tg=(0,J.Z)(function*(n,e,t,r,i){try{let u=[];if(i&&i.send_to){let l=i.send_to;Array.isArray(l)||(l=[l]);const g=yield sI(t);for(const v of l){const b=g.find(M=>M.measurementId===v),T=b&&e[b.appId];if(!T){u=[];break}u.push(T)}}0===u.length&&(u=Object.values(e)),yield Promise.all(u),n("event",r,i||{})}catch(u){Gr.error(u)}})).apply(this,arguments)}const cI=30,bA=new class EA{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function AR(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function xg(){return(xg=(0,J.Z)(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:AR(r)},u=_A.replace("{app-id}",t),l=yield fetch(u,i);if(200!==l.status&&304!==l.status){let g="";try{const v=yield l.json();null!==(e=v.error)&&void 0!==e&&e.message&&(g=v.error.message)}catch{}throw Oi.create("config-fetch-failed",{httpStatus:l.status,responseMessage:g})}return l.json()})).apply(this,arguments)}function __(){return(__=(0,J.Z)(function*(n,e=bA,t){const{appId:r,apiKey:i,measurementId:u}=n.options;if(!r)throw Oi.create("no-app-id");if(!i){if(u)return{measurementId:u,appId:r};throw Oi.create("no-api-key")}const l=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},g=new RR;return setTimeout((0,J.Z)(function*(){g.abort()}),void 0!==t?t:vA),dI({appId:r,apiKey:i,measurementId:u},l,g,e)})).apply(this,arguments)}function dI(n,e,t){return hI.apply(this,arguments)}function hI(){return hI=(0,J.Z)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=bA){var u;const{appId:l,measurementId:g}=n;try{yield function MR(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),u=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(u),r(Oi.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(v){if(g)return Gr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${g} provided in the "measurementId" field in the local Firebase config. [${v?.message}]`),{appId:l,measurementId:g};throw v}try{const v=yield function xR(n){return xg.apply(this,arguments)}(n);return i.deleteThrottleMetadata(l),v}catch(v){const b=v;if(!function PR(n){if(!(n instanceof _t.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(b)){if(i.deleteThrottleMetadata(l),g)return Gr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${g} provided in the "measurementId" field in the local Firebase config. [${b?.message}]`),{appId:l,measurementId:g};throw v}const T=503===Number(null===(u=b?.customData)||void 0===u?void 0:u.httpStatus)?(0,_t.$s)(t,i.intervalMillis,cI):(0,_t.$s)(t,i.intervalMillis),M={throttleEndTimeMillis:Date.now()+T,backoffCount:t+1};return i.setThrottleMetadata(l,M),Gr.debug(`Calling attemptFetch again in ${T} millis`),dI(n,M,r,i)}}),hI.apply(this,arguments)}class RR{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let fI,id;function rd(){return(rd=(0,J.Z)(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const u=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:u}))}})).apply(this,arguments)}function mI(){return(mI=(0,J.Z)(function*(){if(!(0,_t.hl)())return Gr.warn(Oi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,_t.eu)()}catch(n){return Gr.warn(Oi.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0})).apply(this,arguments)}function C_(){return C_=(0,J.Z)(function*(n,e,t,r,i,u,l){var g;const v=function IA(n){return __.apply(this,arguments)}(n);v.then(Z=>{t[Z.measurementId]=Z.appId,n.options.measurementId&&Z.measurementId!==n.options.measurementId&&Gr.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${Z.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Z=>Gr.error(Z)),e.push(v);const b=function kR(){return mI.apply(this,arguments)}().then(Z=>{if(Z)return r.getId()}),[T,M]=yield Promise.all([v,b]);(function Ag(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(y_)&&t.src.includes(n))return t;return null})(u)||function SR(n,e){const t=function oI(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:iI}),r=document.createElement("script"),i=`${y_}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(u,T.measurementId),id&&(i("consent","default",id),function TA(n){id=n}(void 0)),i("js",new Date);const $=null!==(g=l?.config)&&void 0!==g?g:{};return $[TR]="firebase",$.update=!0,null!=M&&($[yA]=M),i("config",T.measurementId,$),fI&&(i("set",fI),function SA(n){fI=n}(void 0)),T.measurementId}),C_.apply(this,arguments)}class AA{constructor(e){this.app=e}_delete(){return delete wo[this.app.options.appId],Promise.resolve()}}let wo={},vI=[];const D_={};let _I,Eo,lf="dataLayer",T_="gtag",Mg=!1;function EI(n,e,t){!function NR(){const n=[];if((0,_t.ru)()&&n.push("This is a browser extension environment."),(0,_t.zI)()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Oi.create("invalid-analytics-context",{errorInfo:e});Gr.warn(t.message)}}();const r=n.options.appId;if(!r)throw Oi.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw Oi.create("no-api-key");Gr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=wo[r])throw Oi.create("already-exists",{id:r});if(!Mg){!function v_(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(lf);const{wrappedGtag:u,gtagCore:l}=function Sg(n,e,t,r,i){let u=function(...l){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(u=window[i]),window[i]=function lI(n,e,t,r){function u(){return u=(0,J.Z)(function*(l,...g){try{if("event"===l){const[v,b]=g;yield function uI(n,e,t,r,i){return Tg.apply(this,arguments)}(n,e,t,v,b)}else if("config"===l){const[v,b]=g;yield function aI(n,e,t,r,i,u){return Dg.apply(this,arguments)}(n,e,t,r,v,b)}else if("consent"===l){const[v]=g;n("consent","update",v)}else if("get"===l){const[v,b,T]=g;n("get",v,b,T)}else if("set"===l){const[v]=g;n("set",v)}else n(l,...g)}catch(v){Gr.error(v)}}),u.apply(this,arguments)}return function i(l){return u.apply(this,arguments)}}(u,n,e,t),{gtagCore:u,wrappedGtag:window[i]}}(wo,vI,D_,lf,T_);Eo=u,_I=l,Mg=!0}return wo[r]=function yI(n,e,t,r,i,u,l){return C_.apply(this,arguments)}(n,vI,D_,e,_I,lf,t),new AA(n)}function MA(){return II.apply(this,arguments)}function II(){return(II=(0,J.Z)(function*(){if((0,_t.ru)()||!(0,_t.zI)()||!(0,_t.hl)())return!1;try{return yield(0,_t.eu)()}catch{return!1}})).apply(this,arguments)}const PA="@firebase/analytics";!function UR(){(0,nn._registerComponent)(new _i.wA(sf,(e,{options:t})=>EI(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),(0,nn._registerComponent)(new _i.wA("analytics-internal",function n(e){try{const t=e.getProvider(sf).getImmediate();return{logEvent:(r,i,u)=>function LR(n,e,t,r){n=(0,_t.m9)(n),function CA(n,e,t,r,i){return rd.apply(this,arguments)}(Eo,wo[n.app.options.appId],e,t,r).catch(i=>Gr.error(i))}(t,r,i,u)}}catch(t){throw Oi.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,nn.registerVersion)(PA,"0.10.0"),(0,nn.registerVersion)(PA,"0.10.0","esm2017")}();const $R=new class jR extends jE{}(class BR extends fS{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}});var o=V(9468),a=V(5363);const c=new d.GfV("7.5.0"),h="__angularfire_symbol__analyticsIsSupportedValue",p="__angularfire_symbol__analyticsIsSupported",y="__angularfire_symbol__remoteConfigIsSupportedValue",E="__angularfire_symbol__remoteConfigIsSupported",D="__angularfire_symbol__messagingIsSupportedValue",S="__angularfire_symbol__messagingIsSupported";function fe(n,e,t){if(e){if(1===e.length)return e[0];const u=e.filter(l=>l.app===t);if(1===u.length)return u[0]}return t.container.getProvider(n).getImmediate({optional:!0})}globalThis[p]||(globalThis[p]=MA().then(n=>globalThis[h]=n).catch(()=>globalThis[h]=!1)),globalThis[S]||(globalThis[S]=m_().then(n=>globalThis[D]=n).catch(()=>globalThis[D]=!1)),globalThis[E]||(globalThis[E]=XS().then(n=>globalThis[y]=n).catch(()=>globalThis[y]=!1));const Fe=(n,e)=>{const t=e?[e]:(0,nn.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(l=>{r.includes(l)||r.push(l)})}),r};function We(){}class ut{constructor(e,t=$R){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(l){i.runGuarded(()=>{e.apply(this,[l])})},t,r)}}class Nt{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",We,{},We,We)),t.pipe(Nr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let be=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new ut(Zone.current)),this.insideAngular=t.run(()=>new ut(Zone.current,iv)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ot(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function Tn(n){return Ot().ngZone.run(()=>n())}function js(n){return Ot(),function PL(n){return function(t){return(t=t.lift(new Nt(n.ngZone))).pipe((0,o.R)(n.outsideAngular),(0,a.Q)(n.insideAngular))}}(Ot())(n)}const RL=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),Tn(()=>n.apply(void 0,r))},kA=(n,e)=>function(){let t;const r=arguments;for(let u=0;u<arguments.length;u++)"function"==typeof r[u]&&(e&&(t||(t=Tn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",We,{},We,We)))),r[u]=RL(r[u],t));const i=function jn(n){return Ot().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof oi.y){const u=Ot();return i.pipe((0,o.R)(u.outsideAngular),(0,a.Q)(u.insideAngular))}return Tn(()=>i)}return i instanceof oi.y?i.pipe(js):i instanceof Promise?Tn(()=>new Promise((u,l)=>i.then(g=>Tn(()=>u(g)),g=>Tn(()=>l(g))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:Tn(()=>i)};function NA(){return(0,$r.e)((n,e)=>{let t,r=!1;n.subscribe((0,wr.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}function NL(n,e){return n===e}var st,aa=V(2011),OL=(V(9568),V(3942)),FL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ua={},OA=OA||{},Qt=FL||self;function CI(){}function DI(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function A_(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var FA="closure_uid_"+(1e9*Math.random()>>>0),VL=0;function UL(n,e,t){return n.call.apply(n.bind,arguments)}function BL(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Fi(n,e,t){return(Fi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?UL:BL).apply(null,arguments)}function TI(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ui(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,u){for(var l=Array(arguments.length-2),g=2;g<arguments.length;g++)l[g-2]=arguments[g];return e.prototype[i].apply(r,l)}}function sd(){this.s=this.s,this.o=this.o}sd.prototype.s=!1,sd.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),0)&&function LL(n){Object.prototype.hasOwnProperty.call(n,FA)&&n[FA]||(n[FA]=++VL)}(this)},sd.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const HR=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function LA(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function zR(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(DI(r)){const i=n.length||0,u=r.length||0;n.length=i+u;for(let l=0;l<u;l++)n[i+l]=r[l]}else n.push(r)}}function Li(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Li.prototype.h=function(){this.defaultPrevented=!0};var $L=function(){if(!Qt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Qt.addEventListener("test",CI,e),Qt.removeEventListener("test",CI,e)}catch{}return n}();function SI(n){return/^[\s\xa0]*$/.test(n)}var GR=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function VA(n,e){return n<e?-1:n>e?1:0}function AI(){var n=Qt.navigator;return n&&(n=n.userAgent)?n:""}function iu(n){return-1!=AI().indexOf(n)}function UA(n){return UA[" "](n),n}function qR(n,e,t){return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}UA[" "]=CI;var xI,n,HL=iu("Opera"),Pg=iu("Trident")||iu("MSIE"),WR=iu("Edge"),BA=WR||Pg,ZR=iu("Gecko")&&!(-1!=AI().toLowerCase().indexOf("webkit")&&!iu("Edge"))&&!(iu("Trident")||iu("MSIE"))&&!iu("Edge"),zL=-1!=AI().toLowerCase().indexOf("webkit")&&!iu("Edge");function KR(){var n=Qt.document;return n?n.documentMode:void 0}e:{var jA="",$A=(n=AI(),ZR?/rv:([^\);]+)(\)|;)/.exec(n):WR?/Edge\/([\d\.]+)/.exec(n):Pg?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):zL?/WebKit\/(\S+)/.exec(n):HL?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if($A&&(jA=$A?$A[1]:""),Pg){var HA=KR();if(null!=HA&&HA>parseFloat(jA)){xI=String(HA);break e}}xI=jA}var GL={},WL=Qt.document&&Pg&&(KR()||parseInt(xI,10))||void 0;function x_(n,e){if(Li.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(ZR){e:{try{UA(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:ZL[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&x_.$.h.call(this)}}ui(x_,Li);var ZL={2:"touch",3:"pen",4:"mouse"};x_.prototype.h=function(){x_.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var M_="closure_listenable_"+(1e6*Math.random()|0),KL=0;function YL(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++KL,this.fa=this.ia=!1}function MI(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function GA(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function QR(n){const e={};for(const t in n)e[t]=n[t];return e}const JR="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function XR(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<JR.length;u++)t=JR[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function PI(n){this.src=n,this.g={},this.h=0}function qA(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=HR(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(MI(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function WA(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return i}return-1}PI.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=WA(n,e,r,i);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new YL(e,this.src,u,!!r,i)).ia=t,n.push(e)),e};var ZA="closure_lm_"+(1e6*Math.random()|0),KA={};function ek(n,e,t,r,i){if(r&&r.once)return nk(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)ek(n,e[u],t,r,i);return null}return t=XA(t),n&&n[M_]?n.O(e,t,A_(r)?!!r.capture:!!r,i):tk(n,e,t,!1,r,i)}function tk(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var l=A_(i)?!!i.capture:!!i,g=QA(n);if(g||(n[ZA]=g=new PI(n)),(t=g.add(e,t,r,l,u)).proxy)return t;if(r=function QL(){const e=JL;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)$L||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(ik(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function nk(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)nk(n,e[u],t,r,i);return null}return t=XA(t),n&&n[M_]?n.P(e,t,A_(r)?!!r.capture:!!r,i):tk(n,e,t,!0,r,i)}function rk(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)rk(n,e[u],t,r,i);else r=A_(r)?!!r.capture:!!r,t=XA(t),n&&n[M_]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=WA(u=n.g[e],t,r,i))&&(MI(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=QA(n))&&(e=n.g[e.toString()],n=-1,e&&(n=WA(e,t,r,i)),(t=-1<n?e[n]:null)&&YA(t))}function YA(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[M_])qA(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(ik(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=QA(e))?(qA(t,n),0==t.h&&(t.src=null,e[ZA]=null)):MI(n)}}}function ik(n){return n in KA?KA[n]:KA[n]="on"+n}function JL(n,e){if(n.fa)n=!0;else{e=new x_(e,this);var t=n.listener,r=n.la||n.src;n.ia&&YA(n),n=t.call(r,e)}return n}function QA(n){return(n=n[ZA])instanceof PI?n:null}var JA="__closure_events_fn_"+(1e9*Math.random()>>>0);function XA(n){return"function"==typeof n?n:(n[JA]||(n[JA]=function(e){return n.handleEvent(e)}),n[JA])}function li(){sd.call(this),this.i=new PI(this),this.S=this,this.J=null}function Ei(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Li(e,n);else if(e instanceof Li)e.target=e.target||n;else{var i=e;XR(e=new Li(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];i=RI(l,r,!0,e)&&i}if(i=RI(l=e.g=n,r,!0,e)&&i,i=RI(l,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=RI(l=e.g=t[u],r,!1,e)&&i}function RI(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.fa&&l.capture==t){var g=l.listener,v=l.la||l.src;l.ia&&qA(n.i,l),i=!1!==g.call(v,r)&&i}}return i&&!r.defaultPrevented}ui(li,sd),li.prototype[M_]=!0,li.prototype.removeEventListener=function(n,e,t,r){rk(this,n,e,t,r)},li.prototype.N=function(){if(li.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)MI(t[r]);delete n.g[e],n.h--}}this.J=null},li.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},li.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var ex=Qt.JSON.stringify;function XL(){var n=ak;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var tx,sk=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new tV,n=>n.reset());class tV{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function nV(n){Qt.setTimeout(()=>{throw n},0)}function ok(n,e){tx||function rV(){var n=Qt.Promise.resolve(void 0);tx=function(){n.then(iV)}}(),nx||(tx(),nx=!0),ak.add(n,e)}var nx=!1,ak=new class eV{constructor(){this.h=this.g=null}add(e,t){const r=sk.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function iV(){for(var n;n=XL();){try{n.h.call(n.g)}catch(t){nV(t)}var e=sk;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}nx=!1}function kI(n,e){li.call(this),this.h=n||1,this.g=e||Qt,this.j=Fi(this.qb,this),this.l=Date.now()}function rx(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function ix(n,e,t){if("function"==typeof n)t&&(n=Fi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Fi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Qt.setTimeout(n,e||0)}function uk(n){n.g=ix(()=>{n.g=null,n.i&&(n.i=!1,uk(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ui(kI,li),(st=kI.prototype).ga=!1,st.T=null,st.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ei(this,"tick"),this.ga&&(rx(this),this.start()))}},st.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},st.N=function(){kI.$.N.call(this),rx(this),delete this.g};class sV extends sd{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:uk(this)}N(){super.N(),this.g&&(Qt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function P_(n){sd.call(this),this.h=n,this.g={}}ui(P_,sd);var lk=[];function ck(n,e,t,r){Array.isArray(t)||(t&&(lk[0]=t.toString()),t=lk);for(var i=0;i<t.length;i++){var u=ek(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function dk(n){GA(n.g,function(e,t){this.g.hasOwnProperty(t)&&YA(e)},n),n.g={}}function NI(){this.g=!0}function Rg(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function lV(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<i.length;l++)i[l]=""}}}return ex(t)}catch{return e}}(n,t)+(r?" "+r:"")})}P_.prototype.N=function(){P_.$.N.call(this),dk(this)},P_.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},NI.prototype.Ea=function(){this.g=!1},NI.prototype.info=function(){};var cf={},hk=null;function OI(){return hk=hk||new li}function fk(n){Li.call(this,cf.Ta,n)}function R_(n){const e=OI();Ei(e,new fk(e))}function pk(n,e){Li.call(this,cf.STAT_EVENT,n),this.stat=e}function ns(n){const e=OI();Ei(e,new pk(e,n))}function gk(n,e){Li.call(this,cf.Ua,n),this.size=e}function k_(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Qt.setTimeout(function(){n()},e)}cf.Ta="serverreachability",ui(fk,Li),cf.STAT_EVENT="statevent",ui(pk,Li),cf.Ua="timingevent",ui(gk,Li);var FI={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},mk={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function sx(){}function vk(){}sx.prototype.h=null;var ux,N_={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ox(){Li.call(this,"d")}function ax(){Li.call(this,"c")}function LI(){}function O_(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new P_(this),this.P=cV,this.V=new kI(n=BA?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new _k}function _k(){this.i=null,this.g="",this.h=!1}ui(ox,Li),ui(ax,Li),ui(LI,sx),LI.prototype.g=function(){return new XMLHttpRequest},LI.prototype.i=function(){return{}},ux=new LI;var cV=45e3,lx={},VI={};function cx(n,e,t){n.L=1,n.v=$I(Dl(e)),n.s=t,n.S=!0,wk(n,null)}function wk(n,e){n.G=Date.now(),F_(n),n.A=Dl(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),Mk(t.i,"t",r),n.C=0,t=n.l.I,n.h=new _k,n.g=eN(n.l,t?e:null,!n.s),0<n.O&&(n.M=new sV(Fi(n.Pa,n,n.g),n.O)),ck(n.U,n.g,"readystatechange",n.nb),e=n.I?QR(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),R_(),function oV(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var l="",g=u.split("&"),v=0;v<g.length;v++){var b=g[v].split("=");if(1<b.length){var T=b[0];b=b[1];var M=T.split("_");l=2<=M.length&&"type"==M[1]?l+(T+"=")+b+"&":l+(T+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function Ek(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function bk(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=dV(n,t),i==VI){4==e&&(n.o=4,ns(14),r=!1),Rg(n.j,n.m,null,"[Incomplete Response]");break}if(i==lx){n.o=4,ns(15),Rg(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Rg(n.j,n.m,i,null),dx(n,i)}Ek(n)&&i!=VI&&i!=lx&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ns(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ca&&(n.ca=!0,(e=n.l).g==n&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),_x(e),e.L=!0,ns(11))):(Rg(n.j,n.m,t,"[Invalid Chunked Response]"),df(n),L_(n))}function dV(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?VI:(t=Number(e.substring(t,r)),isNaN(t)?lx:(r+=1)+t>e.length?VI:(e=e.substr(r,t),n.C=r+t,e))}function F_(n){n.Y=Date.now()+n.P,Ik(n,n.P)}function Ik(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=k_(Fi(n.lb,n),e)}function UI(n){n.B&&(Qt.clearTimeout(n.B),n.B=null)}function L_(n){0==n.l.H||n.J||Yk(n.l,n)}function df(n){UI(n);var e=n.M;e&&"function"==typeof e.ra&&e.ra(),n.M=null,rx(n.V),dk(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.ra())}function dx(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||hx(t.h,n)))if(!n.K&&hx(t.h,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;ZI(t),qI(t)}vx(t),ns(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.M&&0==t.A&&!t.v&&(t.v=k_(Fi(t.ib,t),6e3));if(1>=kk(t.h)&&t.na){try{t.na()}catch{}t.na=void 0}}else ff(t,11)}else if((n.K||t.g==n)&&ZI(t),!SI(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let b=i[e];if(t.V=b[0],b=b[1],2==t.H)if("c"==b[0]){t.J=b[1],t.oa=b[2];const T=b[3];null!=T&&(t.qa=T,t.j.info("VER="+t.qa));const M=b[4];null!=M&&(t.Ga=M,t.j.info("SVER="+t.Ga));const $=b[5];null!=$&&"number"==typeof $&&0<$&&(t.K=r=1.5*$,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const Z=n.g;if(Z){const ie=Z.g?Z.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ie){var u=r.h;u.g||-1==ie.indexOf("spdy")&&-1==ie.indexOf("quic")&&-1==ie.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(fx(u,u.h),u.h=null))}if(r.F){const ve=Z.g?Z.g.getResponseHeader("X-HTTP-Session-Id"):null;ve&&(r.Da=ve,sr(r.G,r.F,ve))}}t.H=3,t.l&&t.l.Ba(),t.ca&&(t.S=Date.now()-n.G,t.j.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=Xk(r,r.I?r.oa:null,r.Y),l.K){Nk(r.h,l);var g=l,v=r.K;v&&g.setTimeout(v),g.B&&(UI(g),F_(g)),r.g=l}else Zk(r);0<t.i.length&&WI(t)}else"stop"!=b[0]&&"close"!=b[0]||ff(t,7);else 3==t.H&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?ff(t,7):yx(t):"noop"!=b[0]&&t.l&&t.l.Aa(b),t.A=0)}R_()}catch{}}function Ck(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(DI(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function fV(n){if(n.sa&&"function"==typeof n.sa)return n.sa();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(DI(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function hV(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(DI(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}(st=O_.prototype).setTimeout=function(n){this.P=n},st.nb=function(n){n=n.target;const e=this.M;e&&3==Tl(n)?e.l():this.Pa(n)},st.Pa=function(n){try{if(n==this.g)e:{const T=Tl(this.g);var e=this.g.Ia();if(this.g.da(),!(3>T)&&(3!=T||BA||this.g&&(this.h.h||this.g.ja()||$k(this.g)))){this.J||4!=T||7==e||R_(),UI(this);var t=this.g.da();this.aa=t;t:if(Ek(this)){var r=$k(this.g);n="";var i=r.length,u=4==Tl(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){df(this),L_(this);var l="";break t}this.h.i=new Qt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function aV(n,e,t,r,i,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.W,T,t),this.i){if(this.ba&&!this.K){t:{if(this.g){var g,v=this.g;if((g=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!SI(g)){var b=g;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,ns(12),df(this),L_(this);break e}Rg(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,dx(this,t)}this.S?(bk(this,T,l),BA&&this.i&&3==T&&(ck(this.U,this.V,"tick",this.mb),this.V.start())):(Rg(this.j,this.m,l,null),dx(this,l)),4==T&&df(this),this.i&&!this.J&&(4==T?Yk(this.l,this):(this.i=!1,F_(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,ns(12)):(this.o=0,ns(13)),df(this),L_(this)}}}catch{}},st.mb=function(){if(this.g){var n=Tl(this.g),e=this.g.ja();this.C<e.length&&(UI(this),bk(this,n,e),this.i&&4!=n&&F_(this))}},st.cancel=function(){this.J=!0,df(this)},st.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function uV(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(R_(),ns(17)),df(this),this.o=2,L_(this)):Ik(this,this.Y-n)};var Dk=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hf(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof hf){this.h=void 0!==e?e:n.h,BI(this,n.j),this.s=n.s,this.g=n.g,jI(this,n.m),this.l=n.l,e=n.i;var t=new B_;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Tk(this,t),this.o=n.o}else n&&(t=String(n).match(Dk))?(this.h=!!e,BI(this,t[1]||"",!0),this.s=V_(t[2]||""),this.g=V_(t[3]||"",!0),jI(this,t[4]),this.l=V_(t[5]||"",!0),Tk(this,t[6]||"",!0),this.o=V_(t[7]||"")):(this.h=!!e,this.i=new B_(null,this.h))}function Dl(n){return new hf(n)}function BI(n,e,t){n.j=t?V_(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function jI(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Tk(n,e,t){e instanceof B_?(n.i=e,function wV(n,e){e&&!n.j&&(od(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Ak(this,r),Mk(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=U_(e,vV)),n.i=new B_(e,n.h))}function sr(n,e,t){n.i.set(e,t)}function $I(n){return sr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function V_(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function U_(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,gV),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function gV(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}hf.prototype.toString=function(){var n=[],e=this.j;e&&n.push(U_(e,Sk,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(U_(e,Sk,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(U_(t,"/"==t.charAt(0)?yV:mV,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",U_(t,_V)),n.join("")};var Sk=/[#\/\?@]/g,mV=/[#\?:]/g,yV=/[#\?]/g,vV=/[#\?@]/g,_V=/#/g;function B_(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function od(n){n.g||(n.g=new Map,n.h=0,n.i&&function pV(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Ak(n,e){od(n),e=kg(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function xk(n,e){return od(n),e=kg(n,e),n.g.has(e)}function Mk(n,e,t){Ak(n,e),0<t.length&&(n.i=null,n.g.set(kg(n,e),LA(t)),n.h+=t.length)}function kg(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Pk(n){this.l=n||bV,n=Qt.PerformanceNavigationTiming?0<(n=Qt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Qt.g&&Qt.g.Ka&&Qt.g.Ka()&&Qt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(st=B_.prototype).add=function(n,e){od(this),this.i=null,n=kg(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},st.forEach=function(n,e){od(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},st.sa=function(){od(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let u=0;u<i.length;u++)t.push(e[r])}return t},st.Z=function(n){od(this);let e=[];if("string"==typeof n)xk(this,n)&&(e=e.concat(this.g.get(kg(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},st.set=function(n,e){return od(this),this.i=null,xk(this,n=kg(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},st.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},st.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var i=u;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var bV=10;function Rk(n){return!!n.h||!!n.g&&n.g.size>=n.j}function kk(n){return n.h?1:n.g?n.g.size:0}function hx(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function fx(n,e){n.g?n.g.add(e):n.h=e}function Nk(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Ok(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return LA(n.i)}function px(){}function IV(){this.g=new px}function CV(n,e,t){const r=t||"";try{Ck(n,function(i,u){let l=i;A_(i)&&(l=ex(i)),e.push(r+u+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function HI(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function j_(n){this.l=n.fc||null,this.j=n.ob||!1}function zI(n,e){li.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=gx,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Pk.prototype.cancel=function(){if(this.i=Ok(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},px.prototype.stringify=function(n){return Qt.JSON.stringify(n,void 0)},px.prototype.parse=function(n){return Qt.JSON.parse(n,void 0)},ui(j_,sx),j_.prototype.g=function(){return new zI(this.l,this.j)},j_.prototype.i=function(n){return function(){return n}}({}),ui(zI,li);var gx=0;function Fk(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function $_(n){n.readyState=4,n.l=null,n.j=null,n.A=null,H_(n)}function H_(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(st=zI.prototype).open=function(n,e){if(this.readyState!=gx)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,H_(this)},st.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Qt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},st.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,$_(this)),this.readyState=gx},st.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,H_(this)),this.g&&(this.readyState=3,H_(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Qt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Fk(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},st.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?$_(this):H_(this),3==this.readyState&&Fk(this)}},st.Za=function(n){this.g&&(this.response=this.responseText=n,$_(this))},st.Ya=function(n){this.g&&(this.response=n,$_(this))},st.ka=function(){this.g&&$_(this)},st.setRequestHeader=function(n,e){this.v.append(n,e)},st.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},st.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(zI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var TV=Qt.JSON.parse;function Ir(n){li.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Lk,this.L=this.M=!1}ui(Ir,li);var Lk="",SV=/^https?$/i,AV=["POST","PUT"];function Vk(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Uk(n),GI(n)}function Uk(n){n.F||(n.F=!0,Ei(n,"complete"),Ei(n,"error"))}function Bk(n){if(n.h&&typeof OA<"u"&&(!n.C[1]||4!=Tl(n)||2!=n.da()))if(n.v&&4==Tl(n))ix(n.La,0,n);else if(Ei(n,"readystatechange"),4==Tl(n)){n.h=!1;try{const g=n.da();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var i=String(n.I).match(Dk)[1]||null;if(!i&&Qt.self&&Qt.self.location){var u=Qt.self.location.protocol;i=u.substr(0,u.length-1)}r=!SV.test(i?i.toLowerCase():"")}t=r}if(t)Ei(n,"complete"),Ei(n,"success");else{n.m=6;try{var l=2<Tl(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.da()+"]",Uk(n)}}finally{GI(n)}}}function GI(n,e){if(n.g){jk(n);const t=n.g,r=n.C[0]?CI:null;n.g=null,n.C=null,e||Ei(n,"ready");try{t.onreadystatechange=r}catch{}}}function jk(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Qt.clearTimeout(n.A),n.A=null)}function Tl(n){return n.g?n.g.readyState:0}function $k(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case Lk:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Hk(n){let e="";return GA(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function mx(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Hk(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):sr(n,e,t))}function z_(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function zk(n){this.Ga=0,this.i=[],this.j=new NI,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=z_("failFast",!1,n),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=z_("baseRetryDelayMs",5e3,n),this.hb=z_("retryDelaySeedMs",1e4,n),this.eb=z_("forwardChannelMaxRetries",2,n),this.xa=z_("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.K=void 0,this.I=n&&n.supportsCrossDomainXhr||!1,this.J="",this.h=new Pk(n&&n.concurrentRequestLimit),this.Ja=new IV,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.j.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function yx(n){if(Gk(n),3==n.H){var e=n.W++,t=Dl(n.G);sr(t,"SID",n.J),sr(t,"RID",e),sr(t,"TYPE","terminate"),G_(n,t),(e=new O_(n,n.j,e,void 0)).L=2,e.v=$I(Dl(t)),t=!1,Qt.navigator&&Qt.navigator.sendBeacon&&(t=Qt.navigator.sendBeacon(e.v.toString(),"")),!t&&Qt.Image&&((new Image).src=e.v,t=!0),t||(e.g=eN(e.l,null),e.g.ha(e.v)),e.G=Date.now(),F_(e)}Jk(n)}function qI(n){n.g&&(_x(n),n.g.cancel(),n.g=null)}function Gk(n){qI(n),n.u&&(Qt.clearTimeout(n.u),n.u=null),ZI(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Qt.clearTimeout(n.m),n.m=null)}function WI(n){Rk(n.h)||n.m||(n.m=!0,ok(n.Na,n),n.C=0)}function qk(n,e){var t;t=e?e.m:n.W++;const r=Dl(n.G);sr(r,"SID",n.J),sr(r,"RID",t),sr(r,"AID",n.V),G_(n,r),n.o&&n.s&&mx(r,n.o,n.s),t=new O_(n,n.j,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.i=e.F.concat(n.i)),e=Wk(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),fx(n.h,t),cx(t,r,e)}function G_(n,e){n.ma&&GA(n.ma,function(t,r){sr(e,r,t)}),n.l&&Ck({},function(t,r){sr(e,r,t)})}function Wk(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Fi(n.l.Va,n.l,n):null;e:{var i=n.i;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=i[0].h,l.push("ofs="+u)):u=0:l.push("ofs="+u);let g=!0;for(let v=0;v<t;v++){let b=i[v].h;const T=i[v].g;if(b-=u,0>b)u=Math.max(0,i[v].h-100),g=!1;else try{CV(T,l,"req"+b+"_")}catch{r&&r(T)}}if(g){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.F=n,r}function Zk(n){n.g||n.u||(n.ba=1,ok(n.Ma,n),n.A=0)}function vx(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=k_(Fi(n.Ma,n),Qk(n,n.A)),n.A++,0))}function _x(n){null!=n.B&&(Qt.clearTimeout(n.B),n.B=null)}function Kk(n){n.g=new O_(n,n.j,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Dl(n.wa);sr(e,"RID","rpc"),sr(e,"SID",n.J),sr(e,"CI",n.M?"0":"1"),sr(e,"AID",n.V),sr(e,"TYPE","xmlhttp"),G_(n,e),n.o&&n.s&&mx(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.oa,t.L=1,t.v=$I(Dl(e)),t.s=null,t.S=!0,wk(t,n)}function ZI(n){null!=n.v&&(Qt.clearTimeout(n.v),n.v=null)}function Yk(n,e){var t=null;if(n.g==e){ZI(n),_x(n),n.g=null;var r=2}else{if(!hx(n.h,e))return;t=e.F,Nk(n.h,e),r=1}if(0!=n.H)if(n.ta=e.aa,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Ei(r=OI(),new gk(r,t)),WI(n)}else Zk(n);else if(3==(i=e.o)||0==i&&0<n.ta||!(1==r&&function MV(n,e){return!(kk(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.F.concat(n.i),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=k_(Fi(n.Na,n,e),Qk(n,n.C)),n.C++,0)))}(n,e)||2==r&&vx(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:ff(n,5);break;case 4:ff(n,10);break;case 3:ff(n,6);break;default:ff(n,2)}}function Qk(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.l||(t*=2),t*e}function ff(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Fi(n.pb,n);t||(t=new hf("//www.google.com/images/cleardot.gif"),Qt.location&&"http"==Qt.location.protocol||BI(t,"https"),$I(t)),function DV(n,e){const t=new NI;if(Qt.Image){const r=new Image;r.onload=TI(HI,t,r,"TestLoadImage: loaded",!0,e),r.onerror=TI(HI,t,r,"TestLoadImage: error",!1,e),r.onabort=TI(HI,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=TI(HI,t,r,"TestLoadImage: timeout",!1,e),Qt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ns(2);n.H=0,n.l&&n.l.za(e),Jk(n),Gk(n)}function Jk(n){if(n.H=0,n.pa=[],n.l){const e=Ok(n.h);(0!=e.length||0!=n.i.length)&&(zR(n.pa,e),zR(n.pa,n.i),n.h.i.length=0,LA(n.i),n.i.length=0),n.l.ya()}}function Xk(n,e,t){var r=t instanceof hf?Dl(t):new hf(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),jI(r,r.m);else{var i=Qt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var u=new hf(null,void 0);r&&BI(u,r),e&&(u.g=e),i&&jI(u,i),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&sr(r,t,e),sr(r,"VER",n.qa),G_(n,r),r}function eN(n,e,t){if(e&&!n.I)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ir(t&&n.Ha&&!n.va?new j_({ob:!0}):n.va)).Oa(n.I),e}function tN(){}function KI(){if(Pg&&!(10<=Number(WL)))throw Error("Environmental error: no available transport.")}function $s(n,e){li.call(this),this.g=new zk(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!SI(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!SI(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ng(this)}function nN(n){ox.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function rN(){ax.call(this),this.status=1}function Ng(n){this.g=n}function la(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function wx(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],l=(e=n.g[0])+(u^(t=n.g[1])&((i=n.g[2])^u))+r[0]+3614090360&4294967295;l=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=t+(l<<7&4294967295|l>>>25))+((l=u+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(i^u))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=u+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(i^u))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=u+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(i^u))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=u+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(i^u&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(i^u))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^u&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(i^u))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^u&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(i^u))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^u&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(i^u))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^i^u)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=i+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^u)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=i+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^u)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=i+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^u^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^u)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=i+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(i^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((u=(e=t+((l=e+(i^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((i=u+((l=i+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+u&4294967295}function Sn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var u=0|n[i];r&&u==e||(t[i]=u,r=!1)}this.g=t}(st=Ir.prototype).Oa=function(n){this.M=n},st.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ux.g(),this.C=function yk(n){return n.h||(n.h=n.i())}(this.u?this.u:ux),this.g.onreadystatechange=Fi(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void Vk(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),i=Qt.FormData&&n instanceof Qt.FormData,!(0<=HR(AV,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{jk(this),0<this.B&&((this.L=function xV(n){return Pg&&function qL(){return qR(GL,9,function(){let n=0;const e=GR(String(xI)).split("."),t=GR("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",u=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=VA(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||VA(0==i[2].length,0==u[2].length)||VA(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Fi(this.ua,this)):this.A=ix(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Vk(this,u)}},st.ua=function(){typeof OA<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ei(this,"timeout"),this.abort(8))},st.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ei(this,"complete"),Ei(this,"abort"),GI(this))},st.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),GI(this,!0)),Ir.$.N.call(this)},st.La=function(){this.s||(this.G||this.v||this.l?Bk(this):this.kb())},st.kb=function(){Bk(this)},st.da=function(){try{return 2<Tl(this)?this.g.status:-1}catch{return-1}},st.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},st.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),TV(e)}},st.Ia=function(){return this.m},st.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(st=zk.prototype).qa=8,st.H=1,st.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new O_(this,this.j,n,void 0);let u=this.s;if(this.U&&(u?(u=QR(u),XR(u,this.U)):u=this.U),null!==this.o||this.O||(i.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Wk(this,i,e),sr(t=Dl(this.G),"RID",n),sr(t,"CVER",22),this.F&&sr(t,"X-HTTP-Session-Id",this.F),G_(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(Hk(u)))+"&"+e:this.o&&mx(t,this.o,u)),fx(this.h,i),this.bb&&sr(t,"TYPE","init"),this.P?(sr(t,"$req",e),sr(t,"SID","null"),i.ba=!0,cx(i,t,null)):cx(i,t,e),this.H=2}}else 3==this.H&&(n?qk(this,n):0==this.i.length||Rk(this.h)||qk(this))},st.Ma=function(){if(this.u=null,Kk(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var n=2*this.S;this.j.info("BP detection timer enabled: "+n),this.B=k_(Fi(this.jb,this),n)}},st.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,ns(10),qI(this),Kk(this))},st.ib=function(){null!=this.v&&(this.v=null,qI(this),vx(this),ns(19))},st.pb=function(n){n?(this.j.info("Successfully pinged google.com"),ns(2)):(this.j.info("Failed to ping google.com"),ns(1))},(st=tN.prototype).Ba=function(){},st.Aa=function(){},st.za=function(){},st.ya=function(){},st.Va=function(){},KI.prototype.g=function(n,e){return new $s(n,e)},ui($s,li),$s.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var n=this.g,e=this.l,t=this.h||void 0;ns(0),n.Y=e,n.ma=t||{},n.M=n.aa,n.G=Xk(n,null,n.Y),WI(n)},$s.prototype.close=function(){yx(this.g)},$s.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=ex(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.fb++,n)),3==e.H&&WI(e)},$s.prototype.N=function(){this.g.l=null,delete this.j,yx(this.g),delete this.g,$s.$.N.call(this)},ui(nN,ox),ui(rN,ax),ui(Ng,tN),Ng.prototype.Ba=function(){Ei(this.g,"a")},Ng.prototype.Aa=function(n){Ei(this.g,new nN(n))},Ng.prototype.za=function(n){Ei(this.g,new rN)},Ng.prototype.ya=function(){Ei(this.g,"b")},ui(la,function PV(){this.blockSize=-1}),la.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},la.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,u=0;u<e;){if(0==i)for(;u<=t;)wx(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[i++]=n.charCodeAt(u++),i==this.blockSize){wx(this,r),i=0;break}}else for(;u<e;)if(r[i++]=n[u++],i==this.blockSize){wx(this,r),i=0;break}}this.h=i,this.i+=e},la.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var RV={};function Ex(n){return-128<=n&&128>n?qR(RV,n,function(e){return new Sn([0|e],0>e?-1:0)}):new Sn([0|n],0>n?-1:0)}function su(n){if(isNaN(n)||!isFinite(n))return Og;if(0>n)return bi(su(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=bx;return new Sn(e,0)}var bx=4294967296,Og=Ex(0),Ix=Ex(1),sN=Ex(16777216);function Sl(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function bo(n){return-1==n.h}function bi(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Sn(t,~n.h).add(Ix)}function YI(n,e){return n.add(bi(e))}function QI(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function q_(n,e){this.g=n,this.h=e}function JI(n,e){if(Sl(e))throw Error("division by zero");if(Sl(n))return new q_(Og,Og);if(bo(n))return e=JI(bi(n),e),new q_(bi(e.g),bi(e.h));if(bo(e))return e=JI(n,bi(e)),new q_(bi(e.g),e.h);if(30<n.g.length){if(bo(n)||bo(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Ix,r=e;0>=r.X(n);)t=oN(t),r=oN(r);var i=Fg(t,1),u=Fg(r,1);for(r=Fg(r,2),t=Fg(t,2);!Sl(r);){var l=u.add(r);0>=l.X(n)&&(i=i.add(t),u=l),r=Fg(r,1),t=Fg(t,1)}return e=YI(n,i.R(e)),new q_(i,e)}for(i=Og;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(u=su(t)).R(e);bo(l)||0<l.X(n);)l=(u=su(t-=r)).R(e);Sl(u)&&(u=Ix),i=i.add(u),n=YI(n,l)}return new q_(i,n)}function oN(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Sn(t,n.h)}function Fg(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],u=0;u<r;u++)i[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new Sn(i,n.h)}(st=Sn.prototype).ea=function(){if(bo(this))return-bi(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:bx+r)*e,e*=bx}return n},st.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Sl(this))return"0";if(bo(this))return"-"+bi(this).toString(n);for(var e=su(Math.pow(n,6)),t=this,r="";;){var i=JI(t,e).g,u=((0<(t=YI(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Sl(t=i))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},st.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},st.X=function(n){return bo(n=YI(this,n))?-1:Sl(n)?0:1},st.abs=function(){return bo(this)?bi(this):this},st.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var u=r+(65535&this.D(i))+(65535&n.D(i)),l=(u>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=l>>>16,t[i]=(l&=65535)<<16|(u&=65535)}return new Sn(t,-2147483648&t[t.length-1]?-1:0)},st.R=function(n){if(Sl(this)||Sl(n))return Og;if(bo(this))return bo(n)?bi(this).R(bi(n)):bi(bi(this).R(n));if(bo(n))return bi(this.R(bi(n)));if(0>this.X(sN)&&0>n.X(sN))return su(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var u=this.D(r)>>>16,l=65535&this.D(r),g=n.D(i)>>>16,v=65535&n.D(i);t[2*r+2*i]+=l*v,QI(t,2*r+2*i),t[2*r+2*i+1]+=u*v,QI(t,2*r+2*i+1),t[2*r+2*i+1]+=l*g,QI(t,2*r+2*i+1),t[2*r+2*i+2]+=u*g,QI(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Sn(t,0)},st.gb=function(n){return JI(this,n).h},st.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Sn(t,this.h&n.h)},st.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Sn(t,this.h|n.h)},st.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Sn(t,this.h^n.h)},KI.prototype.createWebChannel=KI.prototype.g,$s.prototype.send=$s.prototype.u,$s.prototype.open=$s.prototype.m,$s.prototype.close=$s.prototype.close,FI.NO_ERROR=0,FI.TIMEOUT=8,FI.HTTP_ERROR=6,mk.COMPLETE="complete",vk.EventType=N_,N_.OPEN="a",N_.CLOSE="b",N_.ERROR="c",N_.MESSAGE="d",li.prototype.listen=li.prototype.O,Ir.prototype.listenOnce=Ir.prototype.P,Ir.prototype.getLastError=Ir.prototype.Sa,Ir.prototype.getLastErrorCode=Ir.prototype.Ia,Ir.prototype.getStatus=Ir.prototype.da,Ir.prototype.getResponseJson=Ir.prototype.Wa,Ir.prototype.getResponseText=Ir.prototype.ja,Ir.prototype.send=Ir.prototype.ha,Ir.prototype.setWithCredentials=Ir.prototype.Oa,la.prototype.digest=la.prototype.l,la.prototype.reset=la.prototype.reset,la.prototype.update=la.prototype.j,Sn.prototype.add=Sn.prototype.add,Sn.prototype.multiply=Sn.prototype.R,Sn.prototype.modulo=Sn.prototype.gb,Sn.prototype.compare=Sn.prototype.X,Sn.prototype.toNumber=Sn.prototype.ea,Sn.prototype.toString=Sn.prototype.toString,Sn.prototype.getBits=Sn.prototype.D,Sn.fromNumber=su,Sn.fromString=function iN(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return bi(iN(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=su(Math.pow(e,8)),r=Og,i=0;i<n.length;i+=8){var u=Math.min(8,n.length-i),l=parseInt(n.substring(i,i+u),e);8>u?(u=su(Math.pow(e,u)),r=r.R(u).add(su(l))):r=(r=r.R(t)).add(su(l))}return r};var kV=ua.createWebChannelTransport=function(){return new KI},NV=ua.getStatEventTarget=function(){return OI()},Cx=ua.ErrorCode=FI,OV=ua.EventType=mk,FV=ua.Event=cf,aN=ua.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},LV=ua.FetchXmlHttpFactory=j_,XI=ua.WebChannel=vk,VV=ua.XhrIo=Ir,UV=ua.Md5=la,Lg=ua.Integer=Sn;const uN="@firebase/firestore";class ci{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ci.UNAUTHENTICATED=new ci(null),ci.GOOGLE_CREDENTIALS=new ci("google-credentials-uid"),ci.FIRST_PARTY=new ci("first-party-uid"),ci.MOCK_USER=new ci("mock-user");let Vg="9.21.0";const ad=new Us.Yd("@firebase/firestore");function Dx(){return ad.logLevel}function Re(n,...e){if(ad.logLevel<=Us.in.DEBUG){const t=e.map(Tx);ad.debug(`Firestore (${Vg}): ${n}`,...t)}}function Fr(n,...e){if(ad.logLevel<=Us.in.ERROR){const t=e.map(Tx);ad.error(`Firestore (${Vg}): ${n}`,...t)}}function Io(n,...e){if(ad.logLevel<=Us.in.WARN){const t=e.map(Tx);ad.warn(`Firestore (${Vg}): ${n}`,...t)}}function Tx(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function at(n="Unexpected state"){const e=`FIRESTORE (${Vg}) INTERNAL ASSERTION FAILED: `+n;throw Fr(e),new Error(e)}function wt(n,e){n||at()}function Xe(n,e){return n}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ce extends _t.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class lN{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $V{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ci.UNAUTHENTICATED))}shutdown(){}}class HV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class zV{constructor(e){this.t=e,this.currentUser=ci.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=b=>this.i!==i?(i=this.i,t(b)):Promise.resolve();let l=new Qr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Qr,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const b=l;e.enqueueRetryable((0,J.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},v=b=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(b=>v(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?v(b):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Qr)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt("string"==typeof r.accessToken),new lN(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return wt(null===e||"string"==typeof e),new ci(e)}}class GV{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=ci.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class qV{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new GV(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ci.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WV{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.T;return this.T=u.token,Re("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?i(u):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wt("string"==typeof t.token),this.T=t.token,new cN(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ZV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class dN{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=ZV(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Kt(n,e){return n<e?-1:n>e?1:0}function Ug(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function hN(n){return n+"\0"}class or{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ce(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ce(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ce(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ce(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return or.fromMillis(Date.now())}static fromDate(e){return or.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new or(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Kt(this.nanoseconds,e.nanoseconds):Kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class It{constructor(e){this.timestamp=e}static fromTimestamp(e){return new It(e)}static min(){return new It(new or(0,0))}static max(){return new It(new or(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class W_{constructor(e,t,r){void 0===t?t=0:t>e.length&&at(),void 0===r?r=e.length-t:r>e.length-t&&at(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===W_.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof W_?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),l=t.get(i);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class hn extends W_{construct(e,t,r){return new hn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ce(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new hn(t)}static emptyPath(){return new hn([])}}const KV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Cr extends W_{construct(e,t,r){return new Cr(e,t,r)}static isValidIdentifier(e){return KV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Cr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Cr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Ce(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const g=e[i];if("\\"===g){if(i+1===e.length)throw new Ce(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[i+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new Ce(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,i+=2}else"`"===g?(l=!l,i++):"."!==g||l?(r+=g,i++):(u(),i++)}if(u(),l)throw new Ce(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Cr(t)}static emptyPath(){return new Cr([])}}class Ye{constructor(e){this.path=e}static fromPath(e){return new Ye(hn.fromString(e))}static fromName(e){return new Ye(hn.fromString(e).popFirst(5))}static empty(){return new Ye(hn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===hn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return hn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ye(new hn(e.slice()))}}class eC{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Sx(n){return n.fields.find(e=>2===e.kind)}function pf(n){return n.fields.filter(e=>2!==e.kind)}eC.UNKNOWN_ID=-1;class tC{constructor(e,t){this.fieldPath=e,this.kind=t}}class Z_{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Z_(0,Hs.min())}}function fN(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=It.fromTimestamp(1e9===r?new or(t+1,0):new or(t,r));return new Hs(i,Ye.empty(),e)}function pN(n){return new Hs(n.readTime,n.key,-1)}class Hs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Hs(It.min(),Ye.empty(),-1)}static max(){return new Hs(It.max(),Ye.empty(),-1)}}function Ax(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ye.comparator(n.documentKey,e.documentKey),0!==t?t:Kt(n.largestBatchId,e.largestBatchId))}const gN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ud(n){return xx.apply(this,arguments)}function xx(){return xx=(0,J.Z)(function*(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==gN)throw n;Re("LocalStore","Unexpectedly lost primary lease")}),xx.apply(this,arguments)}class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&at(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):re.reject(t)}static resolve(e){return new re((t,r)=>{t(e)})}static reject(e){return new re((t,r)=>{r(e)})}static waitFor(e){return new re((t,r)=>{let i=0,u=0,l=!1;e.forEach(g=>{++i,g.next(()=>{++u,l&&u===i&&t()},v=>r(v))}),l=!0,u===i&&t()})}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next(i=>i?re.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}static mapArray(e,t){return new re((r,i)=>{const u=e.length,l=new Array(u);let g=0;for(let v=0;v<u;v++){const b=v;t(e[b]).next(T=>{l[b]=T,++g,g===u&&r(l)},T=>i(T))}})}static doWhile(e,t){return new re((r,i)=>{const u=()=>{!0===e()?t().next(()=>{u()},i):r()};u()})}}class nC{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.R=new Qr,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{t.error?this.R.reject(new K_(e,t.error)):this.R.resolve()},this.transaction.onerror=r=>{const i=Mx(r.target.error);this.R.reject(new K_(e,i))}}static open(e,t,r,i){try{return new nC(t,e.transaction(i,r))}catch(u){throw new K_(t,u)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(Re("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new XV(t)}}class ca{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===ca.S((0,_t.z$)())&&Fr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Re("SimpleDb","Removing database:",e),gf(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,_t.hl)())return!1;if(ca.C())return!0;const e=(0,_t.z$)(),t=ca.S(e),r=0<t&&t<10,i=ca.N(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var t=this;return(0,J.Z)(function*(){return t.db||(Re("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{i(new K_(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const g=l.target.error;i("VersionError"===g.name?new Ce(ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new Ce(ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new K_(e,g))},u.onupgradeneeded=l=>{Re("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.$(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Re("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,J.Z)(function*(){const l="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.O(e);const v=nC.open(u.db,e,l?"readonly":"readwrite",r),b=i(v).next(T=>(v.P(),T)).catch(T=>(v.abort(T),re.reject(T))).toPromise();return b.catch(()=>{}),yield v.v,b}catch(v){const b=v,T="FirebaseError"!==b.name&&g<3;if(Re("SimpleDb","Transaction failed with error:",b.message,"Retrying:",T),u.close(),!T)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class JV{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return gf(this.L.delete())}}class K_ extends Ce{constructor(e,t){super(ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ld(n){return"IndexedDbTransactionError"===n.name}class XV{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Re("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Re("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),gf(r)}add(e){return Re("SimpleDb","ADD",this.store.name,e,e),gf(this.store.add(e))}get(e){return gf(this.store.get(e)).next(t=>(void 0===t&&(t=null),Re("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Re("SimpleDb","DELETE",this.store.name,e),gf(this.store.delete(e))}count(){return Re("SimpleDb","COUNT",this.store.name),gf(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.W(i,(l,g)=>{u.push(g)}).next(()=>u)}{const i=this.store.getAll(r.range);return new re((u,l)=>{i.onerror=g=>{l(g.target.error)},i.onsuccess=g=>{u(g.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new re((i,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}J(e,t){Re("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(u,l,g)=>g.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new re((r,i)=>{t.onerror=u=>{const l=Mx(u.target.error);i(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(g=>{g?l.continue():r()}):r()}})}W(e,t){const r=[];return new re((i,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const g=l.target.result;if(!g)return void i();const v=new JV(g),b=t(g.primaryKey,g.value,v);if(b instanceof re){const T=b.catch(M=>(v.done(),re.reject(M)));r.push(T)}v.isDone?i():null===v.K?g.continue():g.continue(v.K)}}).next(()=>re.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function gf(n){return new re((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Mx(r.target.error);t(i)}})}let yN=!1;function Mx(n){const e=ca.S((0,_t.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ce("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return yN||(yN=!0,setTimeout(()=>{throw r},0)),r}}return n}class eU{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Re("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,J.Z)(function*(){t.task=null;try{Re("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){ld(r)?Re("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ud(r)}yield t.et(6e4)}))}}class tU{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,J.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,u=!0;return re.doWhile(()=>!0===u&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Re("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,i).next(g=>{i-=g,r.add(l)});u=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(i,u)).next(g=>(Re("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,u)=>{const l=pN(u);Ax(l,r)>0&&(r=l)}),new Hs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let zs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Y_(n){return null==n}function Q_(n){return 0===n&&1/n==-1/0}function vN(n){return"number"==typeof n&&Number.isInteger(n)&&!Q_(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Vi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=_N(e)),e=nU(n.get(t),e);return _N(e)}function nU(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function _N(n){return n+"\x01\x01"}function ou(n){const e=n.length;if(wt(e>=2),2===e)return wt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),hn.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&at(),n.charAt(l+1)){case"\x01":const g=n.substring(u,l);let v;0===i.length?v=g:(i+=g,v=i,i=""),r.push(v);break;case"\x10":i+=n.substring(u,l),i+="\0";break;case"\x11":i+=n.substring(u,l+1);break;default:at()}u=l+2}return new hn(r)}const wN=["userId","batchId"];function rC(n,e){return[n,Vi(e)]}function EN(n,e,t){return[n,Vi(e),t]}const rU={},iU=["prefixPath","collectionGroup","readTime","documentId"],sU=["prefixPath","collectionGroup","documentId"],oU=["collectionGroup","readTime","prefixPath","documentId"],aU=["canonicalId","targetId"],uU=["targetId","path"],lU=["path","targetId"],cU=["collectionId","parent"],dU=["indexId","uid"],hU=["uid","sequenceNumber"],fU=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],pU=["indexId","uid","orderedDocumentKey"],gU=["userId","collectionPath","documentId"],mU=["userId","collectionPath","largestBatchId"],yU=["userId","collectionGroup","largestBatchId"],bN=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],vU=[...bN,"documentOverlays"],IN=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],CN=IN,_U=[...CN,"indexConfiguration","indexState","indexEntries"];class Px extends mN{constructor(e,t){super(),this.at=e,this.currentSequenceNumber=t}}function di(n,e){const t=Xe(n);return ca.M(t.at,e)}function DN(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function cd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function TN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class $n{constructor(e,t){this.comparator=e,this.root=t||Ii.EMPTY}insert(e,t){return new $n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ii.BLACK,null,null))}remove(e){return new $n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ii.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new iC(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new iC(this.root,e,this.comparator,!1)}getReverseIterator(){return new iC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new iC(this.root,e,this.comparator,!0)}}class iC{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ii{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=r??Ii.RED,this.left=i??Ii.EMPTY,this.right=u??Ii.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new Ii(e??this.key,t??this.value,r??this.color,i??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ii.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ii.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ii.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ii.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw at();const e=this.left.check();if(e!==this.right.check())throw at();return e+(this.isRed()?0:1)}}Ii.EMPTY=null,Ii.RED=!0,Ii.BLACK=!1,Ii.EMPTY=new class{constructor(){this.size=0}get key(){throw at()}get value(){throw at()}get color(){throw at()}get left(){throw at()}get right(){throw at()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ii(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Zn{constructor(e){this.comparator=e,this.data=new $n(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new SN(this.data.getIterator())}getIteratorFrom(e){return new SN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Zn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Zn(this.comparator);return t.data=e,t}}class SN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Bg(n){return n.hasNext()?n.getNext():void 0}class vs{constructor(e){this.fields=e,e.sort(Cr.comparator)}static empty(){return new vs([])}unionWith(e){let t=new Zn(Cr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new vs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ug(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class AN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Jr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new AN("Invalid base64 string: "+i):i}}(e);return new Jr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new Jr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jr.EMPTY_BYTE_STRING=new Jr("");const EU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dd(n){if(wt(!!n),"string"==typeof n){let e=0;const t=EU.exec(n);if(wt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Dr(n.seconds),nanos:Dr(n.nanos)}}function Dr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Al(n){return"string"==typeof n?Jr.fromBase64String(n):Jr.fromUint8Array(n)}function sC(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function oC(n){const e=n.mapValue.fields.__previous_value__;return sC(e)?oC(e):e}function J_(n){const e=dd(n.mapValue.fields.__local_write_time__.timestampValue);return new or(e.seconds,e.nanos)}class bU{constructor(e,t,r,i,u,l,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=g,this.useFetchStreams=v}}class hd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new hd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof hd&&e.projectId===this.projectId&&e.database===this.database}}const fd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},aC={nullValue:"NULL_VALUE"};function pd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?sC(n)?4:RN(n)?9007199254740991:10:at()}function au(n,e){if(n===e)return!0;const t=pd(n);if(t!==pd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return J_(n).isEqual(J_(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=dd(r.timestampValue),l=dd(i.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Al(n.bytesValue).isEqual(Al(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Dr(r.geoPointValue.latitude)===Dr(i.geoPointValue.latitude)&&Dr(r.geoPointValue.longitude)===Dr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Dr(r.integerValue)===Dr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=Dr(r.doubleValue),l=Dr(i.doubleValue);return u===l?Q_(u)===Q_(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return Ug(n.arrayValue.values||[],e.arrayValue.values||[],au);case 10:return function(r,i){const u=r.mapValue.fields||{},l=i.mapValue.fields||{};if(DN(u)!==DN(l))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===l[g]||!au(u[g],l[g])))return!1;return!0}(n,e);default:return at()}var i}function X_(n,e){return void 0!==(n.values||[]).find(t=>au(t,e))}function gd(n,e){if(n===e)return 0;const t=pd(n),r=pd(e);if(t!==r)return Kt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Kt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const l=Dr(i.integerValue||i.doubleValue),g=Dr(u.integerValue||u.doubleValue);return l<g?-1:l>g?1:l===g?0:isNaN(l)?isNaN(g)?0:-1:1}(n,e);case 3:return xN(n.timestampValue,e.timestampValue);case 4:return xN(J_(n),J_(e));case 5:return Kt(n.stringValue,e.stringValue);case 6:return function(i,u){const l=Al(i),g=Al(u);return l.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const l=i.split("/"),g=u.split("/");for(let v=0;v<l.length&&v<g.length;v++){const b=Kt(l[v],g[v]);if(0!==b)return b}return Kt(l.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const l=Kt(Dr(i.latitude),Dr(u.latitude));return 0!==l?l:Kt(Dr(i.longitude),Dr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const l=i.values||[],g=u.values||[];for(let v=0;v<l.length&&v<g.length;++v){const b=gd(l[v],g[v]);if(b)return b}return Kt(l.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===fd.mapValue&&u===fd.mapValue)return 0;if(i===fd.mapValue)return 1;if(u===fd.mapValue)return-1;const l=i.fields||{},g=Object.keys(l),v=u.fields||{},b=Object.keys(v);g.sort(),b.sort();for(let T=0;T<g.length&&T<b.length;++T){const M=Kt(g[T],b[T]);if(0!==M)return M;const $=gd(l[g[T]],v[b[T]]);if(0!==$)return $}return Kt(g.length,b.length)}(n.mapValue,e.mapValue);default:throw at()}}function xN(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Kt(n,e);const t=dd(n),r=dd(e),i=Kt(t.seconds,r.seconds);return 0!==i?i:Kt(t.nanos,r.nanos)}function jg(n){return Rx(n)}function Rx(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=dd(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Al(n.bytesValue).toBase64():"referenceValue"in n?Ye.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const l of r.values||[])u?u=!1:i+=",",i+=Rx(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const g of i)l?l=!1:u+=",",u+=`${g}:${Rx(r.fields[g])}`;return u+"}"}(n.mapValue):at();var e}function mf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function kx(n){return!!n&&"integerValue"in n}function ew(n){return!!n&&"arrayValue"in n}function MN(n){return!!n&&"nullValue"in n}function PN(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function lC(n){return!!n&&"mapValue"in n}function tw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return cd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=tw(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=tw(n.arrayValue.values[t]);return e}return Object.assign({},n)}function RN(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function IU(n){return"nullValue"in n?aC:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?mf(hd.empty(),Ye.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:at()}function CU(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?mf(hd.empty(),Ye.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?fd:at()}function kN(n,e){const t=gd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function NN(n,e){const t=gd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ci{constructor(e){this.value=e}static empty(){return new Ci({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!lC(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tw(t)}setAll(e){let t=Cr.emptyPath(),r={},i=[];e.forEach((l,g)=>{if(!t.isImmediateParentOf(g)){const v=this.getFieldsMap(t);this.applyChanges(v,r,i),r={},i=[],t=g.popLast()}l?r[g.lastSegment()]=tw(l):i.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());lC(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return au(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];lC(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){cd(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new Ci(tw(this.value))}}function ON(n){const e=[];return cd(n.fields,(t,r)=>{const i=new Cr([t]);if(lC(r)){const u=ON(r.mapValue).fields;if(0===u.length)e.push(i);else for(const l of u)e.push(i.child(l))}else e.push(i)}),new vs(e)}class Kn{constructor(e,t,r,i,u,l,g){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=u,this.data=l,this.documentState=g}static newInvalidDocument(e){return new Kn(e,0,It.min(),It.min(),It.min(),Ci.empty(),0)}static newFoundDocument(e,t,r,i){return new Kn(e,1,t,It.min(),r,i,0)}static newNoDocument(e,t){return new Kn(e,2,t,It.min(),It.min(),Ci.empty(),0)}static newUnknownDocument(e,t){return new Kn(e,3,t,It.min(),It.min(),Ci.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(It.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ci.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ci.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=It.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Kn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class md{constructor(e,t){this.position=e,this.inclusive=t}}function FN(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],l=n.position[i];if(r=u.field.isKeyField()?Ye.comparator(Ye.fromName(l.referenceValue),t.key):gd(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function LN(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!au(n.position[t],e.position[t]))return!1;return!0}class $g{constructor(e,t="asc"){this.field=e,this.dir=t}}function DU(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class VN{}class cn extends VN{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new TU(e,t,r):"array-contains"===t?new xU(e,r):"in"===t?new zN(e,r):"not-in"===t?new MU(e,r):"array-contains-any"===t?new PU(e,r):new cn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new SU(e,r):new AU(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(gd(t,this.value)):null!==t&&pd(this.value)===pd(t)&&this.matchesComparison(gd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return at()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class An extends VN{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new An(e,t)}matches(e){return Hg(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Hg(n){return"and"===n.op}function Nx(n){return"or"===n.op}function Ox(n){return UN(n)&&Hg(n)}function UN(n){for(const e of n.filters)if(e instanceof An)return!1;return!0}function Fx(n){if(n instanceof cn)return n.field.canonicalString()+n.op.toString()+jg(n.value);if(Ox(n))return n.filters.map(e=>Fx(e)).join(",");{const e=n.filters.map(t=>Fx(t)).join(",");return`${n.op}(${e})`}}function BN(n,e){return n instanceof cn?(t=n,(r=e)instanceof cn&&t.op===r.op&&t.field.isEqual(r.field)&&au(t.value,r.value)):n instanceof An?function(t,r){return r instanceof An&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,u,l)=>i&&BN(u,r.filters[l]),!0)}(n,e):void at();var t,r}function jN(n,e){const t=n.filters.concat(e);return An.create(t,n.op)}function $N(n){return n instanceof cn?`${(e=n).field.canonicalString()} ${e.op} ${jg(e.value)}`:n instanceof An?function(e){return e.op.toString()+" {"+e.getFilters().map($N).join(" ,")+"}"}(n):"Filter";var e}class TU extends cn{constructor(e,t,r){super(e,t,r),this.key=Ye.fromName(r.referenceValue)}matches(e){const t=Ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class SU extends cn{constructor(e,t){super(e,"in",t),this.keys=HN(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class AU extends cn{constructor(e,t){super(e,"not-in",t),this.keys=HN(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function HN(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ye.fromName(r.referenceValue))}class xU extends cn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ew(t)&&X_(t.arrayValue,this.value)}}class zN extends cn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&X_(this.value.arrayValue,t)}}class MU extends cn{constructor(e,t){super(e,"not-in",t)}matches(e){if(X_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!X_(this.value.arrayValue,t)}}class PU extends cn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ew(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>X_(this.value.arrayValue,r))}}class RU{constructor(e,t=null,r=[],i=[],u=null,l=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=l,this.endAt=g,this.ft=null}}function Lx(n,e=null,t=[],r=[],i=null,u=null,l=null){return new RU(n,e,t,r,i,u,l)}function yf(n){const e=Xe(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Fx(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Y_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>jg(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>jg(r)).join(",")),e.ft=t}return e.ft}function nw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!DU(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!BN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!LN(n.startAt,e.startAt)&&LN(n.endAt,e.endAt)}function cC(n){return Ye.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function dC(n,e){return n.filters.filter(t=>t instanceof cn&&t.field.isEqual(e))}function GN(n,e,t){let r=aC,i=!0;for(const u of dC(n,e)){let l=aC,g=!0;switch(u.op){case"<":case"<=":l=IU(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,g=!1;break;case"!=":case"not-in":l=aC}kN({value:r,inclusive:i},{value:l,inclusive:g})<0&&(r=l,i=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];kN({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function qN(n,e,t){let r=fd,i=!0;for(const u of dC(n,e)){let l=fd,g=!0;switch(u.op){case">=":case">":l=CU(u.value),g=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,g=!1;break;case"!=":case"not-in":l=fd}NN({value:r,inclusive:i},{value:l,inclusive:g})>0&&(r=l,i=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];NN({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class xl{constructor(e,t=null,r=[],i=[],u=null,l="F",g=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=l,this.startAt=g,this.endAt=v,this.dt=null,this._t=null}}function WN(n,e,t,r,i,u,l,g){return new xl(n,e,t,r,i,u,l,g)}function zg(n){return new xl(n)}function ZN(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Vx(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function hC(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Ux(n){return null!==n.collectionGroup}function vf(n){const e=Xe(n);if(null===e.dt){e.dt=[];const t=hC(e),r=Vx(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new $g(t)),e.dt.push(new $g(Cr.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.dt.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new $g(Cr.keyField(),u))}}}return e.dt}function rs(n){const e=Xe(n);if(!e._t)if("F"===e.limitType)e._t=Lx(e.path,e.collectionGroup,vf(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of vf(e))t.push(new $g(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new md(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new md(e.startAt.position,e.startAt.inclusive):null;e._t=Lx(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function Bx(n,e){e.getFirstInequalityField(),hC(n);const t=n.filters.concat([e]);return new xl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function fC(n,e,t){return new xl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function rw(n,e){return nw(rs(n),rs(e))&&n.limitType===e.limitType}function KN(n){return`${yf(rs(n))}|lt:${n.limitType}`}function jx(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>$N(r)).join(", ")}]`),Y_(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>jg(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>jg(r)).join(",")),`Target(${t})`}(rs(n))}; limitType=${n.limitType})`}function iw(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ye.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of vf(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,l){const g=FN(i,u,l);return i.inclusive?g<=0:g<0}(t.startAt,vf(t),r)||t.endAt&&!function(i,u,l){const g=FN(i,u,l);return i.inclusive?g>=0:g>0}(t.endAt,vf(t),r)));var t,r}function YN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function QN(n){return(e,t)=>{let r=!1;for(const i of vf(n)){const u=kU(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function kU(n,e,t){const r=n.field.isKeyField()?Ye.comparator(e.key,t.key):function(i,u,l){const g=u.data.field(i),v=l.data.field(i);return null!==g&&null!==v?gd(g,v):at()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return at()}}class Ml{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){cd(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return TN(this.inner)}size(){return this.innerSize}}const NU=new $n(Ye.comparator);function _s(){return NU}const JN=new $n(Ye.comparator);function sw(...n){let e=JN;for(const t of n)e=e.insert(t.key,t);return e}function XN(n){let e=JN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function uu(){return ow()}function eO(){return ow()}function ow(){return new Ml(n=>n.toString(),(n,e)=>n.isEqual(e))}const OU=new $n(Ye.comparator),FU=new Zn(Ye.comparator);function tn(...n){let e=FU;for(const t of n)e=e.add(t);return e}const LU=new Zn(Kt);function $x(){return LU}function tO(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Q_(e)?"-0":e}}function nO(n){return{integerValue:""+n}}function rO(n,e){return vN(e)?nO(e):tO(n,e)}class pC{constructor(){this._=void 0}}function VU(n,e,t){return n instanceof Gg?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&sC(i)&&(i=oC(i)),i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof _f?sO(n,e):n instanceof wf?oO(n,e):function(r,i){const u=iO(r,i),l=aO(u)+aO(r.wt);return kx(u)&&kx(r.wt)?nO(l):tO(r.serializer,l)}(n,e)}function UU(n,e,t){return n instanceof _f?sO(n,e):n instanceof wf?oO(n,e):t}function iO(n,e){return n instanceof qg?kx(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Gg extends pC{}class _f extends pC{constructor(e){super(),this.elements=e}}function sO(n,e){const t=uO(e);for(const r of n.elements)t.some(i=>au(i,r))||t.push(r);return{arrayValue:{values:t}}}class wf extends pC{constructor(e){super(),this.elements=e}}function oO(n,e){let t=uO(e);for(const r of n.elements)t=t.filter(i=>!au(i,r));return{arrayValue:{values:t}}}class qg extends pC{constructor(e,t){super(),this.serializer=e,this.wt=t}}function aO(n){return Dr(n.integerValue||n.doubleValue)}function uO(n){return ew(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class aw{constructor(e,t){this.field=e,this.transform=t}}class jU{constructor(e,t){this.version=e,this.transformResults=t}}class ar{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ar}static exists(e){return new ar(void 0,e)}static updateTime(e){return new ar(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gC(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class mC{}function lO(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Zg(n.key,ar.none()):new Wg(n.key,n.data,ar.none());{const t=n.data,r=Ci.empty();let i=new Zn(Cr.comparator);for(let u of e.fields)if(!i.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),i=i.add(u)}return new Pl(n.key,r,new vs(i.toArray()),ar.none())}}function $U(n,e,t){n instanceof Wg?function(r,i,u){const l=r.value.clone(),g=hO(r.fieldTransforms,i,u.transformResults);l.setAll(g),i.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Pl?function(r,i,u){if(!gC(r.precondition,i))return void i.convertToUnknownDocument(u.version);const l=hO(r.fieldTransforms,i,u.transformResults),g=i.data;g.setAll(dO(r)),g.setAll(l),i.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function uw(n,e,t,r){return n instanceof Wg?function(i,u,l,g){if(!gC(i.precondition,u))return l;const v=i.value.clone(),b=fO(i.fieldTransforms,g,u);return v.setAll(b),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),null}(n,e,t,r):n instanceof Pl?function(i,u,l,g){if(!gC(i.precondition,u))return l;const v=fO(i.fieldTransforms,g,u),b=u.data;return b.setAll(dO(i)),b.setAll(v),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(T=>T.field))}(n,e,t,r):(l=t,gC(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function HU(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=iO(r.transform,i||null);null!=u&&(null===t&&(t=Ci.empty()),t.set(r.field,u))}return t||null}function cO(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Ug(t,r,(i,u)=>function BU(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof _f&&r instanceof _f||t instanceof wf&&r instanceof wf?Ug(t.elements,r.elements,au):t instanceof qg&&r instanceof qg?au(t.wt,r.wt):t instanceof Gg&&r instanceof Gg);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Wg extends mC{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Pl extends mC{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function dO(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function hO(n,e,t){const r=new Map;wt(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],l=u.transform,g=e.data.field(u.field);r.set(u.field,UU(l,g,t[i]))}return r}function fO(n,e,t){const r=new Map;for(const i of n){const u=i.transform,l=t.data.field(i.field);r.set(i.field,VU(u,l,e))}return r}class Zg extends mC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Hx extends mC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class zx{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&$U(u,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=uw(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=uw(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=eO();return this.mutations.forEach(i=>{const u=e.get(i.key),l=u.overlayedDocument;let g=this.applyToLocalView(l,u.mutatedFields);g=t.has(i.key)?null:g;const v=lO(l,g);null!==v&&r.set(i.key,v),l.isValidDocument()||l.convertToNoDocument(It.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),tn())}isEqual(e){return this.batchId===e.batchId&&Ug(this.mutations,e.mutations,(t,r)=>cO(t,r))&&Ug(this.baseMutations,e.baseMutations,(t,r)=>cO(t,r))}}class Gx{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){wt(e.mutations.length===r.length);let i=OU;const u=e.mutations;for(let l=0;l<u.length;l++)i=i.insert(u[l].key,r[l].version);return new Gx(e,t,r,i)}}class qx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class GU{constructor(e,t){this.count=e,this.unchangedNames=t}}var qr,fn;function pO(n){switch(n){default:return at();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function gO(n){if(void 0===n)return Fr("GRPC error has no .code"),ue.UNKNOWN;switch(n){case qr.OK:return ue.OK;case qr.CANCELLED:return ue.CANCELLED;case qr.UNKNOWN:return ue.UNKNOWN;case qr.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case qr.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case qr.INTERNAL:return ue.INTERNAL;case qr.UNAVAILABLE:return ue.UNAVAILABLE;case qr.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case qr.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case qr.NOT_FOUND:return ue.NOT_FOUND;case qr.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case qr.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case qr.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case qr.ABORTED:return ue.ABORTED;case qr.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case qr.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case qr.DATA_LOSS:return ue.DATA_LOSS;default:return at()}}(fn=qr||(qr={}))[fn.OK=0]="OK",fn[fn.CANCELLED=1]="CANCELLED",fn[fn.UNKNOWN=2]="UNKNOWN",fn[fn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fn[fn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fn[fn.NOT_FOUND=5]="NOT_FOUND",fn[fn.ALREADY_EXISTS=6]="ALREADY_EXISTS",fn[fn.PERMISSION_DENIED=7]="PERMISSION_DENIED",fn[fn.UNAUTHENTICATED=16]="UNAUTHENTICATED",fn[fn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fn[fn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fn[fn.ABORTED=10]="ABORTED",fn[fn.OUT_OF_RANGE=11]="OUT_OF_RANGE",fn[fn.UNIMPLEMENTED=12]="UNIMPLEMENTED",fn[fn.INTERNAL=13]="INTERNAL",fn[fn.UNAVAILABLE=14]="UNAVAILABLE",fn[fn.DATA_LOSS=15]="DATA_LOSS";class Wx{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return yC}static getOrCreateInstance(){return null===yC&&(yC=new Wx),yC}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let yC=null;function mO(){return new TextEncoder}const qU=new Lg([4294967295,4294967295],0);function yO(n){const e=mO().encode(n),t=new UV;return t.update(e),new Uint8Array(t.digest())}function vO(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Lg([t,r],0),new Lg([i,u],0)]}class Zx{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new lw(`Invalid padding: ${t}`);if(r<0)throw new lw(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new lw(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new lw(`Invalid padding when bitmap length is 0: ${t}`);this.yt=8*e.length-t,this.It=Lg.fromNumber(this.yt)}Tt(e,t,r){let i=e.add(t.multiply(Lg.fromNumber(r)));return 1===i.compare(qU)&&(i=new Lg([i.getBits(0),i.getBits(1)],0)),i.modulo(this.It).toNumber()}Et(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}At(e){if(0===this.yt)return!1;const t=yO(e),[r,i]=vO(t);for(let u=0;u<this.hashCount;u++){const l=this.Tt(r,i,u);if(!this.Et(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),l=new Zx(u,i,t);return r.forEach(g=>l.insert(g)),l}insert(e){if(0===this.yt)return;const t=yO(e),[r,i]=vO(t);for(let u=0;u<this.hashCount;u++){const l=this.Tt(r,i,u);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class lw extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class cw{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,dw.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new cw(It.min(),i,new $n(Kt),_s(),tn())}}class dw{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new dw(r,t,tn(),tn(),tn())}}class vC{constructor(e,t,r,i){this.vt=e,this.removedTargetIds=t,this.key=r,this.Pt=i}}class _O{constructor(e,t){this.targetId=e,this.bt=t}}class wO{constructor(e,t,r=Jr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class EO{constructor(){this.Vt=0,this.St=IO(),this.Dt=Jr.EMPTY_BYTE_STRING,this.Ct=!1,this.xt=!0}get current(){return this.Ct}get resumeToken(){return this.Dt}get Nt(){return 0!==this.Vt}get kt(){return this.xt}Mt(e){e.approximateByteSize()>0&&(this.xt=!0,this.Dt=e)}Ot(){let e=tn(),t=tn(),r=tn();return this.St.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:at()}}),new dw(this.Dt,this.Ct,e,t,r)}$t(){this.xt=!1,this.St=IO()}Ft(e,t){this.xt=!0,this.St=this.St.insert(e,t)}Bt(e){this.xt=!0,this.St=this.St.remove(e)}Lt(){this.Vt+=1}qt(){this.Vt-=1}Ut(){this.xt=!0,this.Ct=!0}}class WU{constructor(e){this.Kt=e,this.Gt=new Map,this.Qt=_s(),this.jt=bO(),this.zt=new $n(Kt)}Wt(e){for(const t of e.vt)e.Pt&&e.Pt.isFoundDocument()?this.Ht(t,e.Pt):this.Jt(t,e.key,e.Pt);for(const t of e.removedTargetIds)this.Jt(t,e.key,e.Pt)}Yt(e){this.forEachTarget(e,t=>{const r=this.Xt(t);switch(e.state){case 0:this.Zt(t)&&r.Mt(e.resumeToken);break;case 1:r.qt(),r.Nt||r.$t(),r.Mt(e.resumeToken);break;case 2:r.qt(),r.Nt||this.removeTarget(t);break;case 3:this.Zt(t)&&(r.Ut(),r.Mt(e.resumeToken));break;case 4:this.Zt(t)&&(this.te(t),r.Mt(e.resumeToken));break;default:at()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Gt.forEach((r,i)=>{this.Zt(i)&&t(i)})}ee(e){var t;const r=e.targetId,i=e.bt.count,u=this.ne(r);if(u){const l=u.target;if(cC(l))if(0===i){const g=new Ye(l.path);this.Jt(r,g,Kn.newNoDocument(g,It.min()))}else wt(1===i);else{const g=this.se(r);if(g!==i){const v=this.ie(e,g);0!==v&&(this.te(r),this.zt=this.zt.insert(r,2===v?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=Wx.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(b,T,M){var $,Z,ie,ve,Ae,Ge;const mt={localCacheCount:T,existenceFilterCount:M.count},yt=M.unchangedNames;return yt&&(mt.bloomFilter={applied:0===b,hashCount:null!==($=yt?.hashCount)&&void 0!==$?$:0,bitmapLength:null!==(ve=null===(ie=null===(Z=yt?.bits)||void 0===Z?void 0:Z.bitmap)||void 0===ie?void 0:ie.length)&&void 0!==ve?ve:0,padding:null!==(Ge=null===(Ae=yt?.bits)||void 0===Ae?void 0:Ae.padding)&&void 0!==Ge?Ge:0}),mt}(v,g,e.bt))}}}}ie(e,t){const{unchangedNames:r,count:i}=e.bt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:l=0},hashCount:g=0}=r;let v,b;try{v=Al(u).toUint8Array()}catch(T){if(T instanceof AN)return Io("Decoding the base64 bloom filter in existence filter failed ("+T.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw T}try{b=new Zx(v,l,g)}catch(T){return Io(T instanceof lw?"BloomFilter error: ":"Applying bloom filter failed: ",T),1}return 0===b.yt?1:i!==t-this.re(e.targetId,b)?2:0}re(e,t){const r=this.Kt.getRemoteKeysForTarget(e);let i=0;return r.forEach(u=>{const l=this.Kt.oe(),g=`projects/${l.projectId}/databases/${l.database}/documents/${u.path.canonicalString()}`;t.At(g)||(this.Jt(e,u,null),i++)}),i}ue(e){const t=new Map;this.Gt.forEach((u,l)=>{const g=this.ne(l);if(g){if(u.current&&cC(g.target)){const v=new Ye(g.target.path);null!==this.Qt.get(v)||this.ce(l,v)||this.Jt(l,v,Kn.newNoDocument(v,e))}u.kt&&(t.set(l,u.Ot()),u.$t())}});let r=tn();this.jt.forEach((u,l)=>{let g=!0;l.forEachWhile(v=>{const b=this.ne(v);return!b||"TargetPurposeLimboResolution"===b.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.Qt.forEach((u,l)=>l.setReadTime(e));const i=new cw(e,t,this.zt,this.Qt,r);return this.Qt=_s(),this.jt=bO(),this.zt=new $n(Kt),i}Ht(e,t){if(!this.Zt(e))return;const r=this.ce(e,t.key)?2:0;this.Xt(e).Ft(t.key,r),this.Qt=this.Qt.insert(t.key,t),this.jt=this.jt.insert(t.key,this.ae(t.key).add(e))}Jt(e,t,r){if(!this.Zt(e))return;const i=this.Xt(e);this.ce(e,t)?i.Ft(t,1):i.Bt(t),this.jt=this.jt.insert(t,this.ae(t).delete(e)),r&&(this.Qt=this.Qt.insert(t,r))}removeTarget(e){this.Gt.delete(e)}se(e){const t=this.Xt(e).Ot();return this.Kt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Lt(e){this.Xt(e).Lt()}Xt(e){let t=this.Gt.get(e);return t||(t=new EO,this.Gt.set(e,t)),t}ae(e){let t=this.jt.get(e);return t||(t=new Zn(Kt),this.jt=this.jt.insert(e,t)),t}Zt(e){const t=null!==this.ne(e);return t||Re("WatchChangeAggregator","Detected inactive target",e),t}ne(e){const t=this.Gt.get(e);return t&&t.Nt?null:this.Kt.he(e)}te(e){this.Gt.set(e,new EO),this.Kt.getRemoteKeysForTarget(e).forEach(t=>{this.Jt(e,t,null)})}ce(e,t){return this.Kt.getRemoteKeysForTarget(e).has(t)}}function bO(){return new $n(Ye.comparator)}function IO(){return new $n(Ye.comparator)}const ZU={asc:"ASCENDING",desc:"DESCENDING"},KU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YU={and:"AND",or:"OR"};class QU{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Kx(n,e){return n.useProto3Json||Y_(e)?e:{value:e}}function Kg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CO(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function JU(n,e){return Kg(n,e.toTimestamp())}function Lr(n){return wt(!!n),It.fromTimestamp(function(e){const t=dd(e);return new or(t.seconds,t.nanos)}(n))}function Yx(n,e){return(t=n,new hn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function DO(n){const e=hn.fromString(n);return wt(NO(e)),e}function hw(n,e){return Yx(n.databaseId,e.path)}function lu(n,e){const t=DO(e);if(t.get(1)!==n.databaseId.projectId)throw new Ce(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ce(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ye(SO(t))}function Qx(n,e){return Yx(n.databaseId,e)}function TO(n){const e=DO(n);return 4===e.length?hn.emptyPath():SO(e)}function fw(n){return new hn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function SO(n){return wt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function AO(n,e,t){return{name:hw(n,e),fields:t.value.mapValue.fields}}function xO(n,e,t){const r=lu(n,e.name),i=Lr(e.updateTime),u=e.createTime?Lr(e.createTime):It.min(),l=new Ci({mapValue:{fields:e.fields}}),g=Kn.newFoundDocument(r,i,u,l);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function pw(n,e){let t;if(e instanceof Wg)t={update:AO(n,e.key,e.value)};else if(e instanceof Zg)t={delete:hw(n,e.key)};else if(e instanceof Pl)t={update:AO(n,e.key,e.data),updateMask:oB(e.fieldMask)};else{if(!(e instanceof Hx))return at();t={verify:hw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const l=u.transform;if(l instanceof Gg)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof _f)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof wf)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof qg)return{fieldPath:u.field.canonicalString(),increment:l.wt};throw at()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:JU(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:at()),t;var i}function Jx(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?ar.updateTime(Lr(i.updateTime)):void 0!==i.exists?ar.exists(i.exists):ar.none():ar.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,l){let g=null;"setToServerValue"in l?(wt("REQUEST_TIME"===l.setToServerValue),g=new Gg):"appendMissingElements"in l?g=new _f(l.appendMissingElements.values||[]):"removeAllFromArray"in l?g=new wf(l.removeAllFromArray.values||[]):"increment"in l?g=new qg(u,l.increment):at();const v=Cr.fromServerFormat(l.fieldPath);return new aw(v,g)}(n,i)):[];var i;if(e.update){const i=lu(n,e.update.name),u=new Ci({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new vs((e.updateMask.fieldPaths||[]).map(b=>Cr.fromServerFormat(b)));return new Pl(i,u,l,t,r)}return new Wg(i,u,t,r)}if(e.delete){const i=lu(n,e.delete);return new Zg(i,t)}if(e.verify){const i=lu(n,e.verify);return new Hx(i,t)}return at()}function MO(n,e){return{documents:[Qx(n,e.path)]}}function Xx(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Qx(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Qx(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(v){if(0!==v.length)return kO(An.create(v,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const u=function(v){if(0!==v.length)return v.map(b=>{return{field:yd((T=b).field),direction:rB(T.dir)};var T})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=Kx(n,e.limit);var g,v;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function PO(n){let e=TO(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){wt(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let u=[];t.where&&(u=function(T){const M=RO(T);return M instanceof An&&Ox(M)?M.getFilters():[M]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(T=>{return new $g(Yg((M=T).field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let g=null;t.limit&&(g=function(T){let M;return M="object"==typeof T?T.value:T,Y_(M)?null:M}(t.limit));let v=null;var T;t.startAt&&(v=new md((T=t.startAt).values||[],!!T.before));let b=null;return t.endAt&&(b=function(T){return new md(T.values||[],!T.before)}(t.endAt)),WN(e,i,l,u,g,"F",v,b)}function RO(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Yg(e.unaryFilter.field);return cn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Yg(e.unaryFilter.field);return cn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Yg(e.unaryFilter.field);return cn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Yg(e.unaryFilter.field);return cn.create(u,"!=",{nullValue:"NULL_VALUE"});default:return at()}}(n):void 0!==n.fieldFilter?cn.create(Yg((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return at()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return An.create(e.compositeFilter.filters.map(t=>RO(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return at()}}(e.compositeFilter.op))}(n):at();var e}function rB(n){return ZU[n]}function iB(n){return KU[n]}function sB(n){return YU[n]}function yd(n){return{fieldPath:n.canonicalString()}}function Yg(n){return Cr.fromServerFormat(n.fieldPath)}function kO(n){return n instanceof cn?function(e){if("=="===e.op){if(PN(e.value))return{unaryFilter:{field:yd(e.field),op:"IS_NAN"}};if(MN(e.value))return{unaryFilter:{field:yd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(PN(e.value))return{unaryFilter:{field:yd(e.field),op:"IS_NOT_NAN"}};if(MN(e.value))return{unaryFilter:{field:yd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yd(e.field),op:iB(e.op),value:e.value}}}(n):n instanceof An?function(e){const t=e.getFilters().map(r=>kO(r));return 1===t.length?t[0]:{compositeFilter:{op:sB(e.op),filters:t}}}(n):at()}function oB(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function NO(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Rl{constructor(e,t,r,i,u=It.min(),l=It.min(),g=Jr.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=g,this.expectedCount=v}withSequenceNumber(e){return new Rl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Rl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Rl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Rl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class OO{constructor(e){this.le=e}}function FO(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:_C(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:hw(i=n.le,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Kg(i,u.version.toTimestamp()),createTime:Kg(i,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ef(e.version)};else{if(!e.isUnknownDocument())return at();r.unknownDocument={path:t.path.toArray(),version:Ef(e.version)}}var i,u;return r}function _C(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ef(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function bf(n){const e=new or(n.seconds,n.nanoseconds);return It.fromTimestamp(e)}function If(n,e){const t=(e.baseMutations||[]).map(u=>Jx(n.le,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>Jx(n.le,u)),i=or.fromMillis(e.localWriteTimeMs);return new zx(e.batchId,i,t,r)}function gw(n){const e=bf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?bf(n.lastLimboFreeSnapshotVersion):It.min();let r;var i;return void 0!==n.query.documents?(wt(1===(i=n.query).documents.length),r=rs(zg(TO(i.documents[0])))):r=rs(PO(n.query)),new Rl(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Jr.fromBase64String(n.resumeToken))}function LO(n,e){const t=Ef(e.snapshotVersion),r=Ef(e.lastLimboFreeSnapshotVersion);let i;i=cC(e.target)?MO(n.le,e.target):Xx(n.le,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:yf(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function eM(n){const e=PO({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?fC(e,e.limit,"L"):e}function tM(n,e){return new qx(e.largestBatchId,Jx(n.le,e.overlayMutation))}function VO(n,e){const t=e.path.lastSegment();return[n,Vi(e.path.popLast()),t]}function UO(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Ef(r.readTime),documentKey:Vi(r.documentKey.path),largestBatchId:r.largestBatchId}}class uB{getBundleMetadata(e,t){return BO(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:bf(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return BO(e).put({bundleId:(r=t).id,createTime:Ef(Lr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return jO(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:eM(i.bundledQuery),readTime:bf(i.readTime)};var i})}saveNamedQuery(e,t){return jO(e).put({name:(r=t).name,readTime:Ef(Lr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function BO(n){return di(n,"bundles")}function jO(n){return di(n,"namedQueries")}class wC{constructor(e,t){this.serializer=e,this.userId=t}static fe(e,t){return new wC(e,t.uid||"")}getOverlay(e,t){return mw(e).get(VO(this.userId,t)).next(r=>r?tM(this.serializer,r):null)}getOverlays(e,t){const r=uu();return re.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((u,l)=>{const g=new qx(t,l);i.push(this.de(e,g))}),re.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Vi(l.getCollectionPath())));const u=[];return i.forEach(l=>{const g=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(mw(e).J("collectionPathOverlayIndex",g))}),re.waitFor(u)}getOverlaysForCollection(e,t,r){const i=uu(),u=Vi(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return mw(e).j("collectionPathOverlayIndex",l).next(g=>{for(const v of g){const b=tM(this.serializer,v);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=uu();let l;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return mw(e).X({index:"collectionGroupOverlayIndex",range:g},(v,b,T)=>{const M=tM(this.serializer,b);u.size()<i||M.largestBatchId===l?(u.set(M.getKey(),M),l=M.largestBatchId):T.done()}).next(()=>u)}de(e,t){return mw(e).put(function(r,i,u){const[l,g,v]=VO(i,u.mutation.key);return{userId:i,collectionPath:g,documentId:v,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:pw(r.le,u.mutation)}}(this.serializer,this.userId,t))}}function mw(n){return di(n,"documentOverlays")}class Cf{constructor(){}_e(e,t){this.we(e,t),t.me()}we(e,t){if("nullValue"in e)this.ge(t,5);else if("booleanValue"in e)this.ge(t,10),t.ye(e.booleanValue?1:0);else if("integerValue"in e)this.ge(t,15),t.ye(Dr(e.integerValue));else if("doubleValue"in e){const r=Dr(e.doubleValue);isNaN(r)?this.ge(t,13):(this.ge(t,15),Q_(r)?t.ye(0):t.ye(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ge(t,20),"string"==typeof r?t.pe(r):(t.pe(`${r.seconds||""}`),t.ye(r.nanos||0))}else if("stringValue"in e)this.Ie(e.stringValue,t),this.Te(t);else if("bytesValue"in e)this.ge(t,30),t.Ee(Al(e.bytesValue)),this.Te(t);else if("referenceValue"in e)this.Ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ge(t,45),t.ye(r.latitude||0),t.ye(r.longitude||0)}else"mapValue"in e?RN(e)?this.ge(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Te(t)):"arrayValue"in e?(this.ve(e.arrayValue,t),this.Te(t)):at()}Ie(e,t){this.ge(t,25),this.Pe(e,t)}Pe(e,t){t.pe(e)}Re(e,t){const r=e.fields||{};this.ge(t,55);for(const i of Object.keys(r))this.Ie(i,t),this.we(r[i],t)}ve(e,t){const r=e.values||[];this.ge(t,50);for(const i of r)this.we(i,t)}Ae(e,t){this.ge(t,37),Ye.fromName(e).path.forEach(r=>{this.ge(t,60),this.Pe(r,t)})}ge(e,t){e.ye(t)}Te(e){e.ye(2)}}function lB(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function $O(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=lB(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Cf.be=new Cf;class cB{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ve(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Se(r.value),r=t.next();this.De()}Ce(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.xe(r.value),r=t.next();this.Ne()}ke(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Se(r);else if(r<2048)this.Se(960|r>>>6),this.Se(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Se(480|r>>>12),this.Se(128|63&r>>>6),this.Se(128|63&r);else{const i=t.codePointAt(0);this.Se(240|i>>>18),this.Se(128|63&i>>>12),this.Se(128|63&i>>>6),this.Se(128|63&i)}}this.De()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.xe(r);else if(r<2048)this.xe(960|r>>>6),this.xe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.xe(480|r>>>12),this.xe(128|63&r>>>6),this.xe(128|63&r);else{const i=t.codePointAt(0);this.xe(240|i>>>18),this.xe(128|63&i>>>12),this.xe(128|63&i>>>6),this.xe(128|63&i)}}this.Ne()}Oe(e){const t=this.$e(e),r=$O(t);this.Fe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Be(e){const t=this.$e(e),r=$O(t);this.Fe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Le(){this.qe(255),this.qe(255)}Ue(){this.Ke(255),this.Ke(255)}reset(){this.position=0}seed(e){this.Fe(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ge(){return this.buffer.slice(0,this.position)}$e(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Se(e){const t=255&e;0===t?(this.qe(0),this.qe(255)):255===t?(this.qe(255),this.qe(0)):this.qe(t)}xe(e){const t=255&e;0===t?(this.Ke(0),this.Ke(255)):255===t?(this.Ke(255),this.Ke(0)):this.Ke(e)}De(){this.qe(0),this.qe(1)}Ne(){this.Ke(0),this.Ke(1)}qe(e){this.Fe(1),this.buffer[this.position++]=e}Ke(e){this.Fe(1),this.buffer[this.position++]=~e}Fe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class dB{constructor(e){this.Qe=e}Ee(e){this.Qe.Ve(e)}pe(e){this.Qe.ke(e)}ye(e){this.Qe.Oe(e)}me(){this.Qe.Le()}}class hB{constructor(e){this.Qe=e}Ee(e){this.Qe.Ce(e)}pe(e){this.Qe.Me(e)}ye(e){this.Qe.Be(e)}me(){this.Qe.Ue()}}class yw{constructor(){this.Qe=new cB,this.je=new dB(this.Qe),this.ze=new hB(this.Qe)}seed(e){this.Qe.seed(e)}We(e){return 0===e?this.je:this.ze}Ge(){return this.Qe.Ge()}reset(){this.Qe.reset()}}class Df{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}He(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Df(this.indexId,this.documentKey,this.arrayValue,r)}}function vd(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=HO(n.arrayValue,e.arrayValue),0!==t?t:(t=HO(n.directionalValue,e.directionalValue),0!==t?t:Ye.comparator(n.documentKey,e.documentKey)))}function HO(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class fB{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Je=e.orderBy,this.Ye=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xe=r:this.Ye.push(r)}}Ze(e){wt(e.collectionGroup===this.collectionId);const t=Sx(e);if(void 0!==t&&!this.tn(t))return!1;const r=pf(e);let i=0,u=0;for(;i<r.length&&this.tn(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Xe){const l=r[i];if(!this.en(this.Xe,l)||!this.nn(this.Je[u++],l))return!1;++i}for(;i<r.length;++i)if(u>=this.Je.length||!this.nn(this.Je[u++],r[i]))return!1;return!0}tn(e){for(const t of this.Ye)if(this.en(t,e))return!0;return!1}en(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}nn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function zO(n){var e,t;if(wt(n instanceof cn||n instanceof An),n instanceof cn){if(n instanceof zN){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>cn.create(n.field,"==",u)))||[];return An.create(i,"or")}return n}const r=n.filters.map(i=>zO(i));return An.create(r,n.op)}function pB(n){if(0===n.getFilters().length)return[];const e=iM(zO(n));return wt(GO(e)),nM(e)||rM(e)?[e]:e.getFilters()}function nM(n){return n instanceof cn}function rM(n){return n instanceof An&&Ox(n)}function GO(n){return nM(n)||rM(n)||function(e){if(e instanceof An&&Nx(e)){for(const t of e.getFilters())if(!nM(t)&&!rM(t))return!1;return!0}return!1}(n)}function iM(n){if(wt(n instanceof cn||n instanceof An),n instanceof cn)return n;if(1===n.filters.length)return iM(n.filters[0]);const e=n.filters.map(r=>iM(r));let t=An.create(e,n.op);return t=EC(t),GO(t)?t:(wt(t instanceof An),wt(Hg(t)),wt(t.filters.length>1),t.filters.reduce((r,i)=>sM(r,i)))}function sM(n,e){let t;return wt(n instanceof cn||n instanceof An),wt(e instanceof cn||e instanceof An),t=n instanceof cn?e instanceof cn?An.create([n,e],"and"):qO(n,e):e instanceof cn?qO(e,n):function(r,i){if(wt(r.filters.length>0&&i.filters.length>0),Hg(r)&&Hg(i))return jN(r,i.getFilters());const u=Nx(r)?r:i,l=Nx(r)?i:r,g=u.filters.map(v=>sM(v,l));return An.create(g,"or")}(n,e),EC(t)}function qO(n,e){if(Hg(e))return jN(e,n.getFilters());{const t=e.filters.map(r=>sM(n,r));return An.create(t,"or")}}function EC(n){if(wt(n instanceof cn||n instanceof An),n instanceof cn)return n;const e=n.getFilters();if(1===e.length)return EC(e[0]);if(UN(n))return n;const t=e.map(i=>EC(i)),r=[];return t.forEach(i=>{i instanceof cn?r.push(i):i instanceof An&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:An.create(r,n.op)}class gB{constructor(){this.sn=new oM}addToCollectionParentIndex(e,t){return this.sn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.sn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(Hs.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(Hs.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class oM{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Zn(hn.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Zn(hn.comparator)).toArray()}}const bC=new Uint8Array(0);class mB{constructor(e,t){this.user=e,this.databaseId=t,this.rn=new oM,this.on=new Ml(r=>yf(r),(r,i)=>nw(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.rn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.rn.add(t)});const u={collectionId:r,parent:Vi(i)};return WO(e).put(u)}return re.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[hN(t),""],!1,!0);return WO(e).j(i).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(ou(l.parent))}return r})}addFieldIndex(e,t){const r=IC(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var l;delete i.indexId;const u=r.add(i);if(t.indexState){const l=_w(e);return u.next(g=>{l.put(UO(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=IC(e),i=_w(e),u=vw(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=vw(e);let i=!0;const u=new Map;return re.forEach(this.un(t),l=>this.cn(e,l).next(g=>{i&&(i=!!g),u.set(l,g)})).next(()=>{if(i){let l=tn();const g=[];return re.forEach(u,(v,b)=>{var T;Re("IndexedDbIndexManager",`Using index ${T=v,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(yt=>`${yt.fieldPath}:${yt.kind}`).join(",")}`} to execute ${yf(t)}`);const M=function(yt,en){const rn=Sx(en);if(void 0===rn)return null;for(const pn of dC(yt,rn.fieldPath))switch(pn.op){case"array-contains-any":return pn.value.arrayValue.values||[];case"array-contains":return[pn.value]}return null}(b,v),$=function(yt,en){const rn=new Map;for(const pn of pf(en))for(const os of dC(yt,pn.fieldPath))switch(os.op){case"==":case"in":rn.set(pn.fieldPath.canonicalString(),os.value);break;case"not-in":case"!=":return rn.set(pn.fieldPath.canonicalString(),os.value),Array.from(rn.values())}return null}(b,v),Z=function(yt,en){const rn=[];let pn=!0;for(const os of pf(en)){const Sd=0===os.kind?GN(yt,os.fieldPath,yt.startAt):qN(yt,os.fieldPath,yt.startAt);rn.push(Sd.value),pn&&(pn=Sd.inclusive)}return new md(rn,pn)}(b,v),ie=function(yt,en){const rn=[];let pn=!0;for(const os of pf(en)){const Sd=0===os.kind?qN(yt,os.fieldPath,yt.endAt):GN(yt,os.fieldPath,yt.endAt);rn.push(Sd.value),pn&&(pn=Sd.inclusive)}return new md(rn,pn)}(b,v),ve=this.an(v,b,Z),Ae=this.an(v,b,ie),Ge=this.hn(v,b,$),mt=this.ln(v.indexId,M,ve,Z.inclusive,Ae,ie.inclusive,Ge);return re.forEach(mt,yt=>r.H(yt,t.limit).next(en=>{en.forEach(rn=>{const pn=Ye.fromSegments(rn.documentKey);l.has(pn)||(l=l.add(pn),g.push(pn))})}))}).next(()=>g)}return re.resolve(null)})}un(e){let t=this.on.get(e);return t||(t=0===e.filters.length?[e]:pB(An.create(e.filters,"and")).map(r=>Lx(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.on.set(e,t),t)}ln(e,t,r,i,u,l,g){const v=(null!=t?t.length:1)*Math.max(r.length,u.length),b=v/(null!=t?t.length:1),T=[];for(let M=0;M<v;++M){const $=t?this.fn(t[M/b]):bC,Z=this.dn(e,$,r[M%b],i),ie=this._n(e,$,u[M%b],l),ve=g.map(Ae=>this.dn(e,$,Ae,!0));T.push(...this.createRange(Z,ie,ve))}return T}dn(e,t,r,i){const u=new Df(e,Ye.empty(),t,r);return i?u:u.He()}_n(e,t,r,i){const u=new Df(e,Ye.empty(),t,r);return i?u.He():u}cn(e,t){const r=new fB(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let l=null;for(const g of u)r.Ze(g)&&(!l||g.fields.length>l.fields.length)&&(l=g);return l})}getIndexType(e,t){let r=2;const i=this.un(t);return re.forEach(i,u=>this.cn(e,u).next(l=>{l?0!==r&&l.fields.length<function(g){let v=new Zn(Cr.comparator),b=!1;for(const T of g.filters)for(const M of T.getFlattenedFilters())M.field.isKeyField()||("array-contains"===M.op||"array-contains-any"===M.op?b=!0:v=v.add(M.field));for(const T of g.orderBy)T.field.isKeyField()||(v=v.add(T.field));return v.size+(b?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}wn(e,t){const r=new yw;for(const i of pf(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const l=r.We(i.kind);Cf.be._e(u,l)}return r.Ge()}fn(e){const t=new yw;return Cf.be._e(e,t.We(0)),t.Ge()}mn(e,t){const r=new yw;return Cf.be._e(mf(this.databaseId,t),r.We(function(i){const u=pf(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.Ge()}hn(e,t,r){if(null===r)return[];let i=[];i.push(new yw);let u=0;for(const l of pf(e)){const g=r[u++];for(const v of i)if(this.gn(t,l.fieldPath)&&ew(g))i=this.yn(i,l,g);else{const b=v.We(l.kind);Cf.be._e(g,b)}}return this.pn(i)}an(e,t,r){return this.hn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Ge();return t}yn(e,t,r){const i=[...e],u=[];for(const l of r.arrayValue.values||[])for(const g of i){const v=new yw;v.seed(g.Ge()),Cf.be._e(l,v.We(t.kind)),u.push(v)}return u}gn(e,t){return!!e.filters.find(r=>r instanceof cn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=IC(e),i=_w(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const l=[];return re.forEach(u,g=>i.get([g.indexId,this.uid]).next(v=>{l.push(function(b,T){const M=T?new Z_(T.sequenceNumber,new Hs(bf(T.readTime),new Ye(ou(T.documentKey)),T.largestBatchId)):Z_.empty(),$=b.fields.map(([Z,ie])=>new tC(Cr.fromServerFormat(Z),ie));return new eC(b.indexId,b.collectionGroup,$,M)}(g,v))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Kt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=IC(e),u=_w(e);return this.In(e).next(l=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>re.forEach(g,v=>u.put(UO(v.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return re.forEach(t,(i,u)=>{const l=r.get(i.collectionGroup);return(l?re.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(g=>(r.set(i.collectionGroup,g),re.forEach(g,v=>this.Tn(e,i,v).next(b=>{const T=this.En(u,v);return b.isEqual(T)?re.resolve():this.An(e,u,v,b,T)}))))})}Rn(e,t,r,i){return vw(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return vw(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}Tn(e,t,r){const i=vw(e);let u=new Zn(vd);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(l,g)=>{u=u.add(new Df(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}En(e,t){let r=new Zn(vd);const i=this.wn(t,e);if(null==i)return r;const u=Sx(t);if(null!=u){const l=e.data.field(u.fieldPath);if(ew(l))for(const g of l.arrayValue.values||[])r=r.add(new Df(t.indexId,e.key,this.fn(g),i))}else r=r.add(new Df(t.indexId,e.key,bC,i));return r}An(e,t,r,i,u){Re("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(g,v,b,T,M){const $=g.getIterator(),Z=v.getIterator();let ie=Bg($),ve=Bg(Z);for(;ie||ve;){let Ae=!1,Ge=!1;if(ie&&ve){const mt=b(ie,ve);mt<0?Ge=!0:mt>0&&(Ae=!0)}else null!=ie?Ge=!0:Ae=!0;Ae?(T(ve),ve=Bg(Z)):Ge?(M(ie),ie=Bg($)):(ie=Bg($),ve=Bg(Z))}}(i,u,vd,g=>{l.push(this.Rn(e,t,r,g))},g=>{l.push(this.vn(e,t,r,g))}),re.waitFor(l)}In(e){let t=1;return _w(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,g)=>vd(l,g)).filter((l,g,v)=>!g||0!==vd(l,v[g-1]));const i=[];i.push(e);for(const l of r){const g=vd(l,e),v=vd(l,t);if(0===g)i[0]=e.He();else if(g>0&&v<0)i.push(l),i.push(l.He());else if(v>0)break}i.push(t);const u=[];for(let l=0;l<i.length;l+=2){if(this.Pn(i[l],i[l+1]))return[];u.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,bC,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,bC,[]]))}return u}Pn(e,t){return vd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ZO)}getMinOffset(e,t){return re.mapArray(this.un(t),r=>this.cn(e,r).next(i=>i||at())).next(ZO)}}function WO(n){return di(n,"collectionParents")}function vw(n){return di(n,"indexEntries")}function IC(n){return di(n,"indexConfiguration")}function _w(n){return di(n,"indexState")}function ZO(n){wt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Ax(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Hs(e.readTime,e.documentKey,t)}const KO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ui{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ui(e,Ui.DEFAULT_COLLECTION_PERCENTILE,Ui.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function YO(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let g=0;const v=r.X({range:l},(T,M,$)=>(g++,$.delete()));u.push(v.next(()=>{wt(1===g)}));const b=[];for(const T of t.mutations){const M=EN(e,T.key.path,t.batchId);u.push(i.delete(M)),b.push(T.key)}return re.waitFor(u).next(()=>b)}function CC(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw at();e=n.noDocument}return JSON.stringify(e).length}Ui.DEFAULT_COLLECTION_PERCENTILE=10,Ui.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ui.DEFAULT=new Ui(41943040,Ui.DEFAULT_COLLECTION_PERCENTILE,Ui.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ui.DISABLED=new Ui(-1,0,0);class DC{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.bn={}}static fe(e,t,r,i){wt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new DC(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _d(e).X({index:"userMutationsIndex",range:r},(i,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=Qg(e),l=_d(e);return l.add({}).next(g=>{wt("number"==typeof g);const v=new zx(g,t,r,i),b=function($,Z,ie){const ve=ie.baseMutations.map(Ge=>pw($.le,Ge)),Ae=ie.mutations.map(Ge=>pw($.le,Ge));return{userId:Z,batchId:ie.batchId,localWriteTimeMs:ie.localWriteTime.toMillis(),baseMutations:ve,mutations:Ae}}(this.serializer,this.userId,v),T=[];let M=new Zn(($,Z)=>Kt($.canonicalString(),Z.canonicalString()));for(const $ of i){const Z=EN(this.userId,$.key.path,g);M=M.add($.key.path.popLast()),T.push(l.put(b)),T.push(u.put(Z,rU))}return M.forEach($=>{T.push(this.indexManager.addToCollectionParentIndex(e,$))}),e.addOnCommittedListener(()=>{this.bn[g]=v.keys()}),re.waitFor(T).next(()=>v)})}lookupMutationBatch(e,t){return _d(e).get(t).next(r=>r?(wt(r.userId===this.userId),If(this.serializer,r)):null)}Vn(e,t){return this.bn[t]?re.resolve(this.bn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.bn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return _d(e).X({index:"userMutationsIndex",range:i},(l,g,v)=>{g.userId===this.userId&&(wt(g.batchId>=r),u=If(this.serializer,g)),v.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return _d(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _d(e).j("userMutationsIndex",t).next(r=>r.map(i=>If(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=rC(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return Qg(e).X({range:i},(l,g,v)=>{const[b,T,M]=l,$=ou(T);if(b===this.userId&&t.path.isEqual($))return _d(e).get(M).next(Z=>{if(!Z)throw at();wt(Z.userId===this.userId),u.push(If(this.serializer,Z))});v.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Zn(Kt);const i=[];return t.forEach(u=>{const l=rC(this.userId,u.path),g=IDBKeyRange.lowerBound(l),v=Qg(e).X({range:g},(b,T,M)=>{const[$,Z,ie]=b,ve=ou(Z);$===this.userId&&u.path.isEqual(ve)?r=r.add(ie):M.done()});i.push(v)}),re.waitFor(i).next(()=>this.Sn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=rC(this.userId,r),l=IDBKeyRange.lowerBound(u);let g=new Zn(Kt);return Qg(e).X({range:l},(v,b,T)=>{const[M,$,Z]=v,ie=ou($);M===this.userId&&r.isPrefixOf(ie)?ie.length===i&&(g=g.add(Z)):T.done()}).next(()=>this.Sn(e,g))}Sn(e,t){const r=[],i=[];return t.forEach(u=>{i.push(_d(e).get(u).next(l=>{if(null===l)throw at();wt(l.userId===this.userId),r.push(If(this.serializer,l))}))}),re.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return YO(e.at,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Dn(t.batchId)}),re.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Dn(e){delete this.bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return re.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Qg(e).X({range:r},(u,l,g)=>{if(u[0]===this.userId){const v=ou(u[1]);i.push(v)}else g.done()}).next(()=>{wt(0===i.length)})})}containsKey(e,t){return QO(e,this.userId,t)}Cn(e){return JO(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function QO(n,e,t){const r=rC(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return Qg(n).X({range:u,Y:!0},(g,v,b)=>{const[T,M,$]=g;T===e&&M===i&&(l=!0),b.done()}).next(()=>l)}function _d(n){return di(n,"mutations")}function Qg(n){return di(n,"documentMutations")}function JO(n){return di(n,"mutationQueues")}class Tf{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static Nn(){return new Tf(0)}static kn(){return new Tf(-1)}}class yB{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Mn(e).next(t=>{const r=new Tf(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Mn(e).next(t=>It.fromTimestamp(new or(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Mn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Mn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.$n(e,t).next(()=>this.Mn(e).next(r=>(r.targetCount+=1,this.Fn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.$n(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Jg(e).delete(t.targetId)).next(()=>this.Mn(e)).next(r=>(wt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return Jg(e).X((l,g)=>{const v=gw(g);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(i++,u.push(this.removeTargetData(e,v)))}).next(()=>re.waitFor(u)).next(()=>i)}forEachTarget(e,t){return Jg(e).X((r,i)=>{const u=gw(i);t(u)})}Mn(e){return XO(e).get("targetGlobalKey").next(t=>(wt(null!==t),t))}On(e,t){return XO(e).put("targetGlobalKey",t)}$n(e,t){return Jg(e).put(LO(this.serializer,t))}Fn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Mn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=yf(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Jg(e).X({range:i,index:"queryTargetsIndex"},(l,g,v)=>{const b=gw(g);nw(t,b.target)&&(u=b,v.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=wd(e);return t.forEach(l=>{const g=Vi(l.path);i.push(u.put({targetId:r,path:g})),i.push(this.referenceDelegate.addReference(e,r,l))}),re.waitFor(i)}removeMatchingKeys(e,t,r){const i=wd(e);return re.forEach(t,u=>{const l=Vi(u.path);return re.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=wd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=wd(e);let u=tn();return i.X({range:r,Y:!0},(l,g,v)=>{const b=ou(l[1]),T=new Ye(b);u=u.add(T)}).next(()=>u)}containsKey(e,t){const r=Vi(t.path),i=IDBKeyRange.bound([r],[hN(r)],!1,!0);let u=0;return wd(e).X({index:"documentTargetsIndex",Y:!0,range:i},([l,g],v,b)=>{0!==l&&(u++,b.done())}).next(()=>u>0)}he(e,t){return Jg(e).get(t).next(r=>r?gw(r):null)}}function Jg(n){return di(n,"targets")}function XO(n){return di(n,"targetGlobal")}function wd(n){return di(n,"targetDocuments")}function eF([n,e],[t,r]){const i=Kt(n,t);return 0===i?Kt(e,r):i}class vB{constructor(e){this.Bn=e,this.buffer=new Zn(eF),this.Ln=0}qn(){return++this.Ln}Un(e){const t=[e,this.qn()];if(this.buffer.size<this.Bn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();eF(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class tF{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Kn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Kn&&(this.Kn.cancel(),this.Kn=null)}get started(){return null!==this.Kn}Gn(e){var t=this;Re("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Kn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,J.Z)(function*(){t.Kn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){ld(r)?Re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ud(r)}yield t.Gn(3e5)}))}}class _B{constructor(e,t){this.Qn=e,this.params=t}calculateTargetCount(e,t){return this.Qn.jn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return re.resolve(zs.ct);const r=new vB(t);return this.Qn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.Qn.zn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Qn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Qn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(KO)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),KO):this.Wn(e,t))}getCacheSize(e){return this.Qn.getCacheSize(e)}Wn(e,t){let r,i,u,l,g,v,b;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),i=this.params.maximumSequenceNumbersToCollect):i=M,l=Date.now(),this.nthSequenceNumber(e,i))).next(M=>(r=M,g=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(b=Date.now(),Dx()<=Us.in.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-T}ms\n\tDetermined least recently used ${i} in `+(g-l)+`ms\n\tRemoved ${u} targets in `+(v-g)+`ms\n\tRemoved ${M} documents in `+(b-v)+`ms\nTotal Duration: ${b-T}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:M})))}}class wB{constructor(e,t){this.db=e,this.garbageCollector=function nF(n,e){return new _B(n,e)}(this,t)}jn(e){const t=this.Hn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Hn(e){let t=0;return this.zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}zn(e,t){return this.Jn(e,(r,i)=>t(i))}addReference(e,t,r){return TC(e,r)}removeReference(e,t,r){return TC(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return TC(e,t)}Yn(e,t){return function(r,i){let u=!1;return JO(r).Z(l=>QO(r,l,i).next(g=>(g&&(u=!0),re.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Jn(e,(l,g)=>{if(g<=t){const v=this.Yn(e,l).next(b=>{if(!b)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,It.min()),wd(e).delete([0,Vi(l.path)])))});i.push(v)}}).next(()=>re.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return TC(e,t)}Jn(e,t){const r=wd(e);let i,u=zs.ct;return r.X({index:"documentTargetsIndex"},([l,g],{path:v,sequenceNumber:b})=>{0===l?(u!==zs.ct&&t(new Ye(ou(i)),u),u=b,i=v):u=zs.ct}).next(()=>{u!==zs.ct&&t(new Ye(ou(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function TC(n,e){return wd(n).put((r=n.currentSequenceNumber,{targetId:0,path:Vi(e.path),sequenceNumber:r}));var r}class rF{constructor(){this.changes=new Ml(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Kn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class EB{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Sf(e).put(r)}removeEntry(e,t,r){return Sf(e).delete(function(i,u){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],_C(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Xn(e,r)))}getEntry(e,t){let r=Kn.newInvalidDocument(t);return Sf(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(ww(t))},(i,u)=>{r=this.Zn(t,u)}).next(()=>r)}ts(e,t){let r={size:0,document:Kn.newInvalidDocument(t)};return Sf(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(ww(t))},(i,u)=>{r={document:this.Zn(t,u),size:CC(u)}}).next(()=>r)}getEntries(e,t){let r=_s();return this.es(e,t,(i,u)=>{const l=this.Zn(i,u);r=r.insert(i,l)}).next(()=>r)}ns(e,t){let r=_s(),i=new $n(Ye.comparator);return this.es(e,t,(u,l)=>{const g=this.Zn(u,l);r=r.insert(u,g),i=i.insert(u,CC(l))}).next(()=>({documents:r,ss:i}))}es(e,t,r){if(t.isEmpty())return re.resolve();let i=new Zn(aF);t.forEach(v=>i=i.add(v));const u=IDBKeyRange.bound(ww(i.first()),ww(i.last())),l=i.getIterator();let g=l.getNext();return Sf(e).X({index:"documentKeyIndex",range:u},(v,b,T)=>{const M=Ye.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;g&&aF(g,M)<0;)r(g,null),g=l.getNext();g&&g.isEqual(M)&&(r(g,b),g=l.hasNext()?l.getNext():null),g?T.G(ww(g)):T.done()}).next(()=>{for(;g;)r(g,null),g=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),_C(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Sf(e).j(IDBKeyRange.bound(l,g,!0)).next(v=>{let b=_s();for(const T of v){const M=this.Zn(Ye.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);M.isFoundDocument()&&(iw(t,M)||i.has(M.key))&&(b=b.insert(M.key,M))}return b})}getAllFromCollectionGroup(e,t,r,i){let u=_s();const l=oF(t,r),g=oF(t,Hs.max());return Sf(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,g,!0)},(v,b,T)=>{const M=this.Zn(Ye.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(M.key,M),u.size===i&&T.done()}).next(()=>u)}newChangeBuffer(e){return new bB(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return sF(e).get("remoteDocumentGlobalKey").next(t=>(wt(!!t),t))}Xn(e,t){return sF(e).put("remoteDocumentGlobalKey",t)}Zn(e,t){if(t){const r=function aB(n,e){let t;if(e.document)t=xO(n.le,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ye.fromSegments(e.noDocument.path),i=bf(e.noDocument.readTime);t=Kn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return at();{const r=Ye.fromSegments(e.unknownDocument.path),i=bf(e.unknownDocument.version);t=Kn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new or(r[0],r[1]);return It.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(It.min()))return r}return Kn.newInvalidDocument(e)}}function iF(n){return new EB(n)}class bB extends rF{constructor(e,t){super(),this.rs=e,this.trackRemovals=t,this.os=new Ml(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Zn((u,l)=>Kt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const g=this.os.get(u);if(t.push(this.rs.removeEntry(e,u,g.readTime)),l.isValidDocument()){const v=FO(this.rs.serializer,l);i=i.add(u.path.popLast());const b=CC(v);r+=b-g.size,t.push(this.rs.addEntry(e,u,v))}else if(r-=g.size,this.trackRemovals){const v=FO(this.rs.serializer,l.convertToNoDocument(It.min()));t.push(this.rs.addEntry(e,u,v))}}),i.forEach(u=>{t.push(this.rs.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.rs.updateMetadata(e,r)),re.waitFor(t)}getFromCache(e,t){return this.rs.ts(e,t).next(r=>(this.os.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.rs.ns(e,t).next(({documents:r,ss:i})=>(i.forEach((u,l)=>{this.os.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function sF(n){return di(n,"remoteDocumentGlobal")}function Sf(n){return di(n,"remoteDocumentsV14")}function ww(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function oF(n,e){const t=e.documentKey.path.toArray();return[n,_C(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function aF(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=Kt(t[u],r[u]),i)return i;return i=Kt(t.length,r.length),i||(i=Kt(t[t.length-2],r[r.length-2]),i||Kt(t[t.length-1],r[r.length-1]))}class IB{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class uF{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&uw(r.mutation,i,vs.empty(),or.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,tn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=tn()){const i=uu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(u=>{let l=sw();return u.forEach((g,v)=>{l=l.insert(g,v.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=uu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,tn()))}populateOverlays(e,t,r){const i=[];return r.forEach(u=>{t.has(u)||i.push(u)}),this.documentOverlayCache.getOverlays(e,i).next(u=>{u.forEach((l,g)=>{t.set(l,g)})})}computeViews(e,t,r,i){let u=_s();const l=ow(),g=ow();return t.forEach((v,b)=>{const T=r.get(b.key);i.has(b.key)&&(void 0===T||T.mutation instanceof Pl)?u=u.insert(b.key,b):void 0!==T?(l.set(b.key,T.mutation.getFieldMask()),uw(T.mutation,b,T.mutation.getFieldMask(),or.now())):l.set(b.key,vs.empty())}),this.recalculateAndSaveOverlays(e,u).next(v=>(v.forEach((b,T)=>l.set(b,T)),t.forEach((b,T)=>{var M;return g.set(b,new IB(T,null!==(M=l.get(b))&&void 0!==M?M:null))}),g))}recalculateAndSaveOverlays(e,t){const r=ow();let i=new $n((l,g)=>l-g),u=tn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const g of l)g.keys().forEach(v=>{const b=t.get(v);if(null===b)return;let T=r.get(v)||vs.empty();T=g.applyToLocalView(b,T),r.set(v,T);const M=(i.get(g.batchId)||tn()).add(v);i=i.insert(g.batchId,M)})}).next(()=>{const l=[],g=i.getReverseIterator();for(;g.hasNext();){const v=g.getNext(),b=v.key,T=v.value,M=eO();T.forEach($=>{if(!u.has($)){const Z=lO(t.get($),r.get($));null!==Z&&M.set($,Z),u=u.add($)}}),l.push(this.documentOverlayCache.saveOverlays(e,b,M))}return re.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ye.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Ux(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(u=>{const l=i-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-u.size):re.resolve(uu());let g=-1,v=u;return l.next(b=>re.forEach(b,(T,M)=>(g<M.largestBatchId&&(g=M.largestBatchId),u.get(T)?re.resolve():this.remoteDocumentCache.getEntry(e,T).next($=>{v=v.insert(T,$)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,v,b,tn())).next(T=>({batchId:g,changes:XN(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ye(t)).next(r=>{let i=sw();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let u=sw();return this.indexManager.getCollectionParents(e,i).next(l=>re.forEach(l,g=>{const v=(b=t,T=g.child(i),new xl(T,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,T;return this.getDocumentsMatchingCollectionQuery(e,v,r).next(b=>{b.forEach((T,M)=>{u=u.insert(T,M)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(i=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(u=>{i.forEach((g,v)=>{const b=v.getKey();null===u.get(b)&&(u=u.insert(b,Kn.newInvalidDocument(b)))});let l=sw();return u.forEach((g,v)=>{const b=i.get(g);void 0!==b&&uw(b.mutation,v,vs.empty(),or.now()),iw(t,v)&&(l=l.insert(g,v))}),l})}}class CB{constructor(e){this.serializer=e,this.us=new Map,this.cs=new Map}getBundleMetadata(e,t){return re.resolve(this.us.get(t))}saveBundleMetadata(e,t){var r;return this.us.set(t.id,{id:(r=t).id,version:r.version,createTime:Lr(r.createTime)}),re.resolve()}getNamedQuery(e,t){return re.resolve(this.cs.get(t))}saveNamedQuery(e,t){return this.cs.set(t.name,{name:(r=t).name,query:eM(r.bundledQuery),readTime:Lr(r.readTime)}),re.resolve();var r}}class DB{constructor(){this.overlays=new $n(Ye.comparator),this.hs=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const r=uu();return re.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.de(e,t,u)}),re.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hs.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.hs.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const i=uu(),u=t.length+1,l=new Ye(t.child("")),g=this.overlays.getIteratorFrom(l);for(;g.hasNext();){const v=g.getNext().value,b=v.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&v.largestBatchId>r&&i.set(v.getKey(),v)}return re.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new $n((b,T)=>b-T);const l=this.overlays.getIterator();for(;l.hasNext();){const b=l.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let T=u.get(b.largestBatchId);null===T&&(T=uu(),u=u.insert(b.largestBatchId,T)),T.set(b.getKey(),b)}}const g=uu(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((b,T)=>g.set(b,T)),!(g.size()>=i)););return re.resolve(g)}de(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.hs.get(i.largestBatchId).delete(r.key);this.hs.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new qx(t,r));let u=this.hs.get(t);void 0===u&&(u=tn(),this.hs.set(t,u)),this.hs.set(t,u.add(r.key))}}class aM{constructor(){this.ls=new Zn(hi.fs),this.ds=new Zn(hi._s)}isEmpty(){return this.ls.isEmpty()}addReference(e,t){const r=new hi(e,t);this.ls=this.ls.add(r),this.ds=this.ds.add(r)}ws(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gs(new hi(e,t))}ys(e,t){e.forEach(r=>this.removeReference(r,t))}ps(e){const t=new Ye(new hn([])),r=new hi(t,e),i=new hi(t,e+1),u=[];return this.ds.forEachInRange([r,i],l=>{this.gs(l),u.push(l.key)}),u}Is(){this.ls.forEach(e=>this.gs(e))}gs(e){this.ls=this.ls.delete(e),this.ds=this.ds.delete(e)}Ts(e){const t=new Ye(new hn([])),r=new hi(t,e),i=new hi(t,e+1);let u=tn();return this.ds.forEachInRange([r,i],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new hi(e,0),r=this.ls.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class hi{constructor(e,t){this.key=e,this.Es=t}static fs(e,t){return Ye.comparator(e.key,t.key)||Kt(e.Es,t.Es)}static _s(e,t){return Kt(e.Es,t.Es)||Ye.comparator(e.key,t.key)}}class TB{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.As=1,this.Rs=new Zn(hi.fs)}checkEmpty(e){return re.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const u=this.As;this.As++;const l=new zx(u,t,r,i);this.mutationQueue.push(l);for(const g of i)this.Rs=this.Rs.add(new hi(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return re.resolve(l)}lookupMutationBatch(e,t){return re.resolve(this.vs(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Ps(t+1),u=i<0?0:i;return re.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(0===this.mutationQueue.length?-1:this.As-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new hi(t,0),i=new hi(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,i],l=>{const g=this.vs(l.Es);u.push(g)}),re.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Zn(Kt);return t.forEach(i=>{const u=new hi(i,0),l=new hi(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,l],g=>{r=r.add(g.Es)})}),re.resolve(this.bs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;Ye.isDocumentKey(u)||(u=u.child(""));const l=new hi(new Ye(u),0);let g=new Zn(Kt);return this.Rs.forEachWhile(v=>{const b=v.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(g=g.add(v.Es)),!0)},l),re.resolve(this.bs(g))}bs(e){const t=[];return e.forEach(r=>{const i=this.vs(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){wt(0===this.Vs(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return re.forEach(t.mutations,i=>{const u=new hi(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Dn(e){}containsKey(e,t){const r=new hi(t,0),i=this.Rs.firstAfterOrEqual(r);return re.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return re.resolve()}Vs(e,t){return this.Ps(e)}Ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}vs(e){const t=this.Ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class SB{constructor(e){this.Ss=e,this.docs=new $n(Ye.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,l=this.Ss(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():Kn.newInvalidDocument(t))}getEntries(e,t){let r=_s();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():Kn.newInvalidDocument(i))}),re.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let u=_s();const l=t.path,g=new Ye(l.child("")),v=this.docs.getIteratorFrom(g);for(;v.hasNext();){const{key:b,value:{document:T}}=v.getNext();if(!l.isPrefixOf(b.path))break;b.path.length>l.length+1||Ax(pN(T),r)<=0||(i.has(T.key)||iw(t,T))&&(u=u.insert(T.key,T.mutableCopy()))}return re.resolve(u)}getAllFromCollectionGroup(e,t,r,i){at()}Ds(e,t){return re.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new AB(this)}getSize(e){return re.resolve(this.size)}}class AB extends rF{constructor(e){super(),this.rs=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.rs.addEntry(e,i)):this.rs.removeEntry(r)}),re.waitFor(t)}getFromCache(e,t){return this.rs.getEntry(e,t)}getAllFromCache(e,t){return this.rs.getEntries(e,t)}}class xB{constructor(e){this.persistence=e,this.Cs=new Ml(t=>yf(t),nw),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.xs=0,this.Ns=new aM,this.targetCount=0,this.ks=Tf.Nn()}forEachTarget(e,t){return this.Cs.forEach((r,i)=>t(i)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.xs)}allocateTargetId(e){return this.highestTargetId=this.ks.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.xs&&(this.xs=t),re.resolve()}$n(e){this.Cs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ks=new Tf(t),this.highestTargetId=t),e.sequenceNumber>this.xs&&(this.xs=e.sequenceNumber)}addTargetData(e,t){return this.$n(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.$n(t),re.resolve()}removeTargetData(e,t){return this.Cs.delete(t.target),this.Ns.ps(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Cs.forEach((l,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.Cs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),i++)}),re.waitFor(u).next(()=>i)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.Cs.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this.Ns.ws(t,r),re.resolve()}removeMatchingKeys(e,t,r){this.Ns.ys(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(l=>{u.push(i.markPotentiallyOrphaned(e,l))}),re.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ns.ps(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ns.Ts(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this.Ns.containsKey(t))}}class uM{constructor(e,t){this.Ms={},this.overlays={},this.Os=new zs(0),this.$s=!1,this.$s=!0,this.referenceDelegate=e(this),this.Fs=new xB(this),this.indexManager=new gB,this.remoteDocumentCache=new SB(r=>this.referenceDelegate.Bs(r)),this.serializer=new OO(t),this.Ls=new CB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.$s=!1,Promise.resolve()}get started(){return this.$s}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new DB,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ms[e.toKey()];return r||(r=new TB(t,this.referenceDelegate),this.Ms[e.toKey()]=r),r}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ls}runTransaction(e,t,r){Re("MemoryPersistence","Starting transaction:",e);const i=new MB(this.Os.next());return this.referenceDelegate.qs(),r(i).next(u=>this.referenceDelegate.Us(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Ks(e,t){return re.or(Object.values(this.Ms).map(r=>()=>r.containsKey(e,t)))}}class MB extends mN{constructor(e){super(),this.currentSequenceNumber=e}}class SC{constructor(e){this.persistence=e,this.Gs=new aM,this.Qs=null}static js(e){return new SC(e)}get zs(){if(this.Qs)return this.Qs;throw at()}addReference(e,t,r){return this.Gs.addReference(r,t),this.zs.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.Gs.removeReference(r,t),this.zs.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.zs.add(t.toString()),re.resolve()}removeTarget(e,t){this.Gs.ps(t.targetId).forEach(i=>this.zs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.zs.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}qs(){this.Qs=new Set}Us(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.zs,r=>{const i=Ye.fromPath(r);return this.Ws(e,i).next(u=>{u||t.removeEntry(i,It.min())})}).next(()=>(this.Qs=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ws(e,t).next(r=>{r?this.zs.delete(t.toString()):this.zs.add(t.toString())})}Bs(e){return 0}Ws(e,t){return re.or([()=>re.resolve(this.Gs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ks(e,t)])}}class PB{constructor(e){this.serializer=e}$(e,t,r,i){const u=new nC("createOrUpgrade",t);var g;r<1&&i>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wN,{unique:!0}),g.createObjectStore("documentMutations"),lF(e),function(g){g.createObjectStore("remoteDocuments")}(e));let l=re.resolve();return r<3&&i>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),lF(e)),l=l.next(()=>function(g){const v=g.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:It.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",b)}(u))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(g,v){return v.store("mutations").j().next(b=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wN,{unique:!0});const T=v.store("mutations"),M=b.map($=>T.put($));return re.waitFor(M)})}(e,u))),l=l.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Js(u))),r<6&&i>=6&&(l=l.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Ys(u)))),r<7&&i>=7&&(l=l.next(()=>this.Xs(u))),r<8&&i>=8&&(l=l.next(()=>this.Zs(e,u))),r<9&&i>=9&&(l=l.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.ti(u))),r<11&&i>=11&&(l=l.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(g){const v=g.createObjectStore("documentOverlays",{keyPath:gU});v.createIndex("collectionPathOverlayIndex",mU,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",yU,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(g){const v=g.createObjectStore("remoteDocumentsV14",{keyPath:iU});v.createIndex("documentKeyIndex",sU),v.createIndex("collectionGroupIndex",oU)}(e)).next(()=>this.ei(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.ni(e,u))),r<15&&i>=15&&(l=l.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:dU}).createIndex("sequenceNumberIndex",hU,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:fU}).createIndex("documentKeyIndex",pU,{unique:!1})}(e))),l}Ys(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=CC(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Js(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>re.forEach(i,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(g=>re.forEach(g,v=>{wt(v.userId===u.userId);const b=If(this.serializer,v);return YO(e,u.userId,b).next(()=>{})}))}))}Xs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.X((l,g)=>{const v=new hn(l),b=[0,Vi(v)];u.push(t.get(b).next(T=>T?re.resolve():t.put({targetId:0,path:Vi(v),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>re.waitFor(u))})}Zs(e,t){e.createObjectStore("collectionParents",{keyPath:cU});const r=t.store("collectionParents"),i=new oM,u=l=>{if(i.add(l)){const g=l.lastSegment(),v=l.popLast();return r.put({collectionId:g,parent:Vi(v)})}};return t.store("remoteDocuments").X({Y:!0},(l,g)=>{const v=new hn(l);return u(v.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,g,v],b)=>{const T=ou(g);return u(T.popLast())}))}ti(e){const t=e.store("targets");return t.X((r,i)=>{const u=gw(i),l=LO(this.serializer,u);return t.put(l)})}ei(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((u,l)=>{const g=t.store("remoteDocumentsV14"),v=(b=l,b.document?new Ye(hn.fromString(b.document.name).popFirst(5)):b.noDocument?Ye.fromSegments(b.noDocument.path):b.unknownDocument?Ye.fromSegments(b.unknownDocument.path):at()).path.toArray();var b;const T={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(g.put(T))}).next(()=>re.waitFor(i))}ni(e,t){const r=t.store("mutations"),i=iF(this.serializer),u=new uM(SC.js,this.serializer.le);return r.j().next(l=>{const g=new Map;return l.forEach(v=>{var b;let T=null!==(b=g.get(v.userId))&&void 0!==b?b:tn();If(this.serializer,v).keys().forEach(M=>T=T.add(M)),g.set(v.userId,T)}),re.forEach(g,(v,b)=>{const T=new ci(b),M=wC.fe(this.serializer,T),$=u.getIndexManager(T),Z=DC.fe(T,this.serializer,$,u.referenceDelegate);return new uF(i,Z,M,$).recalculateAndSaveOverlaysForDocumentKeys(new Px(t,zs.ct),v).next()})})}}function lF(n){n.createObjectStore("targetDocuments",{keyPath:uU}).createIndex("documentTargetsIndex",lU,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",aU,{unique:!0}),n.createObjectStore("targetGlobal")}const lM="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class cM{constructor(e,t,r,i,u,l,g,v,b,T,M=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.si=u,this.window=l,this.document=g,this.ii=b,this.ri=T,this.oi=M,this.Os=null,this.$s=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.ai=null,this.hi=Number.NEGATIVE_INFINITY,this.li=$=>Promise.resolve(),!cM.D())throw new Ce(ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new wB(this,i),this.fi=t+"main",this.serializer=new OO(v),this.di=new ca(this.fi,this.oi,new PB(this.serializer)),this.Fs=new yB(this.referenceDelegate,this.serializer),this.remoteDocumentCache=iF(this.serializer),this.Ls=new uB,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===T&&Fr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ce(ue.FAILED_PRECONDITION,lM);return this.mi(),this.gi(),this.yi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Fs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new zs(e,this.ii)}).then(()=>{this.$s=!0}).catch(e=>(this.di&&this.di.close(),Promise.reject(e)))}pi(e){var t=this;return this.li=function(){var r=(0,J.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.di.B(function(){var t=(0,J.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((0,J.Z)(function*(){t.started&&(yield t.wi())})))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>xC(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ii(e).next(t=>{t||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.li(!1)))})}).next(()=>this.Ti(e)).next(t=>this.isPrimary&&!t?this.Ei(e).next(()=>!1):!!t&&this.Ai(e).next(()=>!0))).catch(e=>{if(ld(e))return Re("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Re("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.li(e)),this.isPrimary=e})}Ii(e){return Ew(e).get("owner").next(t=>re.resolve(this.Ri(t)))}vi(e){return xC(e).delete(this.clientId)}Pi(){var e=this;return(0,J.Z)(function*(){if(e.isPrimary&&!e.bi(e.hi,18e5)){e.hi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=di(r,"clientMetadata");return i.j().next(u=>{const l=e.Vi(u,18e5),g=u.filter(v=>-1===l.indexOf(v));return re.forEach(g,v=>i.delete(v.clientId)).next(()=>g)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Si(r.clientId))}})()}yi(){this.ai=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Pi()).then(()=>this.yi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ti(e){return this.ri?re.resolve(!0):Ew(e).get("owner").next(t=>{if(null!==t&&this.bi(t.leaseTimestampMs,5e3)&&!this.Di(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Ce(ue.FAILED_PRECONDITION,lM);return!1}}return!(!this.networkEnabled||!this.inForeground)||xC(e).j().next(r=>void 0===this.Vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Re("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,J.Z)(function*(){e.$s=!1,e.Ci(),e.ai&&(e.ai.cancel(),e.ai=null),e.xi(),e.Ni(),yield e.di.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Px(t,zs.ct);return e.Ei(r).next(()=>e.vi(r))}),e.di.close(),e.ki()})()}Vi(e,t){return e.filter(r=>this.bi(r.updateTimeMs,t)&&!this.Di(r.clientId))}Mi(){return this.runTransaction("getActiveClients","readonly",e=>xC(e).j().next(t=>this.Vi(t,18e5).map(r=>r.clientId)))}get started(){return this.$s}getMutationQueue(e,t){return DC.fe(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new mB(e,this.serializer.le.databaseId)}getDocumentOverlayCache(e){return wC.fe(this.serializer,e)}getBundleCache(){return this.Ls}runTransaction(e,t,r){Re("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=15===(l=this.oi)?_U:14===l?CN:13===l?IN:12===l?vU:11===l?bN:void at();var l;let g;return this.di.runTransaction(e,i,u,v=>(g=new Px(v,this.Os?this.Os.next():zs.ct),"readwrite-primary"===t?this.Ii(g).next(b=>!!b||this.Ti(g)).next(b=>{if(!b)throw Fr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.li(!1)),new Ce(ue.FAILED_PRECONDITION,gN);return r(g)}).next(b=>this.Ai(g).next(()=>b)):this.Oi(g).next(()=>r(g)))).then(v=>(g.raiseOnCommittedEvent(),v))}Oi(e){return Ew(e).get("owner").next(t=>{if(null!==t&&this.bi(t.leaseTimestampMs,5e3)&&!this.Di(t.ownerId)&&!this.Ri(t)&&!(this.ri||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ce(ue.FAILED_PRECONDITION,lM)})}Ai(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ew(e).put("owner",t)}static D(){return ca.D()}Ei(e){const t=Ew(e);return t.get("owner").next(r=>this.Ri(r)?(Re("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):re.resolve())}bi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Fr(`Detected an update time that is in the future: ${e} > ${r}`),1))}mi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.wi()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Ci();const t=/(?:Version|Mobile)\/1[456]/;(0,_t.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Ni(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Di(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Si(e)));return Re("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Fr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ci(){if(this._i)try{this._i.setItem(this.Si(this.clientId),String(Date.now()))}catch(e){Fr("Failed to set zombie client id.",e)}}ki(){if(this._i)try{this._i.removeItem(this.Si(this.clientId))}catch{}}Si(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ew(n){return di(n,"owner")}function xC(n){return di(n,"clientMetadata")}function dM(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class hM{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Fi=i}static Bi(e,t){let r=tn(),i=tn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new hM(e,t.fromCache,r,i)}}class cF{constructor(){this.Li=!1}initialize(e,t){this.qi=e,this.indexManager=t,this.Li=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ui(e,t).next(u=>u||this.Ki(e,t,i,r)).next(u=>u||this.Gi(e,t))}Ui(e,t){if(ZN(t))return re.resolve(null);let r=rs(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=fC(t,null,"F"),r=rs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=tn(...u);return this.qi.getDocuments(e,l).next(g=>this.indexManager.getMinOffset(e,r).next(v=>{const b=this.Qi(t,g);return this.ji(t,b,l,v.readTime)?this.Ui(e,fC(t,null,"F")):this.zi(e,b,t,v)}))})))}Ki(e,t,r,i){return ZN(t)||i.isEqual(It.min())?this.Gi(e,t):this.qi.getDocuments(e,r).next(u=>{const l=this.Qi(t,u);return this.ji(t,l,r,i)?this.Gi(e,t):(Dx()<=Us.in.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),jx(t)),this.zi(e,l,t,fN(i,-1)))})}Qi(e,t){let r=new Zn(QN(e));return t.forEach((i,u)=>{iw(e,u)&&(r=r.add(u))}),r}ji(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Gi(e,t){return Dx()<=Us.in.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",jx(t)),this.qi.getDocumentsMatchingQuery(e,t,Hs.min())}zi(e,t,r,i){return this.qi.getDocumentsMatchingQuery(e,r,i).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class RB{constructor(e,t,r,i){this.persistence=e,this.Wi=t,this.serializer=i,this.Hi=new $n(Kt),this.Ji=new Ml(u=>yf(u),nw),this.Yi=new Map,this.Xi=e.getRemoteDocumentCache(),this.Fs=e.getTargetCache(),this.Ls=e.getBundleCache(),this.Zi(r)}Zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uF(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Wi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Hi))}}function dF(n,e,t,r){return new RB(n,e,t,r)}function hF(n,e){return fM.apply(this,arguments)}function fM(){return fM=(0,J.Z)(function*(n,e){const t=Xe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(u=>(i=u,t.Zi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],g=[];let v=tn();for(const b of i){l.push(b.batchId);for(const T of b.mutations)v=v.add(T.key)}for(const b of u){g.push(b.batchId);for(const T of b.mutations)v=v.add(T.key)}return t.localDocuments.getDocuments(r,v).next(b=>({tr:b,removedBatchIds:l,addedBatchIds:g}))})})}),fM.apply(this,arguments)}function fF(n){const e=Xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Fs.getLastRemoteSnapshotVersion(t))}function pF(n,e,t){let r=tn(),i=tn();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=_s();return t.forEach((g,v)=>{const b=u.get(g);v.isFoundDocument()!==b.isFoundDocument()&&(i=i.add(g)),v.isNoDocument()&&v.version.isEqual(It.min())?(e.removeEntry(g,v.readTime),l=l.insert(g,v)):!b.isValidDocument()||v.version.compareTo(b.version)>0||0===v.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(v),l=l.insert(g,v)):Re("LocalStore","Ignoring outdated watch update for ",g,". Current version:",b.version," Watch version:",v.version)}),{er:l,nr:i}})}function OB(n,e){const t=Xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Xg(n,e){const t=Xe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Fs.getTargetData(r,e).next(u=>u?(i=u,re.resolve(i)):t.Fs.allocateTargetId(r).next(l=>(i=new Rl(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Hi.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Hi=t.Hi.insert(r.targetId,r),t.Ji.set(e,r.targetId)),r})}function em(n,e,t){return pM.apply(this,arguments)}function pM(){return pM=(0,J.Z)(function*(n,e,t){const r=Xe(n),i=r.Hi.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!ld(l))throw l;Re("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Hi=r.Hi.remove(e),r.Ji.delete(i.target)}),pM.apply(this,arguments)}function MC(n,e,t){const r=Xe(n);let i=It.min(),u=tn();return r.persistence.runTransaction("Execute query","readonly",l=>function(g,v,b){const T=Xe(g),M=T.Ji.get(b);return void 0!==M?re.resolve(T.Hi.get(M)):T.Fs.getTargetData(v,b)}(r,l,rs(e)).next(g=>{if(g)return i=g.lastLimboFreeSnapshotVersion,r.Fs.getMatchingKeysForTargetId(l,g.targetId).next(v=>{u=v})}).next(()=>r.Wi.getDocumentsMatchingQuery(l,e,t?i:It.min(),t?u:tn())).next(g=>(yF(r,YN(e),g),{documents:g,sr:u})))}function gF(n,e){const t=Xe(n),r=Xe(t.Fs),i=t.Hi.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.he(u,e).next(l=>l?l.target:null))}function mF(n,e){const t=Xe(n),r=t.Yi.get(e)||It.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Xi.getAllFromCollectionGroup(i,e,fN(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(yF(t,e,i),i))}function yF(n,e,t){let r=n.Yi.get(e)||It.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Yi.set(e,r)}function gM(){return gM=(0,J.Z)(function*(n,e,t,r){const i=Xe(n);let u=tn(),l=_s();for(const b of t){const T=e.ir(b.metadata.name);b.document&&(u=u.add(T));const M=e.rr(b);M.setReadTime(e.ur(b.metadata.readTime)),l=l.insert(T,M)}const g=i.Xi.newChangeBuffer({trackRemovals:!0}),v=yield Xg(i,(b=r,rs(zg(hn.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>pF(b,g,l).next(T=>(g.apply(b),T)).next(T=>i.Fs.removeMatchingKeysForTargetId(b,v.targetId).next(()=>i.Fs.addMatchingKeys(b,u,v.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(b,T.er,T.nr)).next(()=>T.er)))}),gM.apply(this,arguments)}function LB(n,e){return mM.apply(this,arguments)}function mM(){return mM=(0,J.Z)(function*(n,e,t=tn()){const r=yield Xg(n,rs(eM(e.bundledQuery))),i=Xe(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const l=Lr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ls.saveNamedQuery(u,e);const g=r.withResumeToken(Jr.EMPTY_BYTE_STRING,l);return i.Hi=i.Hi.insert(g.targetId,g),i.Fs.updateTargetData(u,g).next(()=>i.Fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.Fs.addMatchingKeys(u,t,r.targetId)).next(()=>i.Ls.saveNamedQuery(u,e))})}),mM.apply(this,arguments)}function vF(n,e){return`firestore_clients_${n}_${e}`}function _F(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function yM(n,e){return`firestore_targets_${n}_${e}`}class PC{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static cr(e,t,r){const i=JSON.parse(r);let u,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(u=new Ce(i.error.code,i.error.message))),l?new PC(e,t,i.state,u):(Fr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ar(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class bw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static cr(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Ce(r.error.code,r.error.message))),u?new bw(e,r.state,i):(Fr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ar(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class RC{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static cr(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=$x();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=vN(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return i?new RC(e,u):(Fr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class vM{constructor(e,t){this.clientId=e,this.onlineState=t}static cr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new vM(t.clientId,t.onlineState):(Fr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class _M{constructor(){this.activeTargetIds=$x()}hr(e){this.activeTargetIds=this.activeTargetIds.add(e)}lr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ar(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wM{constructor(e,t,r,i,u){this.window=e,this.si=t,this.persistenceKey=r,this.dr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.wr.bind(this),this.mr=new $n(Kt),this.started=!1,this.gr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.yr=vF(this.persistenceKey,this.dr),this.pr=`firestore_sequence_number_${this.persistenceKey}`,this.mr=this.mr.insert(this.dr,new _M),this.Ir=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Tr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Er=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.Ar=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,J.Z)(function*(){const t=yield e.syncEngine.Mi();for(const i of t){if(i===e.dr)continue;const u=e.getItem(vF(e.persistenceKey,i));if(u){const l=RC.cr(i,u);l&&(e.mr=e.mr.insert(l.clientId,l))}}e.vr();const r=e.storage.getItem(e.Ar);if(r){const i=e.Pr(r);i&&e.br(i)}for(const i of e.gr)e.wr(i);e.gr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.pr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Vr(this.mr)}isActiveQueryTarget(e){let t=!1;return this.mr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Sr(e,"pending")}updateMutationState(e,t,r){this.Sr(e,t,r),this.Dr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(yM(this.persistenceKey,e));if(r){const i=bw.cr(e,r);i&&(t=i.state)}}return this.Cr.hr(e),this.vr(),t}removeLocalQueryTarget(e){this.Cr.lr(e),this.vr()}isLocalQueryTarget(e){return this.Cr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(yM(this.persistenceKey,e))}updateQueryState(e,t,r){this.Nr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Dr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.kr(e)}notifyBundleLoaded(e){this.Mr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.yr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Re("SharedClientState","READ",e,t),t}setItem(e,t){Re("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Re("SharedClientState","REMOVE",e),this.storage.removeItem(e)}wr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Re("SharedClientState","EVENT",r.key,r.newValue),r.key===this.yr)return void Fr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((0,J.Z)(function*(){if(t.started){if(null!==r.key)if(t.Ir.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.$r(i,null)}{const i=t.Fr(r.key,r.newValue);if(i)return t.$r(i.clientId,i)}}else if(t.Tr.test(r.key)){if(null!==r.newValue){const i=t.Br(r.key,r.newValue);if(i)return t.Lr(i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.qr(r.key,r.newValue);if(i)return t.Ur(i)}}else if(r.key===t.Ar){if(null!==r.newValue){const i=t.Pr(r.newValue);if(i)return t.br(i)}}else if(r.key===t.pr){const i=function(u){let l=zs.ct;if(null!=u)try{const g=JSON.parse(u);wt("number"==typeof g),l=g}catch(g){Fr("SharedClientState","Failed to read sequence number from WebStorage",g)}return l}(r.newValue);i!==zs.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Kr(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Gr(u)))}}else t.gr.push(r)}))}}get Cr(){return this.mr.get(this.dr)}vr(){this.setItem(this.yr,this.Cr.ar())}Sr(e,t,r){const i=new PC(this.currentUser,e,t,r),u=_F(this.persistenceKey,this.currentUser,e);this.setItem(u,i.ar())}Dr(e){const t=_F(this.persistenceKey,this.currentUser,e);this.removeItem(t)}kr(e){this.storage.setItem(this.Ar,JSON.stringify({clientId:this.dr,onlineState:e}))}Nr(e,t,r){const i=yM(this.persistenceKey,e),u=new bw(e,t,r);this.setItem(i,u.ar())}Mr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Ir.exec(e);return t?t[1]:null}Fr(e,t){const r=this.Or(e);return RC.cr(r,t)}Br(e,t){const r=this.Tr.exec(e),i=Number(r[1]);return PC.cr(new ci(void 0!==r[2]?r[2]:null),i,t)}qr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return bw.cr(i,t)}Pr(e){return vM.cr(e)}Kr(e){return JSON.parse(e)}Lr(e){var t=this;return(0,J.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Qr(e.batchId,e.state,e.error);Re("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Ur(e){return this.syncEngine.jr(e.targetId,e.state,e.error)}$r(e,t){const r=t?this.mr.insert(e,t):this.mr.remove(e),i=this.Vr(this.mr),u=this.Vr(r),l=[],g=[];return u.forEach(v=>{i.has(v)||l.push(v)}),i.forEach(v=>{u.has(v)||g.push(v)}),this.syncEngine.zr(l,g).then(()=>{this.mr=r})}br(e){this.mr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Vr(e){let t=$x();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class wF{constructor(){this.Wr=new _M,this.Hr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Wr.hr(e),this.Hr[e]||"not-current"}updateQueryState(e,t,r){this.Hr[e]=t}removeLocalQueryTarget(e){this.Wr.lr(e)}isLocalQueryTarget(e){return this.Wr.activeTargetIds.has(e)}clearQueryState(e){delete this.Hr[e]}getAllActiveQueryTargets(){return this.Wr.activeTargetIds}isActiveQueryTarget(e){return this.Wr.activeTargetIds.has(e)}start(){return this.Wr=new _M,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class VB{Jr(e){}shutdown(){}}class EF{constructor(){this.Yr=()=>this.Xr(),this.Zr=()=>this.eo(),this.no=[],this.so()}Jr(e){this.no.push(e)}shutdown(){window.removeEventListener("online",this.Yr),window.removeEventListener("offline",this.Zr)}so(){window.addEventListener("online",this.Yr),window.addEventListener("offline",this.Zr)}Xr(){Re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.no)e(0)}eo(){Re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.no)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let kC=null;function EM(){return null===kC?kC=268435456+Math.round(2147483648*Math.random()):kC++,"0x"+kC.toString(16)}const UB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class BB{constructor(e){this.io=e.io,this.ro=e.ro}oo(e){this.uo=e}co(e){this.ao=e}onMessage(e){this.ho=e}close(){this.ro()}send(e){this.io(e)}lo(){this.uo()}fo(e){this.ao(e)}_o(e){this.ho(e)}}const Bi="WebChannelConnection";class jB extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.wo=(e.ssl?"https":"http")+"://"+e.host,this.mo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get yo(){return!1}po(e,t,r,i,u){const l=EM(),g=this.Io(e,t);Re("RestConnection",`Sending RPC '${e}' ${l}:`,g,r);const v={};return this.To(v,i,u),this.Eo(e,g,v,r).then(b=>(Re("RestConnection",`Received RPC '${e}' ${l}: `,b),b),b=>{throw Io("RestConnection",`RPC '${e}' ${l} failed with error: `,b,"url: ",g,"request:",r),b})}Ao(e,t,r,i,u,l){return this.po(e,t,r,i,u)}To(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Vg,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}Io(e,t){return`${this.wo}/v1/${t}:${UB[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Eo(e,t,r,i){const u=EM();return new Promise((l,g)=>{const v=new VV;v.setWithCredentials(!0),v.listenOnce(OV.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case Cx.NO_ERROR:const T=v.getResponseJson();Re(Bi,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),l(T);break;case Cx.TIMEOUT:Re(Bi,`RPC '${e}' ${u} timed out`),g(new Ce(ue.DEADLINE_EXCEEDED,"Request time out"));break;case Cx.HTTP_ERROR:const M=v.getStatus();if(Re(Bi,`RPC '${e}' ${u} failed with status:`,M,"response text:",v.getResponseText()),M>0){let $=v.getResponseJson();Array.isArray($)&&($=$[0]);const Z=$?.error;if(Z&&Z.status&&Z.message){const ie=function(ve){const Ae=ve.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(Ae)>=0?Ae:ue.UNKNOWN}(Z.status);g(new Ce(ie,Z.message))}else g(new Ce(ue.UNKNOWN,"Server responded with status "+v.getStatus()))}else g(new Ce(ue.UNAVAILABLE,"Connection failed."));break;default:at()}}finally{Re(Bi,`RPC '${e}' ${u} completed.`)}});const b=JSON.stringify(i);Re(Bi,`RPC '${e}' ${u} sending request:`,i),v.send(t,"POST",b,r,15)})}Ro(e,t,r){const i=EM(),u=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=kV(),g=NV(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(v.xmlHttpFactory=new LV({})),this.To(v.initMessageHeaders,t,r),v.encodeInitMessageHeaders=!0;const b=u.join("");Re(Bi,`Creating RPC '${e}' stream ${i}: ${b}`,v);const T=l.createWebChannel(b,v);let M=!1,$=!1;const Z=new BB({io:ve=>{$?Re(Bi,`Not sending because RPC '${e}' stream ${i} is closed:`,ve):(M||(Re(Bi,`Opening RPC '${e}' stream ${i} transport.`),T.open(),M=!0),Re(Bi,`RPC '${e}' stream ${i} sending:`,ve),T.send(ve))},ro:()=>T.close()}),ie=(ve,Ae,Ge)=>{ve.listen(Ae,mt=>{try{Ge(mt)}catch(yt){setTimeout(()=>{throw yt},0)}})};return ie(T,XI.EventType.OPEN,()=>{$||Re(Bi,`RPC '${e}' stream ${i} transport opened.`)}),ie(T,XI.EventType.CLOSE,()=>{$||($=!0,Re(Bi,`RPC '${e}' stream ${i} transport closed`),Z.fo())}),ie(T,XI.EventType.ERROR,ve=>{$||($=!0,Io(Bi,`RPC '${e}' stream ${i} transport errored:`,ve),Z.fo(new Ce(ue.UNAVAILABLE,"The operation could not be completed")))}),ie(T,XI.EventType.MESSAGE,ve=>{var Ae;if(!$){const Ge=ve.data[0];wt(!!Ge);const yt=Ge.error||(null===(Ae=Ge[0])||void 0===Ae?void 0:Ae.error);if(yt){Re(Bi,`RPC '${e}' stream ${i} received error:`,yt);const en=yt.status;let rn=function(os){const Sd=qr[os];if(void 0!==Sd)return gO(Sd)}(en),pn=yt.message;void 0===rn&&(rn=ue.INTERNAL,pn="Unknown error status: "+en+" with message "+yt.message),$=!0,Z.fo(new Ce(rn,pn)),T.close()}else Re(Bi,`RPC '${e}' stream ${i} received:`,Ge),Z._o(Ge)}}),ie(g,FV.STAT_EVENT,ve=>{ve.stat===aN.PROXY?Re(Bi,`RPC '${e}' stream ${i} detected buffering proxy`):ve.stat===aN.NOPROXY&&Re(Bi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{Z.lo()},0),Z}}function bF(){return typeof window<"u"?window:null}function NC(){return typeof document<"u"?document:null}function Iw(n){return new QU(n,!0)}class bM{constructor(e,t,r=1e3,i=1.5,u=6e4){this.si=e,this.timerId=t,this.vo=r,this.Po=i,this.bo=u,this.Vo=0,this.So=null,this.Do=Date.now(),this.reset()}reset(){this.Vo=0}Co(){this.Vo=this.bo}xo(e){this.cancel();const t=Math.floor(this.Vo+this.No()),r=Math.max(0,Date.now()-this.Do),i=Math.max(0,t-r);i>0&&Re("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Vo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.So=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Do=Date.now(),e())),this.Vo*=this.Po,this.Vo<this.vo&&(this.Vo=this.vo),this.Vo>this.bo&&(this.Vo=this.bo)}ko(){null!==this.So&&(this.So.skipDelay(),this.So=null)}cancel(){null!==this.So&&(this.So.cancel(),this.So=null)}No(){return(Math.random()-.5)*this.Vo}}class IF{constructor(e,t,r,i,u,l,g,v){this.si=e,this.Mo=r,this.Oo=i,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=g,this.listener=v,this.state=0,this.$o=0,this.Fo=null,this.Bo=null,this.stream=null,this.Lo=new bM(e,t)}qo(){return 1===this.state||5===this.state||this.Uo()}Uo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Ko()}stop(){var e=this;return(0,J.Z)(function*(){e.qo()&&(yield e.close(0))})()}Go(){this.state=0,this.Lo.reset()}Qo(){this.Uo()&&null===this.Fo&&(this.Fo=this.si.enqueueAfterDelay(this.Mo,6e4,()=>this.jo()))}zo(e){this.Wo(),this.stream.send(e)}jo(){var e=this;return(0,J.Z)(function*(){if(e.Uo())return e.close(0)})()}Wo(){this.Fo&&(this.Fo.cancel(),this.Fo=null)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}close(e,t){var r=this;return(0,J.Z)(function*(){r.Wo(),r.Ho(),r.Lo.cancel(),r.$o++,4!==e?r.Lo.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(Fr(t.toString()),Fr("Using maximum backoff delay to prevent overloading the backend."),r.Lo.Co()):t&&t.code===ue.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Jo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.co(t)})()}Jo(){}auth(){this.state=1;const e=this.Yo(this.$o),t=this.$o;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.$o===t&&this.Xo(r,i)},r=>{e(()=>{const i=new Ce(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Zo(i)})})}Xo(e,t){const r=this.Yo(this.$o);this.stream=this.tu(e,t),this.stream.oo(()=>{r(()=>(this.state=2,this.Bo=this.si.enqueueAfterDelay(this.Oo,1e4,()=>(this.Uo()&&(this.state=3),Promise.resolve())),this.listener.oo()))}),this.stream.co(i=>{r(()=>this.Zo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Ko(){var e=this;this.state=5,this.Lo.xo((0,J.Z)(function*(){e.state=0,e.start()}))}Zo(e){return Re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Yo(e){return t=>{this.si.enqueueAndForget(()=>this.$o===e?t():(Re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $B extends IF{constructor(e,t,r,i,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=u}tu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.Lo.reset();const t=function eB(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:at(),i=e.targetChange.targetIds||[],u=function(v,b){return v.useProto3Json?(wt(void 0===b||"string"==typeof b),Jr.fromBase64String(b||"")):(wt(void 0===b||b instanceof Uint8Array),Jr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,g=l&&function(v){const b=void 0===v.code?ue.UNKNOWN:gO(v.code);return new Ce(b,v.message||"")}(l);t=new wO(r,i,u,g||null)}else if("documentChange"in e){const r=e.documentChange,i=lu(n,r.document.name),u=Lr(r.document.updateTime),l=r.document.createTime?Lr(r.document.createTime):It.min(),g=new Ci({mapValue:{fields:r.document.fields}}),v=Kn.newFoundDocument(i,u,l,g);t=new vC(r.targetIds||[],r.removedTargetIds||[],v.key,v)}else if("documentDelete"in e){const r=e.documentDelete,i=lu(n,r.document),u=r.readTime?Lr(r.readTime):It.min(),l=Kn.newNoDocument(i,u);t=new vC([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=lu(n,r.document);t=new vC([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return at();{const r=e.filter,{count:i=0,unchangedNames:u}=r,l=new GU(i,u);t=new _O(r.targetId,l)}}var v;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return It.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?It.min():u.readTime?Lr(u.readTime):It.min()}(e);return this.listener.eu(t,r)}nu(e){const t={};t.database=fw(this.serializer),t.addTarget=function(i,u){let l;const g=u.target;if(l=cC(g)?{documents:MO(i,g)}:{query:Xx(i,g)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){l.resumeToken=CO(i,u.resumeToken);const v=Kx(i,u.expectedCount);null!==v&&(l.expectedCount=v)}else if(u.snapshotVersion.compareTo(It.min())>0){l.readTime=Kg(i,u.snapshotVersion.toTimestamp());const v=Kx(i,u.expectedCount);null!==v&&(l.expectedCount=v)}return l}(this.serializer,e);const r=function nB(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return at()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.zo(t)}su(e){const t={};t.database=fw(this.serializer),t.removeTarget=e,this.zo(t)}}class HB extends IF{constructor(e,t,r,i,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=u,this.iu=!1}get ru(){return this.iu}start(){this.iu=!1,this.lastStreamToken=void 0,super.start()}Jo(){this.iu&&this.ou([])}tu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.iu){this.Lo.reset();const t=function tB(n,e){return n&&n.length>0?(wt(void 0!==e),n.map(t=>function(r,i){let u=Lr(r.updateTime?r.updateTime:i);return u.isEqual(It.min())&&(u=Lr(i)),new jU(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Lr(e.commitTime);return this.listener.uu(r,t)}return wt(!e.writeResults||0===e.writeResults.length),this.iu=!0,this.listener.cu()}au(){const e={};e.database=fw(this.serializer),this.zo(e)}ou(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>pw(this.serializer,r))};this.zo(t)}}class zB extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.hu=!1}lu(){if(this.hu)throw new Ce(ue.FAILED_PRECONDITION,"The client has already been terminated.")}po(e,t,r){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.connection.po(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ce(ue.UNKNOWN,i.toString())})}Ao(e,t,r,i){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.Ao(e,t,r,u,l,i)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ce(ue.UNKNOWN,u.toString())})}terminate(){this.hu=!0}}class qB{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.du=0,this._u=null,this.wu=!0}mu(){0===this.du&&(this.gu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.yu("Backend didn't respond within 10 seconds."),this.gu("Offline"),Promise.resolve())))}pu(e){"Online"===this.state?this.gu("Unknown"):(this.du++,this.du>=1&&(this.Iu(),this.yu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.gu("Offline")))}set(e){this.Iu(),this.du=0,"Online"===e&&(this.wu=!1),this.gu(e)}gu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}yu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.wu?(Fr(t),this.wu=!1):Re("OnlineStateTracker",t)}Iu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class WB{constructor(e,t,r,i,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Tu=[],this.Eu=new Map,this.Au=new Set,this.Ru=[],this.vu=u,this.vu.Jr(g=>{r.enqueueAndForget((0,J.Z)(function*(){var v;Ed(l)&&(Re("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,J.Z)(function*(b){const T=Xe(b);T.Au.add(4),yield tm(T),T.Pu.set("Unknown"),T.Au.delete(4),yield Cw(T)}),function(b){return v.apply(this,arguments)})(l))}))}),this.Pu=new qB(r,i)}}function Cw(n){return CM.apply(this,arguments)}function CM(){return CM=(0,J.Z)(function*(n){if(Ed(n))for(const e of n.Ru)yield e(!0)}),CM.apply(this,arguments)}function tm(n){return DM.apply(this,arguments)}function DM(){return DM=(0,J.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),DM.apply(this,arguments)}function OC(n,e){const t=Xe(n);t.Eu.has(e.targetId)||(t.Eu.set(e.targetId,e),AM(t)?SM(t):rm(t).Uo()&&TM(t,e))}function Dw(n,e){const t=Xe(n),r=rm(t);t.Eu.delete(e),r.Uo()&&CF(t,e),0===t.Eu.size&&(r.Uo()?r.Qo():Ed(t)&&t.Pu.set("Unknown"))}function TM(n,e){if(n.bu.Lt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(It.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}rm(n).nu(e)}function CF(n,e){n.bu.Lt(e),rm(n).su(e)}function SM(n){n.bu=new WU({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),he:e=>n.Eu.get(e)||null,oe:()=>n.datastore.serializer.databaseId}),rm(n).start(),n.Pu.mu()}function AM(n){return Ed(n)&&!rm(n).qo()&&n.Eu.size>0}function Ed(n){return 0===Xe(n).Au.size}function DF(n){n.bu=void 0}function ZB(n){return xM.apply(this,arguments)}function xM(){return xM=(0,J.Z)(function*(n){n.Eu.forEach((e,t)=>{TM(n,e)})}),xM.apply(this,arguments)}function KB(n,e){return MM.apply(this,arguments)}function MM(){return MM=(0,J.Z)(function*(n,e){DF(n),AM(n)?(n.Pu.pu(e),SM(n)):n.Pu.set("Unknown")}),MM.apply(this,arguments)}function YB(n,e,t){return PM.apply(this,arguments)}function PM(){return PM=(0,J.Z)(function*(n,e,t){if(n.Pu.set("Online"),e instanceof wO&&2===e.state&&e.cause)try{yield(r=(0,J.Z)(function*(i,u){const l=u.cause;for(const g of u.targetIds)i.Eu.has(g)&&(yield i.remoteSyncer.rejectListen(g,l),i.Eu.delete(g),i.bu.removeTarget(g))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){Re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield FC(n,r)}else if(e instanceof vC?n.bu.Wt(e):e instanceof _O?n.bu.ee(e):n.bu.Yt(e),!t.isEqual(It.min()))try{const r=yield fF(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const l=i.bu.ue(u);return l.targetChanges.forEach((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const b=i.Eu.get(v);b&&i.Eu.set(v,b.withResumeToken(g.resumeToken,u))}}),l.targetMismatches.forEach((g,v)=>{const b=i.Eu.get(g);if(!b)return;i.Eu.set(g,b.withResumeToken(Jr.EMPTY_BYTE_STRING,b.snapshotVersion)),CF(i,g);const T=new Rl(b.target,g,v,b.sequenceNumber);TM(i,T)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Re("RemoteStore","Failed to raise snapshot:",r),yield FC(n,r)}var r}),PM.apply(this,arguments)}function FC(n,e,t){return RM.apply(this,arguments)}function RM(){return RM=(0,J.Z)(function*(n,e,t){if(!ld(e))throw e;n.Au.add(1),yield tm(n),n.Pu.set("Offline"),t||(t=()=>fF(n.localStore)),n.asyncQueue.enqueueRetryable((0,J.Z)(function*(){Re("RemoteStore","Retrying IndexedDB access"),yield t(),n.Au.delete(1),yield Cw(n)}))}),RM.apply(this,arguments)}function TF(n,e){return e().catch(t=>FC(n,t,e))}function nm(n){return kM.apply(this,arguments)}function kM(){return kM=(0,J.Z)(function*(n){const e=Xe(n),t=bd(e);let r=e.Tu.length>0?e.Tu[e.Tu.length-1].batchId:-1;for(;QB(e);)try{const i=yield OB(e.localStore,r);if(null===i){0===e.Tu.length&&t.Qo();break}r=i.batchId,JB(e,i)}catch(i){yield FC(e,i)}SF(e)&&AF(e)}),kM.apply(this,arguments)}function QB(n){return Ed(n)&&n.Tu.length<10}function JB(n,e){n.Tu.push(e);const t=bd(n);t.Uo()&&t.ru&&t.ou(e.mutations)}function SF(n){return Ed(n)&&!bd(n).qo()&&n.Tu.length>0}function AF(n){bd(n).start()}function XB(n){return NM.apply(this,arguments)}function NM(){return NM=(0,J.Z)(function*(n){bd(n).au()}),NM.apply(this,arguments)}function ej(n){return OM.apply(this,arguments)}function OM(){return OM=(0,J.Z)(function*(n){const e=bd(n);for(const t of n.Tu)e.ou(t.mutations)}),OM.apply(this,arguments)}function tj(n,e,t){return FM.apply(this,arguments)}function FM(){return FM=(0,J.Z)(function*(n,e,t){const r=n.Tu.shift(),i=Gx.from(r,e,t);yield TF(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield nm(n)}),FM.apply(this,arguments)}function nj(n,e){return LM.apply(this,arguments)}function LM(){return LM=(0,J.Z)(function*(n,e){var t;e&&bd(n).ru&&(yield(t=(0,J.Z)(function*(r,i){if(pO(u=i.code)&&u!==ue.ABORTED){const l=r.Tu.shift();bd(r).Go(),yield TF(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield nm(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),SF(n)&&AF(n)}),LM.apply(this,arguments)}function xF(n,e){return VM.apply(this,arguments)}function VM(){return VM=(0,J.Z)(function*(n,e){const t=Xe(n);t.asyncQueue.verifyOperationInProgress(),Re("RemoteStore","RemoteStore received new credentials");const r=Ed(t);t.Au.add(3),yield tm(t),r&&t.Pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Au.delete(3),yield Cw(t)}),VM.apply(this,arguments)}function UM(n,e){return BM.apply(this,arguments)}function BM(){return BM=(0,J.Z)(function*(n,e){const t=Xe(n);e?(t.Au.delete(2),yield Cw(t)):e||(t.Au.add(2),yield tm(t),t.Pu.set("Unknown"))}),BM.apply(this,arguments)}function rm(n){return n.Vu||(n.Vu=function(e,t,r){const i=Xe(e);return i.lu(),new $B(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{oo:ZB.bind(null,n),co:KB.bind(null,n),eu:YB.bind(null,n)}),n.Ru.push(function(){var e=(0,J.Z)(function*(t){t?(n.Vu.Go(),AM(n)?SM(n):n.Pu.set("Unknown")):(yield n.Vu.stop(),DF(n))});return function(t){return e.apply(this,arguments)}}())),n.Vu}function bd(n){return n.Su||(n.Su=function(e,t,r){const i=Xe(e);return i.lu(),new HB(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{oo:XB.bind(null,n),co:nj.bind(null,n),cu:ej.bind(null,n),uu:tj.bind(null,n)}),n.Ru.push(function(){var e=(0,J.Z)(function*(t){t?(n.Su.Go(),yield nm(n)):(yield n.Su.stop(),n.Tu.length>0&&(Re("RemoteStore",`Stopping write stream with ${n.Tu.length} pending writes`),n.Tu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Su}class jM{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new Qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,u){const l=Date.now()+r,g=new jM(e,t,l,i,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ce(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function im(n,e){if(Fr("AsyncQueue",`${e}: ${n}`),ld(n))return new Ce(ue.UNAVAILABLE,`${e}: ${n}`);throw n}class sm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ye.comparator(t.key,r.key):(t,r)=>Ye.comparator(t.key,r.key),this.keyedMap=sw(),this.sortedSet=new $n(this.comparator)}static emptySet(e){return new sm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof sm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new sm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class MF{constructor(){this.Du=new $n(Ye.comparator)}track(e){const t=e.doc.key,r=this.Du.get(t);r?0!==e.type&&3===r.type?this.Du=this.Du.insert(t,e):3===e.type&&1!==r.type?this.Du=this.Du.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Du=this.Du.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Du=this.Du.remove(t):1===e.type&&2===r.type?this.Du=this.Du.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):at():this.Du=this.Du.insert(t,e)}Cu(){const e=[];return this.Du.inorderTraversal((t,r)=>{e.push(r)}),e}}class om{constructor(e,t,r,i,u,l,g,v,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=g,this.excludesMetadataChanges=v,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,i,u){const l=[];return t.forEach(g=>{l.push({type:0,doc:g})}),new om(e,t,sm.emptySet(t),l,r,i,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class rj{constructor(){this.xu=void 0,this.listeners=[]}}class ij{constructor(){this.queries=new Ml(e=>KN(e),rw),this.onlineState="Unknown",this.Nu=new Set}}function $M(n,e){return HM.apply(this,arguments)}function HM(){return HM=(0,J.Z)(function*(n,e){const t=Xe(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new rj),i)try{u.xu=yield t.onListen(r)}catch(l){const g=im(l,`Initialization of query '${jx(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.ku(t.onlineState),u.xu&&e.Mu(u.xu)&&qM(t)}),HM.apply(this,arguments)}function zM(n,e){return GM.apply(this,arguments)}function GM(){return GM=(0,J.Z)(function*(n,e){const t=Xe(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),GM.apply(this,arguments)}function sj(n,e){const t=Xe(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const g of l.listeners)g.Mu(i)&&(r=!0);l.xu=i}}r&&qM(t)}function oj(n,e,t){const r=Xe(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function qM(n){n.Nu.forEach(e=>{e.next()})}class WM{constructor(e,t,r){this.query=e,this.Ou=t,this.$u=!1,this.Fu=null,this.onlineState="Unknown",this.options=r||{}}Mu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new om(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.$u?this.Bu(e)&&(this.Ou.next(e),t=!0):this.Lu(e,this.onlineState)&&(this.qu(e),t=!0),this.Fu=e,t}onError(e){this.Ou.error(e)}ku(e){this.onlineState=e;let t=!1;return this.Fu&&!this.$u&&this.Lu(this.Fu,e)&&(this.qu(this.Fu),t=!0),t}Lu(e,t){return!e.fromCache||(!this.options.Uu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Bu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Fu&&this.Fu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}qu(e){e=om.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.$u=!0,this.Ou.next(e)}}class aj{constructor(e,t){this.Ku=e,this.byteLength=t}Gu(){return"metadata"in this.Ku}}class PF{constructor(e){this.serializer=e}ir(e){return lu(this.serializer,e)}rr(e){return e.metadata.exists?xO(this.serializer,e.document,!1):Kn.newNoDocument(this.ir(e.metadata.name),this.ur(e.metadata.readTime))}ur(e){return Lr(e)}}class uj{constructor(e,t,r){this.Qu=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=RF(e)}ju(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ku.namedQuery)this.queries.push(e.Ku.namedQuery);else if(e.Ku.documentMetadata){this.documents.push({metadata:e.Ku.documentMetadata}),e.Ku.documentMetadata.exists||++t;const r=hn.fromString(e.Ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Ku.document&&(this.documents[this.documents.length-1].document=e.Ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}zu(e){const t=new Map,r=new PF(this.serializer);for(const i of e)if(i.metadata.queries){const u=r.ir(i.metadata.name);for(const l of i.metadata.queries){const g=(t.get(l)||tn()).add(u);t.set(l,g)}}return t}complete(){var e=this;return(0,J.Z)(function*(){const t=yield function FB(n,e,t,r){return gM.apply(this,arguments)}(e.localStore,new PF(e.serializer),e.documents,e.Qu.id),r=e.zu(e.documents);for(const i of e.queries)yield LB(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Wu:e.collectionGroups,Hu:t}})()}}function RF(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class kF{constructor(e){this.key=e}}class NF{constructor(e){this.key=e}}class OF{constructor(e,t){this.query=e,this.Ju=t,this.Yu=null,this.hasCachedResults=!1,this.current=!1,this.Xu=tn(),this.mutatedKeys=tn(),this.Zu=QN(e),this.tc=new sm(this.Zu)}get ec(){return this.Ju}nc(e,t){const r=t?t.sc:new MF,i=t?t.tc:this.tc;let u=t?t.mutatedKeys:this.mutatedKeys,l=i,g=!1;const v="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,b="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,M)=>{const $=i.get(T),Z=iw(this.query,M)?M:null,ie=!!$&&this.mutatedKeys.has($.key),ve=!!Z&&(Z.hasLocalMutations||this.mutatedKeys.has(Z.key)&&Z.hasCommittedMutations);let Ae=!1;$&&Z?$.data.isEqual(Z.data)?ie!==ve&&(r.track({type:3,doc:Z}),Ae=!0):this.ic($,Z)||(r.track({type:2,doc:Z}),Ae=!0,(v&&this.Zu(Z,v)>0||b&&this.Zu(Z,b)<0)&&(g=!0)):!$&&Z?(r.track({type:0,doc:Z}),Ae=!0):$&&!Z&&(r.track({type:1,doc:$}),Ae=!0,(v||b)&&(g=!0)),Ae&&(Z?(l=l.add(Z),u=ve?u.add(T):u.delete(T)):(l=l.delete(T),u=u.delete(T)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const T="F"===this.query.limitType?l.last():l.first();l=l.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{tc:l,sc:r,ji:g,mutatedKeys:u}}ic(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.tc;this.tc=e.tc,this.mutatedKeys=e.mutatedKeys;const u=e.sc.Cu();u.sort((b,T)=>function(M,$){const Z=ie=>{switch(ie){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return at()}};return Z(M)-Z($)}(b.type,T.type)||this.Zu(b.doc,T.doc)),this.rc(r);const l=t?this.oc():[],g=0===this.Xu.size&&this.current?1:0,v=g!==this.Yu;return this.Yu=g,0!==u.length||v?{snapshot:new om(this.query,e.tc,i,u,e.mutatedKeys,0===g,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),uc:l}:{uc:l}}ku(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tc:this.tc,sc:new MF,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{uc:[]}}cc(e){return!this.Ju.has(e)&&!!this.tc.has(e)&&!this.tc.get(e).hasLocalMutations}rc(e){e&&(e.addedDocuments.forEach(t=>this.Ju=this.Ju.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ju=this.Ju.delete(t)),this.current=e.current)}oc(){if(!this.current)return[];const e=this.Xu;this.Xu=tn(),this.tc.forEach(r=>{this.cc(r.key)&&(this.Xu=this.Xu.add(r.key))});const t=[];return e.forEach(r=>{this.Xu.has(r)||t.push(new NF(r))}),this.Xu.forEach(r=>{e.has(r)||t.push(new kF(r))}),t}ac(e){this.Ju=e.sr,this.Xu=tn();const t=this.nc(e.documents);return this.applyChanges(t,!0)}hc(){return om.fromInitialDocuments(this.query,this.tc,this.mutatedKeys,0===this.Yu,this.hasCachedResults)}}class lj{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class cj{constructor(e){this.key=e,this.lc=!1}}class dj{constructor(e,t,r,i,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.fc={},this.dc=new Ml(g=>KN(g),rw),this._c=new Map,this.wc=new Set,this.mc=new $n(Ye.comparator),this.gc=new Map,this.yc=new aM,this.Ic={},this.Tc=new Map,this.Ec=Tf.kn(),this.onlineState="Unknown",this.Ac=void 0}get isPrimaryClient(){return!0===this.Ac}}function hj(n,e){return ZM.apply(this,arguments)}function ZM(){return ZM=(0,J.Z)(function*(n,e){const t=y1(n);let r,i;const u=t.dc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.hc();else{const l=yield Xg(t.localStore,rs(e)),g=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield KM(t,e,r,"current"===g,l.resumeToken),t.isPrimaryClient&&OC(t.remoteStore,l)}return i}),ZM.apply(this,arguments)}function KM(n,e,t,r,i){return YM.apply(this,arguments)}function YM(){return YM=(0,J.Z)(function*(n,e,t,r,i){n.Rc=(M,$,Z)=>{return(ie=(0,J.Z)(function*(ve,Ae,Ge,mt){let yt=Ae.view.nc(Ge);yt.ji&&(yt=yield MC(ve.localStore,Ae.query,!1).then(({documents:pn})=>Ae.view.nc(pn,yt)));const en=mt&&mt.targetChanges.get(Ae.targetId),rn=Ae.view.applyChanges(yt,ve.isPrimaryClient,en);return o1(ve,Ae.targetId,rn.uc),rn.snapshot}),function(ve,Ae,Ge,mt){return ie.apply(this,arguments)})(n,M,$,Z);var ie};const u=yield MC(n.localStore,e,!0),l=new OF(e,u.sr),g=l.nc(u.documents),v=dw.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),b=l.applyChanges(g,n.isPrimaryClient,v);o1(n,t,b.uc);const T=new lj(e,t,l);return n.dc.set(e,T),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),b.snapshot}),YM.apply(this,arguments)}function fj(n,e){return QM.apply(this,arguments)}function QM(){return QM=(0,J.Z)(function*(n,e){const t=Xe(n),r=t.dc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(u=>!rw(u,e))),void t.dc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield em(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Dw(t.remoteStore,r.targetId),am(t,r.targetId)}).catch(ud))):(am(t,r.targetId),yield em(t.localStore,r.targetId,!0))}),QM.apply(this,arguments)}function JM(){return JM=(0,J.Z)(function*(n,e,t){const r=v1(n);try{const i=yield function(u,l){const g=Xe(u),v=or.now(),b=l.reduce(($,Z)=>$.add(Z.key),tn());let T,M;return g.persistence.runTransaction("Locally write mutations","readwrite",$=>{let Z=_s(),ie=tn();return g.Xi.getEntries($,b).next(ve=>{Z=ve,Z.forEach((Ae,Ge)=>{Ge.isValidDocument()||(ie=ie.add(Ae))})}).next(()=>g.localDocuments.getOverlayedDocuments($,Z)).next(ve=>{T=ve;const Ae=[];for(const Ge of l){const mt=HU(Ge,T.get(Ge.key).overlayedDocument);null!=mt&&Ae.push(new Pl(Ge.key,mt,ON(mt.value.mapValue),ar.exists(!0)))}return g.mutationQueue.addMutationBatch($,v,Ae,l)}).next(ve=>{M=ve;const Ae=ve.applyToLocalDocumentSet(T,ie);return g.documentOverlayCache.saveOverlays($,ve.batchId,Ae)})}).then(()=>({batchId:M.batchId,changes:XN(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,l,g){let v=u.Ic[u.currentUser.toKey()];v||(v=new $n(Kt)),v=v.insert(l,g),u.Ic[u.currentUser.toKey()]=v}(r,i.batchId,t),yield kl(r,i.changes),yield nm(r.remoteStore)}catch(i){const u=im(i,"Failed to persist write");t.reject(u)}}),JM.apply(this,arguments)}function FF(n,e){return XM.apply(this,arguments)}function XM(){return XM=(0,J.Z)(function*(n,e){const t=Xe(n);try{const r=yield function NB(n,e){const t=Xe(n),r=e.snapshotVersion;let i=t.Hi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Xi.newChangeBuffer({trackRemovals:!0});i=t.Hi;const g=[];e.targetChanges.forEach((T,M)=>{const $=i.get(M);if(!$)return;g.push(t.Fs.removeMatchingKeys(u,T.removedDocuments,M).next(()=>t.Fs.addMatchingKeys(u,T.addedDocuments,M)));let Z=$.withSequenceNumber(u.currentSequenceNumber);var ie,ve,Ae;null!==e.targetMismatches.get(M)?Z=Z.withResumeToken(Jr.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):T.resumeToken.approximateByteSize()>0&&(Z=Z.withResumeToken(T.resumeToken,r)),i=i.insert(M,Z),ve=Z,Ae=T,(0===(ie=$).resumeToken.approximateByteSize()||ve.snapshotVersion.toMicroseconds()-ie.snapshotVersion.toMicroseconds()>=3e8||Ae.addedDocuments.size+Ae.modifiedDocuments.size+Ae.removedDocuments.size>0)&&g.push(t.Fs.updateTargetData(u,Z))});let v=_s(),b=tn();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,T))}),g.push(pF(u,l,e.documentUpdates).next(T=>{v=T.er,b=T.nr})),!r.isEqual(It.min())){const T=t.Fs.getLastRemoteSnapshotVersion(u).next(M=>t.Fs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(T)}return re.waitFor(g).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,v,b)).next(()=>v)}).then(u=>(t.Hi=i,u))}(t.localStore,e);e.targetChanges.forEach((i,u)=>{const l=t.gc.get(u);l&&(wt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.lc=!0:i.modifiedDocuments.size>0?wt(l.lc):i.removedDocuments.size>0&&(wt(l.lc),l.lc=!1))}),yield kl(t,r,e)}catch(r){yield ud(r)}}),XM.apply(this,arguments)}function LF(n,e,t){const r=Xe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.dc.forEach((u,l)=>{const g=l.view.ku(e);g.snapshot&&i.push(g.snapshot)}),function(u,l){const g=Xe(u);g.onlineState=l;let v=!1;g.queries.forEach((b,T)=>{for(const M of T.listeners)M.ku(l)&&(v=!0)}),v&&qM(g)}(r.eventManager,e),i.length&&r.fc.eu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function gj(n,e,t){return e1.apply(this,arguments)}function e1(){return e1=(0,J.Z)(function*(n,e,t){const r=Xe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.gc.get(e),u=i&&i.key;if(u){let l=new $n(Ye.comparator);l=l.insert(u,Kn.newNoDocument(u,It.min()));const g=tn().add(u),v=new cw(It.min(),new Map,new $n(Kt),l,g);yield FF(r,v),r.mc=r.mc.remove(u),r.gc.delete(e),a1(r)}else yield em(r.localStore,e,!1).then(()=>am(r,e,t)).catch(ud)}),e1.apply(this,arguments)}function mj(n,e){return t1.apply(this,arguments)}function t1(){return t1=(0,J.Z)(function*(n,e){const t=Xe(n),r=e.batch.batchId;try{const i=yield function kB(n,e){const t=Xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.Xi.newChangeBuffer({trackRemovals:!0});return function(l,g,v,b){const T=v.batch,M=T.keys();let $=re.resolve();return M.forEach(Z=>{$=$.next(()=>b.getEntry(g,Z)).next(ie=>{const ve=v.docVersions.get(Z);wt(null!==ve),ie.version.compareTo(ve)<0&&(T.applyToRemoteDocument(ie,v),ie.isValidDocument()&&(ie.setReadTime(v.commitVersion),b.addEntry(ie)))})}),$.next(()=>l.mutationQueue.removeMutationBatch(g,T))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let g=tn();for(let v=0;v<l.mutationResults.length;++v)l.mutationResults[v].transformResults.length>0&&(g=g.add(l.batch.mutations[v].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);s1(t,r,null),i1(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield kl(t,i)}catch(i){yield ud(i)}}),t1.apply(this,arguments)}function yj(n,e,t){return n1.apply(this,arguments)}function n1(){return n1=(0,J.Z)(function*(n,e,t){const r=Xe(n);try{const i=yield function(u,l){const g=Xe(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let b;return g.mutationQueue.lookupMutationBatch(v,l).next(T=>(wt(null!==T),b=T.keys(),g.mutationQueue.removeMutationBatch(v,T))).next(()=>g.mutationQueue.performConsistencyCheck(v)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(v,b,l)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,b)).next(()=>g.localDocuments.getDocuments(v,b))})}(r.localStore,e);s1(r,e,t),i1(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield kl(r,i)}catch(i){yield ud(i)}}),n1.apply(this,arguments)}function r1(){return r1=(0,J.Z)(function*(n,e){const t=Xe(n);Ed(t.remoteStore)||Re("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=Xe(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>l.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Tc.get(r)||[];i.push(e),t.Tc.set(r,i)}catch(r){const i=im(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),r1.apply(this,arguments)}function i1(n,e){(n.Tc.get(e)||[]).forEach(t=>{t.resolve()}),n.Tc.delete(e)}function s1(n,e,t){const r=Xe(n);let i=r.Ic[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.Ic[r.currentUser.toKey()]=i}}function am(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.dc.delete(r),t&&n.fc.vc(r,t);n._c.delete(e),n.isPrimaryClient&&n.yc.ps(e).forEach(r=>{n.yc.containsKey(r)||VF(n,r)})}function VF(n,e){n.wc.delete(e.path.canonicalString());const t=n.mc.get(e);null!==t&&(Dw(n.remoteStore,t),n.mc=n.mc.remove(e),n.gc.delete(t),a1(n))}function o1(n,e,t){for(const r of t)r instanceof kF?(n.yc.addReference(r.key,e),_j(n,r)):r instanceof NF?(Re("SyncEngine","Document no longer in limbo: "+r.key),n.yc.removeReference(r.key,e),n.yc.containsKey(r.key)||VF(n,r.key)):at()}function _j(n,e){const t=e.key,r=t.path.canonicalString();n.mc.get(t)||n.wc.has(r)||(Re("SyncEngine","New document in limbo: "+t),n.wc.add(r),a1(n))}function a1(n){for(;n.wc.size>0&&n.mc.size<n.maxConcurrentLimboResolutions;){const e=n.wc.values().next().value;n.wc.delete(e);const t=new Ye(hn.fromString(e)),r=n.Ec.next();n.gc.set(r,new cj(t)),n.mc=n.mc.insert(t,r),OC(n.remoteStore,new Rl(rs(zg(t.path)),r,"TargetPurposeLimboResolution",zs.ct))}}function kl(n,e,t){return u1.apply(this,arguments)}function u1(){return u1=(0,J.Z)(function*(n,e,t){const r=Xe(n),i=[],u=[],l=[];var g;r.dc.isEmpty()||(r.dc.forEach((g,v)=>{l.push(r.Rc(v,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,b?.fromCache?"not-current":"current"),b){i.push(b);const T=hM.Bi(v.targetId,b);u.push(T)}}))}),yield Promise.all(l),r.fc.eu(i),yield(g=(0,J.Z)(function*(v,b){const T=Xe(v);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>re.forEach(b,$=>re.forEach($.$i,Z=>T.persistence.referenceDelegate.addReference(M,$.targetId,Z)).next(()=>re.forEach($.Fi,Z=>T.persistence.referenceDelegate.removeReference(M,$.targetId,Z)))))}catch(M){if(!ld(M))throw M;Re("LocalStore","Failed to update sequence numbers: "+M)}for(const M of b){const $=M.targetId;if(!M.fromCache){const Z=T.Hi.get($),ve=Z.withLastLimboFreeSnapshotVersion(Z.snapshotVersion);T.Hi=T.Hi.insert($,ve)}}}),function(v,b){return g.apply(this,arguments)})(r.localStore,u))}),u1.apply(this,arguments)}function wj(n,e){return l1.apply(this,arguments)}function l1(){return l1=(0,J.Z)(function*(n,e){const t=Xe(n);if(!t.currentUser.isEqual(e)){Re("SyncEngine","User change. New user:",e.toKey());const r=yield hF(t.localStore,e);t.currentUser=e,(i=t).Tc.forEach(l=>{l.forEach(g=>{g.reject(new Ce(ue.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Tc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield kl(t,r.tr)}var i}),l1.apply(this,arguments)}function Ej(n,e){const t=Xe(n),r=t.gc.get(e);if(r&&r.lc)return tn().add(r.key);{let i=tn();const u=t._c.get(e);if(!u)return i;for(const l of u){const g=t.dc.get(l);i=i.unionWith(g.view.ec)}return i}}function bj(n,e){return c1.apply(this,arguments)}function c1(){return c1=(0,J.Z)(function*(n,e){const t=Xe(n),r=yield MC(t.localStore,e.query,!0),i=e.view.ac(r);return t.isPrimaryClient&&o1(t,e.targetId,i.uc),i}),c1.apply(this,arguments)}function Ij(n,e){return d1.apply(this,arguments)}function d1(){return d1=(0,J.Z)(function*(n,e){const t=Xe(n);return mF(t.localStore,e).then(r=>kl(t,r))}),d1.apply(this,arguments)}function Cj(n,e,t,r){return h1.apply(this,arguments)}function h1(){return h1=(0,J.Z)(function*(n,e,t,r){const i=Xe(n),u=yield function(l,g){const v=Xe(l),b=Xe(v.mutationQueue);return v.persistence.runTransaction("Lookup mutation documents","readonly",T=>b.Vn(T,g).next(M=>M?v.localDocuments.getDocuments(T,M):re.resolve(null)))}(i.localStore,e);var g;null!==u?("pending"===t?yield nm(i.remoteStore):"acknowledged"===t||"rejected"===t?(s1(i,e,r||null),i1(i,e),g=e,Xe(Xe(i.localStore).mutationQueue).Dn(g)):at(),yield kl(i,u)):Re("SyncEngine","Cannot apply mutation batch with id: "+e)}),h1.apply(this,arguments)}function f1(){return f1=(0,J.Z)(function*(n,e){const t=Xe(n);if(y1(t),v1(t),!0===e&&!0!==t.Ac){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield UF(t,r.toArray());t.Ac=!0,yield UM(t.remoteStore,!0);for(const u of i)OC(t.remoteStore,u)}else if(!1===e&&!1!==t.Ac){const r=[];let i=Promise.resolve();t._c.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(am(t,l),em(t.localStore,l,!0))),Dw(t.remoteStore,l)}),yield i,yield UF(t,r),function(u){const l=Xe(u);l.gc.forEach((g,v)=>{Dw(l.remoteStore,v)}),l.yc.Is(),l.gc=new Map,l.mc=new $n(Ye.comparator)}(t),t.Ac=!1,yield UM(t.remoteStore,!1)}}),f1.apply(this,arguments)}function UF(n,e,t){return p1.apply(this,arguments)}function p1(){return p1=(0,J.Z)(function*(n,e,t){const r=Xe(n),i=[],u=[];for(const l of e){let g;const v=r._c.get(l);if(v&&0!==v.length){g=yield Xg(r.localStore,rs(v[0]));for(const b of v){const T=r.dc.get(b),M=yield bj(r,T);M.snapshot&&u.push(M.snapshot)}}else{const b=yield gF(r.localStore,l);g=yield Xg(r.localStore,b),yield KM(r,BF(b),l,!1,g.resumeToken)}i.push(g)}return r.fc.eu(u),i}),p1.apply(this,arguments)}function BF(n){return WN(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Tj(n){const e=Xe(n);return Xe(Xe(e.localStore).persistence).Mi()}function Sj(n,e,t,r){return g1.apply(this,arguments)}function g1(){return g1=(0,J.Z)(function*(n,e,t,r){const i=Xe(n);if(i.Ac)return void Re("SyncEngine","Ignoring unexpected query state notification.");const u=i._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield mF(i.localStore,YN(u[0])),g=cw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Jr.EMPTY_BYTE_STRING);yield kl(i,l,g);break}case"rejected":yield em(i.localStore,e,!0),am(i,e,r);break;default:at()}}),g1.apply(this,arguments)}function Aj(n,e,t){return m1.apply(this,arguments)}function m1(){return m1=(0,J.Z)(function*(n,e,t){const r=y1(n);if(r.Ac){for(const i of e){if(r._c.has(i)){Re("SyncEngine","Adding an already active target "+i);continue}const u=yield gF(r.localStore,i),l=yield Xg(r.localStore,u);yield KM(r,BF(u),l.targetId,!1,l.resumeToken),OC(r.remoteStore,l)}for(const i of t)r._c.has(i)&&(yield em(r.localStore,i,!1).then(()=>{Dw(r.remoteStore,i),am(r,i)}).catch(ud))}}),m1.apply(this,arguments)}function y1(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=FF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ej.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gj.bind(null,e),e.fc.eu=sj.bind(null,e.eventManager),e.fc.vc=oj.bind(null,e.eventManager),e}function v1(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yj.bind(null,e),e}class Tw{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,J.Z)(function*(){t.serializer=Iw(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return dF(this.persistence,new cF,e.initialUser,this.serializer)}createPersistence(e){return new uM(SC.js,this.serializer)}createSharedClientState(e){return new wF}terminate(){var e=this;return(0,J.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class _1 extends Tw{constructor(e,t,r){super(),this.bc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,J.Z)(function*(){yield t().call(r,e),yield r.bc.initialize(r,e),yield v1(r.bc.syncEngine),yield nm(r.bc.remoteStore),yield r.persistence.pi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return dF(this.persistence,new cF,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new tF(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new tU(t,this.persistence);return new eU(e.asyncQueue,r)}createPersistence(e){const t=dM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ui.withCacheSize(this.cacheSizeBytes):Ui.DEFAULT;return new cM(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,bF(),NC(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new wF}}class jF extends _1{constructor(e,t){super(e,t,!1),this.bc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,J.Z)(function*(){yield t().call(r,e);const i=r.bc.syncEngine;r.sharedClientState instanceof wM&&(r.sharedClientState.syncEngine={Qr:Cj.bind(null,i),jr:Sj.bind(null,i),zr:Aj.bind(null,i),Mi:Tj.bind(null,i),Gr:Ij.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.pi(function(){var u=(0,J.Z)(function*(l){yield function Dj(n,e){return f1.apply(this,arguments)}(r.bc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=bF();if(!wM.D(t))throw new Ce(ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=dM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new wM(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class um{initialize(e,t){var r=this;return(0,J.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>LF(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=wj.bind(null,r.syncEngine),yield UM(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new ij}createDatastore(e){const t=Iw(e.databaseInfo.databaseId),r=new jB(e.databaseInfo);return new zB(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=g=>LF(this.syncEngine,g,0),l=EF.D()?new EF:new VB,new WB(t,r,i,u,l);var t,r,i,u,l}createSyncEngine(e,t){return function(r,i,u,l,g,v,b){const T=new dj(r,i,u,l,g,v);return b&&(T.Ac=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,J.Z)(function*(t){const r=Xe(t);Re("RemoteStore","RemoteStore shutting down."),r.Au.add(5),yield tm(r),r.vu.shutdown(),r.Pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function $F(n,e=10240){let t=0;return{read:()=>(0,J.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,J.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class LC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Vc(this.observer.next,e)}error(e){this.observer.error?this.Vc(this.observer.error,e):Fr("Uncaught Error in snapshot listener:",e.toString())}Sc(){this.muted=!0}Vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Pj{constructor(e,t){this.Dc=e,this.serializer=t,this.metadata=new Qr,this.buffer=new Uint8Array,this.Cc=new TextDecoder("utf-8"),this.xc().then(r=>{r&&r.Gu()?this.metadata.resolve(r.Ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Ku)}`))},r=>this.metadata.reject(r))}close(){return this.Dc.cancel()}getMetadata(){var e=this;return(0,J.Z)(function*(){return e.metadata.promise})()}Pc(){var e=this;return(0,J.Z)(function*(){return yield e.getMetadata(),e.xc()})()}xc(){var e=this;return(0,J.Z)(function*(){const t=yield e.Nc();if(null===t)return null;const r=e.Cc.decode(t),i=Number(r);isNaN(i)&&e.kc(`length string (${r}) is not valid number`);const u=yield e.Mc(i);return new aj(JSON.parse(u),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Nc(){var e=this;return(0,J.Z)(function*(){for(;e.Oc()<0&&!(yield e.$c()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.kc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Mc(e){var t=this;return(0,J.Z)(function*(){for(;t.buffer.length<e;)(yield t.$c())&&t.kc("Reached the end of bundle when more is expected.");const r=t.Cc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}kc(e){throw this.Dc.cancel(),new Error(`Invalid bundle format: ${e}`)}$c(){var e=this;return(0,J.Z)(function*(){const t=yield e.Dc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Rj{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,J.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ce(ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,J.Z)(function*(u,l){const g=Xe(u),v=fw(g.serializer)+"/documents",b={documents:l.map(Z=>hw(g.serializer,Z))},T=yield g.Ao("BatchGetDocuments",v,b,l.length),M=new Map;T.forEach(Z=>{const ie=function XU(n,e){return"found"in e?function(t,r){wt(!!r.found);const i=lu(t,r.found.name),u=Lr(r.found.updateTime),l=r.found.createTime?Lr(r.found.createTime):It.min(),g=new Ci({mapValue:{fields:r.found.fields}});return Kn.newFoundDocument(i,u,l,g)}(n,e):"missing"in e?function(t,r){wt(!!r.missing),wt(!!r.readTime);const i=lu(t,r.missing),u=Lr(r.readTime);return Kn.newNoDocument(i,u)}(n,e):at()}(g.serializer,Z);M.set(ie.key.toString(),ie)});const $=[];return l.forEach(Z=>{const ie=M.get(Z.toString());wt(!!ie),$.push(ie)}),$}),function(u,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Zg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,J.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=Ye.fromPath(i);e.mutations.push(new Hx(u,e.precondition(u)))}),yield(r=(0,J.Z)(function*(i,u){const l=Xe(i),g=fw(l.serializer)+"/documents",v={writes:u.map(b=>pw(l.serializer,b))};yield l.po("Commit",g,v)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw at();t=It.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ce(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(It.min())?ar.exists(!1):ar.updateTime(t):ar.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(It.min()))throw new Ce(ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ar.updateTime(t)}return ar.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class kj{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.Fc=r.maxAttempts,this.Lo=new bM(this.asyncQueue,"transaction_retry")}run(){this.Fc-=1,this.Bc()}Bc(){var e=this;this.Lo.xo((0,J.Z)(function*(){const t=new Rj(e.datastore),r=e.Lc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.qc(u)}))}).catch(i=>{e.qc(i)})}))}Lc(e){try{const t=this.updateFunction(e);return!Y_(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}qc(e){this.Fc>0&&this.Uc(e)?(this.Fc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Bc(),Promise.resolve()))):this.deferred.reject(e)}Uc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!pO(t)}return!1}}class Nj{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ci.UNAUTHENTICATED,this.clientId=dN.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,J.Z)(function*(g){Re("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Re("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,J.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ce(ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,J.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=im(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function VC(n,e){return w1.apply(this,arguments)}function w1(){return w1=(0,J.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Re("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,J.Z)(function*(u){r.isEqual(u)||(yield hF(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),w1.apply(this,arguments)}function E1(n,e){return b1.apply(this,arguments)}function b1(){return b1=(0,J.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield I1(n);Re("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>xF(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>xF(e.remoteStore,u)),n._onlineComponents=e}),b1.apply(this,arguments)}function HF(n){return"FirebaseError"===n.name?n.code===ue.FAILED_PRECONDITION||n.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function I1(n){return C1.apply(this,arguments)}function C1(){return C1=(0,J.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Re("FirestoreClient","Using user provided OfflineComponentProvider");try{yield VC(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!HF(t))throw t;Io("Error using user provided cache. Falling back to memory cache: "+t),yield VC(n,new Tw)}}else Re("FirestoreClient","Using default OfflineComponentProvider"),yield VC(n,new Tw);return n._offlineComponents}),C1.apply(this,arguments)}function UC(n){return D1.apply(this,arguments)}function D1(){return D1=(0,J.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Re("FirestoreClient","Using user provided OnlineComponentProvider"),yield E1(n,n._uninitializedComponentsProvider._online)):(Re("FirestoreClient","Using default OnlineComponentProvider"),yield E1(n,new um))),n._onlineComponents}),D1.apply(this,arguments)}function zF(n){return I1(n).then(e=>e.persistence)}function BC(n){return I1(n).then(e=>e.localStore)}function GF(n){return UC(n).then(e=>e.remoteStore)}function T1(n){return UC(n).then(e=>e.syncEngine)}function lm(n){return S1.apply(this,arguments)}function S1(){return S1=(0,J.Z)(function*(n){const e=yield UC(n),t=e.eventManager;return t.onListen=hj.bind(null,e.syncEngine),t.onUnlisten=fj.bind(null,e.syncEngine),t}),S1.apply(this,arguments)}function WF(n,e,t={}){const r=new Qr;return n.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return function(i,u,l,g,v){const b=new LC({next:M=>{u.enqueueAndForget(()=>zM(i,T));const $=M.docs.has(l);!$&&M.fromCache?v.reject(new Ce(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):$&&M.fromCache&&g&&"server"===g.source?v.reject(new Ce(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(M)},error:M=>v.reject(M)}),T=new WM(zg(l.path),b,{includeMetadataChanges:!0,Uu:!0});return $M(i,T)}(yield lm(n),n.asyncQueue,e,t,r)})),r.promise}function ZF(n,e,t={}){const r=new Qr;return n.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return function(i,u,l,g,v){const b=new LC({next:M=>{u.enqueueAndForget(()=>zM(i,T)),M.fromCache&&"server"===g.source?v.reject(new Ce(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(M)},error:M=>v.reject(M)}),T=new WM(l,b,{includeMetadataChanges:!0,Uu:!0});return $M(i,T)}(yield lm(n),n.asyncQueue,e,t,r)})),r.promise}const KF=new Map;function A1(n,e,t){if(!t)throw new Ce(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function YF(n,e,t,r){if(!0===e&&!0===r)throw new Ce(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function QF(n){if(!Ye.isDocumentKey(n))throw new Ce(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function JF(n){if(Ye.isDocumentKey(n))throw new Ce(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function jC(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":at()}function dn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ce(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jC(n);throw new Ce(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function XF(n,e){if(e<=0)throw new Ce(ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class e2{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ce(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ce(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!this.experimentalForceLongPolling&&void 0!==e.experimentalAutoDetectLongPolling&&!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sw{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new e2({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ce(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ce(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new e2(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new $V;switch(t.type){case"firstParty":return new qV(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ce(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=KF.get(e);t&&(Re("ComponentProvider","Removing Datastore"),KF.delete(e),t.terminate())}(this),Promise.resolve()}}function t2(n,e,t,r={}){var i;const u=(n=dn(n,Sw))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Io("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,g;if("string"==typeof r.mockUserToken)l=r.mockUserToken,g=ci.MOCK_USER;else{l=(0,_t.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Ce(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new ci(v)}n._authCredentials=new HV(new lN(l,g))}}class Yn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yn(this.firestore,e,this._key)}}class Di{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Di(this.firestore,e,this._query)}}class cu extends Di{constructor(e,t,r){super(e,t,zg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yn(this.firestore,null,new Ye(e))}withConverter(e){return new cu(this.firestore,e,this._path)}}function n2(n,e,...t){if(n=(0,_t.m9)(n),A1("collection","path",e),n instanceof Sw){const r=hn.fromString(e,...t);return JF(r),new cu(n,null,r)}{if(!(n instanceof Yn||n instanceof cu))throw new Ce(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(hn.fromString(e,...t));return JF(r),new cu(n.firestore,null,r)}}function $C(n,e,...t){if(n=(0,_t.m9)(n),1===arguments.length&&(e=dN.A()),A1("doc","path",e),n instanceof Sw){const r=hn.fromString(e,...t);return QF(r),new Yn(n,null,new Ye(r))}{if(!(n instanceof Yn||n instanceof cu))throw new Ce(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(hn.fromString(e,...t));return QF(r),new Yn(n.firestore,n instanceof cu?n.converter:null,new Ye(r))}}function r2(n,e){return n=(0,_t.m9)(n),e=(0,_t.m9)(e),(n instanceof Yn||n instanceof cu)&&(e instanceof Yn||e instanceof cu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function x1(n,e){return n=(0,_t.m9)(n),e=(0,_t.m9)(e),n instanceof Di&&e instanceof Di&&n.firestore===e.firestore&&rw(n._query,e._query)&&n.converter===e.converter}class zj{constructor(){this.Kc=Promise.resolve(),this.Gc=[],this.Qc=!1,this.jc=[],this.zc=null,this.Wc=!1,this.Hc=!1,this.Jc=[],this.Lo=new bM(this,"async_queue_retry"),this.Yc=()=>{const t=NC();t&&Re("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Lo.ko()};const e=NC();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Yc)}get isShuttingDown(){return this.Qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Xc(),this.Zc(e)}enterRestrictedMode(e){if(!this.Qc){this.Qc=!0,this.Hc=e||!1;const t=NC();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Yc)}}enqueue(e){if(this.Xc(),this.Qc)return new Promise(()=>{});const t=new Qr;return this.Zc(()=>this.Qc&&this.Hc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Gc.push(e),this.ta()))}ta(){var e=this;return(0,J.Z)(function*(){if(0!==e.Gc.length){try{yield e.Gc[0](),e.Gc.shift(),e.Lo.reset()}catch(t){if(!ld(t))throw t;Re("AsyncQueue","Operation failed with retryable error: "+t)}e.Gc.length>0&&e.Lo.xo(()=>e.ta())}})()}Zc(e){const t=this.Kc.then(()=>(this.Wc=!0,e().catch(r=>{throw this.zc=r,this.Wc=!1,Fr("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Wc=!1,r))));return this.Kc=t,t}enqueueAfterDelay(e,t,r){this.Xc(),this.Jc.indexOf(e)>-1&&(t=0);const i=jM.createAndSchedule(this,e,t,r,u=>this.ea(u));return this.jc.push(i),i}Xc(){this.zc&&at()}verifyOperationInProgress(){}na(){var e=this;return(0,J.Z)(function*(){let t;do{t=e.Kc,yield t}while(t!==e.Kc)})()}sa(e){for(const t of this.jc)if(t.timerId===e)return!0;return!1}ia(e){return this.na().then(()=>{this.jc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.jc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.na()})}ra(e){this.Jc.push(e)}ea(e){const t=this.jc.indexOf(e);this.jc.splice(t,1)}}function M1(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class Gj{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Qn extends Sw{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new zj,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||i2(this),this._firestoreClient.terminate()}}function Wj(n,e){const t="object"==typeof n?n:(0,nn.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,nn._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const u=(0,_t.P0)("firestore");u&&t2(i,...u)}return i}function Vr(n){return n._firestoreClient||i2(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function i2(n){var e,t,r;const i=n._freezeSettings(),u=(g=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new bU(n._databaseId,g,n._persistenceKey,(b=i).host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,b.useFetchStreams));var g,b;n._firestoreClient=new Nj(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function s2(n,e,t){const r=new Qr;return n.asyncQueue.enqueue((0,J.Z)(function*(){try{yield VC(n,t),yield E1(n,e),r.resolve()}catch(i){const u=i;if(!HF(u))throw u;Io("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function o2(n){if(n._initialized||n._terminated)throw new Ce(ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class du{constructor(e){this._byteString=e}static fromBase64String(e){try{return new du(Jr.fromBase64String(e))}catch(t){throw new Ce(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new du(Jr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Nl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ce(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Cr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Af{constructor(e){this._methodName=e}}class HC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ce(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ce(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Kt(this._lat,e._lat)||Kt(this._long,e._long)}}const r$=/^__.*__$/;class i${constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Pl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wg(e,this.data,t,this.fieldTransforms)}}class a2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Pl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function u2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw at()}}class zC{constructor(e,t,r,i,u,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===u&&this.oa(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ua(){return this.settings.ua}ca(e){return new zC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}aa(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ca({path:r,ha:!1});return i.la(e),i}fa(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ca({path:r,ha:!1});return i.oa(),i}da(e){return this.ca({path:void 0,ha:!0})}_a(e){return WC(e,this.settings.methodName,this.settings.wa||!1,this.path,this.settings.ma)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}oa(){if(this.path)for(let e=0;e<this.path.length;e++)this.la(this.path.get(e))}la(e){if(0===e.length)throw this._a("Document fields must not be empty");if(u2(this.ua)&&r$.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class s${constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Iw(e)}ga(e,t,r,i=!1){return new zC({ua:e,methodName:t,ma:r,path:Cr.emptyPath(),ha:!1,wa:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xf(n){const e=n._freezeSettings(),t=Iw(n._databaseId);return new s$(n._databaseId,!!e.ignoreUndefinedProperties,t)}function GC(n,e,t,r,i,u={}){const l=n.ga(u.merge||u.mergeFields?2:0,e,t,i);N1("Data must be an object, but it was:",l,r);const g=d2(r,l);let v,b;if(u.merge)v=new vs(l.fieldMask),b=l.fieldTransforms;else if(u.mergeFields){const T=[];for(const M of u.mergeFields){const $=Mw(e,M,t);if(!l.contains($))throw new Ce(ue.INVALID_ARGUMENT,`Field '${$}' is specified in your field mask but missing from your input data.`);f2(T,$)||T.push($)}v=new vs(T),b=l.fieldTransforms.filter(M=>v.covers(M.field))}else v=null,b=l.fieldTransforms;return new i$(new Ci(g),v,b)}class xw extends Af{_toFieldTransform(e){if(2!==e.ua)throw e._a(1===e.ua?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xw}}function l2(n,e,t){return new zC({ua:3,ma:e.settings.ma,methodName:n._methodName,ha:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class P1 extends Af{_toFieldTransform(e){return new aw(e.path,new Gg)}isEqual(e){return e instanceof P1}}class o$ extends Af{constructor(e,t){super(e),this.ya=t}_toFieldTransform(e){const t=l2(this,e,!0),r=this.ya.map(u=>Mf(u,t)),i=new _f(r);return new aw(e.path,i)}isEqual(e){return this===e}}class a$ extends Af{constructor(e,t){super(e),this.ya=t}_toFieldTransform(e){const t=l2(this,e,!0),r=this.ya.map(u=>Mf(u,t)),i=new wf(r);return new aw(e.path,i)}isEqual(e){return this===e}}class u$ extends Af{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=new qg(e.serializer,rO(e.serializer,this.pa));return new aw(e.path,t)}isEqual(e){return this===e}}function R1(n,e,t,r){const i=n.ga(1,e,t);N1("Data must be an object, but it was:",i,r);const u=[],l=Ci.empty();cd(r,(v,b)=>{const T=qC(e,v,t);b=(0,_t.m9)(b);const M=i.fa(T);if(b instanceof xw)u.push(T);else{const $=Mf(b,M);null!=$&&(u.push(T),l.set(T,$))}});const g=new vs(u);return new a2(l,g,i.fieldTransforms)}function k1(n,e,t,r,i,u){const l=n.ga(1,e,t),g=[Mw(e,r,t)],v=[i];if(u.length%2!=0)throw new Ce(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let $=0;$<u.length;$+=2)g.push(Mw(e,u[$])),v.push(u[$+1]);const b=[],T=Ci.empty();for(let $=g.length-1;$>=0;--$)if(!f2(b,g[$])){const Z=g[$];let ie=v[$];ie=(0,_t.m9)(ie);const ve=l.fa(Z);if(ie instanceof xw)b.push(Z);else{const Ae=Mf(ie,ve);null!=Ae&&(b.push(Z),T.set(Z,Ae))}}const M=new vs(b);return new a2(T,M,l.fieldTransforms)}function c2(n,e,t,r=!1){return Mf(t,n.ga(r?4:3,e))}function Mf(n,e){if(h2(n=(0,_t.m9)(n)))return N1("Unsupported field value:",e,n),d2(n,e);if(n instanceof Af)return function(t,r){if(!u2(r.ua))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ha&&4!==e.ua)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const l of t){let g=Mf(l,r.da(u));null==g&&(g={nullValue:"NULL_VALUE"}),i.push(g),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,_t.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return rO(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=or.fromDate(t);return{timestampValue:Kg(r.serializer,i)}}if(t instanceof or){const i=new or(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Kg(r.serializer,i)}}if(t instanceof HC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof du)return{bytesValue:CO(r.serializer,t._byteString)};if(t instanceof Yn){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Yx(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${jC(t)}`)}(n,e)}function d2(n,e){const t={};return TN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cd(n,(r,i)=>{const u=Mf(i,e.aa(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function h2(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof or||n instanceof HC||n instanceof du||n instanceof Yn||n instanceof Af)}function N1(n,e,t){if(!h2(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=jC(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function Mw(n,e,t){if((e=(0,_t.m9)(e))instanceof Nl)return e._internalPath;if("string"==typeof e)return qC(n,e);throw WC("Field path arguments must be of type string or ",n,!1,void 0,t)}const l$=new RegExp("[~\\*/\\[\\]]");function qC(n,e,t){if(e.search(l$)>=0)throw WC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Nl(...e.split("."))._internalPath}catch{throw WC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function WC(n,e,t,r,i){const u=r&&!r.isEmpty(),l=void 0!==i;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let v="";return(u||l)&&(v+=" (found",u&&(v+=` in field ${r}`),l&&(v+=` in document ${i}`),v+=")"),new Ce(ue.INVALID_ARGUMENT,g+n+v)}function f2(n,e){return n.some(t=>t.isEqual(e))}class Pw{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Yn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new c$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ZC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class c$ extends Pw{data(){return super.data()}}function ZC(n,e){return"string"==typeof e?qC(n,e):e instanceof Nl?e._internalPath:e._delegate._internalPath}function p2(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ce(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class O1{}class Rw extends O1{}function Id(n,e,...t){let r=[];e instanceof O1&&r.push(e),r=r.concat(t),function(i){const u=i.filter(g=>g instanceof cm).length,l=i.filter(g=>g instanceof kw).length;if(u>1||u>0&&l>0)throw new Ce(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class kw extends Rw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new kw(e,t,r)}_apply(e){const t=this._parse(e);return v2(e._query,t),new Di(e.firestore,e.converter,Bx(e._query,t))}_parse(e){const t=xf(e.firestore);return function(i,u,l,g,v,b,T){let M;if(v.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Ce(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){y2(T,b);const $=[];for(const Z of T)$.push(m2(g,i,Z));M={arrayValue:{values:$}}}else M=m2(g,i,T)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||y2(T,b),M=c2(l,"where",T,"in"===b||"not-in"===b);return cn.create(v,b,M)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class cm extends O1{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new cm(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:An.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let u=r;const l=i.getFlattenedFilters();for(const g of l)v2(u,g),u=Bx(u,g)}(e._query,t),new Di(e.firestore,e.converter,Bx(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class F1 extends Rw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new F1(e,t)}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Ce(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ce(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new $g(i,u);return function(g,v){if(null===Vx(g)){const b=hC(g);null!==b&&_2(0,b,v.field)}}(r,l),l}(e._query,this._field,this._direction);return new Di(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new xl(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class KC extends Rw{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new KC(e,t,r)}_apply(e){return new Di(e.firestore,e.converter,fC(e._query,this._limit,this._limitType))}}class YC extends Rw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new YC(e,t,r)}_apply(e){const t=g2(e,this.type,this._docOrFields,this._inclusive);return new Di(e.firestore,e.converter,(i=t,new xl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class QC extends Rw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new QC(e,t,r)}_apply(e){const t=g2(e,this.type,this._docOrFields,this._inclusive);return new Di(e.firestore,e.converter,(i=t,new xl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function g2(n,e,t,r){if(t[0]=(0,_t.m9)(t[0]),t[0]instanceof Pw)return function(i,u,l,g,v){if(!g)throw new Ce(ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const b=[];for(const T of vf(i))if(T.field.isKeyField())b.push(mf(u,g.key));else{const M=g.data.field(T.field);if(sC(M))throw new Ce(ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const $=T.field.canonicalString();throw new Ce(ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$}' (used as the orderBy) does not exist.`)}b.push(M)}return new md(b,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=xf(n.firestore);return function(u,l,g,v,b,T){const M=u.explicitOrderBy;if(b.length>M.length)throw new Ce(ue.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const $=[];for(let Z=0;Z<b.length;Z++){const ie=b[Z];if(M[Z].field.isKeyField()){if("string"!=typeof ie)throw new Ce(ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof ie}`);if(!Ux(u)&&-1!==ie.indexOf("/"))throw new Ce(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${ie}' contains a slash.`);const ve=u.path.child(hn.fromString(ie));if(!Ye.isDocumentKey(ve))throw new Ce(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${ve}' is not because it contains an odd number of segments.`);const Ae=new Ye(ve);$.push(mf(l,Ae))}else{const ve=c2(g,v,ie);$.push(ve)}}return new md($,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function m2(n,e,t){if("string"==typeof(t=(0,_t.m9)(t))){if(""===t)throw new Ce(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ux(e)&&-1!==t.indexOf("/"))throw new Ce(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(hn.fromString(t));if(!Ye.isDocumentKey(r))throw new Ce(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return mf(n,new Ye(r))}if(t instanceof Yn)return mf(n,t._key);throw new Ce(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jC(t)}.`)}function y2(n,e){if(!Array.isArray(n)||0===n.length)throw new Ce(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function v2(n,e){if(e.isInequality()){const r=hC(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Ce(ue.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const u=Vx(n);null!==u&&_2(0,i,u)}const t=function(r,i){for(const u of r)for(const l of u.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ce(ue.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function _2(n,e,t){if(!t.isEqual(e))throw new Ce(ue.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class L1{convertValue(e,t="none"){switch(pd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Al(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw at()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return cd(e,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new HC(Dr(e.latitude),Dr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=oC(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(J_(e));default:return null}}convertTimestamp(e){const t=dd(e);return new or(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=hn.fromString(e);wt(NO(r));const i=new hd(r.get(1),r.get(3)),u=new Ye(r.popFirst(5));return i.isEqual(t)||Fr(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function JC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class _$ extends L1{constructor(e){super(),this.firestore=e}convertBytes(e){return new du(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yn(this.firestore,null,t)}}class Pf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ol extends Pw{constructor(e,t,r,i,u,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Nw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ZC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Nw extends Ol{data(e={}){return super.data(e)}}class Cd{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Pf(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Nw(this._firestore,this._userDataWriter,r.key,r,new Pf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ce(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new Nw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Pf(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const g=new Nw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Pf(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,b=-1;return 0!==l.type&&(v=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),b=u.indexOf(l.doc.key)),{type:E$(l.type),doc:g,oldIndex:v,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function E$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return at()}}function E2(n,e){return n instanceof Ol&&e instanceof Ol?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Cd&&e instanceof Cd&&n._firestore===e._firestore&&x1(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Dd extends L1{constructor(e){super(),this.firestore=e}convertBytes(e){return new du(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yn(this.firestore,null,t)}}function b2(n,e,t){n=dn(n,Yn);const r=dn(n.firestore,Qn),i=JC(n.converter,e,t);return dm(r,[GC(xf(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,ar.none())])}function I2(n,e,t,...r){n=dn(n,Yn);const i=dn(n.firestore,Qn),u=xf(i);let l;return l="string"==typeof(e=(0,_t.m9)(e))||e instanceof Nl?k1(u,"updateDoc",n._key,e,t,r):R1(u,"updateDoc",n._key,e),dm(i,[l.toMutation(n._key,ar.exists(!0))])}function C2(n,...e){var t,r,i;n=(0,_t.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||M1(e[l])||(u=e[l],l++);const g={includeMetadataChanges:u.includeMetadataChanges};if(M1(e[l])){const M=e[l];e[l]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[l+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[l+2]=null===(i=M.complete)||void 0===i?void 0:i.bind(M)}let v,b,T;if(n instanceof Yn)b=dn(n.firestore,Qn),T=zg(n._key.path),v={next:M=>{e[l]&&e[l](V1(b,n,M))},error:e[l+1],complete:e[l+2]};else{const M=dn(n,Di);b=dn(M.firestore,Qn),T=M._query;const $=new Dd(b);v={next:Z=>{e[l]&&e[l](new Cd(b,$,M,Z))},error:e[l+1],complete:e[l+2]},p2(n._query)}return function(M,$,Z,ie){const ve=new LC(ie),Ae=new WM($,ve,Z);return M.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return $M(yield lm(M),Ae)})),()=>{ve.Sc(),M.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return zM(yield lm(M),Ae)}))}}(Vr(b),T,g,v)}function dm(n,e){return function(t,r){const i=new Qr;return t.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return function pj(n,e,t){return JM.apply(this,arguments)}(yield T1(t),r,i)})),i.promise}(Vr(n),e)}function V1(n,e,t){const r=t.docs.get(e._key),i=new Dd(n);return new Ol(n,i,e._key,r,new Pf(t.hasPendingWrites,t.fromCache),e.converter)}const U$={maxAttempts:5};class D2{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=xf(e)}set(e,t,r){this._verifyNotCommitted();const i=Td(e,this._firestore),u=JC(i.converter,t,r),l=GC(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,ar.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=Td(e,this._firestore);let l;return l="string"==typeof(t=(0,_t.m9)(t))||t instanceof Nl?k1(this._dataReader,"WriteBatch.update",u._key,t,r,i):R1(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,ar.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Td(e,this._firestore);return this._mutations=this._mutations.concat(new Zg(t._key,ar.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ce(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Td(n,e){if((n=(0,_t.m9)(n)).firestore!==e)throw new Ce(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class B$ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=xf(e)}get(e){const t=Td(e,this._firestore),r=new _$(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return at();const u=i[0];if(u.isFoundDocument())return new Pw(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Pw(this._firestore,r,t._key,null,t.converter);throw at()})}set(e,t,r){const i=Td(e,this._firestore),u=JC(i.converter,t,r),l=GC(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const u=Td(e,this._firestore);let l;return l="string"==typeof(t=(0,_t.m9)(t))||t instanceof Nl?k1(this._dataReader,"Transaction.update",u._key,t,r,i):R1(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=Td(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Td(e,this._firestore),r=new Dd(this._firestore);return super.get(e).then(i=>new Ol(this._firestore,r,t._key,i._document,new Pf(!1,!1),t.converter))}}!function(n,e=!0){Vg=nn.SDK_VERSION,(0,nn._registerComponent)(new _i.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const u=t.getProvider("app").getImmediate(),l=new Qn(new zV(t.getProvider("auth-internal")),new WV(t.getProvider("app-check-internal")),function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Ce(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hd(g.options.projectId,v)}(u,r),u);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,nn.registerVersion)(uN,"3.11.0",n),(0,nn.registerVersion)(uN,"3.11.0","esm2017")}();function U1(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ce("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function S2(){if(typeof Uint8Array>"u")throw new Ce("unimplemented","Uint8Arrays are not available in this environment.")}function A2(){if(!function wU(){return typeof atob<"u"}())throw new Ce("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Ow{constructor(e){this._delegate=e}static fromBase64String(e){return A2(),new Ow(du.fromBase64String(e))}static fromUint8Array(e){return S2(),new Ow(du.fromUint8Array(e))}toBase64(){return A2(),this._delegate.toBase64()}toUint8Array(){return S2(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function B1(n){return function K$(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Y${enableIndexedDbPersistence(e,t){return function Zj(n,e){o2(n=dn(n,Qn));const t=Vr(n);if(t._uninitializedComponentsProvider)throw new Ce(ue.FAILED_PRECONDITION,"SDK cache is already specified.");Io("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new um;return s2(t,i,new _1(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Kj(n){o2(n=dn(n,Qn));const e=Vr(n);if(e._uninitializedComponentsProvider)throw new Ce(ue.FAILED_PRECONDITION,"SDK cache is already specified.");Io("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new um;return s2(e,r,new jF(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Yj(n){if(n._initialized&&!n._terminated)throw new Ce(ue.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Qr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,J.Z)(function*(){try{yield(t=(0,J.Z)(function*(r){if(!ca.D())return Promise.resolve();const i=r+"main";yield ca.delete(i)}),function(r){return t.apply(this,arguments)})(dM(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class x2{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof hd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Io("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){t2(this._delegate,e,t,r)}enableNetwork(){return function Jj(n){return function Oj(n){return n.asyncQueue.enqueue((0,J.Z)(function*(){const e=yield zF(n),t=yield GF(n);return e.setNetworkEnabled(!0),function(r){const i=Xe(r);return i.Au.delete(0),Cw(i)}(t)}))}(Vr(n=dn(n,Qn)))}(this._delegate)}disableNetwork(){return function Xj(n){return function Fj(n){return n.asyncQueue.enqueue((0,J.Z)(function*(){const e=yield zF(n),t=yield GF(n);return e.setNetworkEnabled(!1),(r=(0,J.Z)(function*(i){const u=Xe(i);u.Au.add(0),yield tm(u),u.Pu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Vr(n=dn(n,Qn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,YF("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Qj(n){return function(e){const t=new Qr;return e.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return function vj(n,e){return r1.apply(this,arguments)}(yield T1(e),t)})),t.promise}(Vr(n=dn(n,Qn)))}(this._delegate)}onSnapshotsInSync(e){return function M$(n,e){return function Uj(n,e){const t=new LC(e);return n.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return r=yield lm(n),i=t,Xe(r).Nu.add(i),void i.next();var r,i})),()=>{t.Sc(),n.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return r=yield lm(n),i=t,void Xe(r).Nu.delete(i);var r,i}))}}(Vr(n=dn(n,Qn)),M1(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ce("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new hm(this,n2(this._delegate,e))}catch(t){throw is(t,"collection()","Firestore.collection()")}}doc(e){try{return new Co(this,$C(this._delegate,e))}catch(t){throw is(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ss(this,function Hj(n,e){if(n=dn(n,Sw),A1("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ce(ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Di(n,null,(t=e,new xl(hn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw is(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function j$(n,e,t){n=dn(n,Qn);const r=Object.assign(Object.assign({},U$),t);return function(i){if(i.maxAttempts<1)throw new Ce(ue.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,u,l){const g=new Qr;return i.asyncQueue.enqueueAndForget((0,J.Z)(function*(){const v=yield function qF(n){return UC(n).then(e=>e.datastore)}(i);new kj(i.asyncQueue,v,l,u,g).run()})),g.promise}(Vr(n),i=>e(new B$(n,i)),r)}(this._delegate,t=>e(new M2(this,t)))}batch(){return Vr(this._delegate),new P2(new D2(this._delegate,e=>dm(this._delegate,e)))}loadBundle(e){return function e$(n,e){const t=Vr(n=dn(n,Qn)),r=new Gj;return function Bj(n,e,t,r){const i=function(u,l){let g;return g="string"==typeof u?mO().encode(u):u,v=function(v,b){if(v instanceof Uint8Array)return $F(v,b);if(v instanceof ArrayBuffer)return $F(new Uint8Array(v),b);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new Pj(v,l);var v}(t,Iw(e));n.asyncQueue.enqueueAndForget((0,J.Z)(function*(){!function xj(n,e,t){const r=Xe(n);var i;(i=(0,J.Z)(function*(u,l,g){try{const v=yield l.getMetadata();if(yield function($,Z){const ie=Xe($),ve=Lr(Z.createTime);return ie.persistence.runTransaction("hasNewerBundle","readonly",Ae=>ie.Ls.getBundleMetadata(Ae,Z.id)).then(Ae=>!!Ae&&Ae.createTime.compareTo(ve)>=0)}(u.localStore,v))return yield l.close(),g._completeWith({taskState:"Success",documentsLoaded:($=v).totalDocuments,bytesLoaded:$.totalBytes,totalDocuments:$.totalDocuments,totalBytes:$.totalBytes}),Promise.resolve(new Set);g._updateProgress(RF(v));const b=new uj(v,u.localStore,l.serializer);let T=yield l.Pc();for(;T;){const $=yield b.ju(T);$&&g._updateProgress($),T=yield l.Pc()}const M=yield b.complete();return yield kl(u,M.Hu,void 0),yield function($,Z){const ie=Xe($);return ie.persistence.runTransaction("Save bundle","readwrite",ve=>ie.Ls.saveBundleMetadata(ve,Z))}(u.localStore,v),g._completeWith(M.progress),Promise.resolve(M.Wu)}catch(v){return Io("SyncEngine",`Loading bundle failed with ${v}`),g._failWith(v),Promise.resolve(new Set)}var $}),function(u,l,g){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield T1(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function t$(n,e){return function jj(n,e){return n.asyncQueue.enqueue((0,J.Z)(function*(){return function(t,r){const i=Xe(t);return i.persistence.runTransaction("Get named query","readonly",u=>i.Ls.getNamedQuery(u,r))}(yield BC(n),e)}))}(Vr(n=dn(n,Qn)),e).then(t=>t?new Di(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ss(this,t):null)}}class XC extends L1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ow(new du(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Co.forKey(t,this.firestore,null)}}class M2{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new XC(e)}get(e){const t=kf(e);return this._delegate.get(t).then(r=>new Fw(this._firestore,new Ol(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=kf(e);return r?(U1("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=kf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=kf(e);return this._delegate.delete(t),this}}class P2{constructor(e){this._delegate=e}set(e,t,r){const i=kf(e);return r?(U1("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=kf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=kf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Rf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Nw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Lw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Rf.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new Rf(e,new XC(e),t),i.set(t,u)),u}}Rf.INSTANCES=new WeakMap;class Co{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new XC(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ce("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Co(t,new Yn(t._delegate,r,new Ye(e)))}static forKey(e,t,r){return new Co(t,new Yn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new hm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new hm(this.firestore,n2(this._delegate,e))}catch(t){throw is(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,_t.m9)(e))instanceof Yn&&r2(this._delegate,e)}set(e,t){t=U1("DocumentReference.set",t);try{return t?b2(this._delegate,e,t):b2(this._delegate,e)}catch(r){throw is(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?I2(this._delegate,e):I2(this._delegate,e,t,...r)}catch(i){throw is(i,"updateDoc()","DocumentReference.update()")}}delete(){return function A$(n){return dm(dn(n.firestore,Qn),[new Zg(n._key,ar.none())])}(this._delegate)}onSnapshot(...e){const t=R2(e),r=k2(e,i=>new Fw(this.firestore,new Ol(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return C2(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function I$(n){n=dn(n,Yn);const e=dn(n.firestore,Qn),t=Vr(e),r=new Dd(e);return function Lj(n,e){const t=new Qr;return n.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return(r=(0,J.Z)(function*(i,u,l){try{const g=yield function(v,b){const T=Xe(v);return T.persistence.runTransaction("read document","readonly",M=>T.localDocuments.getDocument(M,b))}(i,u);g.isFoundDocument()?l.resolve(g):g.isNoDocument()?l.resolve(null):l.reject(new Ce(ue.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const v=im(g,`Failed to get document '${u} from cache`);l.reject(v)}}),function(i,u,l){return r.apply(this,arguments)})(yield BC(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Ol(e,r,n._key,i,new Pf(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function C$(n){n=dn(n,Yn);const e=dn(n.firestore,Qn);return WF(Vr(e),n._key,{source:"server"}).then(t=>V1(e,n,t))}(this._delegate):function b$(n){n=dn(n,Yn);const e=dn(n.firestore,Qn);return WF(Vr(e),n._key).then(t=>V1(e,n,t))}(this._delegate),t.then(r=>new Fw(this.firestore,new Ol(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Co(this.firestore,this._delegate.withConverter(e?Rf.getInstance(this.firestore,e):null))}}function is(n,e,t){return n.message=n.message.replace(e,t),n}function R2(n){for(const e of n)if("object"==typeof e&&!B1(e))return e;return{}}function k2(n,e){var t,r;let i;return i=B1(n[0])?n[0]:B1(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Fw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Co(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return E2(this._delegate,e._delegate)}}class Lw extends Fw{data(e){const t=this._delegate.data(e);return function jV(n,e){n||at()}(void 0!==t),t}}class ss{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new XC(e)}where(e,t,r){try{return new ss(this.firestore,Id(this._delegate,function d$(n,e,t){const r=e,i=ZC("where",n);return kw._create(i,r,t)}(e,t,r)))}catch(i){throw is(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ss(this.firestore,Id(this._delegate,function h$(n,e="asc"){const t=e,r=ZC("orderBy",n);return F1._create(r,t)}(e,t)))}catch(r){throw is(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ss(this.firestore,Id(this._delegate,function f$(n){return XF("limit",n),KC._create("limit",n,"F")}(e)))}catch(t){throw is(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ss(this.firestore,Id(this._delegate,function p$(n){return XF("limitToLast",n),KC._create("limitToLast",n,"L")}(e)))}catch(t){throw is(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ss(this.firestore,Id(this._delegate,function g$(...n){return YC._create("startAt",n,!0)}(...e)))}catch(t){throw is(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ss(this.firestore,Id(this._delegate,function m$(...n){return YC._create("startAfter",n,!1)}(...e)))}catch(t){throw is(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ss(this.firestore,Id(this._delegate,function y$(...n){return QC._create("endBefore",n,!1)}(...e)))}catch(t){throw is(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ss(this.firestore,Id(this._delegate,function v$(...n){return QC._create("endAt",n,!0)}(...e)))}catch(t){throw is(t,"endAt()","Query.endAt()")}}isEqual(e){return x1(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function T$(n){n=dn(n,Di);const e=dn(n.firestore,Qn),t=Vr(e),r=new Dd(e);return function Vj(n,e){const t=new Qr;return n.asyncQueue.enqueueAndForget((0,J.Z)(function*(){return(r=(0,J.Z)(function*(i,u,l){try{const g=yield MC(i,u,!0),v=new OF(u,g.sr),b=v.nc(g.documents),T=v.applyChanges(b,!1);l.resolve(T.snapshot)}catch(g){const v=im(g,`Failed to execute query '${u} against cache`);l.reject(v)}}),function(i,u,l){return r.apply(this,arguments)})(yield BC(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Cd(e,r,n,i))}(this._delegate):"server"===e?.source?function S$(n){n=dn(n,Di);const e=dn(n.firestore,Qn),t=Vr(e),r=new Dd(e);return ZF(t,n._query,{source:"server"}).then(i=>new Cd(e,r,n,i))}(this._delegate):function D$(n){n=dn(n,Di);const e=dn(n.firestore,Qn),t=Vr(e),r=new Dd(e);return p2(n._query),ZF(t,n._query).then(i=>new Cd(e,r,n,i))}(this._delegate),t.then(r=>new j1(this.firestore,new Cd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=R2(e),r=k2(e,i=>new j1(this.firestore,new Cd(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return C2(this._delegate,t,r)}withConverter(e){return new ss(this.firestore,this._delegate.withConverter(e?Rf.getInstance(this.firestore,e):null))}}class J${constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Lw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class j1{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ss(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Lw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new J$(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Lw(this._firestore,r))})}isEqual(e){return E2(this._delegate,e._delegate)}}class hm extends ss{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Co(this.firestore,e):null}doc(e){try{return new Co(this.firestore,void 0===e?$C(this._delegate):$C(this._delegate,e))}catch(t){throw is(t,"doc()","CollectionReference.doc()")}}add(e){return function x$(n,e){const t=dn(n.firestore,Qn),r=$C(n),i=JC(n.converter,e);return dm(t,[GC(xf(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ar.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Co(this.firestore,t))}isEqual(e){return r2(this._delegate,e._delegate)}withConverter(e){return new hm(this.firestore,this._delegate.withConverter(e?Rf.getInstance(this.firestore,e):null))}}function kf(n){return dn(n,Yn)}class $1{constructor(...e){this._delegate=new Nl(...e)}static documentId(){return new $1(Cr.keyField().canonicalString())}isEqual(e){return(e=(0,_t.m9)(e))instanceof Nl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Nf{constructor(e){this._delegate=e}static serverTimestamp(){const e=function H$(){return new P1("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Nf(e)}static delete(){const e=function $$(){return new xw("deleteField")}();return e._methodName="FieldValue.delete",new Nf(e)}static arrayUnion(...e){const t=function z$(...n){return new o$("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Nf(t)}static arrayRemove(...e){const t=function G$(...n){return new a$("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Nf(t)}static increment(e){const t=function q$(n){return new u$("increment",n)}(e);return t._methodName="FieldValue.increment",new Nf(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const X$={Firestore:x2,GeoPoint:HC,Timestamp:or,Blob:Ow,Transaction:M2,WriteBatch:P2,DocumentReference:Co,DocumentSnapshot:Fw,Query:ss,QueryDocumentSnapshot:Lw,QuerySnapshot:j1,CollectionReference:hm,FieldPath:$1,FieldValue:Nf,setLogLevel:function Q$(n){!function BV(n){ad.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function tH(n){(function eH(n,e){n.INTERNAL.registerComponent(new _i.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},X$)))})(n,(e,t)=>new x2(e,t,new Y$)),n.registerVersion("@firebase/firestore-compat","0.3.8")}(OL.Z);var nH=V(6451);class rH extends Ki.x{constructor(e=1/0,t=1/0,r=Kp){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!i&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const l=t.now();let g=0;for(let v=1;v<r.length&&r[v]<=l;v+=2)g=v;g&&r.splice(0,g+1)}}}var iH=V(3099);function N2(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,iH.B)({connector:()=>new rH(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function O2(n,e){return(0,fc.m)(e)?qn(()=>n,e):qn(()=>n)}class fm{constructor(e){return e}}class H1{constructor(){return(0,nn.getApps)()}}const z1=new d.OlP("angularfire2._apps"),oH={provide:fm,useFactory:function sH(n){return n&&1===n.length?n[0]:new fm((0,nn.getApp)())},deps:[[new d.FiY,z1]]},aH={provide:H1,deps:[[new d.FiY,z1]]};function uH(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new fm(r)}}let lH=(()=>{class n{constructor(t){(0,nn.registerVersion)("angularfire",c.full,"core"),(0,nn.registerVersion)("angularfire",c.full,"app"),(0,nn.registerVersion)("angular",d.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.Lbi))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[oH,aH]}),n})();function cH(n,...e){return{ngModule:lH,providers:[{provide:z1,useFactory:uH(n),multi:!0,deps:[d.R0b,d.zs3,be,...e]}]}}const dH=kA(nn.initializeApp,!0),G1=new Map,F2={activated:!1,tokenObservers:[]},hH={initialized:!1,enabled:!1};function Tr(n){return G1.get(n)||Object.assign({},F2)}function eD(){return hH}const q1="https://content-firebaseappcheck.googleapis.com/v1",mH="exchangeDebugToken",L2={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class vH{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,J.Z)(function*(){t.stop();try{t.pending=new _t.BH,yield function _H(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new _t.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ti=new _t.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function K1(){return K1=(0,J.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const M=yield i.getHeartbeatsHeader();M&&(r["X-Firebase-Client"]=M)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,g;try{l=yield fetch(n,u)}catch(M){throw Ti.create("fetch-network-error",{originalErrorMessage:M?.message})}if(200!==l.status)throw Ti.create("fetch-status-error",{httpStatus:l.status});try{g=yield l.json()}catch(M){throw Ti.create("fetch-parse-error",{originalErrorMessage:M?.message})}const v=g.ttl.match(/^([\d.]+)(s)$/);if(!v||!v[2]||isNaN(Number(v[1])))throw Ti.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const b=1e3*Number(v[1]),T=Date.now();return{token:g.token,expireTimeMillis:T+b,issuedAtTimeMillis:T}}),K1.apply(this,arguments)}const IH="firebase-app-check-database",CH=1,Vw="firebase-app-check-store";let iD=null;function Y1(){return Y1=(0,J.Z)(function*(n,e){const r=(yield function B2(){return iD||(iD=new Promise((n,e)=>{try{const t=indexedDB.open(IH,CH);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ti.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Vw,{keyPath:"compositeKey"})}}catch(t){e(Ti.create("storage-open",{originalErrorMessage:t?.message}))}}),iD)}()).transaction(Vw,"readwrite"),u=r.objectStore(Vw).put({compositeKey:n,value:e});return new Promise((l,g)=>{u.onsuccess=v=>{l()},r.onerror=v=>{var b;g(Ti.create("storage-set",{originalErrorMessage:null===(b=v.target.error)||void 0===b?void 0:b.message}))}})}),Y1.apply(this,arguments)}const Uw=new Us.Yd("@firebase/app-check");function X1(n,e){return(0,_t.hl)()?function TH(n,e){return function j2(n,e){return Y1.apply(this,arguments)}(function H2(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Uw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function rP(){return rP=(0,J.Z)(function*(){const n=eD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),rP.apply(this,arguments)}const RH={error:"UNKNOWN_ERROR"};function kH(n){return _t.US.encodeString(JSON.stringify(n),!1)}function sD(n){return iP.apply(this,arguments)}function iP(){return iP=(0,J.Z)(function*(n,e=!1){const t=n.app;!function W1(n){if(!Tr(n).activated)throw Ti.create("use-before-activation",{appName:n.name})}(t);const r=Tr(t);let u,i=r.token;if(i&&!pm(i)&&(r.token=void 0,i=void 0),!i){const v=yield r.cachedTokenPromise;v&&(pm(v)?i=v:yield X1(t,void 0))}if(!e&&i&&pm(i))return{token:i.token};let g,l=!1;if(function tP(){return eD().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=function rD(n,e){return K1.apply(this,arguments)}(function V2(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${q1}/projects/${t}/apps/${r}:${mH}?key=${i}`,body:{debug_token:e}}}(t,yield function nP(){return rP.apply(this,arguments)}()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const v=yield r.exchangeTokenPromise;return yield X1(t,v),r.token=v,{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield Tr(t).exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?Uw.warn(v.message):Uw.error(v),u=v}return i?u?g=pm(i)?{token:i.token,internalError:u}:q2(u):(g={token:i.token},r.token=i,yield X1(t,i)):g=q2(u),l&&function G2(n,e){const t=Tr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,g),g}),iP.apply(this,arguments)}function aP(n,e){const t=Tr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function z2(n){const{app:e}=n,t=Tr(e);let r=t.tokenRefresher;r||(r=function OH(n){const{app:e}=n;return new vH((0,J.Z)(function*(){let r;if(r=Tr(e).token?yield sD(n,!0):yield sD(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Tr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},L2.RETRIAL_MIN_WAIT,L2.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function pm(n){return n.expireTimeMillis-Date.now()>0}function q2(n){return{token:kH(RH),error:n}}class FH{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Tr(this.app);for(const t of e)aP(this.app,t.next);return Promise.resolve()}}const eL="app-check-internal";!function YH(){(0,nn._registerComponent)(new _i.wA("app-check",n=>function LH(n,e){return new FH(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(eL).initialize()})),(0,nn._registerComponent)(new _i.wA(eL,n=>function VH(n){return{getToken:e=>sD(n,e),addTokenListener:e=>function oP(n,e,t,r){const{app:i}=n,u=Tr(i);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&pm(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),z2(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>z2(n))}(n,"INTERNAL",e),removeTokenListener:e=>aP(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,nn.registerVersion)("@firebase/app-check","0.7.0")}();class Bw{constructor(){return Fe("app-check")}}typeof window<"u"&&window,V(9260);const nL=new d.OlP("angularfire2.auth.use-emulator"),rL=new d.OlP("angularfire2.auth.settings"),iL=new d.OlP("angularfire2.auth.tenant-id"),sL=new d.OlP("angularfire2.auth.langugage-code"),oL=new d.OlP("angularfire2.auth.use-device-language"),aL=new d.OlP("angularfire.auth.persistence"),uL=(n,e,t,r,i,u,l,g)=>(0,aa.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=i,u&&v.useDeviceLanguage(),l)for(const[b,T]of Object.entries(l))v.settings[b]=T;return g&&v.setPersistence(g),v},[t,r,i,u,l,g]);let lL=(()=>{class n{constructor(t,r,i,u,l,g,v,b,T,M,$,Z){const ie=new Ki.x,ve=ct(void 0).pipe((0,a.Q)(l.outsideAngular),qn(()=>u.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,9568)))),(0,vt.U)(()=>(0,aa.on)(t,u,r)),(0,vt.U)(Ae=>uL(Ae,u,g,b,T,M,v,$)),N2({bufferSize:1,refCount:!1}));if(eo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ct(null);else{ve.pipe(xs()).subscribe();const Ge=ve.pipe(qn(en=>en.getRedirectResult().then(rn=>rn,()=>null)),js,N2({bufferSize:1,refCount:!1})),mt=ve.pipe(qn(en=>new oi.y(rn=>({unsubscribe:u.runOutsideAngular(()=>en.onAuthStateChanged(pn=>rn.next(pn),pn=>rn.error(pn),()=>rn.complete()))})))),yt=ve.pipe(qn(en=>new oi.y(rn=>({unsubscribe:u.runOutsideAngular(()=>en.onIdTokenChanged(pn=>rn.next(pn),pn=>rn.error(pn),()=>rn.complete()))}))));this.authState=Ge.pipe(O2(mt),(0,o.R)(l.outsideAngular),(0,a.Q)(l.insideAngular)),this.user=Ge.pipe(O2(yt),(0,o.R)(l.outsideAngular),(0,a.Q)(l.insideAngular)),this.idToken=this.user.pipe(qn(en=>en?(0,mn.D)(en.getIdToken()):ct(null))),this.idTokenResult=this.user.pipe(qn(en=>en?(0,mn.D)(en.getIdTokenResult()):ct(null))),this.credential=(0,nH.T)(Ge,ie,this.authState.pipe(vi(en=>!en))).pipe((0,vt.U)(en=>en?.user?en:null),(0,o.R)(l.outsideAngular),(0,a.Q)(l.insideAngular))}return(0,aa.pX)(this,ve,u,{spy:{apply:(Ae,Ge,mt)=>{(Ae.startsWith("signIn")||Ae.startsWith("createUser"))&&mt.then(yt=>ie.next(yt))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(aa.Dh),d.LFG(aa.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(be),d.LFG(nL,8),d.LFG(rL,8),d.LFG(iL,8),d.LFG(sL,8),d.LFG(oL,8),d.LFG(aL,8),d.LFG(Bw,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function cL(n,e){return function n3(n,e=iv){return new oi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function hP(n,e){return cL(n,e).pipe((0,vt.U)(t=>({payload:t,type:"query"})))}function aD(n,e){return hP(n,e).pipe(Fa(void 0),NA(),(0,vt.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,g)=>{const v=i.find(T=>T.doc.ref.isEqual(l.ref)),b=t?.payload.docs.find(T=>T.ref.isEqual(l.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(l.metadata)||!v&&b&&JSON.stringify(b.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:l}})}),u}))}function dL(n,e,t){return aD(n,t).pipe($u((r,i)=>function i3(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function s3(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return fP(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return fP(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return fP(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function kL(n,e=zo.y){return n=n??NL,(0,$r.e)((t,r)=>{let i,u=!0;t.subscribe((0,wr.x)(r,l=>{const g=e(l);(u||!n(i,g))&&(u=!1,i=g,r.next(l))}))})}(),(0,vt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function fP(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function hL(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class fL{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=aD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,vt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Fa(void 0),NA(),vi(([r,i])=>i.length>0||!r),(0,vt.U)(([r,i])=>i),js)}auditTrail(e){return this.stateChanges(e).pipe($u((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=hL(e);return dL(this.query,t,this.afs.schedulers.outsideAngular).pipe(js)}valueChanges(e={}){return hP(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),js)}get(e){return(0,mn.D)(this.query.get(e)).pipe(js)}add(e){return this.ref.add(e)}doc(e){return new pL(this.ref.doc(e),this.afs)}}class pL{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=gL(r,t);return new fL(i,u,this.afs)}snapshotChanges(){return function r3(n,e){return cL(n,e).pipe(Fa(void 0),NA(),(0,vt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(js)}valueChanges(e={}){return this.snapshotChanges().pipe((0,vt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,mn.D)(this.ref.get(e)).pipe(js)}}class o3{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?aD(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),vi(t=>t.length>0),js):aD(this.query,this.afs.schedulers.outsideAngular).pipe(js)}auditTrail(e){return this.stateChanges(e).pipe($u((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=hL(e);return dL(this.query,t,this.afs.schedulers.outsideAngular).pipe(js)}valueChanges(e={}){return hP(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),js)}get(e){return(0,mn.D)(this.query.get(e)).pipe(js)}}const a3=new d.OlP("angularfire2.enableFirestorePersistence"),u3=new d.OlP("angularfire2.firestore.persistenceSettings"),l3=new d.OlP("angularfire2.firestore.settings"),c3=new d.OlP("angularfire2.firestore.use-emulator");function gL(n,e=(t=>t)){return{query:e(n),ref:n}}let d3=(()=>{class n{constructor(t,r,i,u,l,g,v,b,T,M,$,Z,ie,ve,Ae,Ge,mt){this.schedulers=v;const yt=(0,aa.on)(t,g,r),en=T;M&&uL(yt,g,$,ie,ve,Ae,Z,Ge),[this.firestore,this.persistenceEnabled$]=(0,aa.cc)(`${yt.name}.firestore`,"AngularFirestore",yt.name,()=>{const rn=g.runOutsideAngular(()=>yt.firestore());if(u&&rn.settings(u),en&&rn.useEmulator(...en),i&&!eo(l)){const pn=()=>{try{return(0,mn.D)(rn.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(os){return typeof console<"u"&&console.warn(os),ct(!1)}};return[rn,g.runOutsideAngular(pn)]}return[rn,ct(!1)]},[u,en,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=gL(i,r),g=this.schedulers.ngZone.run(()=>u);return new fL(g,l,this)}collectionGroup(t,r){const i=r||(l=>l),u=this.firestore.collectionGroup(t);return new o3(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new pL(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(aa.Dh),d.LFG(aa.xv,8),d.LFG(a3,8),d.LFG(l3,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(be),d.LFG(u3,8),d.LFG(c3,8),d.LFG(lL,8),d.LFG(nL,8),d.LFG(rL,8),d.LFG(iL,8),d.LFG(sL,8),d.LFG(oL,8),d.LFG(aL,8),d.LFG(Bw,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),h3=(()=>{class n{constructor(t){this.af=t}guardarActor(t){let r={id:t.id,nombre:t.nombre,apellido:t.apellido,edad:t.edad,sexo:t.sexo,nombrePais:t.nombrePais,banderaPais:t.banderaPais};this.af.collection("actores").add(r)}guardarPelicula(t){let r={id:t.id,nombre:t.nombre,tipo:t.tipo,fechaDeEstreno:t.fechaDeEstreno,cantidadPublico:t.cantidadPublico,fotoPelicula:t.fotoPelicula,actor:t.actor};this.af.collection("peliculas").add(r)}traerListaActores(){return this.af.collection("actores").valueChanges()}traerListaPeliculas(){return this.af.collection("peliculas").valueChanges()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),mL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-navbar"]],inputs:{listaRecibida:"listaRecibida"},decls:18,vars:0,consts:[[1,"navbar","navbar-expand-md","navbar-dark","fixed-top","bg-dark"],["href","busqueda",1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarsExampleDefault","aria-controls","navbarsExampleDefault","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarsExampleDefault",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto"],[1,"nav-item","active"],["href","bienvenido",1,"nav-link"],[1,"sr-only"],[1,"nav-item"],["href","peliculas/alta",1,"nav-link"],["href","actor/alta",1,"nav-link"]],template:function(t,r){1&t&&(d.TgZ(0,"nav",0)(1,"a",1),d._uU(2,"B\xfasqueda"),d.qZA(),d.TgZ(3,"button",2),d._UZ(4,"span",3),d.qZA(),d.TgZ(5,"div",4)(6,"ul",5)(7,"li",6)(8,"a",7),d._uU(9,"Bienvenido "),d.TgZ(10,"span",8),d._uU(11,"(current)"),d.qZA()()(),d.TgZ(12,"li",9)(13,"a",10),d._uU(14,"Nueva pel\xedcula"),d.qZA()(),d.TgZ(15,"li",9)(16,"a",11),d._uU(17,"Nuevo actor"),d.qZA()()()()())},styles:["body[_ngcontent-%COMP%]{padding-top:3.5rem}"]}),n})();function f3(n,e){1&n&&(d.TgZ(0,"small",34),d._uU(1," El nombre es requerido "),d.qZA())}function p3(n,e){1&n&&(d.TgZ(0,"small",34),d._uU(1," El apellido es requerido "),d.qZA())}function g3(n,e){1&n&&(d.TgZ(0,"small",34),d._uU(1," La edad es requerida "),d.qZA())}function m3(n,e){1&n&&(d.TgZ(0,"small",34),d._uU(1," La edad debe estar entre 0 y 120 "),d.qZA())}function y3(n,e){1&n&&(d.TgZ(0,"small",34),d._uU(1," El sexo es requerido "),d.qZA())}function v3(n,e){if(1&n&&d._UZ(0,"img",35),2&n){const t=d.oxw();d.s9C("src",t.actorNuevo.banderaPais,d.LSH)}}function _3(n,e){1&n&&(d.TgZ(0,"small",34),d._uU(1,"El pais es requerido"),d.qZA())}let w3=(()=>{class n{constructor(t,r){this.fb=t,this.fs=r,this.actorNuevo=new Kh(0,"","","","","",""),this.mostrar=!1,this.titulo="Mostrar listado",this.fs.traerListaActores().subscribe(i=>{null!=i&&(this.actores=i)}),this.forma=this.fb.group({nombre:["",[Xu.required]],apellido:["",Xu.required],edad:["",[Xu.required,Xu.min(18),Xu.max(99)]],sexo:["",Xu.required],nombrePais:["",Xu.required],banderaPais:["",[Xu.required]]}),console.info(this.actores)}obtenerPaisSeleccionado(t){this.actorNuevo.nombrePais=t.name.common,this.actorNuevo.banderaPais=t.flags.png}aceptar(){this.forma&&console.log(this.forma.getRawValue())}guardarActor(t){t.preventDefault(),this.validar()&&(this.fs.guardarActor(this.actorNuevo),console.log(this.actores),this.actorNuevo=new Kh(0,"","","","","",""))}validar(){let t=!0;return(""===this.actorNuevo.apellido||""===this.actorNuevo.nombre||""===this.actorNuevo.edad||""===this.actorNuevo.banderaPais||""===this.actorNuevo.nombrePais||""===this.actorNuevo.sexo)&&(t=!1,hS().fire({title:"Error",text:"Complete todos los campos para registrar",icon:"error",confirmButtonText:"Ok"})),console.log(this.actorNuevo),t}MostrarListado(){this.mostrar?(this.titulo="Mostrar listado",this.mostrar=!1):(this.titulo="Cerrar listado",this.mostrar=!0)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(BE),d.Y36(h3))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-alta-actores"]],decls:63,vars:14,consts:[[1,"container"],[1,"py-5","text-center"],["src","../../../assets/academy-award.png","alt","","width","72","height","72",1,"d-block","mx-auto","mb-4"],[1,"lead"],[1,"row"],[1,"col-md-4","order-md-2","mb-4"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"text-muted"],[3,"enviamosUnPais"],[1,"col-md-8","order-md-1"],[3,"formGroup","ngSubmit"],[1,"col-md-12","mb-5"],[1,"row","formulario"],[1,"col-md-6","mb-3"],["for","nombre",1,"form-label"],["type","text","id","nombre","placeholder","Ingrese nombre","formControlName","nombre",1,"form-control",3,"ngModel","ngModelChange"],["class","invalid",4,"ngIf"],["for","apellido",1,"form-label"],["type","text","id","apellido","placeholder","Ingrese apellido","formControlName","apellido",1,"form-control",3,"ngModel","ngModelChange"],["for","edad",1,"form-label"],["type","number","id","edad","placeholder","Ingrese edad","formControlName","edad",1,"form-control",3,"ngModel","ngModelChange"],["for","sexo",1,"form-label"],["aria-label",".form-select-lg example","id","sexo","formControlName","sexo",1,"form-select","form-select-lg","mb-3",3,"ngModel","ngModelChange"],["value",""],["value","F"],["value","M"],[1,"col-sm-7"],["for","nombrePais",1,"form-label"],[2,"display","flex"],["type","text","formControlName","nombrePais","required","","readonly","",1,"form-control",3,"ngModel"],["class","paisElegido","alt","",3,"src",4,"ngIf"],[1,"col-md-12","d-grid","gap-2"],["type","submit",1,"btn","btn-primary","btn-block",3,"click"],[3,"listaRecibida"],[1,"invalid"],["alt","",1,"paisElegido",3,"src"]],template:function(t,r){1&t&&(d._UZ(0,"app-navbar")(1,"br"),d.TgZ(2,"div",0)(3,"div",1),d._UZ(4,"img",2),d.TgZ(5,"h2"),d._uU(6,"Alta actor"),d.qZA(),d.TgZ(7,"p",3),d._uU(8,"Formulario para alta de actor"),d.qZA()(),d.TgZ(9,"div",4)(10,"div",5)(11,"h4",6)(12,"span",7),d._uU(13,"Listado de pa\xedses"),d.qZA()(),d.TgZ(14,"app-tabla-paises",8),d.NdJ("enviamosUnPais",function(u){return r.obtenerPaisSeleccionado(u)}),d.qZA()(),d.TgZ(15,"div",9)(16,"div",0)(17,"form",10),d.NdJ("ngSubmit",function(){return r.aceptar()}),d.TgZ(18,"div",4)(19,"div",11)(20,"h2"),d._uU(21,"Nuevo actor"),d.qZA()()(),d.TgZ(22,"div",12)(23,"div",13)(24,"label",14),d._uU(25,"Nombre"),d.qZA(),d.TgZ(26,"input",15),d.NdJ("ngModelChange",function(u){return r.actorNuevo.nombre=u}),d.qZA(),d.YNc(27,f3,2,0,"small",16),d.qZA(),d.TgZ(28,"div",13)(29,"label",17),d._uU(30,"Apellido"),d.qZA(),d.TgZ(31,"input",18),d.NdJ("ngModelChange",function(u){return r.actorNuevo.apellido=u}),d.qZA(),d.YNc(32,p3,2,0,"small",16),d.qZA(),d.TgZ(33,"div",13)(34,"label",19),d._uU(35,"Edad"),d.qZA(),d.TgZ(36,"input",20),d.NdJ("ngModelChange",function(u){return r.actorNuevo.edad=u}),d.qZA(),d.YNc(37,g3,2,0,"small",16),d.YNc(38,m3,2,0,"small",16),d.qZA(),d.TgZ(39,"div",13)(40,"label",21),d._uU(41,"Sexo"),d.qZA(),d.TgZ(42,"select",22),d.NdJ("ngModelChange",function(u){return r.actorNuevo.sexo=u}),d.TgZ(43,"option",23),d._uU(44,"Seleccione uno"),d.qZA(),d.TgZ(45,"option",24),d._uU(46,"Femenino"),d.qZA(),d.TgZ(47,"option",25),d._uU(48,"Masculino"),d.qZA()(),d.YNc(49,y3,2,0,"small",16),d.qZA()(),d.TgZ(50,"div",26)(51,"label",27),d._uU(52,"Pais"),d.qZA(),d.TgZ(53,"div",28),d._UZ(54,"input",29),d.YNc(55,v3,1,1,"img",30),d.qZA(),d.YNc(56,_3,2,0,"small",16),d.qZA(),d.TgZ(57,"div",4),d._UZ(58,"div",11),d.TgZ(59,"div",31)(60,"button",32),d.NdJ("click",function(u){return r.guardarActor(u)}),d._uU(61,"Aceptar"),d.qZA()()()()(),d._UZ(62,"app-actor-listado",33),d.qZA()()()),2&t&&(d.xp6(17),d.Q6J("formGroup",r.forma),d.xp6(9),d.Q6J("ngModel",r.actorNuevo.nombre),d.xp6(1),d.Q6J("ngIf",(null==r.forma.controls.nombre.errors?null:r.forma.controls.nombre.errors.required)&&r.forma.controls.nombre.touched),d.xp6(4),d.Q6J("ngModel",r.actorNuevo.apellido),d.xp6(1),d.Q6J("ngIf",(null==r.forma.controls.apellido.errors?null:r.forma.controls.apellido.errors.required)&&r.forma.controls.apellido.touched),d.xp6(4),d.Q6J("ngModel",r.actorNuevo.edad),d.xp6(1),d.Q6J("ngIf",(null==r.forma.controls.edad.errors?null:r.forma.controls.edad.errors.required)&&r.forma.controls.edad.touched),d.xp6(1),d.Q6J("ngIf",(null==r.forma.controls.edad.errors?null:r.forma.controls.edad.errors.min)||(null==r.forma.controls.edad.errors?null:r.forma.controls.edad.errors.max)&&r.forma.controls.edad.touched),d.xp6(4),d.Q6J("ngModel",r.actorNuevo.sexo),d.xp6(7),d.Q6J("ngIf",(null==r.forma.controls.sexo.errors?null:r.forma.controls.sexo.errors.required)&&r.forma.controls.sexo.touched),d.xp6(5),d.Q6J("ngModel",r.actorNuevo.nombrePais),d.xp6(1),d.Q6J("ngIf",r.actorNuevo.banderaPais),d.xp6(1),d.Q6J("ngIf",(null==r.forma.controls.nombrePais.errors?null:r.forma.controls.nombrePais.errors.required)&&r.forma.controls.nombrePais.touched),d.xp6(6),d.Q6J("listaRecibida",r.actores))},dependencies:[qs,EE,AE,ME,Mp,Gh,Wp,iE,sE,Zh,Wc,qp,J0,Q0,mL],styles:[".invalid[_ngcontent-%COMP%]{color:red}.form-select[_ngcontent-%COMP%]{display:inline-block;width:100%;cursor:pointer;padding:7px 10px;height:42px;outline:0;border:0;border-radius:0;font-size:1em;border:2px solid rgba(0,0,0,.2);position:relative;transition:all .25s ease}.paisElegido[_ngcontent-%COMP%]{margin-left:1rem;width:50px;height:50px;border:3px solid #000;border-radius:50%}"]}),n})(),E3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-bienvenido"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"bienvenido works!"),d.qZA())}}),n})();class pP{constructor(e,t,r,i,u,l,g){this.id=e,this.nombre=t,this.tipo=r,this.fechaEstreno=i,this.cantidadPublico=u,this.fotoPelicula=l,this.actor=g}}function b3(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"tr",3)(1,"td"),d._uU(2),d.qZA(),d.TgZ(3,"td"),d._uU(4),d.qZA(),d.TgZ(5,"td"),d._uU(6),d.qZA(),d.TgZ(7,"td"),d._uU(8),d.qZA(),d.TgZ(9,"td"),d._uU(10),d.qZA(),d.TgZ(11,"td"),d._UZ(12,"img",4),d.qZA(),d.TgZ(13,"td")(14,"button",5),d.NdJ("click",function(){const u=d.CHM(t).$implicit,l=d.oxw();return d.KtG(l.seleccionarPelicula(u))}),d._uU(15," Ver detalle "),d.qZA()()()}if(2&n){const t=e.$implicit;d.xp6(2),d.Oqu(t.nombre),d.xp6(2),d.Oqu(t.cantidadPublico),d.xp6(2),d.Oqu(t.fechaEstreno),d.xp6(2),d.Oqu(t.tipo),d.xp6(2),d.AsE("",t.actor.nombre," ",t.actor.apellido,""),d.xp6(2),d.s9C("src",t.fotoPelicula,d.LSH)}}let yL=(()=>{class n{constructor(){this.detallarPelicula=new d.vpe}seleccionarPelicula(t){this.detallarPelicula.emit(t),console.info("En listado",t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-pelicula-listado"]],inputs:{listaRecibida:"listaRecibida"},outputs:{detallarPelicula:"detallarPelicula"},decls:19,vars:1,consts:[[1,"table","table-hover"],["scope","col"],["style","cursor: pointer",4,"ngFor","ngForOf"],[2,"cursor","pointer"],["alt","bandera",2,"width","80px","height","80px","border-radius","50%",3,"src"],[1,"btn","btn-primary",2,"margin","10px 10px auto auto",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),d._uU(4,"TITULO"),d.qZA(),d.TgZ(5,"th",1),d._uU(6,"ESPECTADORES"),d.qZA(),d.TgZ(7,"th",1),d._uU(8,"FECHA ESTRENO"),d.qZA(),d.TgZ(9,"th",1),d._uU(10,"GENERO"),d.qZA(),d.TgZ(11,"th",1),d._uU(12,"ACTORES"),d.qZA(),d.TgZ(13,"th",1),d._uU(14,"PORTADA"),d.qZA(),d.TgZ(15,"th",1),d._uU(16,"DETALLE"),d.qZA()()(),d.TgZ(17,"tbody"),d.YNc(18,b3,16,7,"tr",2),d.qZA()()),2&t&&(d.xp6(18),d.Q6J("ngForOf",r.listaRecibida))},dependencies:[pi]}),n})();function I3(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",2),d._UZ(1,"img",3),d.TgZ(2,"h5"),d._uU(3),d.qZA(),d._UZ(4,"br"),d._uU(5),d.TgZ(6,"button",4),d.NdJ("click",function(){const u=d.CHM(t).$implicit,l=d.oxw();return d.KtG(l.seleccionarPelicula(u))}),d._uU(7," Ver detalle "),d.qZA()()}if(2&n){const t=e.$implicit;d.xp6(1),d.Q6J("src",t.fotoPelicula,d.LSH),d.xp6(2),d.Oqu(t.nombre),d.xp6(2),d.hij(" ",t.fechaEstreno," ")}}let C3=(()=>{class n{constructor(){this.detallarPelicula=new d.vpe}seleccionarPelicula(t){this.detallarPelicula.emit(t),console.info("En listado",t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-tabla-pelicula"]],inputs:{listaRecibida:"listaRecibida"},outputs:{detallarPelicula:"detallarPelicula"},decls:2,vars:1,consts:[[1,"row",2,"height","350px","overflow","auto"],["class","col-md-2",4,"ngFor","ngForOf"],[1,"col-md-2"],["alt","foto de la pelicula",2,"width","150px","height","200px","display","flex","flex-wrap","wrap",3,"src"],[1,"btn","btn-primary",2,"margin","10px 10px auto auto",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.YNc(1,I3,8,3,"div",1),d.qZA()),2&t&&(d.xp6(1),d.Q6J("ngForOf",r.listaRecibida))},dependencies:[pi]}),n})(),D3=(()=>{class n{constructor(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-detalle-pelicula"]],inputs:{peliculaSeleccionada:"peliculaSeleccionada"},decls:9,vars:5,consts:[["alt","",2,"width","100px","display","block","margin-right","auto","margin-left","auto","margin-top","1rem","margin-bottom","1rem",3,"src"]],template:function(t,r){1&t&&(d._UZ(0,"img",0),d.TgZ(1,"p"),d._uU(2),d.qZA(),d.TgZ(3,"p"),d._uU(4),d.qZA(),d.TgZ(5,"p"),d._uU(6),d.qZA(),d.TgZ(7,"p"),d._uU(8),d.qZA()),2&t&&(d.s9C("src",null==r.peliculaSeleccionada?null:r.peliculaSeleccionada.fotoPelicula,d.LSH),d.xp6(2),d.hij("Titulo: ",null==r.peliculaSeleccionada?null:r.peliculaSeleccionada.nombre,""),d.xp6(2),d.hij("Genero: ",null==r.peliculaSeleccionada?null:r.peliculaSeleccionada.tipo,""),d.xp6(2),d.hij("Estreno: ",null==r.peliculaSeleccionada?null:r.peliculaSeleccionada.fechaEstreno,""),d.xp6(2),d.hij("Espectadores: ",null==r.peliculaSeleccionada?null:r.peliculaSeleccionada.cantidadPublico,""))}}),n})();function T3(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"app-tabla-pelicula",11),d.NdJ("detallarPelicula",function(i){d.CHM(t);const u=d.oxw();return d.KtG(u.TomarPeliculaSeleccionada(i))}),d.qZA()}if(2&n){const t=d.oxw();d.Q6J("listaRecibida",t.listadoPeliculas)}}function S3(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"app-pelicula-listado",11),d.NdJ("detallarPelicula",function(i){d.CHM(t);const u=d.oxw();return d.KtG(u.TomarPeliculaSeleccionada(i))}),d.qZA()}if(2&n){const t=d.oxw();d.Q6J("listaRecibida",t.listadoPeliculas)}}let gP=(()=>{class n{constructor(){this.comoVer="Tabla",this.claseDeBoton="btn-danger",this.listadoPeliculas=[new pP(1,"Argentina 1985","Drama","05/04/2023",15e5,"../../assets/Argentina1985.jpg",new Kh(1,"Ricardo","Darin","66","Masculino","Argentina","Argentina")),new pP(2,"Super Mario Bros","Infantil","05/04/2023",3e6,"../../assets/SuperMarioBros.jpg",new Kh(2,"Chris","Pratt","43","Masculino","USA","USA")),new pP(3,"Star Wars: Una Nueva Esperanza","Sci-Fi","25/12/1977",7e6,"../../assets/StarWarsANewHope.jpg",new Kh(3,"Mark","Hamill","71","Masculino","USA","USA"))]}TomarPeliculaSeleccionada(t){this.peliculaActiva=t,console.info(t)}CambiarLaVista(){"Tabla"==this.comoVer?(this.comoVer="Listado",this.claseDeBoton="btn-info"):(this.comoVer="Tabla",this.claseDeBoton="btn-danger")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-busqueda"]],decls:37,vars:5,consts:[["role","main"],[1,"jumbotron"],[1,"container"],[1,"display-3"],[3,"listaRecibida","detallarPelicula",4,"ngIf"],["type","button",1,"btn","btn-circle",3,"ngClass","click"],[1,"fa","fa-check"],[1,"row"],[1,"col-md-4"],["href","#","role","button",1,"btn","btn-secondary"],[3,"peliculaSeleccionada"],[3,"listaRecibida","detallarPelicula"]],template:function(t,r){1&t&&(d._UZ(0,"app-navbar"),d.TgZ(1,"main",0)(2,"div",1)(3,"div",2)(4,"h1",3),d._uU(5,"Listado de pel\xedculas"),d.qZA(),d.YNc(6,T3,1,1,"app-tabla-pelicula",4),d.YNc(7,S3,1,1,"app-pelicula-listado",4),d.TgZ(8,"button",5),d.NdJ("click",function(){return r.CambiarLaVista()}),d._uU(9),d._UZ(10,"i",6),d.qZA()()(),d.TgZ(11,"div",2)(12,"div",7)(13,"div",8)(14,"h2"),d._uU(15,"Para borrar"),d.qZA(),d.TgZ(16,"p"),d._uU(17,"Aqu\xed van los controles necesarios segun la entidad y funcionalidad requerida"),d.qZA(),d.TgZ(18,"p")(19,"a",9),d._uU(20,"Borrar"),d.qZA()()(),d.TgZ(21,"div",8)(22,"h2"),d._uU(23,"Solo mostrar"),d.qZA(),d._UZ(24,"app-detalle-pelicula",10),d.qZA(),d.TgZ(25,"div",8)(26,"h2"),d._uU(27,"Modificar"),d.qZA(),d.TgZ(28,"p"),d._uU(29,"Aqu\xed van los controles necesarios segun la entidad y funcionalidad requerida"),d.qZA(),d.TgZ(30,"p")(31,"a",9),d._uU(32,"Guardar cambios"),d.qZA()()()(),d._UZ(33,"hr"),d.qZA()(),d.TgZ(34,"footer",2)(35,"p"),d._uU(36,"\xa9 Federico B. Nealon"),d.qZA()()),2&t&&(d.xp6(6),d.Q6J("ngIf","Tabla"==r.comoVer),d.xp6(1),d.Q6J("ngIf","Listado"==r.comoVer),d.xp6(1),d.Q6J("ngClass",r.claseDeBoton),d.xp6(1),d.Oqu(r.comoVer),d.xp6(15),d.Q6J("peliculaSeleccionada",r.peliculaActiva))},dependencies:[Vt,qs,yL,C3,D3,mL]}),n})();const A3=[{path:"bienvenido",component:E3},{path:"busqueda",component:gP},{path:"",component:gP},{path:"peliculas/alta",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-pelicula-alta"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"pelicula-alta works!"),d.qZA())}}),n})()},{path:"actor/alta",component:w3},{path:"actor/listado",component:J0},{path:"peliculas/listado",component:yL},{path:"paises/listado",component:Q0},{path:"**",component:gP}];let x3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[cT.forRoot(A3),cT]}),n})(),M3=(()=>{class n{constructor(){this.title="simulacro"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[Bm]}),n})();const vL={firebase:{projectId:"simulacro-9b830",appId:"1:732269220795:web:df0b7a3bf31becdf2cea9e",storageBucket:"simulacro-9b830.appspot.com",apiKey:"AIzaSyCFb-HcfbgCsXHEO134mU9heOBWGKmFe9o",authDomain:"simulacro-9b830.firebaseapp.com",messagingSenderId:"732269220795",measurementId:"G-V8XKFHH2JX"}};var P3=V(8502);class mP{constructor(e){return e}}class wL{constructor(){return Fe("auth")}}const yP=new d.OlP("angularfire2.auth-instances");function k3(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new mP(r)}}const N3={provide:wL,deps:[[new d.FiY,yP]]},O3={provide:mP,useFactory:function R3(n,e){const t=fe("auth",n,e);return t&&new mP(t)},deps:[[new d.FiY,yP],fm]};let F3=(()=>{class n{constructor(){(0,nn.registerVersion)("angularfire",c.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[O3,N3]}),n})();function L3(n,...e){return{ngModule:F3,providers:[{provide:yP,useFactory:k3(n),multi:!0,deps:[d.R0b,d.zs3,be,H1,[new d.FiY,Bw],...e]}]}}const V3=kA(P3.o,!0);class vP{constructor(e){return e}}const EL="firestore",_P=new d.OlP("angularfire2.firestore-instances");function j3(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new vP(r)}}const $3={provide:class U3{constructor(){return Fe(EL)}},deps:[[new d.FiY,_P]]},H3={provide:vP,useFactory:function B3(n,e){const t=fe(EL,n,e);return t&&new vP(t)},deps:[[new d.FiY,_P],fm]};let z3=(()=>{class n{constructor(){(0,nn.registerVersion)("angularfire",c.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[H3,$3]}),n})();function G3(n,...e){return{ngModule:z3,providers:[{provide:_P,useFactory:j3(n),multi:!0,deps:[d.R0b,d.zs3,be,H1,[new d.FiY,wL],[new d.FiY,Bw],...e]}]}}const q3=kA(Wj,!0);let W3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[M3]}),n.\u0275inj=d.cJS({providers:[Dy,{provide:aa.Dh,useValue:vL.firebase}],imports:[Aa,dS,x3,Oh,cH(()=>dH(vL.firebase)),L3(()=>V3()),G3(()=>q3())]}),n})();vm().bootstrapModule(W3).catch(n=>console.error(n))},9751:(Dt,Se,V)=>{"use strict";V.d(Se,{y:()=>Ee});var d=V(2961),B=V(727),F=V(8822),ae=V(9635),_e=V(2416),pe=V(576),Le=V(2806);let Ee=(()=>{class Q{constructor(ke){ke&&(this._subscribe=ke)}lift(ke){const nt=new Q;return nt.source=this,nt.operator=ke,nt}subscribe(ke,nt,rt){const se=function q(Q){return Q&&Q instanceof d.Lv||function G(Q){return Q&&(0,pe.m)(Q.next)&&(0,pe.m)(Q.error)&&(0,pe.m)(Q.complete)}(Q)&&(0,B.Nn)(Q)}(ke)?ke:new d.Hp(ke,nt,rt);return(0,Le.x)(()=>{const{operator:Pe,source:De}=this;se.add(Pe?Pe.call(se,De):De?this._subscribe(se):this._trySubscribe(se))}),se}_trySubscribe(ke){try{return this._subscribe(ke)}catch(nt){ke.error(nt)}}forEach(ke,nt){return new(nt=Oe(nt))((rt,se)=>{const Pe=new d.Hp({next:De=>{try{ke(De)}catch($e){se($e),Pe.unsubscribe()}},error:se,complete:rt});this.subscribe(Pe)})}_subscribe(ke){var nt;return null===(nt=this.source)||void 0===nt?void 0:nt.subscribe(ke)}[F.L](){return this}pipe(...ke){return(0,ae.U)(ke)(this)}toPromise(ke){return new(ke=Oe(ke))((nt,rt)=>{let se;this.subscribe(Pe=>se=Pe,Pe=>rt(Pe),()=>nt(se))})}}return Q.create=je=>new Q(je),Q})();function Oe(Q){var je;return null!==(je=Q??_e.v.Promise)&&void 0!==je?je:Promise}},7579:(Dt,Se,V)=>{"use strict";V.d(Se,{x:()=>Le});var d=V(9751),B=V(727);const ae=(0,V(3888).d)(Oe=>function(){Oe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var _e=V(8737),pe=V(2806);let Le=(()=>{class Oe extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const Q=new Ee(this,this);return Q.operator=q,Q}_throwIfClosed(){if(this.closed)throw new ae}next(q){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(q)}})}error(q){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:Q}=this;for(;Q.length;)Q.shift().error(q)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:Q,isStopped:je,observers:ke}=this;return Q||je?B.Lc:(this.currentObservers=null,ke.push(q),new B.w0(()=>{this.currentObservers=null,(0,_e.P)(ke,q)}))}_checkFinalizedStatuses(q){const{hasError:Q,thrownError:je,isStopped:ke}=this;Q?q.error(je):ke&&q.complete()}asObservable(){const q=new d.y;return q.source=this,q}}return Oe.create=(G,q)=>new Ee(G,q),Oe})();class Ee extends Le{constructor(G,q){super(),this.destination=G,this.source=q}next(G){var q,Q;null===(Q=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===Q||Q.call(q,G)}error(G){var q,Q;null===(Q=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===Q||Q.call(q,G)}complete(){var G,q;null===(q=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===q||q.call(G)}_subscribe(G){var q,Q;return null!==(Q=null===(q=this.source)||void 0===q?void 0:q.subscribe(G))&&void 0!==Q?Q:B.Lc}}},2961:(Dt,Se,V)=>{"use strict";V.d(Se,{Hp:()=>rt,Lv:()=>Q});var d=V(576),B=V(727),F=V(2416),ae=V(7849);function _e(){}const pe=Oe("C",void 0,void 0);function Oe(Ie,ge,Te){return{kind:Ie,value:ge,error:Te}}var G=V(3410),q=V(2806);class Q extends B.w0{constructor(ge){super(),this.isStopped=!1,ge?(this.destination=ge,(0,B.Nn)(ge)&&ge.add(this)):this.destination=$e}static create(ge,Te,Ve){return new rt(ge,Te,Ve)}next(ge){this.isStopped?De(function Ee(Ie){return Oe("N",Ie,void 0)}(ge),this):this._next(ge)}error(ge){this.isStopped?De(function Le(Ie){return Oe("E",void 0,Ie)}(ge),this):(this.isStopped=!0,this._error(ge))}complete(){this.isStopped?De(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ge){this.destination.next(ge)}_error(ge){try{this.destination.error(ge)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const je=Function.prototype.bind;function ke(Ie,ge){return je.call(Ie,ge)}class nt{constructor(ge){this.partialObserver=ge}next(ge){const{partialObserver:Te}=this;if(Te.next)try{Te.next(ge)}catch(Ve){se(Ve)}}error(ge){const{partialObserver:Te}=this;if(Te.error)try{Te.error(ge)}catch(Ve){se(Ve)}else se(ge)}complete(){const{partialObserver:ge}=this;if(ge.complete)try{ge.complete()}catch(Te){se(Te)}}}class rt extends Q{constructor(ge,Te,Ve){let z;if(super(),(0,d.m)(ge)||!ge)z={next:ge??void 0,error:Te??void 0,complete:Ve??void 0};else{let te;this&&F.v.useDeprecatedNextContext?(te=Object.create(ge),te.unsubscribe=()=>this.unsubscribe(),z={next:ge.next&&ke(ge.next,te),error:ge.error&&ke(ge.error,te),complete:ge.complete&&ke(ge.complete,te)}):z=ge}this.destination=new nt(z)}}function se(Ie){F.v.useDeprecatedSynchronousErrorHandling?(0,q.O)(Ie):(0,ae.h)(Ie)}function De(Ie,ge){const{onStoppedNotification:Te}=F.v;Te&&G.z.setTimeout(()=>Te(Ie,ge))}const $e={closed:!0,next:_e,error:function Pe(Ie){throw Ie},complete:_e}},727:(Dt,Se,V)=>{"use strict";V.d(Se,{Lc:()=>pe,w0:()=>_e,Nn:()=>Le});var d=V(576);const F=(0,V(3888).d)(Oe=>function(q){Oe(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((Q,je)=>`${je+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var ae=V(8737);class _e{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const ke of q)ke.remove(this);else q.remove(this);const{initialTeardown:Q}=this;if((0,d.m)(Q))try{Q()}catch(ke){G=ke instanceof F?ke.errors:[ke]}const{_finalizers:je}=this;if(je){this._finalizers=null;for(const ke of je)try{Ee(ke)}catch(nt){G=G??[],nt instanceof F?G=[...G,...nt.errors]:G.push(nt)}}if(G)throw new F(G)}}add(G){var q;if(G&&G!==this)if(this.closed)Ee(G);else{if(G instanceof _e){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(G)}}_hasParent(G){const{_parentage:q}=this;return q===G||Array.isArray(q)&&q.includes(G)}_addParent(G){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(G),q):q?[q,G]:G}_removeParent(G){const{_parentage:q}=this;q===G?this._parentage=null:Array.isArray(q)&&(0,ae.P)(q,G)}remove(G){const{_finalizers:q}=this;q&&(0,ae.P)(q,G),G instanceof _e&&G._removeParent(this)}}_e.EMPTY=(()=>{const Oe=new _e;return Oe.closed=!0,Oe})();const pe=_e.EMPTY;function Le(Oe){return Oe instanceof _e||Oe&&"closed"in Oe&&(0,d.m)(Oe.remove)&&(0,d.m)(Oe.add)&&(0,d.m)(Oe.unsubscribe)}function Ee(Oe){(0,d.m)(Oe)?Oe():Oe.unsubscribe()}},2416:(Dt,Se,V)=>{"use strict";V.d(Se,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Dt,Se,V)=>{"use strict";V.d(Se,{E:()=>B});const B=new(V(9751).y)(_e=>_e.complete())},8996:(Dt,Se,V)=>{"use strict";V.d(Se,{D:()=>ge});var d=V(8421),B=V(5363),F=V(9468),pe=V(9751),Ee=V(2202),Oe=V(576),G=V(9672);function Q(Te,Ve){if(!Te)throw new Error("Iterable cannot be null");return new pe.y(z=>{(0,G.f)(z,Ve,()=>{const te=Te[Symbol.asyncIterator]();(0,G.f)(z,Ve,()=>{te.next().then(He=>{He.done?z.complete():z.next(He.value)})},0,!0)})})}var je=V(3670),ke=V(8239),nt=V(1144),rt=V(6495),se=V(2206),Pe=V(4532),De=V(3260);function ge(Te,Ve){return Ve?function Ie(Te,Ve){if(null!=Te){if((0,je.c)(Te))return function ae(Te,Ve){return(0,d.Xf)(Te).pipe((0,F.R)(Ve),(0,B.Q)(Ve))}(Te,Ve);if((0,nt.z)(Te))return function Le(Te,Ve){return new pe.y(z=>{let te=0;return Ve.schedule(function(){te===Te.length?z.complete():(z.next(Te[te++]),z.closed||this.schedule())})})}(Te,Ve);if((0,ke.t)(Te))return function _e(Te,Ve){return(0,d.Xf)(Te).pipe((0,F.R)(Ve),(0,B.Q)(Ve))}(Te,Ve);if((0,se.D)(Te))return Q(Te,Ve);if((0,rt.T)(Te))return function q(Te,Ve){return new pe.y(z=>{let te;return(0,G.f)(z,Ve,()=>{te=Te[Ee.h](),(0,G.f)(z,Ve,()=>{let He,Et;try{({value:He,done:Et}=te.next())}catch(qe){return void z.error(qe)}Et?z.complete():z.next(He)},0,!0)}),()=>(0,Oe.m)(te?.return)&&te.return()})}(Te,Ve);if((0,De.L)(Te))return function $e(Te,Ve){return Q((0,De.Q)(Te),Ve)}(Te,Ve)}throw(0,Pe.z)(Te)}(Te,Ve):(0,d.Xf)(Te)}},8421:(Dt,Se,V)=>{"use strict";V.d(Se,{Xf:()=>je});var d=V(655),B=V(1144),F=V(8239),ae=V(9751),_e=V(3670),pe=V(2206),Le=V(4532),Ee=V(6495),Oe=V(3260),G=V(576),q=V(7849),Q=V(8822);function je(Ie){if(Ie instanceof ae.y)return Ie;if(null!=Ie){if((0,_e.c)(Ie))return function ke(Ie){return new ae.y(ge=>{const Te=Ie[Q.L]();if((0,G.m)(Te.subscribe))return Te.subscribe(ge);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ie);if((0,B.z)(Ie))return function nt(Ie){return new ae.y(ge=>{for(let Te=0;Te<Ie.length&&!ge.closed;Te++)ge.next(Ie[Te]);ge.complete()})}(Ie);if((0,F.t)(Ie))return function rt(Ie){return new ae.y(ge=>{Ie.then(Te=>{ge.closed||(ge.next(Te),ge.complete())},Te=>ge.error(Te)).then(null,q.h)})}(Ie);if((0,pe.D)(Ie))return Pe(Ie);if((0,Ee.T)(Ie))return function se(Ie){return new ae.y(ge=>{for(const Te of Ie)if(ge.next(Te),ge.closed)return;ge.complete()})}(Ie);if((0,Oe.L)(Ie))return function De(Ie){return Pe((0,Oe.Q)(Ie))}(Ie)}throw(0,Le.z)(Ie)}function Pe(Ie){return new ae.y(ge=>{(function $e(Ie,ge){var Te,Ve,z,te;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Te=(0,d.KL)(Ie);!(Ve=yield Te.next()).done;)if(ge.next(Ve.value),ge.closed)return}catch(He){z={error:He}}finally{try{Ve&&!Ve.done&&(te=Te.return)&&(yield te.call(Te))}finally{if(z)throw z.error}}ge.complete()})})(Ie,ge).catch(Te=>ge.error(Te))})}},6451:(Dt,Se,V)=>{"use strict";V.d(Se,{T:()=>pe});var d=V(8189),B=V(8421),F=V(515),ae=V(7669),_e=V(8996);function pe(...Le){const Ee=(0,ae.yG)(Le),Oe=(0,ae._6)(Le,1/0),G=Le;return G.length?1===G.length?(0,B.Xf)(G[0]):(0,d.J)(Oe)((0,_e.D)(G,Ee)):F.E}},5403:(Dt,Se,V)=>{"use strict";V.d(Se,{x:()=>B});var d=V(2961);function B(ae,_e,pe,Le,Ee){return new F(ae,_e,pe,Le,Ee)}class F extends d.Lv{constructor(_e,pe,Le,Ee,Oe,G){super(_e),this.onFinalize=Oe,this.shouldUnsubscribe=G,this._next=pe?function(q){try{pe(q)}catch(Q){_e.error(Q)}}:super._next,this._error=Ee?function(q){try{Ee(q)}catch(Q){_e.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=Le?function(){try{Le()}catch(q){_e.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var _e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(_e=this.onFinalize)||void 0===_e||_e.call(this))}}}},4004:(Dt,Se,V)=>{"use strict";V.d(Se,{U:()=>F});var d=V(4482),B=V(5403);function F(ae,_e){return(0,d.e)((pe,Le)=>{let Ee=0;pe.subscribe((0,B.x)(Le,Oe=>{Le.next(ae.call(_e,Oe,Ee++))}))})}},8189:(Dt,Se,V)=>{"use strict";V.d(Se,{J:()=>F});var d=V(5577),B=V(4671);function F(ae=1/0){return(0,d.z)(B.y,ae)}},5577:(Dt,Se,V)=>{"use strict";V.d(Se,{z:()=>Ee});var d=V(4004),B=V(8421),F=V(4482),ae=V(9672),_e=V(5403),Le=V(576);function Ee(Oe,G,q=1/0){return(0,Le.m)(G)?Ee((Q,je)=>(0,d.U)((ke,nt)=>G(Q,ke,je,nt))((0,B.Xf)(Oe(Q,je))),q):("number"==typeof G&&(q=G),(0,F.e)((Q,je)=>function pe(Oe,G,q,Q,je,ke,nt,rt){const se=[];let Pe=0,De=0,$e=!1;const Ie=()=>{$e&&!se.length&&!Pe&&G.complete()},ge=Ve=>Pe<Q?Te(Ve):se.push(Ve),Te=Ve=>{ke&&G.next(Ve),Pe++;let z=!1;(0,B.Xf)(q(Ve,De++)).subscribe((0,_e.x)(G,te=>{je?.(te),ke?ge(te):G.next(te)},()=>{z=!0},void 0,()=>{if(z)try{for(Pe--;se.length&&Pe<Q;){const te=se.shift();nt?(0,ae.f)(G,nt,()=>Te(te)):Te(te)}Ie()}catch(te){G.error(te)}}))};return Oe.subscribe((0,_e.x)(G,ge,()=>{$e=!0,Ie()})),()=>{rt?.()}}(Q,je,Oe,q)))}},5363:(Dt,Se,V)=>{"use strict";V.d(Se,{Q:()=>ae});var d=V(9672),B=V(4482),F=V(5403);function ae(_e,pe=0){return(0,B.e)((Le,Ee)=>{Le.subscribe((0,F.x)(Ee,Oe=>(0,d.f)(Ee,_e,()=>Ee.next(Oe),pe),()=>(0,d.f)(Ee,_e,()=>Ee.complete(),pe),Oe=>(0,d.f)(Ee,_e,()=>Ee.error(Oe),pe)))})}},3099:(Dt,Se,V)=>{"use strict";V.d(Se,{B:()=>_e});var d=V(8421),B=V(7579),F=V(2961),ae=V(4482);function _e(Le={}){const{connector:Ee=(()=>new B.x),resetOnError:Oe=!0,resetOnComplete:G=!0,resetOnRefCountZero:q=!0}=Le;return Q=>{let je,ke,nt,rt=0,se=!1,Pe=!1;const De=()=>{ke?.unsubscribe(),ke=void 0},$e=()=>{De(),je=nt=void 0,se=Pe=!1},Ie=()=>{const ge=je;$e(),ge?.unsubscribe()};return(0,ae.e)((ge,Te)=>{rt++,!Pe&&!se&&De();const Ve=nt=nt??Ee();Te.add(()=>{rt--,0===rt&&!Pe&&!se&&(ke=pe(Ie,q))}),Ve.subscribe(Te),!je&&rt>0&&(je=new F.Hp({next:z=>Ve.next(z),error:z=>{Pe=!0,De(),ke=pe($e,Oe,z),Ve.error(z)},complete:()=>{se=!0,De(),ke=pe($e,G),Ve.complete()}}),(0,d.Xf)(ge).subscribe(je))})(Q)}}function pe(Le,Ee,...Oe){if(!0===Ee)return void Le();if(!1===Ee)return;const G=new F.Hp({next:()=>{G.unsubscribe(),Le()}});return(0,d.Xf)(Ee(...Oe)).subscribe(G)}},9468:(Dt,Se,V)=>{"use strict";V.d(Se,{R:()=>B});var d=V(4482);function B(F,ae=0){return(0,d.e)((_e,pe)=>{pe.add(F.schedule(()=>_e.subscribe(pe),ae))})}},3410:(Dt,Se,V)=>{"use strict";V.d(Se,{z:()=>d});const d={setTimeout(B,F,...ae){const{delegate:_e}=d;return _e?.setTimeout?_e.setTimeout(B,F,...ae):setTimeout(B,F,...ae)},clearTimeout(B){const{delegate:F}=d;return(F?.clearTimeout||clearTimeout)(B)},delegate:void 0}},2202:(Dt,Se,V)=>{"use strict";V.d(Se,{h:()=>B});const B=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Dt,Se,V)=>{"use strict";V.d(Se,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Dt,Se,V)=>{"use strict";V.d(Se,{_6:()=>pe,jO:()=>ae,yG:()=>_e});var d=V(576);function F(Le){return Le[Le.length-1]}function ae(Le){return(0,d.m)(F(Le))?Le.pop():void 0}function _e(Le){return function B(Le){return Le&&(0,d.m)(Le.schedule)}(F(Le))?Le.pop():void 0}function pe(Le,Ee){return"number"==typeof F(Le)?Le.pop():Ee}},8737:(Dt,Se,V)=>{"use strict";function d(B,F){if(B){const ae=B.indexOf(F);0<=ae&&B.splice(ae,1)}}V.d(Se,{P:()=>d})},3888:(Dt,Se,V)=>{"use strict";function d(B){const ae=B(_e=>{Error.call(_e),_e.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}V.d(Se,{d:()=>d})},2806:(Dt,Se,V)=>{"use strict";V.d(Se,{O:()=>ae,x:()=>F});var d=V(2416);let B=null;function F(_e){if(d.v.useDeprecatedSynchronousErrorHandling){const pe=!B;if(pe&&(B={errorThrown:!1,error:null}),_e(),pe){const{errorThrown:Le,error:Ee}=B;if(B=null,Le)throw Ee}}else _e()}function ae(_e){d.v.useDeprecatedSynchronousErrorHandling&&B&&(B.errorThrown=!0,B.error=_e)}},9672:(Dt,Se,V)=>{"use strict";function d(B,F,ae,_e=0,pe=!1){const Le=F.schedule(function(){ae(),pe?B.add(this.schedule(null,_e)):this.unsubscribe()},_e);if(B.add(Le),!pe)return Le}V.d(Se,{f:()=>d})},4671:(Dt,Se,V)=>{"use strict";function d(B){return B}V.d(Se,{y:()=>d})},1144:(Dt,Se,V)=>{"use strict";V.d(Se,{z:()=>d});const d=B=>B&&"number"==typeof B.length&&"function"!=typeof B},2206:(Dt,Se,V)=>{"use strict";V.d(Se,{D:()=>B});var d=V(576);function B(F){return Symbol.asyncIterator&&(0,d.m)(F?.[Symbol.asyncIterator])}},576:(Dt,Se,V)=>{"use strict";function d(B){return"function"==typeof B}V.d(Se,{m:()=>d})},3670:(Dt,Se,V)=>{"use strict";V.d(Se,{c:()=>F});var d=V(8822),B=V(576);function F(ae){return(0,B.m)(ae[d.L])}},6495:(Dt,Se,V)=>{"use strict";V.d(Se,{T:()=>F});var d=V(2202),B=V(576);function F(ae){return(0,B.m)(ae?.[d.h])}},8239:(Dt,Se,V)=>{"use strict";V.d(Se,{t:()=>B});var d=V(576);function B(F){return(0,d.m)(F?.then)}},3260:(Dt,Se,V)=>{"use strict";V.d(Se,{L:()=>ae,Q:()=>F});var d=V(655),B=V(576);function F(_e){return(0,d.FC)(this,arguments,function*(){const Le=_e.getReader();try{for(;;){const{value:Ee,done:Oe}=yield(0,d.qq)(Le.read());if(Oe)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(Ee)}}finally{Le.releaseLock()}})}function ae(_e){return(0,B.m)(_e?.getReader)}},4482:(Dt,Se,V)=>{"use strict";V.d(Se,{A:()=>B,e:()=>F});var d=V(576);function B(ae){return(0,d.m)(ae?.lift)}function F(ae){return _e=>{if(B(_e))return _e.lift(function(pe){try{return ae(pe,this)}catch(Le){this.error(Le)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(Dt,Se,V)=>{"use strict";V.d(Se,{U:()=>F,z:()=>B});var d=V(4671);function B(...ae){return F(ae)}function F(ae){return 0===ae.length?d.y:1===ae.length?ae[0]:function(pe){return ae.reduce((Le,Ee)=>Ee(Le),pe)}}},7849:(Dt,Se,V)=>{"use strict";V.d(Se,{h:()=>F});var d=V(2416),B=V(3410);function F(ae){B.z.setTimeout(()=>{const{onUnhandledError:_e}=d.v;if(!_e)throw ae;_e(ae)})}},4532:(Dt,Se,V)=>{"use strict";function d(B){return new TypeError(`You provided ${null!==B&&"object"==typeof B?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(Se,{z:()=>d})},5226:function(Dt){Dt.exports=function(){"use strict";const Se="SweetAlert2:",d=I=>I.charAt(0).toUpperCase()+I.slice(1),B=I=>Array.prototype.slice.call(I),F=I=>{console.warn("".concat(Se," ").concat("object"==typeof I?I.join(" "):I))},ae=I=>{console.error("".concat(Se," ").concat(I))},_e=[],Le=(I,C)=>{(I=>{_e.includes(I)||(_e.push(I),F(I))})('"'.concat(I,'" is deprecated and will be removed in the next major release. Please use "').concat(C,'" instead.'))},Ee=I=>"function"==typeof I?I():I,Oe=I=>I&&"function"==typeof I.toPromise,G=I=>Oe(I)?I.toPromise():Promise.resolve(I),q=I=>I&&Promise.resolve(I)===I,Q={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},je=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],ke={},nt=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],rt=I=>Object.prototype.hasOwnProperty.call(Q,I),se=I=>-1!==je.indexOf(I),Pe=I=>ke[I],De=I=>{rt(I)||F('Unknown parameter "'.concat(I,'"'))},$e=I=>{nt.includes(I)&&F('The parameter "'.concat(I,'" is incompatible with toasts'))},Ie=I=>{Pe(I)&&Le(I,Pe(I))},Ve=I=>{const C={};for(const x in I)C[I[x]]="swal2-"+I[x];return C},z=Ve(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),te=Ve(["success","warning","info","question","error"]),He=()=>document.body.querySelector(".".concat(z.container)),Et=I=>{const C=He();return C?C.querySelector(I):null},qe=I=>Et(".".concat(I)),it=()=>qe(z.popup),ot=()=>qe(z.icon),ce=()=>qe(z.title),le=()=>qe(z["html-container"]),me=()=>qe(z.image),we=()=>qe(z["progress-steps"]),Ue=()=>qe(z["validation-message"]),xe=()=>Et(".".concat(z.actions," .").concat(z.confirm)),et=()=>Et(".".concat(z.actions," .").concat(z.deny)),Tt=()=>Et(".".concat(z.loader)),lt=()=>Et(".".concat(z.actions," .").concat(z.cancel)),zt=()=>qe(z.actions),bt=()=>qe(z.footer),Bt=()=>qe(z["timer-progress-bar"]),En=()=>qe(z.close),mr=()=>{const I=B(it().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((x,j)=>{const ye=parseInt(x.getAttribute("tabindex")),ft=parseInt(j.getAttribute("tabindex"));return ye>ft?1:ye<ft?-1:0}),C=B(it().querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n')).filter(x=>"-1"!==x.getAttribute("tabindex"));return(I=>{const C=[];for(let x=0;x<I.length;x++)-1===C.indexOf(I[x])&&C.push(I[x]);return C})(I.concat(C)).filter(x=>sn(x))},Nn=()=>Sr(document.body,z.shown)&&!Sr(document.body,z["toast-shown"])&&!Sr(document.body,z["no-backdrop"]),yr=()=>it()&&Sr(it(),z.toast),ur={previousBodyPadding:null},yn=(I,C)=>{if(I.textContent="",C){const j=(new DOMParser).parseFromString(C,"text/html");B(j.querySelector("head").childNodes).forEach(ye=>{I.appendChild(ye)}),B(j.querySelector("body").childNodes).forEach(ye=>{I.appendChild(ye)})}},Sr=(I,C)=>{if(!C)return!1;const x=C.split(/\s+/);for(let j=0;j<x.length;j++)if(!I.classList.contains(x[j]))return!1;return!0},Je=(I,C,x)=>{if(((I,C)=>{B(I.classList).forEach(x=>{!Object.values(z).includes(x)&&!Object.values(te).includes(x)&&!Object.values(C.showClass).includes(x)&&I.classList.remove(x)})})(I,C),C.customClass&&C.customClass[x]){if("string"!=typeof C.customClass[x]&&!C.customClass[x].forEach)return F("Invalid type of customClass.".concat(x,'! Expected string or iterable object, got "').concat(typeof C.customClass[x],'"'));Pt(I,C.customClass[x])}},bn=(I,C)=>{if(!C)return null;switch(C){case"select":case"textarea":case"file":return I.querySelector(".".concat(z.popup," > .").concat(z[C]));case"checkbox":return I.querySelector(".".concat(z.popup," > .").concat(z.checkbox," input"));case"radio":return I.querySelector(".".concat(z.popup," > .").concat(z.radio," input:checked"))||I.querySelector(".".concat(z.popup," > .").concat(z.radio," input:first-child"));case"range":return I.querySelector(".".concat(z.popup," > .").concat(z.range," input"));default:return I.querySelector(".".concat(z.popup," > .").concat(z.input))}},fi=I=>{if(I.focus(),"file"!==I.type){const C=I.value;I.value="",I.value=C}},Mn=(I,C,x)=>{!I||!C||("string"==typeof C&&(C=C.split(/\s+/).filter(Boolean)),C.forEach(j=>{Array.isArray(I)?I.forEach(ye=>{x?ye.classList.add(j):ye.classList.remove(j)}):x?I.classList.add(j):I.classList.remove(j)}))},Pt=(I,C)=>{Mn(I,C,!0)},_n=(I,C)=>{Mn(I,C,!1)},Gt=(I,C)=>{const x=B(I.childNodes);for(let j=0;j<x.length;j++)if(Sr(x[j],C))return x[j]},qt=(I,C,x)=>{x==="".concat(parseInt(x))&&(x=parseInt(x)),x||0===parseInt(x)?I.style[C]="number"==typeof x?"".concat(x,"px"):x:I.style.removeProperty(C)},Ke=function(I){I.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex"},dt=I=>{I.style.display="none"},Pn=(I,C,x,j)=>{const ye=I.querySelector(C);ye&&(ye.style[x]=j)},Ln=(I,C,x)=>{C?Ke(I,x):dt(I)},sn=I=>!(!I||!(I.offsetWidth||I.offsetHeight||I.getClientRects().length)),lr=I=>I.scrollHeight>I.clientHeight,Jn=I=>{const C=window.getComputedStyle(I),x=parseFloat(C.getPropertyValue("animation-duration")||"0"),j=parseFloat(C.getPropertyValue("transition-duration")||"0");return x>0||j>0},jt=function(I){let C=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const x=Bt();sn(x)&&(C&&(x.style.transition="none",x.style.width="100%"),setTimeout(()=>{x.style.transition="width ".concat(I/1e3,"s linear"),x.style.width="0%"},10))},Wt=()=>typeof window>"u"||typeof document>"u",ze={},Vn=I=>new Promise(C=>{if(!I)return C();const x=window.scrollX,j=window.scrollY;ze.restoreFocusTimeout=setTimeout(()=>{ze.previousActiveElement&&ze.previousActiveElement.focus?(ze.previousActiveElement.focus(),ze.previousActiveElement=null):document.body&&document.body.focus(),C()},100),window.scrollTo(x,j)}),Ar='\n <div aria-labelledby="'.concat(z.title,'" aria-describedby="').concat(z["html-container"],'" class="').concat(z.popup,'" tabindex="-1">\n   <button type="button" class="').concat(z.close,'"></button>\n   <ul class="').concat(z["progress-steps"],'"></ul>\n   <div class="').concat(z.icon,'"></div>\n   <img class="').concat(z.image,'" />\n   <h2 class="').concat(z.title,'" id="').concat(z.title,'"></h2>\n   <div class="').concat(z["html-container"],'" id="').concat(z["html-container"],'"></div>\n   <input class="').concat(z.input,'" />\n   <input type="file" class="').concat(z.file,'" />\n   <div class="').concat(z.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(z.select,'"></select>\n   <div class="').concat(z.radio,'"></div>\n   <label for="').concat(z.checkbox,'" class="').concat(z.checkbox,'">\n     <input type="checkbox" />\n     <span class="').concat(z.label,'"></span>\n   </label>\n   <textarea class="').concat(z.textarea,'"></textarea>\n   <div class="').concat(z["validation-message"],'" id="').concat(z["validation-message"],'"></div>\n   <div class="').concat(z.actions,'">\n     <div class="').concat(z.loader,'"></div>\n     <button type="button" class="').concat(z.confirm,'"></button>\n     <button type="button" class="').concat(z.deny,'"></button>\n     <button type="button" class="').concat(z.cancel,'"></button>\n   </div>\n   <div class="').concat(z.footer,'"></div>\n   <div class="').concat(z["timer-progress-bar-container"],'">\n     <div class="').concat(z["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),Gn=()=>{ze.currentInstance.resetValidationMessage()},N=I=>{const C=(()=>{const I=He();return!!I&&(I.remove(),_n([document.documentElement,document.body],[z["no-backdrop"],z["toast-shown"],z["has-column"]]),!0)})();if(Wt())return void ae("SweetAlert2 requires document to initialize");const x=document.createElement("div");x.className=z.container,C&&Pt(x,z["no-transition"]),yn(x,Ar);const j=(I=>"string"==typeof I?document.querySelector(I):I)(I.target);j.appendChild(x),(I=>{const C=it();C.setAttribute("role",I.toast?"alert":"dialog"),C.setAttribute("aria-live",I.toast?"polite":"assertive"),I.toast||C.setAttribute("aria-modal","true")})(I),(I=>{"rtl"===window.getComputedStyle(I).direction&&Pt(He(),z.rtl)})(j),(()=>{const I=it(),C=Gt(I,z.input),x=Gt(I,z.file),j=I.querySelector(".".concat(z.range," input")),ye=I.querySelector(".".concat(z.range," output")),ft=Gt(I,z.select),Dn=I.querySelector(".".concat(z.checkbox," input")),kr=Gt(I,z.textarea);C.oninput=Gn,x.onchange=Gn,ft.onchange=Gn,Dn.onchange=Gn,kr.oninput=Gn,j.oninput=()=>{Gn(),ye.value=j.value},j.onchange=()=>{Gn(),j.nextSibling.value=j.value}})()},O=(I,C)=>{I instanceof HTMLElement?C.appendChild(I):"object"==typeof I?R(I,C):I&&yn(C,I)},R=(I,C)=>{I.jquery?W(C,I):yn(C,I.toString())},W=(I,C)=>{if(I.textContent="",0 in C)for(let x=0;x in C;x++)I.appendChild(C[x].cloneNode(!0));else I.appendChild(C.cloneNode(!0))},he=(()=>{if(Wt())return!1;const I=document.createElement("div"),C={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const x in C)if(Object.prototype.hasOwnProperty.call(C,x)&&typeof I.style[x]<"u")return C[x];return!1})(),At=(I,C)=>{const x=zt(),j=Tt();C.showConfirmButton||C.showDenyButton||C.showCancelButton?Ke(x):dt(x),Je(x,C,"actions"),function Ct(I,C,x){const j=xe(),ye=et(),ft=lt();St(j,"confirm",x),St(ye,"deny",x),St(ft,"cancel",x),function $t(I,C,x,j){if(!j.buttonsStyling)return _n([I,C,x],z.styled);Pt([I,C,x],z.styled),j.confirmButtonColor&&(I.style.backgroundColor=j.confirmButtonColor,Pt(I,z["default-outline"])),j.denyButtonColor&&(C.style.backgroundColor=j.denyButtonColor,Pt(C,z["default-outline"])),j.cancelButtonColor&&(x.style.backgroundColor=j.cancelButtonColor,Pt(x,z["default-outline"]))}(j,ye,ft,x),x.reverseButtons&&(x.toast?(I.insertBefore(ft,j),I.insertBefore(ye,j)):(I.insertBefore(ft,C),I.insertBefore(ye,C),I.insertBefore(j,C)))}(x,j,C),yn(j,C.loaderHtml),Je(j,C,"loader")};function St(I,C,x){Ln(I,x["show".concat(d(C),"Button")],"inline-block"),yn(I,x["".concat(C,"ButtonText")]),I.setAttribute("aria-label",x["".concat(C,"ButtonAriaLabel")]),I.className=z[C],Je(I,x,"".concat(C,"Button")),Pt(I,x["".concat(C,"ButtonClass")])}const ws=(I,C)=>{const x=He();x&&(function wn(I,C){"string"==typeof C?I.style.background=C:C||Pt([document.documentElement,document.body],z["no-backdrop"])}(x,C.backdrop),function Ft(I,C){C in z?Pt(I,z[C]):(F('The "position" parameter is not valid, defaulting to "center"'),Pt(I,z.center))}(x,C.position),function vr(I,C){if(C&&"string"==typeof C){const x="grow-".concat(C);x in z&&Pt(I,z[x])}}(x,C.grow),Je(x,C,"container"))};var X={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const ne=["input","file","range","select","radio","checkbox","textarea"],ht=I=>{if(!an[I.input])return ae('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(I.input,'"'));const C=cr(I.input),x=an[I.input](C,I);Ke(x),setTimeout(()=>{fi(x)})},Yt=(I,C)=>{const x=bn(it(),I);if(x){(I=>{for(let C=0;C<I.attributes.length;C++){const x=I.attributes[C].name;["type","value","style"].includes(x)||I.removeAttribute(x)}})(x);for(const j in C)x.setAttribute(j,C[j])}},pt=I=>{const C=cr(I.input);I.customClass&&Pt(C,I.customClass.input)},on=(I,C)=>{(!I.placeholder||C.inputPlaceholder)&&(I.placeholder=C.inputPlaceholder)},Zt=(I,C,x)=>{if(x.inputLabel){I.id=z.input;const j=document.createElement("label"),ye=z["input-label"];j.setAttribute("for",I.id),j.className=ye,Pt(j,x.customClass.inputLabel),j.innerText=x.inputLabel,C.insertAdjacentElement("beforebegin",j)}},cr=I=>{const C=z[I]?z[I]:z.input;return Gt(it(),C)},an={};an.text=an.email=an.password=an.number=an.tel=an.url=(I,C)=>("string"==typeof C.inputValue||"number"==typeof C.inputValue?I.value=C.inputValue:q(C.inputValue)||F('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof C.inputValue,'"')),Zt(I,I,C),on(I,C),I.type=C.input,I),an.file=(I,C)=>(Zt(I,I,C),on(I,C),I),an.range=(I,C)=>{const x=I.querySelector("input"),j=I.querySelector("output");return x.value=C.inputValue,x.type=C.input,j.value=C.inputValue,Zt(x,I,C),I},an.select=(I,C)=>{if(I.textContent="",C.inputPlaceholder){const x=document.createElement("option");yn(x,C.inputPlaceholder),x.value="",x.disabled=!0,x.selected=!0,I.appendChild(x)}return Zt(I,I,C),I},an.radio=I=>(I.textContent="",I),an.checkbox=(I,C)=>{const x=bn(it(),"checkbox");x.value="1",x.id=z.checkbox,x.checked=Boolean(C.inputValue);const j=I.querySelector("span");return yn(j,C.inputPlaceholder),I},an.textarea=(I,C)=>{I.value=C.inputValue,on(I,C),Zt(I,I,C);return setTimeout(()=>{if("MutationObserver"in window){const j=parseInt(window.getComputedStyle(it()).width);new MutationObserver(()=>{const ft=I.offsetWidth+(j=>parseInt(window.getComputedStyle(j).marginLeft)+parseInt(window.getComputedStyle(j).marginRight))(I);it().style.width=ft>j?"".concat(ft,"px"):null}).observe(I,{attributes:!0,attributeFilter:["style"]})}}),I};const Fl=(I,C)=>{const x=le();Je(x,C,"htmlContainer"),C.html?(O(C.html,x),Ke(x,"block")):C.text?(x.textContent=C.text,Ke(x,"block")):dt(x),((I,C)=>{const x=it(),j=X.innerParams.get(I),ye=!j||C.input!==j.input;ne.forEach(ft=>{const Dn=z[ft],kr=Gt(x,Dn);Yt(ft,C.inputAttributes),kr.className=Dn,ye&&dt(kr)}),C.input&&(ye&&ht(C),pt(C))})(I,C)},Qe=(I,C)=>{for(const x in te)C.icon!==x&&_n(I,te[x]);Pt(I,te[C.icon]),_r(I,C),Vt(),Je(I,C,"icon")},Vt=()=>{const I=it(),C=window.getComputedStyle(I).getPropertyValue("background-color"),x=I.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let j=0;j<x.length;j++)x[j].style.backgroundColor=C},Si=(I,C)=>{I.textContent="",yn(I,C.iconHtml?pi(C.iconHtml):"success"===C.icon?'\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n':"error"===C.icon?'\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':pi({question:"?",warning:"!",info:"i"}[C.icon]))},_r=(I,C)=>{if(C.iconColor){I.style.color=C.iconColor,I.style.borderColor=C.iconColor;for(const x of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Pn(I,x,"backgroundColor",C.iconColor);Pn(I,".swal2-success-ring","borderColor",C.iconColor)}},pi=I=>'<div class="'.concat(z["icon-content"],'">').concat(I,"</div>"),Ht=(I,C)=>{const x=we();if(!C.progressSteps||0===C.progressSteps.length)return dt(x);Ke(x),x.textContent="",C.currentProgressStep>=C.progressSteps.length&&F("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),C.progressSteps.forEach((j,ye)=>{const ft=(I=>{const C=document.createElement("li");return Pt(C,z["progress-step"]),yn(C,I),C})(j);if(x.appendChild(ft),ye===C.currentProgressStep&&Pt(ft,z["active-progress-step"]),ye!==C.progressSteps.length-1){const Dn=(I=>{const C=document.createElement("li");return Pt(C,z["progress-step-line"]),I.progressStepsDistance&&(C.style.width=I.progressStepsDistance),C})(C);x.appendChild(Dn)}})},To=(I,C)=>{I.className="".concat(z.popup," ").concat(sn(I)?C.showClass.popup:""),C.toast?(Pt([document.documentElement,document.body],z["toast-shown"]),Pt(I,z.toast)):Pt(I,z.modal),Je(I,C,"popup"),"string"==typeof C.customClass&&Pt(I,C.customClass),C.icon&&Pt(I,z["icon-".concat(C.icon)])},ji=(I,C)=>{((I,C)=>{const x=He(),j=it();C.toast?(qt(x,"width",C.width),j.style.width="100%",j.insertBefore(Tt(),ot())):qt(j,"width",C.width),qt(j,"padding",C.padding),C.color&&(j.style.color=C.color),C.background&&(j.style.background=C.background),dt(Ue()),To(j,C)})(0,C),ws(0,C),Ht(0,C),((I,C)=>{const x=X.innerParams.get(I),j=ot();x&&C.icon===x.icon?(Si(j,C),Qe(j,C)):C.icon||C.iconHtml?C.icon&&-1===Object.keys(te).indexOf(C.icon)?(ae('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(C.icon,'"')),dt(j)):(Ke(j),Si(j,C),Qe(j,C),Pt(j,C.showClass.icon)):dt(j)})(I,C),((I,C)=>{const x=me();if(!C.imageUrl)return dt(x);Ke(x,""),x.setAttribute("src",C.imageUrl),x.setAttribute("alt",C.imageAlt),qt(x,"width",C.imageWidth),qt(x,"height",C.imageHeight),x.className=z.image,Je(x,C,"image")})(0,C),((I,C)=>{const x=ce();Ln(x,C.title||C.titleText,"block"),C.title&&O(C.title,x),C.titleText&&(x.innerText=C.titleText),Je(x,C,"title")})(0,C),((I,C)=>{const x=En();yn(x,C.closeButtonHtml),Je(x,C,"closeButton"),Ln(x,C.showCloseButton),x.setAttribute("aria-label",C.closeButtonAriaLabel)})(0,C),Fl(I,C),At(0,C),((I,C)=>{const x=bt();Ln(x,C.footer),C.footer&&O(C.footer,x),Je(x,C,"footer")})(0,C),"function"==typeof C.didRender&&C.didRender(it())},kn=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),us=()=>{B(document.body.children).forEach(C=>{C.hasAttribute("data-previous-aria-hidden")?(C.setAttribute("aria-hidden",C.getAttribute("data-previous-aria-hidden")),C.removeAttribute("data-previous-aria-hidden")):C.removeAttribute("aria-hidden")})},ri=["swal-title","swal-html","swal-footer"],hu=I=>{const C={};return B(I.querySelectorAll("swal-param")).forEach(x=>{Br(x,["name","value"]);const j=x.getAttribute("name"),ye=x.getAttribute("value");"boolean"==typeof Q[j]&&"false"===ye&&(C[j]=!1),"object"==typeof Q[j]&&(C[j]=JSON.parse(ye))}),C},gn=I=>{const C={};return B(I.querySelectorAll("swal-button")).forEach(x=>{Br(x,["type","color","aria-label"]);const j=x.getAttribute("type");C["".concat(j,"ButtonText")]=x.innerHTML,C["show".concat(d(j),"Button")]=!0,x.hasAttribute("color")&&(C["".concat(j,"ButtonColor")]=x.getAttribute("color")),x.hasAttribute("aria-label")&&(C["".concat(j,"ButtonAriaLabel")]=x.getAttribute("aria-label"))}),C},ii=I=>{const C={},x=I.querySelector("swal-image");return x&&(Br(x,["src","width","height","alt"]),x.hasAttribute("src")&&(C.imageUrl=x.getAttribute("src")),x.hasAttribute("width")&&(C.imageWidth=x.getAttribute("width")),x.hasAttribute("height")&&(C.imageHeight=x.getAttribute("height")),x.hasAttribute("alt")&&(C.imageAlt=x.getAttribute("alt"))),C},fu=I=>{const C={},x=I.querySelector("swal-icon");return x&&(Br(x,["type","color"]),x.hasAttribute("type")&&(C.icon=x.getAttribute("type")),x.hasAttribute("color")&&(C.iconColor=x.getAttribute("color")),C.iconHtml=x.innerHTML),C},ha=I=>{const C={},x=I.querySelector("swal-input");x&&(Br(x,["type","label","placeholder","value"]),C.input=x.getAttribute("type")||"text",x.hasAttribute("label")&&(C.inputLabel=x.getAttribute("label")),x.hasAttribute("placeholder")&&(C.inputPlaceholder=x.getAttribute("placeholder")),x.hasAttribute("value")&&(C.inputValue=x.getAttribute("value")));const j=I.querySelectorAll("swal-input-option");return j.length&&(C.inputOptions={},B(j).forEach(ye=>{Br(ye,["value"]);const ft=ye.getAttribute("value");C.inputOptions[ft]=ye.innerHTML})),C},Ks=(I,C)=>{const x={};for(const j in C){const ye=C[j],ft=I.querySelector(ye);ft&&(Br(ft,[]),x[ye.replace(/^swal-/,"")]=ft.innerHTML.trim())}return x},Ys=I=>{const C=ri.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);B(I.children).forEach(x=>{const j=x.tagName.toLowerCase();-1===C.indexOf(j)&&F("Unrecognized element <".concat(j,">"))})},Br=(I,C)=>{B(I.attributes).forEach(x=>{-1===C.indexOf(x.name)&&F(['Unrecognized attribute "'.concat(x.name,'" on <').concat(I.tagName.toLowerCase(),">."),"".concat(C.length?"Allowed attributes are: ".concat(C.join(", ")):"To set the value, use HTML within the element.")])})};var er={email:(I,C)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(I)?Promise.resolve():Promise.resolve(C||"Invalid email address"),url:(I,C)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(I)?Promise.resolve():Promise.resolve(C||"Invalid URL")};function gi(I){(function Of(I){I.inputValidator||Object.keys(er).forEach(C=>{I.input===C&&(I.inputValidator=er[C])})})(I),I.showLoaderOnConfirm&&!I.preConfirm&&F("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function xr(I){(!I.target||"string"==typeof I.target&&!document.querySelector(I.target)||"string"!=typeof I.target&&!I.target.appendChild)&&(F('Target parameter is not valid, defaulting to "body"'),I.target="body")}(I),"string"==typeof I.title&&(I.title=I.title.split("\n").join("<br />")),N(I)}class So{constructor(C,x){this.callback=C,this.remaining=x,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(C){const x=this.running;return x&&this.stop(),this.remaining+=C,x&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Ao=()=>{null===ur.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(ur.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(ur.previousBodyPadding+(()=>{const I=document.createElement("div");I.className=z["scrollbar-measure"],document.body.appendChild(I);const C=I.getBoundingClientRect().width-I.clientWidth;return document.body.removeChild(I),C})(),"px"))},Qs=()=>{null!==ur.previousBodyPadding&&(document.body.style.paddingRight="".concat(ur.previousBodyPadding,"px"),ur.previousBodyPadding=null)},$i=()=>{const I=navigator.userAgent,C=!!I.match(/iPad/i)||!!I.match(/iPhone/i),x=!!I.match(/WebKit/i);C&&x&&!I.match(/CriOS/i)&&it().scrollHeight>window.innerHeight-44&&(He().style.paddingBottom="".concat(44,"px"))},Ll=()=>{const I=He();let C;I.ontouchstart=x=>{C=xd(x)},I.ontouchmove=x=>{C&&(x.preventDefault(),x.stopPropagation())}},xd=I=>{const C=I.target,x=He();return!(Ai(I)||Ff(I)||C!==x&&(lr(x)||"INPUT"===C.tagName||"TEXTAREA"===C.tagName||lr(le())&&le().contains(C)))},Ai=I=>I.touches&&I.touches.length&&"stylus"===I.touches[0].touchType,Ff=I=>I.touches&&I.touches.length>1,Vl=()=>{if(Sr(document.body,z.iosfix)){const I=parseInt(document.body.style.top,10);_n(document.body,z.iosfix),document.body.style.top="",document.body.scrollTop=-1*I}},Bl=I=>{const C=He(),x=it();"function"==typeof I.willOpen&&I.willOpen(x);const ye=window.getComputedStyle(document.body).overflowY;Hl(C,x,I),setTimeout(()=>{jl(C,x)},10),Nn()&&($l(C,I.scrollbarPadding,ye),B(document.body.children).forEach(C=>{C===He()||C.contains(He())||(C.hasAttribute("aria-hidden")&&C.setAttribute("data-previous-aria-hidden",C.getAttribute("aria-hidden")),C.setAttribute("aria-hidden","true"))})),!yr()&&!ze.previousActiveElement&&(ze.previousActiveElement=document.activeElement),"function"==typeof I.didOpen&&setTimeout(()=>I.didOpen(x)),_n(C,z["no-transition"])},Md=I=>{const C=it();if(I.target!==C)return;const x=He();C.removeEventListener(he,Md),x.style.overflowY="auto"},jl=(I,C)=>{he&&Jn(C)?(I.style.overflowY="hidden",C.addEventListener(he,Md)):I.style.overflowY="auto"},$l=(I,C,x)=>{(()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!Sr(document.body,z.iosfix)){const C=document.body.scrollTop;document.body.style.top="".concat(-1*C,"px"),Pt(document.body,z.iosfix),Ll(),$i()}})(),C&&"hidden"!==x&&Ao(),setTimeout(()=>{I.scrollTop=0})},Hl=(I,C,x)=>{Pt(I,x.showClass.backdrop),C.style.setProperty("opacity","0","important"),Ke(C,"grid"),setTimeout(()=>{Pt(C,x.showClass.popup),C.style.removeProperty("opacity")},10),Pt([document.documentElement,document.body],z.shown),x.heightAuto&&x.backdrop&&!x.toast&&Pt([document.documentElement,document.body],z["height-auto"])},Js=I=>{let C=it();C||new Pi,C=it();const x=Tt();yr()?dt(ot()):xo(C,I),Ke(x),C.setAttribute("data-loading",!0),C.setAttribute("aria-busy",!0),C.focus()},xo=(I,C)=>{const x=zt(),j=Tt();!C&&sn(xe())&&(C=xe()),Ke(x),C&&(dt(C),j.setAttribute("data-button-to-replace",C.className)),j.parentNode.insertBefore(j,C),Pt([I,x],z.loading)},Xs=I=>I.checked?1:0,Rd=I=>I.checked?I.value:null,zl=I=>I.files.length?null!==I.getAttribute("multiple")?I.files:I.files[0]:null,Es=(I,C)=>{const x=it(),j=ye=>xi[C.input](x,Gl(ye),C);Oe(C.inputOptions)||q(C.inputOptions)?(Js(xe()),G(C.inputOptions).then(ye=>{I.hideLoading(),j(ye)})):"object"==typeof C.inputOptions?j(C.inputOptions):ae("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof C.inputOptions))},eo=(I,C)=>{const x=I.getInput();dt(x),G(C.inputValue).then(j=>{x.value="number"===C.input?parseFloat(j)||0:"".concat(j),Ke(x),x.focus(),I.hideLoading()}).catch(j=>{ae("Error in inputValue promise: ".concat(j)),x.value="",Ke(x),x.focus(),I.hideLoading()})},xi={select:(I,C,x)=>{const j=Gt(I,z.select),ye=(ft,Dn,kr)=>{const tr=document.createElement("option");tr.value=kr,yn(tr,Dn),tr.selected=pu(kr,x.inputValue),ft.appendChild(tr)};C.forEach(ft=>{const Dn=ft[0],kr=ft[1];if(Array.isArray(kr)){const tr=document.createElement("optgroup");tr.label=Dn,tr.disabled=!1,j.appendChild(tr),kr.forEach(Ss=>ye(tr,Ss[1],Ss[0]))}else ye(j,kr,Dn)}),j.focus()},radio:(I,C,x)=>{const j=Gt(I,z.radio);C.forEach(ft=>{const Dn=ft[0],kr=ft[1],tr=document.createElement("input"),Ss=document.createElement("label");tr.type="radio",tr.name=z.radio,tr.value=Dn,pu(Dn,x.inputValue)&&(tr.checked=!0);const cs=document.createElement("span");yn(cs,kr),cs.className=z.label,Ss.appendChild(tr),Ss.appendChild(cs),j.appendChild(Ss)});const ye=j.querySelectorAll("input");ye.length&&ye[0].focus()}},Gl=I=>{const C=[];return typeof Map<"u"&&I instanceof Map?I.forEach((x,j)=>{let ye=x;"object"==typeof ye&&(ye=Gl(ye)),C.push([j,ye])}):Object.keys(I).forEach(x=>{let j=I[x];"object"==typeof j&&(j=Gl(j)),C.push([x,j])}),C},pu=(I,C)=>C&&C.toString()===I.toString();function gu(){const I=X.innerParams.get(this);if(!I)return;const C=X.domCache.get(this);dt(C.loader),yr()?I.icon&&Ke(ot()):kd(C),_n([C.popup,C.actions],z.loading),C.popup.removeAttribute("aria-busy"),C.popup.removeAttribute("data-loading"),C.confirmButton.disabled=!1,C.denyButton.disabled=!1,C.cancelButton.disabled=!1}const kd=I=>{const C=I.popup.getElementsByClassName(I.loader.getAttribute("data-button-to-replace"));C.length?Ke(C[0],"inline-block"):!sn(xe())&&!sn(et())&&!sn(lt())&&dt(I.actions)};var to={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const mu=()=>xe()&&xe().click(),Cn=I=>{I.keydownTarget&&I.keydownHandlerAdded&&(I.keydownTarget.removeEventListener("keydown",I.keydownHandler,{capture:I.keydownListenerCapture}),I.keydownHandlerAdded=!1)},pa=(I,C,x)=>{const j=mr();if(j.length)return(C+=x)===j.length?C=0:-1===C&&(C=j.length-1),j[C].focus();it().focus()},Un=["ArrowRight","ArrowDown"],Is=["ArrowLeft","ArrowUp"],Ro=(I,C,x)=>{const j=X.innerParams.get(I);j&&(C.isComposing||229===C.keyCode||(j.stopKeydownPropagation&&C.stopPropagation(),"Enter"===C.key?dr(I,C,j):"Tab"===C.key?Nd(C,j):[...Un,...Is].includes(C.key)?ga(C.key):"Escape"===C.key&&Cs(C,j,x)))},dr=(I,C,x)=>{if(Ee(x.allowEnterKey)&&C.target&&I.getInput()&&C.target.outerHTML===I.getInput().outerHTML){if(["textarea","file"].includes(x.input))return;mu(),C.preventDefault()}},Nd=(I,C)=>{const x=I.target,j=mr();let ye=-1;for(let ft=0;ft<j.length;ft++)if(x===j[ft]){ye=ft;break}pa(0,ye,I.shiftKey?-1:1),I.stopPropagation(),I.preventDefault()},ga=I=>{if(![xe(),et(),lt()].includes(document.activeElement))return;const ye=Un.includes(I)?"nextElementSibling":"previousElementSibling";let ft=document.activeElement;for(let Dn=0;Dn<zt().children.length;Dn++){if(ft=ft[ye],!ft)return;if(sn(ft)&&ft instanceof HTMLButtonElement)break}ft instanceof HTMLButtonElement&&ft.focus()},Cs=(I,C,x)=>{Ee(C.allowEscapeKey)&&(I.preventDefault(),x(kn.esc))};function hr(I,C,x,j){yr()?va(I,j):(Vn(x).then(()=>va(I,j)),Cn(ze)),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(C.setAttribute("style","display:none !important"),C.removeAttribute("class"),C.innerHTML=""):C.remove(),Nn()&&(Qs(),Vl(),us()),function ma(){_n([document.documentElement,document.body],[z.shown,z["height-auto"],z["no-backdrop"],z["toast-shown"]])}()}function Hi(I){I=Rt(I);const C=to.swalPromiseResolve.get(this),x=zi(this);this.isAwaitingPromise()?I.isDismissed||(Gi(this),C(I)):x&&C(I)}const zi=I=>{const C=it();if(!C)return!1;const x=X.innerParams.get(I);if(!x||Sr(C,x.hideClass.popup))return!1;_n(C,x.showClass.popup),Pt(C,x.hideClass.popup);const j=He();return _n(j,x.showClass.backdrop),Pt(j,x.hideClass.backdrop),ya(I,C,x),!0};const Gi=I=>{I.isAwaitingPromise()&&(X.awaitingPromise.delete(I),X.innerParams.get(I)||I._destroy())},Rt=I=>typeof I>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},I),ya=(I,C,x)=>{const j=He(),ye=he&&Jn(C);"function"==typeof x.willClose&&x.willClose(C),ye?Vf(I,C,j,x.returnFocus,x.didClose):hr(I,j,x.returnFocus,x.didClose)},Vf=(I,C,x,j,ye)=>{ze.swalCloseEventFinishedCallback=hr.bind(null,I,x,j,ye),C.addEventListener(he,function(ft){ft.target===C&&(ze.swalCloseEventFinishedCallback(),delete ze.swalCloseEventFinishedCallback)})},va=(I,C)=>{setTimeout(()=>{"function"==typeof C&&C.bind(I.params)(),I._destroy()})};function _u(I,C,x){const j=X.domCache.get(I);C.forEach(ye=>{j[ye].disabled=x})}function _a(I,C){if(!I)return!1;if("radio"===I.type){const j=I.parentNode.parentNode.querySelectorAll("input");for(let ye=0;ye<j.length;ye++)j[ye].disabled=C}else I.disabled=C}const Fd=I=>{const C={};return Object.keys(I).forEach(x=>{se(x)?C[x]=I[x]:F('Invalid parameter to update: "'.concat(x,'". Updatable params are listed here: https://github.com/sweetalert2/sweetalert2/blob/master/src/utils/params.js\n\nIf you think this parameter should be updatable, request it here: https://github.com/sweetalert2/sweetalert2/issues/new?template=02_feature_request.md'))}),C};const Mi=I=>{ko(I),delete I.params,delete ze.keydownHandler,delete ze.keydownTarget,delete ze.currentInstance},ko=I=>{I.isAwaitingPromise()?(wa(X,I),X.awaitingPromise.set(I,!0)):(wa(to,I),wa(X,I))},wa=(I,C)=>{for(const x in I)I[x].delete(C)};var bu=Object.freeze({hideLoading:gu,disableLoading:gu,getInput:function bs(I){const C=X.innerParams.get(I||this),x=X.domCache.get(I||this);return x?bn(x.popup,C.input):null},close:Hi,isAwaitingPromise:function ql(){return!!X.awaitingPromise.get(this)},rejectPromise:function vu(I){const C=to.swalPromiseReject.get(this);Gi(this),C&&C(I)},handleAwaitingPromise:Gi,closePopup:Hi,closeModal:Hi,closeToast:Hi,enableButtons:function Wl(){_u(this,["confirmButton","denyButton","cancelButton"],!1)},disableButtons:function Zl(){_u(this,["confirmButton","denyButton","cancelButton"],!0)},enableInput:function Od(){return _a(this.getInput(),!1)},disableInput:function de(){return _a(this.getInput(),!0)},showValidationMessage:function Jt(I){const C=X.domCache.get(this),x=X.innerParams.get(this);yn(C.validationMessage,I),C.validationMessage.className=z["validation-message"],x.customClass&&x.customClass.validationMessage&&Pt(C.validationMessage,x.customClass.validationMessage),Ke(C.validationMessage);const j=this.getInput();j&&(j.setAttribute("aria-invalid",!0),j.setAttribute("aria-describedby",z["validation-message"]),fi(j),Pt(j,z.inputerror))},resetValidationMessage:function wu(){const I=X.domCache.get(this);I.validationMessage&&dt(I.validationMessage);const C=this.getInput();C&&(C.removeAttribute("aria-invalid"),C.removeAttribute("aria-describedby"),_n(C,z.inputerror))},getProgressSteps:function Eu(){return X.domCache.get(this).progressSteps},update:function Fn(I){const C=it(),x=X.innerParams.get(this);if(!C||Sr(C,x.hideClass.popup))return F("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const j=Fd(I),ye=Object.assign({},x,j);ji(this,ye),X.innerParams.set(this,ye),Object.defineProperties(this,{params:{value:Object.assign({},this.params,I),writable:!1,enumerable:!0}})},_destroy:function no(){const I=X.domCache.get(this),C=X.innerParams.get(this);C?(I.popup&&ze.swalCloseEventFinishedCallback&&(ze.swalCloseEventFinishedCallback(),delete ze.swalCloseEventFinishedCallback),ze.deferDisposalTimer&&(clearTimeout(ze.deferDisposalTimer),delete ze.deferDisposalTimer),"function"==typeof C.didDestroy&&C.didDestroy(),Mi(this)):ko(this)}});const jr=(I,C)=>{const x=X.innerParams.get(I);if(!x.input)return ae('The "input" parameter is needed to be set when using returnInputValueOn'.concat(d(C)));const j=((I,C)=>{const x=I.getInput();if(!x)return null;switch(C.input){case"checkbox":return Xs(x);case"radio":return Rd(x);case"file":return zl(x);default:return C.inputAutoTrim?x.value.trim():x.value}})(I,x);x.inputValidator?ro(I,j,C):I.getInput().checkValidity()?"deny"===C?qi(I,j):Ds(I,j):(I.enableButtons(),I.showValidationMessage(x.validationMessage))},ro=(I,C,x)=>{const j=X.innerParams.get(I);I.disableInput(),Promise.resolve().then(()=>G(j.inputValidator(C,j.validationMessage))).then(ft=>{I.enableButtons(),I.enableInput(),ft?I.showValidationMessage(ft):"deny"===x?qi(I,C):Ds(I,C)})},qi=(I,C)=>{const x=X.innerParams.get(I||void 0);x.showLoaderOnDeny&&Js(et()),x.preDeny?(X.awaitingPromise.set(I||void 0,!0),Promise.resolve().then(()=>G(x.preDeny(C,x.validationMessage))).then(ye=>{!1===ye?(I.hideLoading(),Gi(I)):I.closePopup({isDenied:!0,value:typeof ye>"u"?C:ye})}).catch(ye=>Iu(I||void 0,ye))):I.closePopup({isDenied:!0,value:C})},Wi=(I,C)=>{I.closePopup({isConfirmed:!0,value:C})},Iu=(I,C)=>{I.rejectPromise(C)},Ds=(I,C)=>{const x=X.innerParams.get(I||void 0);x.showLoaderOnConfirm&&Js(),x.preConfirm?(I.resetValidationMessage(),X.awaitingPromise.set(I||void 0,!0),Promise.resolve().then(()=>G(x.preConfirm(C,x.validationMessage))).then(ye=>{sn(Ue())||!1===ye?(I.hideLoading(),Gi(I)):Wi(I,typeof ye>"u"?C:ye)}).catch(ye=>Iu(I||void 0,ye))):Wi(I,C)},Bf=(I,C,x)=>{C.popup.onclick=()=>{const j=X.innerParams.get(I);j&&(No(j)||j.timer||j.input)||x(kn.close)}},No=I=>I.showConfirmButton||I.showDenyButton||I.showCancelButton||I.showCloseButton;let Ts=!1;const Cu=I=>{I.popup.onmousedown=()=>{I.container.onmouseup=function(C){I.container.onmouseup=void 0,C.target===I.container&&(Ts=!0)}}},Yl=I=>{I.container.onmousedown=()=>{I.popup.onmouseup=function(C){I.popup.onmouseup=void 0,(C.target===I.popup||I.popup.contains(C.target))&&(Ts=!0)}}},Ql=(I,C,x)=>{C.container.onclick=j=>{const ye=X.innerParams.get(I);Ts?Ts=!1:j.target===C.container&&Ee(ye.allowOutsideClick)&&x(kn.backdrop)}},Oo=I=>I instanceof Element||(I=>"object"==typeof I&&I.jquery)(I);const Su=()=>{if(ze.timeout)return(()=>{const I=Bt(),C=parseInt(window.getComputedStyle(I).width);I.style.removeProperty("transition"),I.style.width="100%";const j=C/parseInt(window.getComputedStyle(I).width)*100;I.style.removeProperty("transition"),I.style.width="".concat(j,"%")})(),ze.timeout.stop()},ba=()=>{if(ze.timeout){const I=ze.timeout.start();return jt(I),I}};let vn=!1;const Jl={};const Bd=I=>{for(let C=I.target;C&&C!==document;C=C.parentNode)for(const x in Jl){const j=C.getAttribute(x);if(j)return void Jl[x].fire({template:j})}};var $f=Object.freeze({isValidParameter:rt,isUpdatableParameter:se,isDeprecatedParameter:Pe,argsToParams:I=>{const C={};return"object"!=typeof I[0]||Oo(I[0])?["title","html","icon"].forEach((x,j)=>{const ye=I[j];"string"==typeof ye||Oo(ye)?C[x]=ye:void 0!==ye&&ae("Unexpected type of ".concat(x,'! Expected "string" or "Element", got ').concat(typeof ye))}):Object.assign(C,I[0]),C},isVisible:()=>sn(it()),clickConfirm:mu,clickDeny:()=>et()&&et().click(),clickCancel:()=>lt()&&lt().click(),getContainer:He,getPopup:it,getTitle:ce,getHtmlContainer:le,getImage:me,getIcon:ot,getInputLabel:()=>qe(z["input-label"]),getCloseButton:En,getActions:zt,getConfirmButton:xe,getDenyButton:et,getCancelButton:lt,getLoader:Tt,getFooter:bt,getTimerProgressBar:Bt,getFocusableElements:mr,getValidationMessage:Ue,isLoading:()=>it().hasAttribute("data-loading"),fire:function Du(){for(var C=arguments.length,x=new Array(C),j=0;j<C;j++)x[j]=arguments[j];return new this(...x)},mixin:function Ud(I){return class C extends(this){_main(j,ye){return super._main(j,Object.assign({},I,ye))}}},showLoading:Js,enableLoading:Js,getTimerLeft:()=>ze.timeout&&ze.timeout.getTimerLeft(),stopTimer:Su,resumeTimer:ba,toggleTimer:()=>{const I=ze.timeout;return I&&(I.running?Su():ba())},increaseTimer:I=>{if(ze.timeout){const C=ze.timeout.increase(I);return jt(C,!0),C}},isTimerRunning:()=>ze.timeout&&ze.timeout.isRunning(),bindClickHandler:function Fo(){Jl[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,vn||(document.body.addEventListener("click",Bd),vn=!0)}});let Xl;class Lo{constructor(){if(typeof window>"u")return;Xl=this;for(var C=arguments.length,x=new Array(C),j=0;j<C;j++)x[j]=arguments[j];const ye=Object.freeze(this.constructor.argsToParams(x));Object.defineProperties(this,{params:{value:ye,writable:!1,enumerable:!0,configurable:!0}});const ft=this._main(this.params);X.promise.set(this,ft)}_main(C){let x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(I=>{!I.backdrop&&I.allowOutsideClick&&F('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const C in I)De(C),I.toast&&$e(C),Ie(C)})(Object.assign({},x,C)),ze.currentInstance&&(ze.currentInstance._destroy(),Nn()&&us()),ze.currentInstance=this;const j=xu(C,x);gi(j),Object.freeze(j),ze.timeout&&(ze.timeout.stop(),delete ze.timeout),clearTimeout(ze.restoreFocusTimeout);const ye=ec(this);return ji(this,j),X.innerParams.set(this,j),Au(this,ye,j)}then(C){return X.promise.get(this).then(C)}finally(C){return X.promise.get(this).finally(C)}}const Au=(I,C,x)=>new Promise((j,ye)=>{const ft=Dn=>{I.closePopup({isDismissed:!0,dismiss:Dn})};to.swalPromiseResolve.set(I,j),to.swalPromiseReject.set(I,ye),C.confirmButton.onclick=()=>(I=>{const C=X.innerParams.get(I);I.disableButtons(),C.input?jr(I,"confirm"):Ds(I,!0)})(I),C.denyButton.onclick=()=>(I=>{const C=X.innerParams.get(I);I.disableButtons(),C.returnInputValueOnDeny?jr(I,"deny"):qi(I,!1)})(I),C.cancelButton.onclick=()=>((I,C)=>{I.disableButtons(),C(kn.cancel)})(I,ft),C.closeButton.onclick=()=>ft(kn.close),((I,C,x)=>{X.innerParams.get(I).toast?Bf(I,C,x):(Cu(C),Yl(C),Ql(I,C,x))})(I,C,ft),((I,C,x,j)=>{Cn(C),x.toast||(C.keydownHandler=ye=>Ro(I,ye,j),C.keydownTarget=x.keydownListenerCapture?window:it(),C.keydownListenerCapture=x.keydownListenerCapture,C.keydownTarget.addEventListener("keydown",C.keydownHandler,{capture:C.keydownListenerCapture}),C.keydownHandlerAdded=!0)})(I,ze,x,ft),((I,C)=>{"select"===C.input||"radio"===C.input?Es(I,C):["text","email","number","tel","textarea"].includes(C.input)&&(Oe(C.inputValue)||q(C.inputValue))&&(Js(xe()),eo(I,C))})(I,x),Bl(x),tc(ze,x,ft),Ia(C,x),setTimeout(()=>{C.container.scrollTop=0})}),xu=(I,C)=>{const x=(I=>{const C="string"==typeof I.template?document.querySelector(I.template):I.template;if(!C)return{};const x=C.content;return Ys(x),Object.assign(hu(x),gn(x),ii(x),fu(x),ha(x),Ks(x,ri))})(I),j=Object.assign({},Q,C,x,I);return j.showClass=Object.assign({},Q.showClass,j.showClass),j.hideClass=Object.assign({},Q.hideClass,j.hideClass),j},ec=I=>{const C={popup:it(),container:He(),actions:zt(),confirmButton:xe(),denyButton:et(),cancelButton:lt(),loader:Tt(),closeButton:En(),validationMessage:Ue(),progressSteps:we()};return X.domCache.set(I,C),C},tc=(I,C,x)=>{const j=Bt();dt(j),C.timer&&(I.timeout=new So(()=>{x("timer"),delete I.timeout},C.timer),C.timerProgressBar&&(Ke(j),Je(j,C,"timerProgressBar"),setTimeout(()=>{I.timeout&&I.timeout.running&&jt(C.timer)})))},Ia=(I,C)=>{if(!C.toast){if(!Ee(C.allowEnterKey))return Uo();Vo(I,C)||pa(0,-1,1)}},Vo=(I,C)=>C.focusDeny&&sn(I.denyButton)?(I.denyButton.focus(),!0):C.focusCancel&&sn(I.cancelButton)?(I.cancelButton.focus(),!0):!(!C.focusConfirm||!sn(I.confirmButton)||(I.confirmButton.focus(),0)),Uo=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};Object.assign(Lo.prototype,bu),Object.assign(Lo,$f),Object.keys(bu).forEach(I=>{Lo[I]=function(){if(Xl)return Xl[I](...arguments)}}),Lo.DismissReason=kn,Lo.version="11.4.8";const Pi=Lo;return Pi.default=Pi,Pi}(),typeof this<"u"&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),typeof document<"u"&&function(Se,V){var d=Se.createElement("style");if(Se.getElementsByTagName("head")[0].appendChild(d),d.styleSheet)d.styleSheet.disabled||(d.styleSheet.cssText=V);else try{d.innerHTML=V}catch{d.innerText=V}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4!important;grid-row:1/4!important;grid-template-columns:1fr 99fr 1fr;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:700}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.8em;left:-.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-toast-animate-success-line-tip .75s;animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-toast-animate-success-line-long .75s;animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{-webkit-animation:swal2-toast-show .5s;animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{-webkit-animation:swal2-toast-hide .1s forwards;animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(-webkit-min-content,auto) minmax(-webkit-min-content,auto) minmax(-webkit-min-content,auto);grid-template-rows:minmax(min-content,auto) minmax(min-content,auto) minmax(min-content,auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:0 0!important}.swal2-container.swal2-bottom-start,.swal2-container.swal2-center-start,.swal2-container.swal2-top-start{grid-template-columns:minmax(0,1fr) auto auto}.swal2-container.swal2-bottom,.swal2-container.swal2-center,.swal2-container.swal2-top{grid-template-columns:auto minmax(0,1fr) auto}.swal2-container.swal2-bottom-end,.swal2-container.swal2-center-end,.swal2-container.swal2-top-end{grid-template-columns:auto auto minmax(0,1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-left>.swal2-popup,.swal2-container.swal2-center-start>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-left>.swal2-popup,.swal2-container.swal2-bottom-start>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-fullscreen>.swal2-popup,.swal2-container.swal2-grow-row>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none!important}.swal2-popup{display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0,100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:0}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0,0,0,.1),rgba(0,0,0,.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;-webkit-animation:swal2-rotate-loading 1.5s linear 0s infinite normal;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 transparent #2778c4 transparent}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px transparent;font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:0}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto!important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:0 0;color:#ccc;font-family:serif;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:0 0;color:#f27474}.swal2-close:focus{outline:0;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:400;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-checkbox,.swal2-file,.swal2-input,.swal2-radio,.swal2-select,.swal2-textarea{margin:1em 2em 3px}.swal2-file,.swal2-input,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:inherit;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px transparent;color:inherit;font-size:1.125em}.swal2-file.swal2-inputerror,.swal2-input.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474!important;box-shadow:0 0 2px #f27474!important}.swal2-file:focus,.swal2-input:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:0;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-file::-moz-placeholder,.swal2-input::-moz-placeholder,.swal2-textarea::-moz-placeholder{color:#ccc}.swal2-file:-ms-input-placeholder,.swal2-input:-ms-input-placeholder,.swal2-textarea:-ms-input-placeholder{color:#ccc}.swal2-file::placeholder,.swal2-input::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 3px;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:inherit;font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:inherit;color:inherit;font-size:1.125em}.swal2-checkbox,.swal2-radio{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-checkbox label,.swal2-radio label{margin:0 .6em;font-size:1.125em}.swal2-checkbox input,.swal2-radio input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid transparent;border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{-webkit-animation:swal2-animate-error-x-mark .5s;animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-warning.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-warning.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-i-mark .5s;animation:swal2-animate-i-mark .5s}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-info.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-info.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-i-mark .8s;animation:swal2-animate-i-mark .8s}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-question.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-question.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-question-mark .8s;animation:swal2-animate-question-mark .8s}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-.25em;left:-.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-animate-success-line-tip .75s;animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-animate-success-line-long .75s;animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{-webkit-animation:swal2-rotate-success-circular-line 4.25s ease-in;animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:inherit;font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:transparent}.swal2-show{-webkit-animation:swal2-show .3s;animation:swal2-show .3s}.swal2-hide{-webkit-animation:swal2-hide .15s forwards;animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@-webkit-keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@-webkit-keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@-webkit-keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@-webkit-keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@-webkit-keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@-webkit-keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@-webkit-keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@-webkit-keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@-webkit-keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@-webkit-keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@-webkit-keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@-webkit-keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@-webkit-keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@-webkit-keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto!important}body.swal2-no-backdrop .swal2-container{background-color:transparent!important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll!important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static!important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:transparent;pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-left,body.swal2-toast-shown .swal2-container.swal2-top-start{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-left,body.swal2-toast-shown .swal2-container.swal2-center-start{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%,-50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-left,body.swal2-toast-shown .swal2-container.swal2-bottom-start{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}')},655:(Dt,Se,V)=>{"use strict";function ae(ce,le){var me={};for(var we in ce)Object.prototype.hasOwnProperty.call(ce,we)&&le.indexOf(we)<0&&(me[we]=ce[we]);if(null!=ce&&"function"==typeof Object.getOwnPropertySymbols){var Ue=0;for(we=Object.getOwnPropertySymbols(ce);Ue<we.length;Ue++)le.indexOf(we[Ue])<0&&Object.prototype.propertyIsEnumerable.call(ce,we[Ue])&&(me[we[Ue]]=ce[we[Ue]])}return me}function Q(ce,le,me,we){return new(me||(me=Promise))(function(xe,et){function Be(zt){try{lt(we.next(zt))}catch(bt){et(bt)}}function Tt(zt){try{lt(we.throw(zt))}catch(bt){et(bt)}}function lt(zt){zt.done?xe(zt.value):function Ue(xe){return xe instanceof me?xe:new me(function(et){et(xe)})}(zt.value).then(Be,Tt)}lt((we=we.apply(ce,le||[])).next())})}function Ie(ce){return this instanceof Ie?(this.v=ce,this):new Ie(ce)}function ge(ce,le,me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ue,we=me.apply(ce,le||[]),xe=[];return Ue={},et("next"),et("throw"),et("return"),Ue[Symbol.asyncIterator]=function(){return this},Ue;function et(Bt){we[Bt]&&(Ue[Bt]=function(En){return new Promise(function(xn,mr){xe.push([Bt,En,xn,mr])>1||Be(Bt,En)})})}function Be(Bt,En){try{!function Tt(Bt){Bt.value instanceof Ie?Promise.resolve(Bt.value.v).then(lt,zt):bt(xe[0][2],Bt)}(we[Bt](En))}catch(xn){bt(xe[0][3],xn)}}function lt(Bt){Be("next",Bt)}function zt(Bt){Be("throw",Bt)}function bt(Bt,En){Bt(En),xe.shift(),xe.length&&Be(xe[0][0],xe[0][1])}}function Ve(ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,le=ce[Symbol.asyncIterator];return le?le.call(ce):(ce=function rt(ce){var le="function"==typeof Symbol&&Symbol.iterator,me=le&&ce[le],we=0;if(me)return me.call(ce);if(ce&&"number"==typeof ce.length)return{next:function(){return ce&&we>=ce.length&&(ce=void 0),{value:ce&&ce[we++],done:!ce}}};throw new TypeError(le?"Object is not iterable.":"Symbol.iterator is not defined.")}(ce),me={},we("next"),we("throw"),we("return"),me[Symbol.asyncIterator]=function(){return this},me);function we(xe){me[xe]=ce[xe]&&function(et){return new Promise(function(Be,Tt){!function Ue(xe,et,Be,Tt){Promise.resolve(Tt).then(function(lt){xe({value:lt,done:Be})},et)}(Be,Tt,(et=ce[xe](et)).done,et.value)})}}}V.d(Se,{FC:()=>ge,KL:()=>Ve,_T:()=>ae,mG:()=>Q,qq:()=>Ie})},4650:(Dt,Se,V)=>{"use strict";V.d(Se,{$8M:()=>Lu,$WT:()=>cr,$Z:()=>O0,AFp:()=>vg,AaK:()=>Ee,AsE:()=>Wh,CHM:()=>wu,CRH:()=>lg,CZH:()=>yg,CqO:()=>dE,D6c:()=>FR,EJc:()=>cA,EpF:()=>Ly,F4k:()=>cE,FYo:()=>ny,FiY:()=>Ho,GfV:()=>g0,Gpc:()=>q,JOm:()=>xt,KtG:()=>Eu,LFG:()=>ze,LSH:()=>zm,Lbi:()=>qb,Lck:()=>ob,MMx:()=>xv,MR2:()=>MD,NdJ:()=>Bh,OlP:()=>ln,Oqu:()=>Wc,P3R:()=>o0,PXZ:()=>_A,Q6J:()=>Uh,QGY:()=>Vy,Qsj:()=>VD,R0b:()=>Ni,RDi:()=>gD,Rgc:()=>_l,SBq:()=>Rc,Sil:()=>dA,Suo:()=>JS,TTD:()=>pu,TgZ:()=>Oy,X6Q:()=>EA,XFs:()=>Je,Xpm:()=>Ft,Xts:()=>qm,Y36:()=>Lc,YKP:()=>ng,YNc:()=>Rp,Yjl:()=>Yt,Yz7:()=>bt,Z0I:()=>mr,ZZ4:()=>wI,_Bn:()=>tg,_UZ:()=>oE,_Vd:()=>Pc,_c5:()=>OR,_uU:()=>CE,aQg:()=>bI,c2e:()=>c_,cJS:()=>En,cg1:()=>UE,dDg:()=>pA,dqk:()=>Gt,eFA:()=>iI,eJc:()=>Yv,ekj:()=>Gy,eoX:()=>Cg,f3M:()=>Vn,g9A:()=>_g,h0i:()=>ed,hGG:()=>S_,hij:()=>zp,iGM:()=>bb,ifc:()=>O,ip1:()=>zb,jDz:()=>rg,kL8:()=>BE,lG2:()=>Mt,lqb:()=>Ku,lri:()=>m_,n5z:()=>Gd,oAB:()=>ne,oxw:()=>hE,q4F:()=>m0,qLn:()=>Dh,qOj:()=>gs,qZA:()=>Fy,rWj:()=>Ig,s9C:()=>Lp,sBO:()=>IA,s_b:()=>wl,soG:()=>rf,tb:()=>sf,tp0:()=>vt,uIk:()=>xy,vHH:()=>se,vpe:()=>ys,wAp:()=>kt,xp6:()=>S0,z2F:()=>Sg,zSh:()=>Wa,zs3:()=>Nc});var d=V(7579),B=V(727),F=V(9751),ae=V(6451),_e=V(3099);function pe(s){for(let o in s)if(s[o]===pe)return o;throw Error("Could not find renamed property on target object.")}function Le(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function Ee(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(Ee).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function Oe(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const G=pe({__forward_ref__:pe});function q(s){return s.__forward_ref__=q,s.toString=function(){return Ee(this())},s}function Q(s){return je(s)?s():s}function je(s){return"function"==typeof s&&s.hasOwnProperty(G)&&s.__forward_ref__===q}function ke(s){return s&&!!s.\u0275providers}const rt="https://g.co/ng/security#xss";class se extends Error{constructor(o,a){super(Pe(o,a)),this.code=o}}function Pe(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}function De(s){return"string"==typeof s?s:null==s?"":String(s)}function Ve(s,o){throw new se(-201,!1)}function et(s,o){null==s&&function Be(s,o,a,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function bt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function En(s){return{providers:s.providers||[],imports:s.imports||[]}}function xn(s){return Nn(s,ur)||Nn(s,Sr)}function mr(s){return null!==xn(s)}function Nn(s,o){return s.hasOwnProperty(o)?s[o]:null}function Xr(s){return s&&(s.hasOwnProperty(yn)||s.hasOwnProperty(On))?s[yn]:null}const ur=pe({\u0275prov:pe}),yn=pe({\u0275inj:pe}),Sr=pe({ngInjectableDef:pe}),On=pe({ngInjectorDef:pe});var Je=(()=>((Je=Je||{})[Je.Default=0]="Default",Je[Je.Host=1]="Host",Je[Je.Self=2]="Self",Je[Je.SkipSelf=4]="SkipSelf",Je[Je.Optional=8]="Optional",Je))();let bn;function Mn(s){const o=bn;return bn=s,o}function Pt(s,o,a){const c=xn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&Je.Optional?null:void 0!==o?o:void Ve(Ee(s))}const Gt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Pn={},Ln="__NG_DI_FLAG__",sn="ngTempTokenPath",Ur="ngTokenPath",lr=/\n/gm,Jn="\u0275",jt="__source";let ei;function Wt(s){const o=ei;return ei=s,o}function as(s,o=Je.Default){if(void 0===ei)throw new se(-203,!1);return null===ei?Pt(s,void 0,o):ei.get(s,o&Je.Optional?null:void 0,o)}function ze(s,o=Je.Default){return(function fi(){return bn}()||as)(Q(s),o)}function Vn(s,o=Je.Default){return ze(s,Ar(o))}function Ar(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function zn(s){const o=[];for(let a=0;a<s.length;a++){const c=Q(s[a]);if(Array.isArray(c)){if(0===c.length)throw new se(900,!1);let h,p=Je.Default;for(let y=0;y<c.length;y++){const E=c[y],D=ti(E);"number"==typeof D?-1===D?h=E.token:p|=D:h=E}o.push(ze(h,p))}else o.push(ze(c))}return o}function Gn(s,o){return s[Ln]=o,s.prototype[Ln]=o,s}function ti(s){return s[Ln]}function U(s){return{toString:s}.toString()}var N=(()=>((N=N||{})[N.OnPush=0]="OnPush",N[N.Default=1]="Default",N))(),O=(()=>{return(s=O||(O={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",O;var s})();const R={},W=[],he=pe({\u0275cmp:pe}),tt=pe({\u0275dir:pe}),At=pe({\u0275pipe:pe}),Ct=pe({\u0275mod:pe}),$t=pe({\u0275fac:pe}),St=pe({__NG_ELEMENT_ID__:pe});let wn=0;function Ft(s){return U(()=>{const o=Fl(s),a={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===N.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||O.Emulated,id:"c"+wn++,styles:s.styles||W,_:null,schemas:s.schemas||null,tView:null};Ad(a);const c=s.dependencies;return a.directiveDefs=Gs(c,!1),a.pipeDefs=Gs(c,!0),a})}function ws(s){return pt(s)||on(s)}function X(s){return null!==s}function ne(s){return U(()=>({type:s.type,bootstrap:s.bootstrap||W,declarations:s.declarations||W,imports:s.imports||W,exports:s.exports||W,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function ht(s,o){if(null==s)return R;const a={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),a[h]=c,o&&(o[h]=p)}return a}function Mt(s){return U(()=>{const o=Fl(s);return Ad(o),o})}function Yt(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function pt(s){return s[he]||null}function on(s){return s[tt]||null}function Zt(s){return s[At]||null}function cr(s){const o=pt(s)||on(s)||Zt(s);return null!==o&&o.standalone}function an(s,o){const a=s[Ct]||null;if(!a&&!0===o)throw new Error(`Type ${Ee(s)} does not have '\u0275mod' property.`);return a}function Fl(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||W,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ht(s.inputs,o),outputs:ht(s.outputs)}}function Ad(s){s.features?.forEach(o=>o(s))}function Gs(s,o){if(!s)return null;const a=o?Zt:ws;return()=>("function"==typeof s?s():s).map(c=>a(c)).filter(X)}const Xn=0,Qe=1,Vt=2,Rn=3,un=4,Si=5,_r=6,pi=7,In=8,Do=9,qs=10,Ht=11,da=12,ni=13,To=14,ji=15,kn=16,Ws=17,us=18,ri=19,Zs=20,hu=21,gn=22,fu=1,ha=2,Ks=7,Ys=8,Br=9,er=10;function xr(s){return Array.isArray(s)&&"object"==typeof s[fu]}function gi(s){return Array.isArray(s)&&!0===s[fu]}function So(s){return 0!=(4&s.flags)}function Ao(s){return s.componentOffset>-1}function Qs(s){return 1==(1&s.flags)}function Mr(s){return!!s.template}function $i(s){return 0!=(256&s[Vt])}function xi(s,o){return s.hasOwnProperty($t)?s[$t]:null}class Gl{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function pu(){return gu}function gu(s){return s.type.prototype.ngOnChanges&&(s.setInput=bs),kd}function kd(){const s=fa(this),o=s?.current;if(o){const a=s.previous;if(a===R)s.previous=o;else for(let c in o)a[c]=o[c];s.current=null,this.ngOnChanges(o)}}function bs(s,o,a,c){const h=this.declaredInputs[a],p=fa(s)||function mu(s,o){return s[to]=o}(s,{previous:R,current:null}),y=p.current||(p.current={}),E=p.previous,D=E[h];y[h]=new Gl(D&&D.currentValue,o,E===R),s[c]=o}pu.ngInherit=!0;const to="__ngSimpleChanges__";function fa(s){return s[to]||null}const Cn=function(s,o,a){};function Un(s){for(;Array.isArray(s);)s=s[Xn];return s}function Ro(s,o){return Un(o[s])}function dr(s,o){return Un(o[s.index])}function ga(s,o){return s.data[o]}function hr(s,o){const a=o[s];return xr(a)?a:a[Xn]}function Hi(s){return 64==(64&s[Vt])}function zi(s,o){return null==o?null:s[o]}function vu(s){s[us]=0}function Gi(s,o){s[Si]+=o;let a=s,c=s[Rn];for(;null!==c&&(1===o&&1===a[Si]||-1===o&&0===a[Si]);)c[Si]+=o,a=c,c=c[Rn]}const Rt={lFrame:Du(null),bindingsEnabled:!0};function Wl(){return Rt.bindingsEnabled}function de(){return Rt.lFrame.lView}function Jt(){return Rt.lFrame.tView}function wu(s){return Rt.lFrame.contextLView=s,s[In]}function Eu(s){return Rt.lFrame.contextLView=null,s}function Fn(){let s=Fd();for(;null!==s&&64===s.type;)s=s.parent;return s}function Fd(){return Rt.lFrame.currentTNode}function Mi(s,o){const a=Rt.lFrame;a.currentTNode=s,a.isParent=o}function ko(){return Rt.lFrame.isParent}function qi(){return Rt.lFrame.bindingIndex++}function Wi(s){const o=Rt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}function Uf(s,o){const a=Rt.lFrame;a.bindingIndex=a.bindingRootIndex=s,No(o)}function No(s){Rt.lFrame.currentDirectiveIndex=s}function Cu(){return Rt.lFrame.currentQueryIndex}function Yl(s){Rt.lFrame.currentQueryIndex=s}function Ql(s){const o=s[Qe];return 2===o.type?o.declTNode:1===o.type?s[_r]:null}function Ld(s,o,a){if(a&Je.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||a&Je.Host||(h=Ql(p),null===h||(p=p[ji],10&h.type))););if(null===h)return!1;o=h,s=p}const c=Rt.lFrame=Vd();return c.currentTNode=o,c.lView=s,!0}function Oo(s){const o=Vd(),a=s[Qe];Rt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Vd(){const s=Rt.lFrame,o=null===s?null:s.child;return null===o?Du(s):o}function Du(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Ud(){const s=Rt.lFrame;return Rt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Tu=Ud;function Su(){const s=Ud();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Rr(){return Rt.lFrame.selectedIndex}function ls(s){Rt.lFrame.selectedIndex=s}function vn(){const s=Rt.lFrame;return ga(s.tView,s.selectedIndex)}function Au(s,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const p=s.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:D,ngAfterViewChecked:S,ngOnDestroy:P}=p;y&&(s.contentHooks??(s.contentHooks=[])).push(-a,y),E&&((s.contentHooks??(s.contentHooks=[])).push(a,E),(s.contentCheckHooks??(s.contentCheckHooks=[])).push(a,E)),D&&(s.viewHooks??(s.viewHooks=[])).push(-a,D),S&&((s.viewHooks??(s.viewHooks=[])).push(a,S),(s.viewCheckHooks??(s.viewCheckHooks=[])).push(a,S)),null!=P&&(s.destroyHooks??(s.destroyHooks=[])).push(a,P)}}function xu(s,o,a){Ia(s,o,3,a)}function ec(s,o,a,c){(3&s[Vt])===a&&Ia(s,o,a,c)}function tc(s,o){let a=s[Vt];(3&a)===o&&(a&=2047,a+=1,s[Vt]=a)}function Ia(s,o,a,c){const p=c??-1,y=o.length-1;let E=0;for(let D=void 0!==c?65535&s[us]:0;D<y;D++)if("number"==typeof o[D+1]){if(E=o[D],null!=c&&E>=c)break}else o[D]<0&&(s[us]+=65536),(E<p||-1==p)&&(Vo(s,a,o,D),s[us]=(4294901760&s[us])+D+2),D++}function Vo(s,o,a,c){const h=a[c]<0,p=a[c+1],E=s[h?-a[c]:a[c]];if(h){if(s[Vt]>>11<s[us]>>16&&(3&s[Vt])===o){s[Vt]+=2048,Cn(4,E,p);try{p.call(E)}finally{Cn(5,E,p)}}}else{Cn(4,E,p);try{p.call(E)}finally{Cn(5,E,p)}}}const Uo=-1;class Pi{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function tr(s,o,a){let c=0;for(;c<a.length;){const h=a[c];if("number"==typeof h){if(0!==h)break;c++;const p=a[c++],y=a[c++],E=a[c++];s.setAttribute(o,y,E,p)}else{const p=h,y=a[++c];cs(p)?s.setProperty(o,p,y):s.setAttribute(o,p,y),c++}}return c}function Ss(s){return 3===s||4===s||6===s}function cs(s){return 64===s.charCodeAt(0)}function Bo(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?a=h:0===a||Ca(s,a,h,null,-1===a||2===a?o[++c]:null)}}return s}function Ca(s,o,a,c,h){let p=0,y=s.length;if(-1===o)y=-1;else for(;p<s.length;){const E=s[p++];if("number"==typeof E){if(E===o){y=-1;break}if(E>o){y=p-1;break}}}for(;p<s.length;){const E=s[p];if("number"==typeof E)break;if(E===a){if(null===c)return void(null!==h&&(s[p+1]=h));if(c===s[p+1])return void(s[p+2]=h)}p++,null!==c&&p++,null!==h&&p++}-1!==y&&(s.splice(y,0,o),p=y+1),s.splice(p++,0,a),null!==c&&s.splice(p++,0,c),null!==h&&s.splice(p++,0,h)}function Mu(s){return s!==Uo}function Pu(s){return 32767&s}function Ru(s,o){let a=function nc(s){return s>>16}(s),c=o;for(;a>0;)c=c[ji],a--;return c}let jd=!0;function ku(s){const o=jd;return jd=s,o}const gm=255,rc=5;let mm=0;const si={};function ic(s,o){const a=Hd(s,o);if(-1!==a)return a;const c=o[Qe];c.firstCreatePass&&(s.injectorIndex=o.length,io(c.data,s),io(o,null),io(c.blueprint,null));const h=Bn(s,o),p=s.injectorIndex;if(Mu(h)){const y=Pu(h),E=Ru(h,o),D=E[Qe].data;for(let S=0;S<8;S++)o[p+S]=E[y+S]|D[y+S]}return o[p+8]=h,p}function io(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Hd(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Bn(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,c=null,h=o;for(;null!==h;){if(c=Fu(h),null===c)return Uo;if(a++,h=h[ji],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return Uo}function Nu(s,o,a){!function $d(s,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(St)&&(c=a[St]),null==c&&(c=a[St]=mm++);const h=c&gm;o.data[s+(h>>rc)]|=1<<h}(s,o,a)}function Hf(s,o,a){if(a&Je.Optional||void 0!==s)return s;Ve()}function Ou(s,o,a,c){if(a&Je.Optional&&void 0===c&&(c=null),!(a&(Je.Self|Je.Host))){const h=s[Do],p=Mn(void 0);try{return h?h.get(o,c,a&Je.Optional):Pt(o,c,a&Je.Optional)}finally{Mn(p)}}return Hf(c,0,a)}function zf(s,o,a,c=Je.Default,h){if(null!==s){if(1024&o[Vt]){const y=function vm(s,o,a,c,h){let p=s,y=o;for(;null!==p&&null!==y&&1024&y[Vt]&&!(256&y[Vt]);){const E=Gf(p,y,a,c|Je.Self,si);if(E!==si)return E;let D=p.parent;if(!D){const S=y[hu];if(S){const P=S.get(a,si,c);if(P!==si)return P}D=Fu(y),y=y[ji]}p=D}return h}(s,o,a,c,si);if(y!==si)return y}const p=Gf(s,o,a,c,si);if(p!==si)return p}return Ou(o,a,c,h)}function Gf(s,o,a,c,h){const p=function ym(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(St)?s[St]:void 0;return"number"==typeof o?o>=0?o&gm:zd:o}(a);if("function"==typeof p){if(!Ld(o,s,c))return c&Je.Host?Hf(h,0,c):Ou(o,a,c,h);try{const y=p(c);if(null!=y||c&Je.Optional)return y;Ve()}finally{Tu()}}else if("number"==typeof p){let y=null,E=Hd(s,o),D=Uo,S=c&Je.Host?o[kn][_r]:null;for((-1===E||c&Je.SkipSelf)&&(D=-1===E?Bn(s,o):o[E+8],D!==Uo&&oc(c,!1)?(y=o[Qe],E=Pu(D),o=Ru(D,o)):E=-1);-1!==E;){const P=o[Qe];if(jo(p,E,P.data)){const L=qf(E,o,a,y,c,S);if(L!==si)return L}D=o[E+8],D!==Uo&&oc(c,o[Qe].data[E+8]===S)&&jo(p,E,o)?(y=P,E=Pu(D),o=Ru(D,o)):E=-1}}return h}function qf(s,o,a,c,h,p){const y=o[Qe],E=y.data[s+8],P=Da(E,y,a,null==c?Ao(E)&&jd:c!=y&&0!=(3&E.type),h&Je.Host&&p===E);return null!==P?As(o,y,P,E):si}function Da(s,o,a,c,h){const p=s.providerIndexes,y=o.data,E=1048575&p,D=s.directiveStart,P=p>>20,K=h?E+P:s.directiveEnd;for(let ee=c?E:E+P;ee<K;ee++){const fe=y[ee];if(ee<D&&a===fe||ee>=D&&fe.type===a)return ee}if(h){const ee=y[D];if(ee&&Mr(ee)&&ee.type===a)return D}return null}function As(s,o,a,c){let h=s[a];const p=o.data;if(function I(s){return s instanceof Pi}(h)){const y=h;y.resolving&&function Ie(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new se(-200,`Circular dependency in DI detected for ${s}${a}`)}(function $e(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():De(s)}(p[a]));const E=ku(y.canSeeViewProviders);y.resolving=!0;const D=y.injectImpl?Mn(y.injectImpl):null;Ld(s,c,Je.Default);try{h=s[a]=y.factory(void 0,p,s,c),o.firstCreatePass&&a>=c.directiveStart&&function Lo(s,o,a){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(c){const y=gu(o);(a.preOrderHooks??(a.preOrderHooks=[])).push(s,y),(a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(s,y)}h&&(a.preOrderHooks??(a.preOrderHooks=[])).push(0-s,h),p&&((a.preOrderHooks??(a.preOrderHooks=[])).push(s,p),(a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(s,p))}(a,p[a],o)}finally{null!==D&&Mn(D),ku(E),y.resolving=!1,Tu()}}return h}function jo(s,o,a){return!!(a[o+(s>>rc)]&1<<s)}function oc(s,o){return!(s&Je.Self||s&Je.Host&&o)}class Ta{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return zf(this._tNode,this._lView,o,Ar(c),a)}}function zd(){return new Ta(Fn(),de())}function Gd(s){return U(()=>{const o=s.prototype.constructor,a=o[$t]||Sa(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const p=h[$t]||Sa(h);if(p&&p!==a)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function Sa(s){return je(s)?()=>{const o=Sa(Q(s));return o&&o()}:xi(s)}function Fu(s){const o=s[Qe],a=o.type;return 2===a?o.declTNode:1===a?s[_r]:null}function Lu(s){return function sc(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const c=a.length;let h=0;for(;h<c;){const p=a[h];if(Ss(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<c&&"string"==typeof a[h];)h++;else{if(p===o)return a[h+1];h+=2}}}return null}(Fn(),s)}const Aa="__parameters__";function xa(s,o,a){return U(()=>{const c=function Wf(s){return function(...a){if(s){const c=s(...a);for(const h in c)this[h]=c[h]}}}(o);function h(...p){if(this instanceof h)return c.apply(this,p),this;const y=new h(...p);return E.annotation=y,E;function E(D,S,P){const L=D.hasOwnProperty(Aa)?D[Aa]:Object.defineProperty(D,Aa,{value:[]})[Aa];for(;L.length<=P;)L.push(null);return(L[P]=L[P]||[]).push(y),D}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class ln{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=bt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ma(s,o){s.forEach(a=>Array.isArray(a)?Ma(a,o):o(a))}function Zd(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function Kd(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Ri(s,o,a){let c=Zi(s,o);return c>=0?s[1|c]=a:(c=~c,function Yd(s,o,a,c){let h=s.length;if(h==o)s.push(a,c);else if(1===h)s.push(c,s[0]),s[0]=a;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=a,s[o+1]=c}}(s,c,o,a)),c}function mn(s,o){const a=Zi(s,o);if(a>=0)return s[1|a]}function Zi(s,o){return function Ki(s,o,a){let c=0,h=s.length>>a;for(;h!==c;){const p=c+(h-c>>1),y=s[p<<a];if(o===y)return p<<a;y>o?h=p:c=p+1}return~(h<<a)}(s,o,1)}const Ho=Gn(xa("Optional"),8),vt=Gn(xa("SkipSelf"),4);var xt=(()=>((xt=xt||{})[xt.Important=1]="Important",xt[xt.DashCase=2]="DashCase",xt))();const nh=new Map;let hs=0;const yc="__ngContext__";function Er(s,o){xr(o)?(s[yc]=o[Zs],function sp(s){nh.set(s[Zs],s)}(o)):s[yc]=o}let oh;function Ps(s,o){return oh(s,o)}function vc(s){const o=s[Rn];return gi(o)?o[Rn]:o}function Wo(s){return uh(s[ni])}function Zo(s){return uh(s[un])}function uh(s){for(;null!==s&&!gi(s);)s=s[un];return s}function lo(s,o,a,c,h){if(null!=c){let p,y=!1;gi(c)?p=c:xr(c)&&(y=!0,c=c[Xn]);const E=Un(c);0===s&&null!==a?null==h?Hr(o,a,E):Ut(o,a,E,h||null,!0):1===s&&null!==a?Ut(o,a,E,h||null,!0):2===s?function Rm(s,o,a){const c=Ji(s,o);c&&function co(s,o,a,c){s.removeChild(o,a,c)}(s,c,o,a)}(o,E,y):3===s&&o.destroyNode(E),null!=p&&function ph(s,o,a,c,h){const p=a[Ks];p!==Un(a)&&lo(o,s,c,p,h);for(let E=er;E<a.length;E++){const D=a[E];fh(D[Qe],D,s,o,c,p)}}(o,s,p,a,h)}}function ch(s,o,a){return s.createElement(o,a)}function w(s,o){const a=s[Br],c=a.indexOf(o),h=o[Rn];512&o[Vt]&&(o[Vt]&=-513,Gi(h,-1)),a.splice(c,1)}function A(s,o){if(s.length<=er)return;const a=er+o,c=s[a];if(c){const h=c[Ws];null!==h&&h!==s&&w(h,c),o>0&&(s[a-1][un]=c[un]);const p=Kd(s,er+o);!function dp(s,o){fh(s,o,o[Ht],2,null,null),o[Xn]=null,o[_r]=null}(c[Qe],c);const y=p[ri];null!==y&&y.detachView(p[Qe]),c[Rn]=null,c[un]=null,c[Vt]&=-65}return c}function k(s,o){if(!(128&o[Vt])){const a=o[Ht];a.destroyNode&&fh(s,o,a,3,null,null),function _(s){let o=s[ni];if(!o)return Y(s[Qe],s);for(;o;){let a=null;if(xr(o))a=o[ni];else{const c=o[er];c&&(a=c)}if(!a){for(;o&&!o[un]&&o!==s;)xr(o)&&Y(o[Qe],o),o=o[Rn];null===o&&(o=s),xr(o)&&Y(o[Qe],o),a=o&&o[un]}o=a}}(o)}}function Y(s,o){if(!(128&o[Vt])){o[Vt]&=-65,o[Vt]|=128,function Ne(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let c=0;c<a.length;c+=2){const h=o[a[c]];if(!(h instanceof Pi)){const p=a[c+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const E=h[p[y]],D=p[y+1];Cn(4,E,D);try{D.call(E)}finally{Cn(5,E,D)}}else{Cn(4,h,p);try{p.call(h)}finally{Cn(5,h,p)}}}}}(s,o),function oe(s,o){const a=s.cleanup,c=o[pi];let h=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const y=a[p+3];y>=0?c[h=y]():c[h=-y].unsubscribe(),p+=2}else{const y=c[h=a[p+1]];a[p].call(y)}if(null!==c){for(let p=h+1;p<c.length;p++)(0,c[p])();o[pi]=null}}(s,o),1===o[Qe].type&&o[Ht].destroy();const a=o[Ws];if(null!==a&&gi(o[Rn])){a!==o[Rn]&&w(a,o);const c=o[ri];null!==c&&c.detachView(s)}!function op(s){nh.delete(s[Zs])}(o)}}function Ze(s,o,a){return function gt(s,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[Xn];{const{componentOffset:h}=c;if(h>-1){const{encapsulation:p}=s.data[c.directiveStart+h];if(p===O.None||p===O.Emulated)return null}return dr(c,a)}}(s,o.parent,a)}function Ut(s,o,a,c,h){s.insertBefore(o,a,c,h)}function Hr(s,o,a){s.appendChild(o,a)}function Rs(s,o,a,c,h){null!==c?Ut(s,o,a,c,h):Hr(s,o,a)}function Ji(s,o){return s.parentNode(o)}let Ec,Om,hp,ho=function qu(s,o,a){return 40&s.type?dr(s,a):null};function za(s,o,a,c){const h=Ze(s,c,o),p=o[Ht],E=function wc(s,o,a){return ho(s,o,a)}(c.parent||o[_r],c,o);if(null!=h)if(Array.isArray(a))for(let D=0;D<a.length;D++)Rs(p,h,a[D],E,!1);else Rs(p,h,a,E,!1);void 0!==Ec&&Ec(p,c,o,a,h)}function Ic(s,o){if(null!==o){const a=o.type;if(3&a)return dr(o,s);if(4&a)return fo(-1,s[o.index]);if(8&a){const c=o.child;if(null!==c)return Ic(s,c);{const h=s[o.index];return gi(h)?fo(-1,h):Un(h)}}if(32&a)return Ps(o,s)()||Un(s[o.index]);{const c=Ga(s,o);return null!==c?Array.isArray(c)?c[0]:Ic(vc(s[kn]),c):Ic(s,o.next)}}return null}function Ga(s,o){return null!==o?s[kn][_r].projection[o.projection]:null}function fo(s,o){const a=er+s+1;if(a<o.length){const c=o[a],h=c[Qe].firstChild;if(null!==h)return Ic(c,h)}return o[Ks]}function hh(s,o,a,c,h,p,y){for(;null!=a;){const E=c[a.index],D=a.type;if(y&&0===o&&(E&&Er(Un(E),c),a.flags|=2),32!=(32&a.flags))if(8&D)hh(s,o,a.child,c,h,p,!1),lo(o,s,h,E,p);else if(32&D){const S=Ps(a,c);let P;for(;P=S();)lo(o,s,h,P,p);lo(o,s,h,E,p)}else 16&D?km(s,o,c,a,h,p):lo(o,s,h,E,p);a=y?a.projectionNext:a.next}}function fh(s,o,a,c,h,p){hh(a,c,s.firstChild,o,h,p,!1)}function km(s,o,a,c,h,p){const y=a[kn],D=y[_r].projection[c.projection];if(Array.isArray(D))for(let S=0;S<D.length;S++)lo(o,s,h,D[S],p);else hh(s,o,D,y[Rn],h,p,!0)}function qa(s,o,a){""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a)}function gh(s,o,a){const{mergedAttrs:c,classes:h,styles:p}=a;null!==c&&tr(s,o,c),null!==h&&qa(s,o,h),null!==p&&function Nm(s,o,a){s.setAttribute(o,"style",a)}(s,o,p)}function gD(s){Om=s}function Zw(s){return function Fm(){if(void 0===hp&&(hp=null,Gt.trustedTypes))try{hp=Gt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return hp}()?.createScriptURL(s)||s}class Kw{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${rt})`}}function go(s){return s instanceof Kw?s.changingThisBreaksApplicationSecurity:s}function Xi(s,o){const a=function Dc(s){return s instanceof Kw&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${rt})`)}return a===o}const Xw=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var nr=(()=>((nr=nr||{})[nr.NONE=0]="NONE",nr[nr.HTML=1]="HTML",nr[nr.STYLE=2]="STYLE",nr[nr.SCRIPT=3]="SCRIPT",nr[nr.URL=4]="URL",nr[nr.RESOURCE_URL=5]="RESOURCE_URL",nr))();function zm(s){const o=bh();return o?o.sanitize(nr.URL,s)||"":Xi(s,"URL")?go(s):function vh(s){return(s=String(s)).match(Xw)?s:"unsafe:"+s}(De(s))}function yp(s){const o=bh();if(o)return Zw(o.sanitize(nr.RESOURCE_URL,s)||"");if(Xi(s,"ResourceURL"))return Zw(go(s));throw new se(904,!1)}function o0(s,o,a){return function AD(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?yp:zm}(o,a)(s)}function bh(){const s=de();return s&&s[da]}const qm=new ln("ENVIRONMENT_INITIALIZER"),Zu=new ln("INJECTOR",-1),Sc=new ln("INJECTOR_DEF_TYPES");class a0{get(o,a=Pn){if(a===Pn){const c=new Error(`NullInjectorError: No provider for ${Ee(o)}!`);throw c.name="NullInjectorError",c}return a}}function MD(s){return{\u0275providers:s}}function Ih(...s){return{\u0275providers:Ac(0,s),\u0275fromNgModule:!0}}function Ac(s,...o){const a=[],c=new Set;let h;return Ma(o,p=>{const y=p;Wm(y,a,[],c)&&(h||(h=[]),h.push(y))}),void 0!==h&&u0(h,a),a}function u0(s,o){for(let a=0;a<s.length;a++){const{providers:h}=s[a];Zm(h,p=>{o.push(p)})}}function Wm(s,o,a,c){if(!(s=Q(s)))return!1;let h=null,p=Xr(s);const y=!p&&pt(s);if(p||y){if(y&&!y.standalone)return!1;h=s}else{const D=s.ngModule;if(p=Xr(D),!p)return!1;h=D}const E=c.has(h);if(y){if(E)return!1;if(c.add(h),y.dependencies){const D="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const S of D)Wm(S,o,a,c)}}else{if(!p)return!1;{if(null!=p.imports&&!E){let S;c.add(h);try{Ma(p.imports,P=>{Wm(P,o,a,c)&&(S||(S=[]),S.push(P))})}finally{}void 0!==S&&u0(S,o)}if(!E){const S=xi(h)||(()=>new h);o.push({provide:h,useFactory:S,deps:W},{provide:Sc,useValue:h,multi:!0},{provide:qm,useValue:()=>ze(h),multi:!0})}const D=p.providers;null==D||E||Zm(D,P=>{o.push(P)})}}return h!==s&&void 0!==s.providers}function Zm(s,o){for(let a of s)ke(a)&&(a=a.\u0275providers),Array.isArray(a)?Zm(a,o):o(a)}const PD=pe({provide:String,useValue:pe});function Km(s){return null!==s&&"object"==typeof s&&PD in s}function Ko(s){return"function"==typeof s}const Wa=new ln("Set Injector scope."),_p={},kD={};let Ym;function wp(){return void 0===Ym&&(Ym=new a0),Ym}class Ku{}class c0 extends Ku{get destroyed(){return this._destroyed}constructor(o,a,c,h){super(),this.parent=a,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Mc(o,y=>this.processProvider(y)),this.records.set(Zu,xc(void 0,this)),h.has("environment")&&this.records.set(Ku,xc(void 0,this));const p=this.records.get(Wa);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(Sc.multi,W,Je.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=Wt(this),c=Mn(void 0);try{return o()}finally{Wt(a),Mn(c)}}get(o,a=Pn,c=Je.Default){this.assertNotDestroyed(),c=Ar(c);const h=Wt(this),p=Mn(void 0);try{if(!(c&Je.SkipSelf)){let E=this.records.get(o);if(void 0===E){const D=function ey(s){return"function"==typeof s||"object"==typeof s&&s instanceof ln}(o)&&xn(o);E=D&&this.injectableDefInScope(D)?xc(Qm(o),_p):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&Je.Self?wp():this.parent).get(o,a=c&Je.Optional&&a===Pn?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[sn]=y[sn]||[]).unshift(Ee(o)),h)throw y;return function Wr(s,o,a,c){const h=s[sn];throw o[jt]&&h.unshift(o[jt]),s.message=function H(s,o,a,c=null){s=s&&"\n"===s.charAt(0)&&s.charAt(1)==Jn?s.slice(2):s;let h=Ee(o);if(Array.isArray(o))h=o.map(Ee).join(" -> ");else if("object"==typeof o){let p=[];for(let y in o)if(o.hasOwnProperty(y)){let E=o[y];p.push(y+":"+("string"==typeof E?JSON.stringify(E):Ee(E)))}h=`{${p.join(", ")}}`}return`${a}${c?"("+c+")":""}[${h}]: ${s.replace(lr,"\n  ")}`}("\n"+s.message,h,a,c),s[Ur]=h,s[sn]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{Mn(p),Wt(h)}}resolveInjectorInitializers(){const o=Wt(this),a=Mn(void 0);try{const c=this.get(qm.multi,W,Je.Self);for(const h of c)h()}finally{Wt(o),Mn(a)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(Ee(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new se(205,!1)}processProvider(o){let a=Ko(o=Q(o))?o:Q(o&&o.provide);const c=function OD(s){return Km(s)?xc(void 0,s.useValue):xc(Jm(s),_p)}(o);if(Ko(o)||!0!==o.multi)this.records.get(a);else{let h=this.records.get(a);h||(h=xc(void 0,_p,!0),h.factory=()=>zn(h.multi),this.records.set(a,h)),a=o,h.multi.push(o)}this.records.set(a,c)}hydrate(o,a){return a.value===_p&&(a.value=kD,a.value=a.factory()),"object"==typeof a.value&&a.value&&function d0(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=Q(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Qm(s){const o=xn(s),a=null!==o?o.factory:xi(s);if(null!==a)return a;if(s instanceof ln)throw new se(204,!1);if(s instanceof Function)return function ND(s){const o=s.length;if(o>0)throw function Pa(s,o){const a=[];for(let c=0;c<s;c++)a.push(o);return a}(o,"?"),new se(204,!1);const a=function yr(s){return s&&(s[ur]||s[Sr])||null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new se(204,!1)}function Jm(s,o,a){let c;if(Ko(s)){const h=Q(s);return xi(h)||Qm(h)}if(Km(s))c=()=>Q(s.useValue);else if(function l0(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...zn(s.deps||[]));else if(function RD(s){return!(!s||!s.useExisting)}(s))c=()=>ze(Q(s.useExisting));else{const h=Q(s&&(s.useClass||s.provide));if(!function Xm(s){return!!s.deps}(s))return xi(h)||Qm(h);c=()=>new h(...zn(s.deps))}return c}function xc(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function Mc(s,o){for(const a of s)Array.isArray(a)?Mc(a,o):a&&ke(a)?Mc(a.\u0275providers,o):o(a)}class FD{}class h0{}class p0{resolveComponentFactory(o){throw function LD(s){const o=Error(`No component factory found for ${Ee(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Pc=(()=>{class s{}return s.NULL=new p0,s})();function Ep(){return Yo(Fn(),de())}function Yo(s,o){return new Rc(dr(s,o))}let Rc=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=Ep,s})();function Ch(s){return s instanceof Rc?s.nativeElement:s}class ny{}let VD=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function UD(){const s=de(),a=hr(Fn().index,s);return(xr(a)?a:s)[Ht]}(),s})(),BD=(()=>{class s{}return s.\u0275prov=bt({token:s,providedIn:"root",factory:()=>null}),s})();class g0{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const m0=new g0("15.2.8"),bp={},ry="ngOriginalError";function iy(s){return s[ry]}class Dh{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&iy(o);for(;a&&iy(a);)a=iy(a);return a||null}}function mo(s){return s instanceof Function?s():s}function b0(s,o,a){let c=s.length;for(;;){const h=s.indexOf(o,a);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===c||s.charCodeAt(h+p)<=32)return h}a=h+1}}const sy="ng-template";function oy(s,o,a){let c=0,h=!0;for(;c<s.length;){let p=s[c++];if("string"==typeof p&&h){const y=s[c++];if(a&&"class"===p&&-1!==b0(y.toLowerCase(),o,0))return!0}else{if(1===p){for(;c<s.length&&"string"==typeof(p=s[c++]);)if(p.toLowerCase()===o)return!0;return!1}"number"==typeof p&&(h=!1)}}return!1}function ay(s){return 4===s.type&&s.value!==sy}function kc(s,o,a){return o===(4!==s.type||a?s.value:sy)}function uy(s,o,a){let c=4;const h=s.attrs||[],p=function C0(s){for(let o=0;o<s.length;o++)if(Ss(s[o]))return o;return s.length}(h);let y=!1;for(let E=0;E<o.length;E++){const D=o[E];if("number"!=typeof D){if(!y)if(4&c){if(c=2|1&c,""!==D&&!kc(s,D,a)||""===D&&1===o.length){if(Ns(c))return!1;y=!0}}else{const S=8&c?D:o[++E];if(8&c&&null!==s.attrs){if(!oy(s.attrs,S,a)){if(Ns(c))return!1;y=!0}continue}const L=I0(8&c?"class":D,h,ay(s),a);if(-1===L){if(Ns(c))return!1;y=!0;continue}if(""!==S){let K;K=L>p?"":h[L+1].toLowerCase();const ee=8&c?K:null;if(ee&&-1!==b0(ee,S,0)||2&c&&S!==K){if(Ns(c))return!1;y=!0}}}}else{if(!y&&!Ns(c)&&!Ns(D))return!1;if(y&&Ns(D))continue;y=!1,c=D|1&c}}return Ns(c)||y}function Ns(s){return 0==(1&s)}function I0(s,o,a,c){if(null===o)return-1;let h=0;if(c||!a){let p=!1;for(;h<o.length;){const y=o[h];if(y===s)return h;if(3===y||6===y)p=!0;else{if(1===y||2===y){let E=o[++h];for(;"string"==typeof E;)E=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=p?1:2}return-1}return function D0(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const c=s[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,s)}function Sh(s,o,a=!1){for(let c=0;c<o.length;c++)if(uy(s,o[c],a))return!0;return!1}function T0(s,o){return s?":not("+o.trim()+")":o}function ZD(s){let o=s[0],a=1,c=2,h="",p=!1;for(;a<s.length;){let y=s[a];if("string"==typeof y)if(2&c){const E=s[++a];h+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?h+="."+y:4&c&&(h+=" "+y);else""!==h&&!Ns(y)&&(o+=T0(p,h),h=""),c=y,p=p||!Ns(c);a++}return""!==h&&(o+=T0(p,h)),o}const Lt={};function S0(s){A0(Jt(),de(),Rr()+s,!1)}function A0(s,o,a,c){if(!c)if(3==(3&o[Vt])){const p=s.preOrderCheckHooks;null!==p&&xu(o,p,a)}else{const p=s.preOrderHooks;null!==p&&ec(o,p,0,a)}ls(a)}function M0(s,o=null,a=null,c){const h=cy(s,o,a,c);return h.resolveInjectorInitializers(),h}function cy(s,o=null,a=null,c,h=new Set){const p=[a||W,Ih(s)];return c=c||("object"==typeof s?void 0:Ee(s)),new c0(p,o||wp(),c||null,h)}let Nc=(()=>{class s{static create(a,c){if(Array.isArray(a))return M0({name:""},c,a,"");{const h=a.name??"";return M0({name:h},a.parent,a.providers,h)}}}return s.THROW_IF_NOT_FOUND=Pn,s.NULL=new a0,s.\u0275prov=bt({token:s,providedIn:"any",factory:()=>ze(Zu)}),s.__NG_ELEMENT_ID__=-1,s})();function Lc(s,o=Je.Default){const a=de();return null===a?ze(s,o):zf(Fn(),a,Q(s),o)}function O0(){throw new Error("invalid")}function F0(s,o){const a=s.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const p=a[c+1];if(-1!==p){const y=s.data[p];Yl(a[c]),y.contentQueries(2,o[p],p)}}}function Tp(s,o,a,c,h,p,y,E,D,S,P){const L=o.blueprint.slice();return L[Xn]=h,L[Vt]=76|c,(null!==P||s&&1024&s[Vt])&&(L[Vt]|=1024),vu(L),L[Rn]=L[ji]=s,L[In]=a,L[qs]=y||s&&s[qs],L[Ht]=E||s&&s[Ht],L[da]=D||s&&s[da]||null,L[Do]=S||s&&s[Do]||null,L[_r]=p,L[Zs]=function ip(){return hs++}(),L[hu]=P,L[kn]=2==o.type?s[kn]:L,L}function Ph(s,o,a,c,h){let p=s.data[o];if(null===p)p=function Vc(s,o,a,c,h){const p=Fd(),y=ko(),D=s.data[o]=function fT(s,o,a,c,h,p){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,a,o,c,h);return null===s.firstChild&&(s.firstChild=D),null!==p&&(y?null==p.child&&null!==D.parent&&(p.child=D):null===p.next&&(p.next=D,D.prev=p)),D}(s,o,a,c,h),function Iu(){return Rt.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=a,p.value=c,p.attrs=h;const y=function no(){const s=Rt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return Mi(p,!0),p}function Qu(s,o,a,c){if(0===a)return-1;const h=o.length;for(let p=0;p<a;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function Os(s,o,a){Oo(o);try{const c=s.viewQuery;null!==c&&Ap(1,c,a);const h=s.template;null!==h&&V0(s,o,h,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&F0(s,o),s.staticViewQueries&&Ap(2,s.viewQuery,a);const p=s.components;null!==p&&function L0(s,o){for(let a=0;a<o.length;a++)wT(s,o[a])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[Vt]&=-5,Su()}}function gy(s,o,a,c){const h=o[Vt];if(128!=(128&h)){Oo(o);try{vu(o),function ro(s){return Rt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&V0(s,o,a,2,c);const y=3==(3&h);if(y){const S=s.preOrderCheckHooks;null!==S&&xu(o,S,null)}else{const S=s.preOrderHooks;null!==S&&ec(o,S,0,null),tc(o,0)}if(function _T(s){for(let o=Wo(s);null!==o;o=Zo(o)){if(!o[ha])continue;const a=o[Br];for(let c=0;c<a.length;c++){const h=a[c];512&h[Vt]||Gi(h[Rn],1),h[Vt]|=512}}}(o),function W0(s){for(let o=Wo(s);null!==o;o=Zo(o))for(let a=er;a<o.length;a++){const c=o[a],h=c[Qe];Hi(c)&&gy(h,c,h.template,c[In])}}(o),null!==s.contentQueries&&F0(s,o),y){const S=s.contentCheckHooks;null!==S&&xu(o,S)}else{const S=s.contentHooks;null!==S&&ec(o,S,1),tc(o,1)}!function dT(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const h=a[c];if(h<0)ls(~h);else{const p=h,y=a[++c],E=a[++c];Uf(y,p),E(2,o[p])}}}finally{ls(-1)}}(s,o);const E=s.components;null!==E&&function hT(s,o){for(let a=0;a<o.length;a++)BP(s,o[a])}(o,E);const D=s.viewQuery;if(null!==D&&Ap(2,D,c),y){const S=s.viewCheckHooks;null!==S&&xu(o,S)}else{const S=s.viewHooks;null!==S&&ec(o,S,2),tc(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[Vt]&=-41,512&o[Vt]&&(o[Vt]&=-513,Gi(o[Rn],-1))}finally{Su()}}}function V0(s,o,a,c,h){const p=Rr(),y=2&c;try{ls(-1),y&&o.length>gn&&A0(s,o,gn,!1),Cn(y?2:0,h),a(c,h)}finally{ls(p),Cn(y?3:1,h)}}function my(s,o,a){if(So(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const y=s.data[p];y.contentQueries&&y.contentQueries(1,a[p],p)}}}function yy(s,o,a){Wl()&&(function $0(s,o,a,c){const h=a.directiveStart,p=a.directiveEnd;Ao(a)&&function VP(s,o,a){const c=dr(o,s),h=_y(a),p=s[qs],y=jc(s,Tp(s,h,null,a.onPush?32:16,c,o,p,p.createRenderer(c,a),null,null,null));s[o.index]=y}(o,a,s.data[h+a.componentOffset]),s.firstCreatePass||ic(a,o),Er(c,o);const y=a.initialInputs;for(let E=h;E<p;E++){const D=s.data[E],S=As(o,s,E,a);Er(S,o),null!==y&&UP(0,E-h,S,D,0,y),Mr(D)&&(hr(a.index,o)[In]=As(o,s,E,a))}}(s,o,a,dr(a,o)),64==(64&a.flags)&&H0(s,o,a))}function vy(s,o,a=dr){const c=o.localNames;if(null!==c){let h=o.index+1;for(let p=0;p<c.length;p+=2){const y=c[p+1],E=-1===y?a(o,s):s[y];s[h++]=E}}}function _y(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Uc(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Uc(s,o,a,c,h,p,y,E,D,S){const P=gn+c,L=P+h,K=function Za(s,o){const a=[];for(let c=0;c<o;c++)a.push(c<s?null:Lt);return a}(P,L),ee="function"==typeof S?S():S;return K[Qe]={type:s,blueprint:K,template:a,queries:null,viewQuery:E,declTNode:o,data:K.slice().fill(null,P),bindingStartIndex:P,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:D,consts:ee,incompleteFirstPass:!1}}function U0(s,o,a,c){const h=K0(o);null===a?h.push(c):(h.push(a),s.firstCreatePass&&Y0(s).push(c,h.length-1))}function wy(s,o,a,c){for(let h in s)if(s.hasOwnProperty(h)){a=null===a?{}:a;const p=s[h];null===c?Ey(a,o,h,p):c.hasOwnProperty(h)&&Ey(a,o,c[h],p)}return a}function Ey(s,o,a,c){s.hasOwnProperty(a)?s[a].push(o,c):s[a]=[o,c]}function Zr(s,o,a,c,h,p,y,E){const D=dr(o,a);let P,S=o.inputs;!E&&null!=S&&(P=S[c])?(Ka(s,a,P,c,h),Ao(o)&&function br(s,o){const a=hr(o,s);16&a[Vt]||(a[Vt]|=32)}(a,o.index)):3&o.type&&(c=function pT(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=y?y(h,o.value||"",c):h,p.setProperty(D,c,h))}function Bc(s,o,a,c){if(Wl()){const h=null===c?null:{"":-1},p=function mT(s,o){const a=s.directiveRegistry;let c=null,h=null;if(a)for(let p=0;p<a.length;p++){const y=a[p];if(Sh(o,y.selectors,!1))if(c||(c=[]),Mr(y))if(null!==y.findHostDirectiveDefs){const E=[];h=h||new Map,y.findHostDirectiveDefs(y,E,h),c.unshift(...E,y),Ju(s,o,E.length)}else c.unshift(y),Ju(s,o,0);else h=h||new Map,y.findHostDirectiveDefs?.(y,c,h),c.push(y)}return null===c?null:[c,h]}(s,a);let y,E;null===p?y=E=null:[y,E]=p,null!==y&&Iy(s,o,a,y,h,E),h&&function yT(s,o,a){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=a[o[h+1]];if(null==p)throw new se(-301,!1);c.push(o[h],p)}}}(a,c,h)}a.mergedAttrs=Bo(a.mergedAttrs,a.attrs)}function Iy(s,o,a,c,h,p){for(let S=0;S<c.length;S++)Nu(ic(a,o),s,c[S].type);!function FP(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}(a,s.data.length,c.length);for(let S=0;S<c.length;S++){const P=c[S];P.providersResolver&&P.providersResolver(P)}let y=!1,E=!1,D=Qu(s,o,c.length,null);for(let S=0;S<c.length;S++){const P=c[S];a.mergedAttrs=Bo(a.mergedAttrs,P.hostAttrs),LP(s,a,o,D,P),z0(D,P,h),null!==P.contentQueries&&(a.flags|=4),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=64);const L=P.type.prototype;!y&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((s.preOrderHooks??(s.preOrderHooks=[])).push(a.index),y=!0),!E&&(L.ngOnChanges||L.ngDoCheck)&&((s.preOrderCheckHooks??(s.preOrderCheckHooks=[])).push(a.index),E=!0),D++}!function B0(s,o,a){const h=o.directiveEnd,p=s.data,y=o.attrs,E=[];let D=null,S=null;for(let P=o.directiveStart;P<h;P++){const L=p[P],K=a?a.get(L):null,fe=K?K.outputs:null;D=wy(L.inputs,P,D,K?K.inputs:null),S=wy(L.outputs,P,S,fe);const Fe=null===D||null===y||ay(o)?null:vT(D,P,y);E.push(Fe)}null!==D&&(D.hasOwnProperty("class")&&(o.flags|=8),D.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=E,o.inputs=D,o.outputs=S}(s,a,p)}function H0(s,o,a){const c=a.directiveStart,h=a.directiveEnd,p=a.index,y=function Bf(){return Rt.lFrame.currentDirectiveIndex}();try{ls(p);for(let E=c;E<h;E++){const D=s.data[E],S=o[E];No(E),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&gT(D,S)}}finally{ls(-1),No(y)}}function gT(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Ju(s,o,a){o.componentOffset=a,(s.components??(s.components=[])).push(o.index)}function z0(s,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=s;Mr(o)&&(a[""]=s)}}function LP(s,o,a,c,h){s.data[c]=h;const p=h.factory||(h.factory=xi(h.type)),y=new Pi(p,Mr(h),Lc);s.blueprint[c]=y,a[c]=y,function Cy(s,o,a,c,h){const p=h.hostBindings;if(p){let y=s.hostBindingOpCodes;null===y&&(y=s.hostBindingOpCodes=[]);const E=~o.index;(function Dy(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(y)!=E&&y.push(E),y.push(a,c,p)}}(s,o,c,Qu(s,a,h.hostVars,Lt),h)}function Qo(s,o,a,c,h,p){const y=dr(s,o);!function G0(s,o,a,c,h,p,y){if(null==p)s.removeAttribute(o,h,a);else{const E=null==y?De(p):y(p,c||"",h);s.setAttribute(o,h,E,a)}}(o[Ht],y,p,s.value,a,c,h)}function UP(s,o,a,c,h,p){const y=p[o];if(null!==y){const E=c.setInput;for(let D=0;D<y.length;){const S=y[D++],P=y[D++],L=y[D++];null!==E?c.setInput(a,L,S,P):a[P]=L}}}function vT(s,o,a){let c=null,h=0;for(;h<a.length;){const p=a[h];if(0!==p)if(5!==p){if("number"==typeof p)break;if(s.hasOwnProperty(p)){null===c&&(c=[]);const y=s[p];for(let E=0;E<y.length;E+=2)if(y[E]===o){c.push(p,y[E+1],a[h+1]);break}}h+=2}else h+=2;else h+=4}return c}function q0(s,o,a,c){return[s,!0,!1,o,null,0,c,a,null,null]}function BP(s,o){const a=hr(o,s);if(Hi(a)){const c=a[Qe];48&a[Vt]?gy(c,a,c.template,a[In]):a[Si]>0&&Ty(a)}}function Ty(s){for(let c=Wo(s);null!==c;c=Zo(c))for(let h=er;h<c.length;h++){const p=c[h];if(Hi(p))if(512&p[Vt]){const y=p[Qe];gy(y,p,y.template,p[In])}else p[Si]>0&&Ty(p)}const a=s[Qe].components;if(null!==a)for(let c=0;c<a.length;c++){const h=hr(a[c],s);Hi(h)&&h[Si]>0&&Ty(h)}}function wT(s,o){const a=hr(o,s),c=a[Qe];(function Z0(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(c,a),Os(c,a,a[In])}function jc(s,o){return s[ni]?s[To][un]=o:s[ni]=o,s[To]=o,o}function Sp(s){for(;s;){s[Vt]|=32;const o=vc(s);if($i(s)&&!o)return s;s=o}return null}function Rh(s,o,a,c=!0){const h=o[qs];h.begin&&h.begin();try{gy(s,o,s.template,a)}catch(y){throw c&&rr(o,y),y}finally{h.end&&h.end()}}function Ap(s,o,a){Yl(0),o(s,a)}function K0(s){return s[pi]||(s[pi]=[])}function Y0(s){return s.cleanup||(s.cleanup=[])}function rr(s,o){const a=s[Do],c=a?a.get(Dh,null):null;c&&c.handleError(o)}function Ka(s,o,a,c,h){for(let p=0;p<a.length;){const y=a[p++],E=a[p++],D=o[y],S=s.data[y];null!==S.setInput?S.setInput(D,h,c,E):D[E]=h}}function Jo(s,o,a){const c=Ro(o,s);!function lh(s,o,a){s.setValue(o,a)}(s[Ht],c,a)}function Sy(s,o,a){let c=a?s.styles:null,h=a?s.classes:null,p=0;if(null!==o)for(let y=0;y<o.length;y++){const E=o[y];"number"==typeof E?p=E:1==p?h=Oe(h,E):2==p&&(c=Oe(c,E+": "+o[++y]+";"))}a?s.styles=c:s.stylesWithoutHost=c,a?s.classes=h:s.classesWithoutHost=h}function kh(s,o,a,c,h=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&c.push(Un(p)),gi(p))for(let E=er;E<p.length;E++){const D=p[E],S=D[Qe].firstChild;null!==S&&kh(D[Qe],D,S,c)}const y=a.type;if(8&y)kh(s,o,a.child,c);else if(32&y){const E=Ps(a,o);let D;for(;D=E();)c.push(D)}else if(16&y){const E=Ga(o,a);if(Array.isArray(E))c.push(...E);else{const D=vc(o[kn]);kh(D[Qe],D,E,c,!0)}}a=h?a.projectionNext:a.next}return c}class Nh{get rootNodes(){const o=this._lView,a=o[Qe];return kh(a,o,a.firstChild,[])}constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[In]}set context(o){this._lView[In]=o}get destroyed(){return 128==(128&this._lView[Vt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[Rn];if(gi(o)){const a=o[Ys],c=a?a.indexOf(this):-1;c>-1&&(A(o,c),Kd(a,c))}this._attachedToViewContainer=!1}k(this._lView[Qe],this._lView)}onDestroy(o){U0(this._lView[Qe],this._lView,null,o)}markForCheck(){Sp(this._cdRefInjectingView||this._lView)}detach(){this._lView[Vt]&=-65}reattach(){this._lView[Vt]|=64}detectChanges(){Rh(this._lView[Qe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function _c(s,o){fh(s,o,o[Ht],2,null,null)}(this._lView[Qe],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new se(902,!1);this._appRef=o}}class $P extends Nh{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Rh(o[Qe],o,o[In],!1)}checkNoChanges(){}get context(){return null}}class IT extends Pc{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=pt(o);return new Oh(a,this.ngModule)}}function CT(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class zP{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){c=Ar(c);const h=this.injector.get(o,bp,c);return h!==bp||a===bp?h:this.parentInjector.get(o,a,c)}}class Oh extends h0{get inputs(){return CT(this.componentDef.inputs)}get outputs(){return CT(this.componentDef.outputs)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function KD(s){return s.map(ZD).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,c,h){let p=(h=h||this.ngModule)instanceof Ku?h:h?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new zP(o,p):o,E=y.get(ny,null);if(null===E)throw new se(407,!1);const D=y.get(BD,null),S=E.createRenderer(null,this.componentDef),P=this.componentDef.selectors[0][0]||"div",L=c?function OP(s,o,a){return s.selectRootElement(o,a===O.ShadowDom)}(S,c,this.componentDef.encapsulation):ch(S,P,function HP(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(P)),K=this.componentDef.onPush?288:272,ee=Uc(0,null,null,1,0,null,null,null,null,null),fe=Tp(null,ee,null,K,null,null,E,S,D,y,null);let Fe,We;Oo(fe);try{const ut=this.componentDef;let Nt,be=null;ut.findHostDirectiveDefs?(Nt=[],be=new Map,ut.findHostDirectiveDefs(ut,Nt,be),Nt.push(ut)):Nt=[ut];const Ot=function DT(s,o){const a=s[Qe],c=gn;return s[c]=o,Ph(a,c,2,"#host",null)}(fe,L),jn=function TT(s,o,a,c,h,p,y,E){const D=h[Qe];!function Q0(s,o,a,c){for(const h of s)o.mergedAttrs=Bo(o.mergedAttrs,h.hostAttrs);null!==o.mergedAttrs&&(Sy(o,o.mergedAttrs,!0),null!==a&&gh(c,a,o))}(c,s,o,y);const S=p.createRenderer(o,a),P=Tp(h,_y(a),null,a.onPush?32:16,h[s.index],s,p,S,E||null,null,null);return D.firstCreatePass&&Ju(D,s,c.length-1),jc(h,P),h[s.index]=P}(Ot,L,ut,Nt,fe,E,S);We=ga(ee,gn),L&&function J0(s,o,a,c){if(c)tr(s,a,["ng-version",m0.full]);else{const{attrs:h,classes:p}=function YD(s){const o=[],a=[];let c=1,h=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++c]):8===h&&a.push(p);else{if(!Ns(h))break;h=p}c++}return{attrs:o,classes:a}}(o.selectors[0]);h&&tr(s,a,h),p&&p.length>0&&qa(s,a,p.join(" "))}}(S,ut,L,c),void 0!==a&&function AT(s,o,a){const c=s.projection=[];for(let h=0;h<o.length;h++){const p=a[h];c.push(null!=p?Array.from(p):null)}}(We,this.ngContentSelectors,a),Fe=function ST(s,o,a,c,h,p){const y=Fn(),E=h[Qe],D=dr(y,h);Iy(E,h,y,a,null,c);for(let P=0;P<a.length;P++)Er(As(h,E,y.directiveStart+P,y),h);H0(E,h,y),D&&Er(D,h);const S=As(h,E,y.directiveStart+y.componentOffset,y);if(s[In]=h[In]=S,null!==p)for(const P of p)P(S,o);return my(E,y,s),S}(jn,ut,Nt,be,fe,[X0]),Os(ee,fe,null)}finally{Su()}return new GP(this.componentType,Fe,Yo(We,fe),fe,We)}}class GP extends FD{constructor(o,a,c,h,p){super(),this.location=c,this._rootLView=h,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new $P(h),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[o])){const p=this._rootLView;Ka(p[Qe],p,h,o,a),Sp(hr(this._tNode.index,p))}}get injector(){return new Ta(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function X0(){const s=Fn();Au(de()[Qe],s)}function gs(s){let o=function Ya(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const c=[s];for(;o;){let h;if(Mr(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new se(903,!1);h=o.\u0275dir}if(h){if(a){c.push(h);const y=s;y.inputs=xp(s.inputs),y.declaredInputs=xp(s.declaredInputs),y.outputs=xp(s.outputs);const E=h.hostBindings;E&&RT(s,E);const D=h.viewQuery,S=h.contentQueries;if(D&&MT(s,D),S&&PT(s,S),Le(s.inputs,h.inputs),Le(s.declaredInputs,h.declaredInputs),Le(s.outputs,h.outputs),Mr(h)&&h.data.animation){const P=s.data;P.animation=(P.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let y=0;y<p.length;y++){const E=p[y];E&&E.ngInherit&&E(s),E===gs&&(a=!1)}}o=Object.getPrototypeOf(o)}!function xT(s){let o=0,a=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=Bo(h.hostAttrs,a=Bo(a,h.hostAttrs))}}(c)}function xp(s){return s===R?{}:s===W?[]:s}function MT(s,o){const a=s.viewQuery;s.viewQuery=a?(c,h)=>{o(c,h),a(c,h)}:o}function PT(s,o){const a=s.contentQueries;s.contentQueries=a?(c,h,p)=>{o(c,h,p),a(c,h,p)}:o}function RT(s,o){const a=s.hostBindings;s.hostBindings=a?(c,h)=>{o(c,h),a(c,h)}:o}function Fh(s){return!!Pp(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function Pp(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Yr(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function xy(s,o,a,c){const h=de();return Yr(h,qi(),o)&&(Jt(),Qo(vn(),h,s,o,a,c)),xy}function tl(s,o,a,c){return Yr(s,qi(),a)?o+De(a)+c:Lt}function eu(s,o,a,c,h,p){const E=function Xa(s,o,a,c){const h=Yr(s,o,a);return Yr(s,o+1,c)||h}(s,function jr(){return Rt.lFrame.bindingIndex}(),a,h);return Wi(2),E?o+De(a)+c+De(h)+p:Lt}function Rp(s,o,a,c,h,p,y,E){const D=de(),S=Jt(),P=s+gn,L=S.firstCreatePass?function sE(s,o,a,c,h,p,y,E,D){const S=o.consts,P=Ph(o,s,4,y||null,zi(S,E));Bc(o,a,P,zi(S,D)),Au(o,P);const L=P.tView=Uc(2,P,c,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,P),L.queries=o.queries.embeddedTView(P)),P}(P,S,D,o,a,c,h,p,y):S.data[P];Mi(L,!1);const K=D[Ht].createComment("");za(S,D,K,L),Er(K,D),jc(D,D[P]=q0(K,D,K,L)),Qs(L)&&yy(S,D,L),null!=y&&vy(D,L,E)}function Uh(s,o,a){const c=de();return Yr(c,qi(),o)&&Zr(Jt(),vn(),c,s,o,c[Ht],a,!1),Uh}function Ny(s,o,a,c,h){const y=h?"class":"style";Ka(s,a,o.inputs[y],y,c)}function Oy(s,o,a,c){const h=de(),p=Jt(),y=gn+s,E=h[Ht],D=p.firstCreatePass?function qP(s,o,a,c,h,p){const y=o.consts,D=Ph(o,s,2,c,zi(y,h));return Bc(o,a,D,zi(y,p)),null!==D.attrs&&Sy(D,D.attrs,!1),null!==D.mergedAttrs&&Sy(D,D.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,D),D}(y,p,h,o,a,c):p.data[y],S=h[y]=ch(E,o,function Xl(){return Rt.lFrame.currentNamespace}()),P=Qs(D);return Mi(D,!0),gh(E,S,D),32!=(32&D.flags)&&za(p,h,S,D),0===function va(){return Rt.lFrame.elementDepthCount}()&&Er(S,h),function _u(){Rt.lFrame.elementDepthCount++}(),P&&(yy(p,h,D),my(p,D,h)),null!==c&&vy(h,D),Oy}function Fy(){let s=Fn();ko()?function wa(){Rt.lFrame.isParent=!1}():(s=s.parent,Mi(s,!1));const o=s;!function _a(){Rt.lFrame.elementDepthCount--}();const a=Jt();return a.firstCreatePass&&(Au(a,s),So(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function ye(s){return 0!=(8&s.flags)}(o)&&Ny(a,o,de(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function ft(s){return 0!=(16&s.flags)}(o)&&Ny(a,o,de(),o.stylesWithoutHost,!1),Fy}function oE(s,o,a,c){return Oy(s,o,a,c),Fy(),oE}function Ly(){return de()}function Vy(s){return!!s&&"function"==typeof s.then}function cE(s){return!!s&&"function"==typeof s.subscribe}const dE=cE;function Bh(s,o,a,c){const h=de(),p=Jt(),y=Fn();return function ol(s,o,a,c,h,p,y){const E=Qs(c),S=s.firstCreatePass&&Y0(s),P=o[In],L=K0(o);let K=!0;if(3&c.type||y){const Fe=dr(c,o),We=y?y(Fe):Fe,ut=L.length,Nt=y?Ot=>y(Un(Ot[c.index])):c.index;let be=null;if(!y&&E&&(be=function Np(s,o,a,c){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const y=h[p];if(y===a&&h[p+1]===c){const E=o[pi],D=h[p+2];return E.length>D?E[D]:null}"string"==typeof y&&(p+=2)}return null}(s,o,h,c.index)),null!==be)(be.__ngLastListenerFn__||be).__ngNextListenerFn__=p,be.__ngLastListenerFn__=p,K=!1;else{p=Op(c,o,P,p,!1);const Ot=a.listen(We,h,p);L.push(p,Ot),S&&S.push(h,Nt,ut,ut+1)}}else p=Op(c,o,P,p,!1);const ee=c.outputs;let fe;if(K&&null!==ee&&(fe=ee[h])){const Fe=fe.length;if(Fe)for(let We=0;We<Fe;We+=2){const jn=o[fe[We]][fe[We+1]].subscribe(p),Tn=L.length;L.push(p,jn),S&&S.push(h,c.index,Tn,-(Tn+1))}}}(p,h,h[Ht],y,s,o,c),Bh}function Hc(s,o,a,c){try{return Cn(6,o,a),!1!==a(c)}catch(h){return rr(s,h),!1}finally{Cn(7,o,a)}}function Op(s,o,a,c,h){return function p(y){if(y===Function)return c;Sp(s.componentOffset>-1?hr(s.index,o):o);let D=Hc(o,a,c,y),S=p.__ngNextListenerFn__;for(;S;)D=Hc(o,a,S,y)&&D,S=S.__ngNextListenerFn__;return h&&!1===D&&(y.preventDefault(),y.returnValue=!1),D}}function hE(s=1){return function ba(s){return(Rt.lFrame.contextLView=function jf(s,o){for(;s>0;)o=o[ji],s--;return o}(s,Rt.lFrame.contextLView))[In]}(s)}function Lp(s,o,a){return Vp(s,"",o,"",a),Lp}function Vp(s,o,a,c,h){const p=de(),y=tl(p,o,a,c);return y!==Lt&&Zr(Jt(),vn(),p,s,y,p[Ht],h,!1),Vp}function ul(s,o){return s<<17|o<<2}function ms(s){return s>>17&32767}function jy(s){return 2|s}function ta(s){return(131068&s)>>2}function Gc(s,o){return-131069&s|o<<2}function $y(s){return 1|s}function qT(s,o,a,c,h){const p=s[a+1],y=null===o;let E=c?ms(p):ta(p),D=!1;for(;0!==E&&(!1===D||y);){const P=s[E+1];WT(s[E],o)&&(D=!0,s[E+1]=c?$y(P):jy(P)),E=c?ms(P):ta(P)}D&&(s[a+1]=c?jy(p):$y(p))}function WT(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Zi(s,o)>=0}function Gy(s,o){return function yo(s,o,a,c){const h=de(),p=Jt(),y=Wi(2);p.firstUpdatePass&&function vE(s,o,a,c){const h=s.data;if(null===h[a+1]){const p=h[Rr()],y=function qy(s,o){return o>=s.expandoStartIndex}(s,a);(function Ky(s,o){return 0!=(s.flags&(o?8:16))})(p,c)&&null===o&&!y&&(o=!1),o=function _E(s,o,a,c){const h=function Ts(s){const o=Rt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(a=qh(a=Gh(null,s,o,a,c),o.attrs,c),p=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==h)if(a=Gh(h,s,o,a,c),null===p){let D=function wE(s,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==ta(c))return s[ms(c)]}(s,o,c);void 0!==D&&Array.isArray(D)&&(D=Gh(null,s,o,D[1],c),D=qh(D,o.attrs,c),function EE(s,o,a,c){s[ms(a?o.classBindings:o.styleBindings)]=c}(s,o,c,D))}else p=function QT(s,o,a){let c;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)c=qh(c,s[p].hostAttrs,a);return qh(c,o.attrs,a)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),a}(h,p,o,c),function fE(s,o,a,c,h,p){let y=p?o.classBindings:o.styleBindings,E=ms(y),D=ta(y);s[c]=a;let P,S=!1;if(Array.isArray(a)?(P=a[1],(null===P||Zi(a,P)>0)&&(S=!0)):P=a,h)if(0!==D){const K=ms(s[E+1]);s[c+1]=ul(K,E),0!==K&&(s[K+1]=Gc(s[K+1],c)),s[E+1]=function Bp(s,o){return 131071&s|o<<17}(s[E+1],c)}else s[c+1]=ul(E,0),0!==E&&(s[E+1]=Gc(s[E+1],c)),E=c;else s[c+1]=ul(D,0),0===E?E=c:s[D+1]=Gc(s[D+1],c),D=c;S&&(s[c+1]=jy(s[c+1])),qT(s,P,c,!0),qT(s,P,c,!1),function GT(s,o,a,c,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&Zi(p,o)>=0&&(a[c+1]=$y(a[c+1]))}(o,P,s,c,p),y=ul(E,D),p?o.classBindings=y:o.styleBindings=y}(h,p,o,a,y,c)}}(p,s,y,c),o!==Lt&&Yr(h,y,o)&&function IE(s,o,a,c,h,p,y,E){if(!(3&o.type))return;const D=s.data,S=D[E+1],P=function HT(s){return 1==(1&s)}(S)?Zy(D,o,a,h,ta(S),y):void 0;qc(P)||(qc(p)||function Up(s){return 2==(2&s)}(S)&&(p=Zy(D,null,a,h,E,y)),function po(s,o,a,c,h){if(o)h?s.addClass(a,c):s.removeClass(a,c);else{let p=-1===c.indexOf("-")?void 0:xt.DashCase;null==h?s.removeStyle(a,c,p):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),p|=xt.Important),s.setStyle(a,c,h,p))}}(c,y,Ro(Rr(),a),h,p))}(p,p.data[Rr()],h,h[Ht],s,h[y+1]=function XT(s,o){return null==s||""===s||("string"==typeof o?s+=o:"object"==typeof s&&(s=Ee(go(s)))),s}(o,a),c,y)}(s,o,null,!0),Gy}function Gh(s,o,a,c,h){let p=null;const y=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<y&&(p=o[E],c=qh(c,p.hostAttrs,h),p!==s);)E++;return null!==s&&(a.directiveStylingLast=E),c}function qh(s,o,a){const c=a?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const y=o[p];"number"==typeof y?h=y:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Ri(s,y,!!a||o[++p]))}return void 0===s?null:s}function Zy(s,o,a,c,h,p){const y=null===o;let E;for(;h>0;){const D=s[h],S=Array.isArray(D),P=S?D[1]:D,L=null===P;let K=a[h+1];K===Lt&&(K=L?W:void 0);let ee=L?mn(K,c):P===c?K:void 0;if(S&&!qc(ee)&&(ee=mn(D,c)),qc(ee)&&(E=ee,y))return E;const fe=s[h+1];h=y?ms(fe):ta(fe)}if(null!==o){let D=p?o.residualClasses:o.residualStyles;null!=D&&(E=mn(D,c))}return E}function qc(s){return void 0!==s}function CE(s,o=""){const a=de(),c=Jt(),h=s+gn,p=c.firstCreatePass?Ph(c,h,1,o,null):c.data[h],y=a[h]=function Ha(s,o){return s.createText(o)}(a[Ht],o);za(c,a,y,p),Mi(p,!1)}function Wc(s){return zp("",s,""),Wc}function zp(s,o,a){const c=de(),h=tl(c,s,o,a);return h!==Lt&&Jo(c,Rr(),h),zp}function Wh(s,o,a,c,h){const p=de(),y=eu(p,s,o,a,c,h);return y!==Lt&&Jo(p,Rr(),y),Wh}const Zc=void 0;var uS=["en",[["a","p"],["AM","PM"],Zc],[["AM","PM"],Zc,Zc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Zc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Zc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Zc,"{1} 'at' {0}",Zc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function eR(s){const a=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let cl={};function UE(s){const o=function tR(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=cS(o);if(a)return a;const c=o.split("-")[0];if(a=cS(c),a)return a;if("en"===c)return uS;throw new se(701,!1)}function BE(s){return UE(s)[kt.PluralCase]}function cS(s){return s in cl||(cl[s]=Gt.ng&&Gt.ng.common&&Gt.ng.common.locales&&Gt.ng.common.locales[s]),cl[s]}var kt=(()=>((kt=kt||{})[kt.LocaleId=0]="LocaleId",kt[kt.DayPeriodsFormat=1]="DayPeriodsFormat",kt[kt.DayPeriodsStandalone=2]="DayPeriodsStandalone",kt[kt.DaysFormat=3]="DaysFormat",kt[kt.DaysStandalone=4]="DaysStandalone",kt[kt.MonthsFormat=5]="MonthsFormat",kt[kt.MonthsStandalone=6]="MonthsStandalone",kt[kt.Eras=7]="Eras",kt[kt.FirstDayOfWeek=8]="FirstDayOfWeek",kt[kt.WeekendRange=9]="WeekendRange",kt[kt.DateFormat=10]="DateFormat",kt[kt.TimeFormat=11]="TimeFormat",kt[kt.DateTimeFormat=12]="DateTimeFormat",kt[kt.NumberSymbols=13]="NumberSymbols",kt[kt.NumberFormats=14]="NumberFormats",kt[kt.CurrencyCode=15]="CurrencyCode",kt[kt.CurrencySymbol=16]="CurrencySymbol",kt[kt.CurrencyName=17]="CurrencyName",kt[kt.Currencies=18]="Currencies",kt[kt.Directionality=19]="Directionality",kt[kt.PluralCase=20]="PluralCase",kt[kt.ExtraData=21]="ExtraData",kt))();const Kc="en-US";let Kp=Kc;function Jh(s,o,a,c,h){if(s=Q(s),Array.isArray(s))for(let p=0;p<s.length;p++)Jh(s[p],o,a,c,h);else{const p=Jt(),y=de();let E=Ko(s)?s:Q(s.provide),D=Jm(s);const S=Fn(),P=1048575&S.providerIndexes,L=S.directiveStart,K=S.providerIndexes>>20;if(Ko(s)||!s.multi){const ee=new Pi(D,h,Lc),fe=Xh(E,o,h?P:P+K,L);-1===fe?(Nu(ic(S,y),p,E),yl(p,s,o.length),o.push(E),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),a.push(ee),y.push(ee)):(a[fe]=ee,y[fe]=ee)}else{const ee=Xh(E,o,P+K,L),fe=Xh(E,o,P,P+K),We=fe>=0&&a[fe];if(h&&!We||!h&&!(ee>=0&&a[ee])){Nu(ic(S,y),p,E);const ut=function RS(s,o,a,c,h){const p=new Pi(s,a,Lc);return p.multi=[],p.index=o,p.componentProviders=0,eg(p,h,c&&!a),p}(h?PS:Dv,a.length,h,c,D);!h&&We&&(a[fe].providerFactory=ut),yl(p,s,o.length,0),o.push(E),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),a.push(ut),y.push(ut)}else yl(p,s,ee>-1?ee:fe,eg(a[h?fe:ee],D,!h&&c));!h&&c&&We&&a[fe].componentProviders++}}}function yl(s,o,a,c){const h=Ko(o),p=function vp(s){return!!s.useClass}(o);if(h||p){const D=(p?Q(o.useClass):o).prototype.ngOnDestroy;if(D){const S=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const P=S.indexOf(a);-1===P?S.push(a,[c,D]):S[P+1].push(c,D)}else S.push(a,D)}}}function eg(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function Xh(s,o,a,c){for(let h=a;h<c;h++)if(o[h]===s)return h;return-1}function Dv(s,o,a,c){return Tv(this.multi,[])}function PS(s,o,a,c){const h=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,E=As(a,a[Qe],this.providerFactory.index,c);p=E.slice(0,y),Tv(h,p);for(let D=y;D<E.length;D++)p.push(E[D])}else p=[],Tv(h,p);return p}function Tv(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function tg(s,o=[]){return a=>{a.providersResolver=(c,h)=>function Cv(s,o,a){const c=Jt();if(c.firstCreatePass){const h=Mr(s);Jh(a,c.data,c.blueprint,h,!0),Jh(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class ed{}class ng{}function ob(s,o){return new ab(s,o??null)}class ab extends ed{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new IT(this);const c=an(o);this._bootstrapComponents=mo(c.bootstrap),this._r3Injector=cy(o,a,[{provide:ed,useValue:this},{provide:Pc,useValue:this.componentFactoryResolver}],Ee(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Sv extends ng{constructor(o){super(),this.moduleType=o}create(o){return new ab(this.moduleType,o)}}class Av extends ed{constructor(o,a,c){super(),this.componentFactoryResolver=new IT(this),this.instance=null;const h=new c0([...o,{provide:ed,useValue:this},{provide:Pc,useValue:this.componentFactoryResolver}],a||wp(),c,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function xv(s,o,a=null){return new Av(s,o,a).injector}let Mv=(()=>{class s{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=Ac(0,a.type),h=c.length>0?xv([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,h)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=bt({token:s,providedIn:"environment",factory:()=>new s(ze(Ku))}),s})();function rg(s){s.getStandaloneInjector=o=>o.get(Mv).getOrCreateStandaloneInjector(s)}function Uv(s){return o=>{setTimeout(s,void 0,o)}}const ys=class cR extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let h=o,p=a||(()=>null),y=c;if(o&&"object"==typeof o){const D=o;h=D.next?.bind(D),p=D.error?.bind(D),y=D.complete?.bind(D)}this.__isAsync&&(p=Uv(p),h&&(h=Uv(h)),y&&(y=Uv(y)));const E=super.subscribe({next:h,error:p,complete:y});return o instanceof B.w0&&o.add(E),E}};function WS(){return this._results[Symbol.iterator]()}class Bv{get changes(){return this._changes||(this._changes=new ys)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Bv.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=WS)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const h=function mi(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function bm(s,o,a){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],p=o[c];if(a&&(h=a(h),p=a(p)),p!==h)return!1}return!0}(c._results,h,a))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let _l=(()=>{class s{}return s.__NG_ELEMENT_ID__=fR,s})();const dR=_l,hR=class extends dR{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(o,a){const c=this._declarationTContainer.tView,h=Tp(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,a||null);h[Ws]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[ri];return null!==y&&(h[ri]=y.createEmbeddedView(c)),Os(c,h,o),new Nh(h)}};function fR(){return jv(Fn(),de())}function jv(s,o){return 4&s.type?new hR(o,s,Yo(s,o)):null}let wl=(()=>{class s{}return s.__NG_ELEMENT_ID__=pR,s})();function pR(){return _b(Fn(),de())}const ZS=wl,yb=class extends ZS{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return Yo(this._hostTNode,this._hostLView)}get injector(){return new Ta(this._hostTNode,this._hostLView)}get parentInjector(){const o=Bn(this._hostTNode,this._hostLView);if(Mu(o)){const a=Ru(o,this._hostLView),c=Pu(o);return new Ta(a[Qe].data[c+8],a)}return new Ta(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=vb(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-er}createEmbeddedView(o,a,c){let h,p;"number"==typeof c?h=c:null!=c&&(h=c.index,p=c.injector);const y=o.createEmbeddedView(a||{},p);return this.insert(y,h),y}createComponent(o,a,c,h,p){const y=o&&!function uc(s){return"function"==typeof s}(o);let E;if(y)E=a;else{const L=a||{};E=L.index,c=L.injector,h=L.projectableNodes,p=L.environmentInjector||L.ngModuleRef}const D=y?o:new Oh(pt(o)),S=c||this.parentInjector;if(!p&&null==D.ngModule){const K=(y?S:this.parentInjector).get(Ku,null);K&&(p=K)}const P=D.create(S,h,void 0,p);return this.insert(P.hostView,E),P}insert(o,a){const c=o._lView,h=c[Qe];if(function ql(s){return gi(s[Rn])}(c)){const P=this.indexOf(o);if(-1!==P)this.detach(P);else{const L=c[Rn],K=new yb(L,L[_r],L[Rn]);K.detach(K.indexOf(o))}}const p=this._adjustIndex(a),y=this._lContainer;!function f(s,o,a,c){const h=er+c,p=a.length;c>0&&(a[h-1][un]=o),c<p-er?(o[un]=a[h],Zd(a,er+c,o)):(a.push(o),o[un]=null),o[Rn]=a;const y=o[Ws];null!==y&&a!==y&&function m(s,o){const a=s[Br];o[kn]!==o[Rn][Rn][kn]&&(s[ha]=!0),null===a?s[Br]=[o]:a.push(o)}(y,o);const E=o[ri];null!==E&&E.insertView(s),o[Vt]|=64}(h,c,y,p);const E=fo(p,y),D=c[Ht],S=Ji(D,y[Ks]);return null!==S&&function Pm(s,o,a,c,h,p){c[Xn]=h,c[_r]=o,fh(s,c,a,1,h,p)}(h,y[_r],D,c,S,E),o.attachToViewContainerRef(),Zd($v(y),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=vb(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=A(this._lContainer,a);c&&(Kd($v(this._lContainer),a),k(c[Qe],c))}detach(o){const a=this._adjustIndex(o,-1),c=A(this._lContainer,a);return c&&null!=Kd($v(this._lContainer),a)?new Nh(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function vb(s){return s[Ys]}function $v(s){return s[Ys]||(s[Ys]=[])}function _b(s,o){let a;const c=o[s.index];if(gi(c))a=c;else{let h;if(8&s.type)h=Un(c);else{const p=o[Ht];h=p.createComment("");const y=dr(s,o);Ut(p,Ji(p,y),h,function dh(s,o){return s.nextSibling(o)}(p,y),!1)}o[s.index]=a=q0(c,o,h,s),jc(o,a)}return new yb(a,s,o)}class Hv{constructor(o){this.queryList=o,this.matches=null}clone(){return new Hv(this.queryList)}setDirty(){this.queryList.setDirty()}}class zv{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,h=[];for(let p=0;p<c;p++){const y=a.getByIndex(p);h.push(this.queries[y.indexInDeclarationView].clone())}return new zv(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==Zv(o,a).matches&&this.queries[a].setDirty()}}class wb{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class Gv{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const h=null!==a?a.length:0,p=this.getByIndex(c).embeddedTView(o,h);p&&(p.indexInDeclarationView=c,null!==a?a.push(p):a=[p])}return null!==a?new Gv(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class qv{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new qv(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const p=c[h];this.matchTNodeWithReadOption(o,a,ug(a,p)),this.matchTNodeWithReadOption(o,a,Da(a,o,p,!1,!1))}else c===_l?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Da(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===Rc||h===wl||h===_l&&4&a.type)this.addMatch(a.index,-2);else{const p=Da(a,o,h,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function ug(s,o){const a=s.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function KS(s,o,a,c){return-1===a?function El(s,o){return 11&s.type?Yo(s,o):4&s.type?jv(s,o):null}(o,s):-2===a?function YS(s,o,a){return a===Rc?Yo(o,s):a===_l?jv(o,s):a===wl?_b(o,s):void 0}(s,o,c):As(s,s[Qe],a,o)}function Eb(s,o,a,c){const h=o[ri].queries[c];if(null===h.matches){const p=s.data,y=a.matches,E=[];for(let D=0;D<y.length;D+=2){const S=y[D];E.push(S<0?null:KS(o,p[S],y[D+1],a.metadata.read))}h.matches=E}return h.matches}function Wv(s,o,a,c){const h=s.queries.getByIndex(a),p=h.matches;if(null!==p){const y=Eb(s,o,h,a);for(let E=0;E<p.length;E+=2){const D=p[E];if(D>0)c.push(y[E/2]);else{const S=p[E+1],P=o[-D];for(let L=er;L<P.length;L++){const K=P[L];K[Ws]===K[Rn]&&Wv(K[Qe],K,S,c)}if(null!==P[Br]){const L=P[Br];for(let K=0;K<L.length;K++){const ee=L[K];Wv(ee[Qe],ee,S,c)}}}}}return c}function bb(s){const o=de(),a=Jt(),c=Cu();Yl(c+1);const h=Zv(a,c);if(s.dirty&&function ma(s){return 4==(4&s[Vt])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?Wv(a,o,c,[]):Eb(a,o,h,c);s.reset(p,Ch),s.notifyOnChanges()}return!0}return!1}function JS(s,o,a,c){const h=Jt();if(h.firstCreatePass){const p=Fn();(function Ib(s,o,a){null===s.queries&&(s.queries=new Gv),s.queries.track(new qv(o,a))})(h,new wb(o,a,c),p.index),function Cb(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(h,s),2==(2&a)&&(h.staticContentQueries=!0)}!function cg(s,o,a){const c=new Bv(4==(4&a));U0(s,o,c,c.destroy),null===o[ri]&&(o[ri]=new zv),o[ri].queries.push(new Hv(c))}(h,de(),a)}function lg(){return function XS(s,o){return s[ri].queries[o].queryList}(de(),Cu())}function Zv(s,o){return s.queries.getByIndex(o)}function Yv(s){return!!an(s)}function nd(...s){}const zb=new ln("Application Initializer");let yg=(()=>{class s{constructor(a){this.appInits=a,this.resolve=nd,this.reject=nd,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(Vy(p))a.push(p);else if(dE(p)){const y=new Promise((E,D)=>{p.subscribe({complete:E,error:D})});a.push(y)}}Promise.all(a).then(()=>{c()}).catch(h=>{this.reject(h)}),0===a.length&&c(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(ze(zb,8))},s.\u0275prov=bt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const vg=new ln("AppId",{providedIn:"root",factory:function u_(){return`${l_()}${l_()}${l_()}`}});function l_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const _g=new ln("Platform Initializer"),qb=new ln("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let c_=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=bt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const rf=new ln("LocaleId",{providedIn:"root",factory:()=>Vn(rf,Je.Optional|Je.SkipSelf)||function lA(){return typeof $localize<"u"&&$localize.locale||Kc}()}),cA=new ln("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Zb{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let dA=(()=>{class s{compileModuleSync(a){return new Sv(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),p=mo(an(a).declarations).reduce((y,E)=>{const D=pt(E);return D&&y.push(new Oh(D)),y},[]);return new Zb(c,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=bt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const h_=(()=>Promise.resolve(0))();function Eg(s){typeof Zone>"u"?h_.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Ni{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ys(!1),this.onMicrotaskEmpty=new ys(!1),this.onStable=new ys(!1),this.onError=new ys(!1),typeof Zone>"u")throw new se(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&a,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function f_(){let s=Gt.requestAnimationFrame,o=Gt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Jb(s){const o=()=>{!function g_(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Gt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,bg(s),s.isCheckStableRunning=!0,p_(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),bg(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,h,p,y,E)=>{try{return Xb(s),a.invokeTask(h,p,y,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),eI(s)}},onInvoke:(a,c,h,p,y,E,D)=>{try{return Xb(s),a.invoke(h,p,y,E,D)}finally{s.shouldCoalesceRunChangeDetection&&o(),eI(s)}},onHasTask:(a,c,h,p)=>{a.hasTask(h,p),c===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,bg(s),p_(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,c,h,p)=>(a.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ni.isInAngularZone())throw new se(909,!1)}static assertNotInAngularZone(){if(Ni.isInAngularZone())throw new se(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,h){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+h,o,hA,nd,nd);try{return p.runTask(y,a,c)}finally{p.cancelTask(y)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const hA={};function p_(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function bg(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Xb(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function eI(s){s._nesting--,p_(s)}class fA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ys,this.onMicrotaskEmpty=new ys,this.onStable=new ys,this.onError=new ys}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,h){return o.apply(a,c)}}const m_=new ln(""),Ig=new ln("");let tI,pA=(()=>{class s{constructor(a,c,h){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,tI||(function gA(s){tI=s}(h),h.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ni.assertNotInAngularZone(),Eg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Eg(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,h){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:h})}whenStable(a,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,h){return[]}}return s.\u0275fac=function(a){return new(a||s)(ze(Ni),ze(Cg),ze(Ig))},s.\u0275prov=bt({token:s,factory:s.\u0275fac}),s})(),Cg=(()=>{class s{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return tI?.findTestabilityInTree(this,a,c)??null}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=bt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const ru=!1;let _o=null;const mA=new ln("AllowMultipleToken"),nI=new ln("PlatformDestroyListeners"),sf=new ln("appBootstrapListener");class _A{constructor(o,a){this.name=o,this.token=a}}function iI(s,o,a=[]){const c=`Platform: ${o}`,h=new ln(c);return(p=[])=>{let y=v_();if(!y||y.injector.get(mA,!1)){const E=[...a,...p,{provide:h,useValue:!0}];s?s(E):function y_(s){if(_o&&!_o.get(mA,!1))throw new se(400,!1);_o=s;const o=s.get(aI);(function rI(s){const o=s.get(_g,null);o&&o.forEach(a=>a())})(s)}(function oI(s=[],o){return Nc.create({name:o,providers:[{provide:Wa,useValue:"platform"},{provide:nI,useValue:new Set([()=>_o=null])},...s]})}(E,c))}return function sI(s){const o=v_();if(!o)throw new se(401,!1);return o}()}}function v_(){return _o?.get(aI)??null}let aI=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const h=function uI(s,o){let a;return a="noop"===s?new fA:("zone.js"===s?void 0:s)||new Ni(o),a}(c?.ngZone,function Dg(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),p=[{provide:Ni,useValue:h}];return h.run(()=>{const y=Nc.create({providers:p,parent:this.injector,name:a.moduleType.name}),E=a.create(y),D=E.injector.get(Dh,null);if(!D)throw new se(402,!1);return h.runOutsideAngular(()=>{const S=h.onError.subscribe({next:P=>{D.handleError(P)}});E.onDestroy(()=>{Ag(this._modules,E),S.unsubscribe()})}),function Tg(s,o,a){try{const c=a();return Vy(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(D,h,()=>{const S=E.injector.get(yg);return S.runInitializers(),S.donePromise.then(()=>(function Yc(s){et(s,"Expected localeId to be defined"),"string"==typeof s&&(Kp=s.toLowerCase().replace(/_/g,"-"))}(E.injector.get(rf,Kc)||Kc),this._moduleDoBootstrap(E),E))})})}bootstrapModule(a,c=[]){const h=lI({},c);return function yA(s,o,a){const c=new Sv(a);return Promise.resolve(c)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(a){const c=a.injector.get(Sg);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new se(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new se(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(nI,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(ze(Nc))},s.\u0275prov=bt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function lI(s,o){return Array.isArray(o)?o.reduce(lI,s):{...s,...o}}let Sg=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(a,c,h){this._zone=a,this._injector=c,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new F.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),y=new F.y(E=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{Ni.assertNotInAngularZone(),Eg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{Ni.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{D.unsubscribe(),S.unsubscribe()}});this.isStable=(0,ae.T)(p,y.pipe((0,_e.B)()))}bootstrap(a,c){const h=a instanceof h0;if(!this._injector.get(yg).done){!h&&cr(a);throw new se(405,ru)}let y;y=h?a:this._injector.get(Pc).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const E=function vA(s){return s.isBoundToModule}(y)?void 0:this._injector.get(ed),S=y.create(Nc.NULL,[],c||y.selector,E),P=S.location.nativeElement,L=S.injector.get(m_,null);return L?.registerApplication(P),S.onDestroy(()=>{this.detachView(S.hostView),Ag(this.components,S),L?.unregisterApplication(P)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new se(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Ag(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(sf,[]);c.push(...this._bootstrapListeners),c.forEach(h=>h(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Ag(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new se(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(a){return new(a||s)(ze(Ni),ze(Ku),ze(Dh))},s.\u0275prov=bt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Ag(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}function EA(){return!1}let IA=(()=>{class s{}return s.__NG_ELEMENT_ID__=__,s})();function __(s){return function dI(s,o,a){if(Ao(s)&&!a){const c=hr(s.index,o);return new Nh(c,c)}return 47&s.type?new Nh(o[kn],o):null}(Fn(),de(),16==(16&s))}class yI{constructor(){}supports(o){return Fh(o)}create(o){return new AA(o)}}const C_=(s,o)=>o;class AA{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||C_}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,h=0,p=null;for(;a||c;){const y=!c||a&&a.currentIndex<lf(c,h,p)?a:c,E=lf(y,h,p),D=y.currentIndex;if(y===c)h--,c=c._nextRemoved;else if(a=a._next,null==y.previousIndex)h++;else{p||(p=[]);const S=E-h,P=D-h;if(S!=P){for(let K=0;K<S;K++){const ee=K<p.length?p[K]:p[K]=0,fe=ee+K;P<=fe&&fe<S&&(p[K]=ee+1)}p[y.previousIndex]=P-S}}E!==D&&o(y,E,D)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Fh(o))throw new se(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,y,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)p=o[E],y=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,p,y,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,y,E),c=!0),a=a._next}else h=0,function nE(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[Symbol.iterator]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,E=>{y=this._trackByFn(h,E),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,E,y,h)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,y,h),c=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,h)):o=this._addAfter(new wo(a,c),p,h),o}_verifyReinsertion(o,a,c,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const h=null===a?this._itHead:a._next;return o._next=h,o._prev=a,null===h?this._itTail=o:h._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new D_),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new D_),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class wo{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class vI{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class D_{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new vI,this.map.set(a,c)),c.add(o)}get(o,a){const h=this.map.get(o);return h?h.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function lf(s,o,a){const c=s.previousIndex;if(null===c)return c;let h=0;return a&&c<a.length&&(h=a[c]),c+o+h}class T_{constructor(){}supports(o){return o instanceof Map||Pp(o)}create(){return new _I}}class _I{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Pp(o)))throw new se(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(h,c);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,a);const p=h._prev,y=h._next;return p&&(p._next=y),y&&(y._prev=p),h._next=null,h._prev=null,h}const c=new Eo(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class Eo{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Mg(){return new wI([new yI])}let wI=(()=>{class s{constructor(a){this.factories=a}static create(a,c){if(null!=c){const h=c.factories.slice();a=a.concat(h)}return new s(a)}static extend(a){return{provide:s,useFactory:c=>s.create(a,c||Mg()),deps:[[s,new vt,new Ho]]}}find(a){const c=this.factories.find(h=>h.supports(a));if(null!=c)return c;throw new se(901,!1)}}return s.\u0275prov=bt({token:s,providedIn:"root",factory:Mg}),s})();function EI(){return new bI([new T_])}let bI=(()=>{class s{constructor(a){this.factories=a}static create(a,c){if(c){const h=c.factories.slice();a=a.concat(h)}return new s(a)}static extend(a){return{provide:s,useFactory:c=>s.create(a,c||EI()),deps:[[s,new vt,new Ho]]}}find(a){const c=this.factories.find(h=>h.supports(a));if(c)return c;throw new se(901,!1)}}return s.\u0275prov=bt({token:s,providedIn:"root",factory:EI}),s})();const OR=iI(null,"core",[]);let S_=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(ze(Sg))},s.\u0275mod=ne({type:s}),s.\u0275inj=En({}),s})();function FR(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(Dt,Se,V)=>{"use strict";V.d(Se,{Z:()=>nt});var d=V(2090),B=V(4859),F=V(6881),ae=V(1877);class _e{constructor(se,Pe){this._delegate=se,this.firebase=Pe,(0,F._addComponent)(se,new B.wA("app-compat",()=>this,"PUBLIC")),this.container=se.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(se){this._delegate.automaticDataCollectionEnabled=se}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(se=>{this._delegate.checkDestroyed(),se()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(se,Pe=F._DEFAULT_ENTRY_NAME){var De;this._delegate.checkDestroyed();const $e=this._delegate.container.getProvider(se);return!$e.isInitialized()&&"EXPLICIT"===(null===(De=$e.getComponent())||void 0===De?void 0:De.instantiationMode)&&$e.initialize(),$e.getImmediate({identifier:Pe})}_removeServiceInstance(se,Pe=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(se).clearInstance(Pe)}_addComponent(se){(0,F._addComponent)(this._delegate,se)}_addOrOverwriteComponent(se){(0,F._addOrOverwriteComponent)(this._delegate,se)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Le=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function Oe(){const rt=function Ee(rt){const se={},Pe={__esModule:!0,initializeApp:function Ie(z,te={}){const He=F.initializeApp(z,te);if((0,d.r3)(se,He.name))return se[He.name];const Et=new rt(He,Pe);return se[He.name]=Et,Et},app:$e,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function Te(z){const te=z.name,He=te.replace("-compat","");if(F._registerComponent(z)&&"PUBLIC"===z.type){const Et=(qe=$e())=>{if("function"!=typeof qe[He])throw Le.create("invalid-app-argument",{appName:te});return qe[He]()};void 0!==z.serviceProps&&(0,d.ZB)(Et,z.serviceProps),Pe[He]=Et,rt.prototype[He]=function(...qe){return this._getService.bind(this,te).apply(this,z.multipleInstances?qe:[])}}return"PUBLIC"===z.type?Pe[He]:null},removeApp:function De(z){delete se[z]},useAsService:function Ve(z,te){return"serverAuth"===te?null:te},modularAPIs:F}};function $e(z){if(!(0,d.r3)(se,z=z||F._DEFAULT_ENTRY_NAME))throw Le.create("no-app",{appName:z});return se[z]}return Pe.default=Pe,Object.defineProperty(Pe,"apps",{get:function ge(){return Object.keys(se).map(z=>se[z])}}),$e.App=rt,Pe}(_e);return rt.INTERNAL=Object.assign(Object.assign({},rt.INTERNAL),{createFirebaseNamespace:Oe,extendNamespace:function se(Pe){(0,d.ZB)(rt,Pe)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),rt}(),q=new ae.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const rt=self.firebase.SDK_VERSION;rt&&rt.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const nt=G;!function ke(rt){(0,F.registerVersion)("@firebase/app-compat","0.2.9",rt)}()},6881:(Dt,Se,V)=>{"use strict";V.r(Se),V.d(Se,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>ei,_DEFAULT_ENTRY_NAME:()=>Pt,_addComponent:()=>Ke,_addOrOverwriteComponent:()=>dt,_apps:()=>Gt,_clearComponents:()=>Ur,_components:()=>qt,_getProvider:()=>Ln,_registerComponent:()=>Pn,_removeServiceInstance:()=>sn,deleteApp:()=>Hn,getApp:()=>as,getApps:()=>ze,initializeApp:()=>Wt,onLog:()=>zn,registerVersion:()=>Ar,setLogLevel:()=>Gn});var d=V(5861),B=V(4859),F=V(1877),ae=V(2090);const _e=(X,ne)=>ne.some(Me=>X instanceof Me);let pe,Le;const G=new WeakMap,q=new WeakMap,Q=new WeakMap,je=new WeakMap,ke=new WeakMap;let se={get(X,ne,Me){if(X instanceof IDBTransaction){if("done"===ne)return q.get(X);if("objectStoreNames"===ne)return X.objectStoreNames||Q.get(X);if("store"===ne)return Me.objectStoreNames[1]?void 0:Me.objectStore(Me.objectStoreNames[0])}return Ie(X[ne])},set:(X,ne,Me)=>(X[ne]=Me,!0),has:(X,ne)=>X instanceof IDBTransaction&&("done"===ne||"store"===ne)||ne in X};function $e(X){return"function"==typeof X?function De(X){return X!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Oe(){return Le||(Le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(X)?function(...ne){return X.apply(ge(this),ne),Ie(G.get(this))}:function(...ne){return Ie(X.apply(ge(this),ne))}:function(ne,...Me){const ht=X.call(ge(this),ne,...Me);return Q.set(ht,ne.sort?ne.sort():[ne]),Ie(ht)}}(X):(X instanceof IDBTransaction&&function rt(X){if(q.has(X))return;const ne=new Promise((Me,ht)=>{const Mt=()=>{X.removeEventListener("complete",Yt),X.removeEventListener("error",pt),X.removeEventListener("abort",pt)},Yt=()=>{Me(),Mt()},pt=()=>{ht(X.error||new DOMException("AbortError","AbortError")),Mt()};X.addEventListener("complete",Yt),X.addEventListener("error",pt),X.addEventListener("abort",pt)});q.set(X,ne)}(X),_e(X,function Ee(){return pe||(pe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(X,se):X)}function Ie(X){if(X instanceof IDBRequest)return function nt(X){const ne=new Promise((Me,ht)=>{const Mt=()=>{X.removeEventListener("success",Yt),X.removeEventListener("error",pt)},Yt=()=>{Me(Ie(X.result)),Mt()},pt=()=>{ht(X.error),Mt()};X.addEventListener("success",Yt),X.addEventListener("error",pt)});return ne.then(Me=>{Me instanceof IDBCursor&&G.set(Me,X)}).catch(()=>{}),ke.set(ne,X),ne}(X);if(je.has(X))return je.get(X);const ne=$e(X);return ne!==X&&(je.set(X,ne),ke.set(ne,X)),ne}const ge=X=>ke.get(X),z=["get","getKey","getAll","getAllKeys","count"],te=["put","add","delete","clear"],He=new Map;function Et(X,ne){if(!(X instanceof IDBDatabase)||ne in X||"string"!=typeof ne)return;if(He.get(ne))return He.get(ne);const Me=ne.replace(/FromIndex$/,""),ht=ne!==Me,Mt=te.includes(Me);if(!(Me in(ht?IDBIndex:IDBObjectStore).prototype)||!Mt&&!z.includes(Me))return;const Yt=function(){var pt=(0,d.Z)(function*(on,...Zt){const cr=this.transaction(on,Mt?"readwrite":"readonly");let an=cr.store;return ht&&(an=an.index(Zt.shift())),(yield Promise.all([an[Me](...Zt),Mt&&cr.done]))[0]});return function(Zt){return pt.apply(this,arguments)}}();return He.set(ne,Yt),Yt}!function Pe(X){se=X(se)}(X=>({...X,get:(ne,Me,ht)=>Et(ne,Me)||X.get(ne,Me,ht),has:(ne,Me)=>!!Et(ne,Me)||X.has(ne,Me)}));class qe{constructor(ne){this.container=ne}getPlatformInfoString(){return this.container.getProviders().map(Me=>{if(function it(X){return"VERSION"===X.getComponent()?.type}(Me)){const ht=Me.getImmediate();return`${ht.library}/${ht.version}`}return null}).filter(Me=>Me).join(" ")}}const ot="@firebase/app",le=new F.Yd("@firebase/app"),Pt="[DEFAULT]",_n={[ot]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Gt=new Map,qt=new Map;function Ke(X,ne){try{X.container.addComponent(ne)}catch(Me){le.debug(`Component ${ne.name} failed to register with FirebaseApp ${X.name}`,Me)}}function dt(X,ne){X.container.addOrOverwriteComponent(ne)}function Pn(X){const ne=X.name;if(qt.has(ne))return le.debug(`There were multiple attempts to register component ${ne}.`),!1;qt.set(ne,X);for(const Me of Gt.values())Ke(Me,X);return!0}function Ln(X,ne){const Me=X.container.getProvider("heartbeat").getImmediate({optional:!0});return Me&&Me.triggerHeartbeat(),X.container.getProvider(ne)}function sn(X,ne,Me=Pt){Ln(X,ne).clearInstance(Me)}function Ur(){qt.clear()}const Jn=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class jt{constructor(ne,Me,ht){this._isDeleted=!1,this._options=Object.assign({},ne),this._config=Object.assign({},Me),this._name=Me.name,this._automaticDataCollectionEnabled=Me.automaticDataCollectionEnabled,this._container=ht,this.container.addComponent(new B.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ne){this.checkDestroyed(),this._automaticDataCollectionEnabled=ne}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ne){this._isDeleted=ne}checkDestroyed(){if(this.isDeleted)throw Jn.create("app-deleted",{appName:this._name})}}const ei="9.21.0";function Wt(X,ne={}){let Me=X;"object"!=typeof ne&&(ne={name:ne});const ht=Object.assign({name:Pt,automaticDataCollectionEnabled:!1},ne),Mt=ht.name;if("string"!=typeof Mt||!Mt)throw Jn.create("bad-app-name",{appName:String(Mt)});if(Me||(Me=(0,ae.aH)()),!Me)throw Jn.create("no-options");const Yt=Gt.get(Mt);if(Yt){if((0,ae.vZ)(Me,Yt.options)&&(0,ae.vZ)(ht,Yt.config))return Yt;throw Jn.create("duplicate-app",{appName:Mt})}const pt=new B.H0(Mt);for(const Zt of qt.values())pt.addComponent(Zt);const on=new jt(Me,ht,pt);return Gt.set(Mt,on),on}function as(X=Pt){const ne=Gt.get(X);if(!ne&&X===Pt)return Wt();if(!ne)throw Jn.create("no-app",{appName:X});return ne}function ze(){return Array.from(Gt.values())}function Hn(X){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,d.Z)(function*(X){const ne=X.name;Gt.has(ne)&&(Gt.delete(ne),yield Promise.all(X.container.getProviders().map(Me=>Me.delete())),X.isDeleted=!0)})).apply(this,arguments)}function Ar(X,ne,Me){var ht;let Mt=null!==(ht=_n[X])&&void 0!==ht?ht:X;Me&&(Mt+=`-${Me}`);const Yt=Mt.match(/\s|\//),pt=ne.match(/\s|\//);if(Yt||pt){const on=[`Unable to register library "${Mt}" with version "${ne}":`];return Yt&&on.push(`library name "${Mt}" contains illegal characters (whitespace or "/")`),Yt&&pt&&on.push("and"),pt&&on.push(`version name "${ne}" contains illegal characters (whitespace or "/")`),void le.warn(on.join(" "))}Pn(new B.wA(`${Mt}-version`,()=>({library:Mt,version:ne}),"VERSION"))}function zn(X,ne){if(null!==X&&"function"!=typeof X)throw Jn.create("invalid-log-argument");(0,F.Am)(X,ne)}function Gn(X){(0,F.Ub)(X)}const ti="firebase-heartbeat-database",Wr=1,H="firebase-heartbeat-store";let U=null;function N(){return U||(U=function Te(X,ne,{blocked:Me,upgrade:ht,blocking:Mt,terminated:Yt}={}){const pt=indexedDB.open(X,ne),on=Ie(pt);return ht&&pt.addEventListener("upgradeneeded",Zt=>{ht(Ie(pt.result),Zt.oldVersion,Zt.newVersion,Ie(pt.transaction),Zt)}),Me&&pt.addEventListener("blocked",Zt=>Me(Zt.oldVersion,Zt.newVersion,Zt)),on.then(Zt=>{Yt&&Zt.addEventListener("close",()=>Yt()),Mt&&Zt.addEventListener("versionchange",cr=>Mt(cr.oldVersion,cr.newVersion,cr))}).catch(()=>{}),on}(ti,Wr,{upgrade:(X,ne)=>{0===ne&&X.createObjectStore(H)}}).catch(X=>{throw Jn.create("idb-open",{originalErrorMessage:X.message})})),U}function R(){return(R=(0,d.Z)(function*(X){try{return(yield N()).transaction(H).objectStore(H).get(tt(X))}catch(ne){if(ne instanceof ae.ZR)le.warn(ne.message);else{const Me=Jn.create("idb-get",{originalErrorMessage:ne?.message});le.warn(Me.message)}}})).apply(this,arguments)}function W(X,ne){return he.apply(this,arguments)}function he(){return(he=(0,d.Z)(function*(X,ne){try{const ht=(yield N()).transaction(H,"readwrite");return yield ht.objectStore(H).put(ne,tt(X)),ht.done}catch(Me){if(Me instanceof ae.ZR)le.warn(Me.message);else{const ht=Jn.create("idb-set",{originalErrorMessage:Me?.message});le.warn(ht.message)}}})).apply(this,arguments)}function tt(X){return`${X.name}!${X.options.appId}`}class $t{constructor(ne){this.container=ne,this._heartbeatsCache=null;const Me=this.container.getProvider("app").getImmediate();this._storage=new Ft(Me),this._heartbeatsCachePromise=this._storage.read().then(ht=>(this._heartbeatsCache=ht,ht))}triggerHeartbeat(){var ne=this;return(0,d.Z)(function*(){const ht=ne.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Mt=St();if(null===ne._heartbeatsCache&&(ne._heartbeatsCache=yield ne._heartbeatsCachePromise),ne._heartbeatsCache.lastSentHeartbeatDate!==Mt&&!ne._heartbeatsCache.heartbeats.some(Yt=>Yt.date===Mt))return ne._heartbeatsCache.heartbeats.push({date:Mt,agent:ht}),ne._heartbeatsCache.heartbeats=ne._heartbeatsCache.heartbeats.filter(Yt=>{const pt=new Date(Yt.date).valueOf();return Date.now()-pt<=2592e6}),ne._storage.overwrite(ne._heartbeatsCache)})()}getHeartbeatsHeader(){var ne=this;return(0,d.Z)(function*(){if(null===ne._heartbeatsCache&&(yield ne._heartbeatsCachePromise),null===ne._heartbeatsCache||0===ne._heartbeatsCache.heartbeats.length)return"";const Me=St(),{heartbeatsToSend:ht,unsentEntries:Mt}=function wn(X,ne=1024){const Me=[];let ht=X.slice();for(const Mt of X){const Yt=Me.find(pt=>pt.agent===Mt.agent);if(Yt){if(Yt.dates.push(Mt.date),vr(Me)>ne){Yt.dates.pop();break}}else if(Me.push({agent:Mt.agent,dates:[Mt.date]}),vr(Me)>ne){Me.pop();break}ht=ht.slice(1)}return{heartbeatsToSend:Me,unsentEntries:ht}}(ne._heartbeatsCache.heartbeats),Yt=(0,ae.L)(JSON.stringify({version:2,heartbeats:ht}));return ne._heartbeatsCache.lastSentHeartbeatDate=Me,Mt.length>0?(ne._heartbeatsCache.heartbeats=Mt,yield ne._storage.overwrite(ne._heartbeatsCache)):(ne._heartbeatsCache.heartbeats=[],ne._storage.overwrite(ne._heartbeatsCache)),Yt})()}}function St(){return(new Date).toISOString().substring(0,10)}class Ft{constructor(ne){this.app=ne,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ne=this;return(0,d.Z)(function*(){return(yield ne._canUseIndexedDBPromise)&&(yield function O(X){return R.apply(this,arguments)}(ne.app))||{heartbeats:[]}})()}overwrite(ne){var Me=this;return(0,d.Z)(function*(){var ht;if(yield Me._canUseIndexedDBPromise){const Yt=yield Me.read();return W(Me.app,{lastSentHeartbeatDate:null!==(ht=ne.lastSentHeartbeatDate)&&void 0!==ht?ht:Yt.lastSentHeartbeatDate,heartbeats:ne.heartbeats})}})()}add(ne){var Me=this;return(0,d.Z)(function*(){var ht;if(yield Me._canUseIndexedDBPromise){const Yt=yield Me.read();return W(Me.app,{lastSentHeartbeatDate:null!==(ht=ne.lastSentHeartbeatDate)&&void 0!==ht?ht:Yt.lastSentHeartbeatDate,heartbeats:[...Yt.heartbeats,...ne.heartbeats]})}})()}}function vr(X){return(0,ae.L)(JSON.stringify({version:2,heartbeats:X})).length}!function ws(X){Pn(new B.wA("platform-logger",ne=>new qe(ne),"PRIVATE")),Pn(new B.wA("heartbeat",ne=>new $t(ne),"PRIVATE")),Ar(ot,"0.9.9",X),Ar(ot,"0.9.9","esm2017"),Ar("fire-js","")}("")},4859:(Dt,Se,V)=>{"use strict";V.d(Se,{H0:()=>Ee,wA:()=>F});var d=V(5861),B=V(2090);class F{constructor(G,q,Q){this.name=G,this.instanceFactory=q,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const ae="[DEFAULT]";class _e{constructor(G,q){this.name=G,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const q=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(q)){const Q=new B.BH;if(this.instancesDeferred.set(q,Q),this.isInitialized(q)||this.shouldAutoInitialize())try{const je=this.getOrInitializeService({instanceIdentifier:q});je&&Q.resolve(je)}catch{}}return this.instancesDeferred.get(q).promise}getImmediate(G){var q;const Q=this.normalizeInstanceIdentifier(G?.identifier),je=null!==(q=G?.optional)&&void 0!==q&&q;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(ke){if(je)return null;throw ke}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function Le(Oe){return"EAGER"===Oe.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[q,Q]of this.instancesDeferred.entries()){const je=this.normalizeInstanceIdentifier(q);try{const ke=this.getOrInitializeService({instanceIdentifier:je});Q.resolve(ke)}catch{}}}}clearInstance(G=ae){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,d.Z)(function*(){const q=Array.from(G.instances.values());yield Promise.all([...q.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...q.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=ae){return this.instances.has(G)}getOptions(G=ae){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:q={}}=G,Q=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const je=this.getOrInitializeService({instanceIdentifier:Q,options:q});for(const[ke,nt]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(ke)&&nt.resolve(je);return je}onInit(G,q){var Q;const je=this.normalizeInstanceIdentifier(q),ke=null!==(Q=this.onInitCallbacks.get(je))&&void 0!==Q?Q:new Set;ke.add(G),this.onInitCallbacks.set(je,ke);const nt=this.instances.get(je);return nt&&G(nt,je),()=>{ke.delete(G)}}invokeOnInitCallbacks(G,q){const Q=this.onInitCallbacks.get(q);if(Q)for(const je of Q)try{je(G,q)}catch{}}getOrInitializeService({instanceIdentifier:G,options:q={}}){let Q=this.instances.get(G);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(Oe=G,Oe===ae?void 0:Oe),options:q}),this.instances.set(G,Q),this.instancesOptions.set(G,q),this.invokeOnInitCallbacks(Q,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,Q)}catch{}var Oe;return Q||null}normalizeInstanceIdentifier(G=ae){return this.component?this.component.multipleInstances?G:ae:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ee{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const q=this.getProvider(G.name);if(q.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);q.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const q=new _e(G,this);return this.providers.set(G,q),q}getProviders(){return Array.from(this.providers.values())}}},1877:(Dt,Se,V)=>{"use strict";V.d(Se,{Am:()=>Oe,Ub:()=>Ee,Yd:()=>Le,in:()=>B});const d=[];var B=(()=>{return(G=B||(B={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",B;var G})();const F={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},ae=B.INFO,_e={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},pe=(G,q,...Q)=>{if(q<G.logLevel)return;const je=(new Date).toISOString(),ke=_e[q];if(!ke)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[ke](`[${je}]  ${G.name}:`,...Q)};class Le{constructor(q){this.name=q,this._logLevel=ae,this._logHandler=pe,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in B))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?F[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...q),this._logHandler(this,B.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...q),this._logHandler(this,B.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,B.INFO,...q),this._logHandler(this,B.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,B.WARN,...q),this._logHandler(this,B.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...q),this._logHandler(this,B.ERROR,...q)}}function Ee(G){d.forEach(q=>{q.setLogLevel(G)})}function Oe(G,q){for(const Q of d){let je=null;q&&q.level&&(je=F[q.level]),Q.userLogHandler=null===G?null:(ke,nt,...rt)=>{const se=rt.map(Pe=>{if(null==Pe)return null;if("string"==typeof Pe)return Pe;if("number"==typeof Pe||"boolean"==typeof Pe)return Pe.toString();if(Pe instanceof Error)return Pe.message;try{return JSON.stringify(Pe)}catch{return null}}).filter(Pe=>Pe).join(" ");nt>=(je??ke.logLevel)&&G({level:B[nt].toLowerCase(),message:se,args:rt,type:ke.name})}}}},9260:(Dt,Se,V)=>{"use strict";V.d(Se,{Z:()=>d.Z});var d=V(3942);d.Z.registerVersion("firebase","9.21.0","app-compat")},9568:(Dt,Se,V)=>{"use strict";V.r(Se);var d=V(5861),B=V(3942),F=V(8502),ae=V(2090),Le=(V(6881),V(1877),V(4859));function Ee(){return window}const Oe=2e3;function q(){return q=(0,d.Z)(function*(N,O,R){var W;const{BuildInfo:he}=Ee();(0,F.as)(O.sessionId,"AuthEvent did not contain a session ID");const tt=yield function Pe(N){return De.apply(this,arguments)}(O.sessionId),At={};return(0,F.at)()?At.ibi=he.packageName:(0,F.au)()?At.apn=he.packageName:(0,F.av)(N,"operation-not-supported-in-this-environment"),he.displayName&&(At.appDisplayName=he.displayName),At.sessionId=tt,(0,F.aw)(N,R,O.type,void 0,null!==(W=O.eventId)&&void 0!==W?W:void 0,At)}),q.apply(this,arguments)}function je(){return(je=(0,d.Z)(function*(N){const{BuildInfo:O}=Ee(),R={};(0,F.at)()?R.iosBundleId=O.packageName:(0,F.au)()?R.androidPackageName=O.packageName:(0,F.av)(N,"operation-not-supported-in-this-environment"),yield(0,F.ax)(N,R)})).apply(this,arguments)}function rt(){return(rt=(0,d.Z)(function*(N,O,R){const{cordova:W}=Ee();let he=()=>{};try{yield new Promise((tt,At)=>{let Ct=null;function $t(){var Ft;tt();const vr=null===(Ft=W.plugins.browsertab)||void 0===Ft?void 0:Ft.close;"function"==typeof vr&&vr(),"function"==typeof R?.close&&R.close()}function St(){Ct||(Ct=window.setTimeout(()=>{At((0,F.az)(N,"redirect-cancelled-by-user"))},Oe))}function wn(){"visible"===document?.visibilityState&&St()}O.addPassiveListener($t),document.addEventListener("resume",St,!1),(0,F.au)()&&document.addEventListener("visibilitychange",wn,!1),he=()=>{O.removePassiveListener($t),document.removeEventListener("resume",St,!1),document.removeEventListener("visibilitychange",wn,!1),Ct&&window.clearTimeout(Ct)}})}finally{he()}})).apply(this,arguments)}function De(){return(De=(0,d.Z)(function*(N){const O=function $e(N){if((0,F.as)(/[0-9a-zA-Z]+/.test(N),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(N);const O=new ArrayBuffer(N.length),R=new Uint8Array(O);for(let W=0;W<N.length;W++)R[W]=N.charCodeAt(W);return R}(N),R=yield crypto.subtle.digest("SHA-256",O);return Array.from(new Uint8Array(R)).map(he=>he.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Ie=20;class ge extends F.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(O=>{this.resolveInialized=O})}addPassiveListener(O){this.passiveListeners.add(O)}removePassiveListener(O){this.passiveListeners.delete(O)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(O){return this.resolveInialized(),this.passiveListeners.forEach(R=>R(O)),super.onEvent(O)}initialized(){var O=this;return(0,d.Z)(function*(){yield O.initPromise})()}}function z(N){return te.apply(this,arguments)}function te(){return(te=(0,d.Z)(function*(N){const O=yield qe()._get(it(N));return O&&(yield qe()._remove(it(N))),O})).apply(this,arguments)}function Et(){const N=[],O="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let R=0;R<Ie;R++){const W=Math.floor(Math.random()*O.length);N.push(O.charAt(W))}return N.join("")}function qe(){return(0,F.aC)(F.b)}function it(N){return(0,F.aD)("authEvent",N.config.apiKey,N.name)}function le(N){if(!N?.includes("?"))return{};const[O,...R]=N.split("?");return(0,ae.zd)(R.join("?"))}const Ue=class we{constructor(){this._redirectPersistence=F.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=F.aE,this._overrideRedirectResult=F.aF}_initialize(O){var R=this;return(0,d.Z)(function*(){const W=O._key();let he=R.eventManagers.get(W);return he||(he=new ge(O),R.eventManagers.set(W,he),R.attachCallbackListeners(O,he)),he})()}_openPopup(O){(0,F.av)(O,"operation-not-supported-in-this-environment")}_openRedirect(O,R,W,he){var tt=this;return(0,d.Z)(function*(){!function se(N){var O,R,W,he,tt,At,Ct,$t,St,wn;const Ft=Ee();(0,F.aA)("function"==typeof(null===(O=Ft?.universalLinks)||void 0===O?void 0:O.subscribe),N,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,F.aA)(typeof(null===(R=Ft?.BuildInfo)||void 0===R?void 0:R.packageName)<"u",N,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,F.aA)("function"==typeof(null===(tt=null===(he=null===(W=Ft?.cordova)||void 0===W?void 0:W.plugins)||void 0===he?void 0:he.browsertab)||void 0===tt?void 0:tt.openUrl),N,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,F.aA)("function"==typeof(null===($t=null===(Ct=null===(At=Ft?.cordova)||void 0===At?void 0:At.plugins)||void 0===Ct?void 0:Ct.browsertab)||void 0===$t?void 0:$t.isAvailable),N,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,F.aA)("function"==typeof(null===(wn=null===(St=Ft?.cordova)||void 0===St?void 0:St.InAppBrowser)||void 0===wn?void 0:wn.open),N,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(O);const At=yield tt._initialize(O);yield At.initialized(),At.resetRedirect(),(0,F.aG)(),yield tt._originValidation(O);const Ct=function Te(N,O,R=null){return{type:O,eventId:R,urlResponse:null,sessionId:Et(),postBody:null,tenantId:N.tenantId,error:(0,F.az)(N,"no-auth-event")}}(O,W,he);yield function Ve(N,O){return qe()._set(it(N),O)}(O,Ct);const $t=yield function G(N,O,R){return q.apply(this,arguments)}(O,Ct,R),St=yield function ke(N){const{cordova:O}=Ee();return new Promise(R=>{O.plugins.browsertab.isAvailable(W=>{let he=null;W?O.plugins.browsertab.openUrl(N):he=O.InAppBrowser.open(N,(0,F.ay)()?"_blank":"_system","location=yes"),R(he)})})}($t);return function nt(N,O,R){return rt.apply(this,arguments)}(O,At,St)})()}_isIframeWebStorageSupported(O,R){throw new Error("Method not implemented.")}_originValidation(O){const R=O._key();return this.originValidationPromises[R]||(this.originValidationPromises[R]=function Q(N){return je.apply(this,arguments)}(O)),this.originValidationPromises[R]}attachCallbackListeners(O,R){const{universalLinks:W,handleOpenURL:he,BuildInfo:tt}=Ee(),At=setTimeout((0,d.Z)(function*(){yield z(O),R.onEvent(xe())}),500),Ct=function(){var wn=(0,d.Z)(function*(Ft){clearTimeout(At);const vr=yield z(O);let ws=null;vr&&Ft?.url&&(ws=function He(N,O){var R,W;const he=function ce(N){const O=le(N),R=O.link?decodeURIComponent(O.link):void 0,W=le(R).link,he=O.deep_link_id?decodeURIComponent(O.deep_link_id):void 0;return le(he).link||he||W||R||N}(O);if(he.includes("/__/auth/callback")){const tt=le(he),At=tt.firebaseError?function ot(N){try{return JSON.parse(N)}catch{return null}}(decodeURIComponent(tt.firebaseError)):null,Ct=null===(W=null===(R=At?.code)||void 0===R?void 0:R.split("auth/"))||void 0===W?void 0:W[1],$t=Ct?(0,F.az)(Ct):null;return $t?{type:N.type,eventId:N.eventId,tenantId:N.tenantId,error:$t,urlResponse:null,sessionId:null,postBody:null}:{type:N.type,eventId:N.eventId,tenantId:N.tenantId,sessionId:N.sessionId,urlResponse:he,postBody:null}}return null}(vr,Ft.url)),R.onEvent(ws||xe())});return function(vr){return wn.apply(this,arguments)}}();typeof W<"u"&&"function"==typeof W.subscribe&&W.subscribe(null,Ct);const $t=he,St=`${tt.packageName.toLowerCase()}://`;Ee().handleOpenURL=function(){var wn=(0,d.Z)(function*(Ft){if(Ft.toLowerCase().startsWith(St)&&Ct({url:Ft}),"function"==typeof $t)try{$t(Ft)}catch(vr){console.error(vr)}});return function(Ft){return wn.apply(this,arguments)}}()}};function xe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,F.az)("no-auth-event")}}const lt=1e3;function zt(){var N;return(null===(N=self?.location)||void 0===N?void 0:N.protocol)||null}function Bt(N=(0,ae.z$)()){return!("file:"!==zt()&&"ionic:"!==zt()&&"capacitor:"!==zt()||!N.toLowerCase().match(/iphone|ipad|ipod|android/))}function yr(){try{const N=self.localStorage,O=F.aL();if(N)return N.setItem(O,"1"),N.removeItem(O),!function Nn(N=(0,ae.z$)()){return function xn(){return(0,ae.w1)()&&11===document?.documentMode}()||function mr(N=(0,ae.z$)()){return/Edge\/\d+/.test(N)}(N)}()||(0,ae.hl)()}catch{return Xr()&&(0,ae.hl)()}return!1}function Xr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function ur(){return(function bt(){return"http:"===zt()||"https:"===zt()}()||(0,ae.ru)()||Bt())&&!function En(){return(0,ae.b$)()||(0,ae.UG)()}()&&yr()&&!Xr()}function yn(){return Bt()&&typeof document<"u"}function On(){return(On=(0,d.Z)(function*(){return!!yn()&&new Promise(N=>{const O=setTimeout(()=>{N(!1)},lt);document.addEventListener("deviceready",()=>{clearTimeout(O),N(!0)})})})).apply(this,arguments)}const bn={LOCAL:"local",NONE:"none",SESSION:"session"},fi=F.aA,Mn="persistence";function _n(N){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,d.Z)(function*(N){yield N._initializationPromise;const O=Ke(),R=F.aD(Mn,N.config.apiKey,N.name);O&&O.setItem(R,N._getPersistence())})).apply(this,arguments)}function Ke(){var N;try{return(null===(N=function Je(){return typeof window<"u"?window:null}())||void 0===N?void 0:N.sessionStorage)||null}catch{return null}}const dt=F.aA;class Pn{constructor(){this.browserResolver=F.aC(F.k),this.cordovaResolver=F.aC(Ue),this.underlyingResolver=null,this._redirectPersistence=F.a,this._completeRedirectFn=F.aE,this._overrideRedirectResult=F.aF}_initialize(O){var R=this;return(0,d.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._initialize(O)})()}_openPopup(O,R,W,he){var tt=this;return(0,d.Z)(function*(){return yield tt.selectUnderlyingResolver(),tt.assertedUnderlyingResolver._openPopup(O,R,W,he)})()}_openRedirect(O,R,W,he){var tt=this;return(0,d.Z)(function*(){return yield tt.selectUnderlyingResolver(),tt.assertedUnderlyingResolver._openRedirect(O,R,W,he)})()}_isIframeWebStorageSupported(O,R){this.assertedUnderlyingResolver._isIframeWebStorageSupported(O,R)}_originValidation(O){return this.assertedUnderlyingResolver._originValidation(O)}get _shouldInitProactively(){return yn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return dt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var O=this;return(0,d.Z)(function*(){if(O.underlyingResolver)return;const R=yield function Sr(){return On.apply(this,arguments)}();O.underlyingResolver=R?O.cordovaResolver:O.browserResolver})()}}function Ln(N){return N.unwrap()}function Ur(N){return Jn(N)}function Jn(N){const{_tokenResponse:O}=N instanceof ae.ZR?N.customData:N;if(!O)return null;if(!(N instanceof ae.ZR)&&"temporaryProof"in O&&"phoneNumber"in O)return F.P.credentialFromResult(N);const R=O.providerId;if(!R||R===F.p.PASSWORD)return null;let W;switch(R){case F.p.GOOGLE:W=F.V;break;case F.p.FACEBOOK:W=F.U;break;case F.p.GITHUB:W=F.W;break;case F.p.TWITTER:W=F.Z;break;default:const{oauthIdToken:he,oauthAccessToken:tt,oauthTokenSecret:At,pendingToken:Ct,nonce:$t}=O;return tt||At||he||Ct?Ct?R.startsWith("saml.")?F.aO._create(R,Ct):F.L._fromParams({providerId:R,signInMethod:R,pendingToken:Ct,idToken:he,accessToken:tt}):new F.X(R).credential({idToken:he,accessToken:tt,rawNonce:$t}):null}return N instanceof ae.ZR?W.credentialFromError(N):W.credentialFromResult(N)}function jt(N,O){return O.catch(R=>{throw R instanceof ae.ZR&&function lr(N,O){var R;const W=null===(R=O.customData)||void 0===R?void 0:R._tokenResponse;if("auth/multi-factor-auth-required"===O?.code)O.resolver=new as(N,F.aq(N,O));else if(W){const he=Jn(O),tt=O;he&&(tt.credential=he,tt.tenantId=W.tenantId||void 0,tt.email=W.email||void 0,tt.phoneNumber=W.phoneNumber||void 0)}}(N,R),R}).then(R=>{const he=R.user;return{operationType:R.operationType,credential:Ur(R),additionalUserInfo:F.ao(R),user:ze.getOrCreate(he)}})}function ei(N,O){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,d.Z)(function*(N,O){const R=yield O;return{verificationId:R.verificationId,confirm:W=>jt(N,R.confirm(W))}})).apply(this,arguments)}class as{constructor(O,R){this.resolver=R,this.auth=function sn(N){return N.wrapped()}(O)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(O){return jt(Ln(this.auth),this.resolver.resolveSignIn(O))}}class ze{constructor(O){this._delegate=O,this.multiFactor=F.ar(O)}static getOrCreate(O){return ze.USER_MAP.has(O)||ze.USER_MAP.set(O,new ze(O)),ze.USER_MAP.get(O)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(O){return this._delegate.getIdTokenResult(O)}getIdToken(O){return this._delegate.getIdToken(O)}linkAndRetrieveDataWithCredential(O){return this.linkWithCredential(O)}linkWithCredential(O){var R=this;return(0,d.Z)(function*(){return jt(R.auth,F.a0(R._delegate,O))})()}linkWithPhoneNumber(O,R){var W=this;return(0,d.Z)(function*(){return ei(W.auth,F.l(W._delegate,O,R))})()}linkWithPopup(O){var R=this;return(0,d.Z)(function*(){return jt(R.auth,F.d(R._delegate,O,Pn))})()}linkWithRedirect(O){var R=this;return(0,d.Z)(function*(){return yield _n(F.aH(R.auth)),F.g(R._delegate,O,Pn)})()}reauthenticateAndRetrieveDataWithCredential(O){return this.reauthenticateWithCredential(O)}reauthenticateWithCredential(O){var R=this;return(0,d.Z)(function*(){return jt(R.auth,F.a1(R._delegate,O))})()}reauthenticateWithPhoneNumber(O,R){return ei(this.auth,F.r(this._delegate,O,R))}reauthenticateWithPopup(O){return jt(this.auth,F.e(this._delegate,O,Pn))}reauthenticateWithRedirect(O){var R=this;return(0,d.Z)(function*(){return yield _n(F.aH(R.auth)),F.h(R._delegate,O,Pn)})()}sendEmailVerification(O){return F.ae(this._delegate,O)}unlink(O){var R=this;return(0,d.Z)(function*(){return yield F.an(R._delegate,O),R})()}updateEmail(O){return F.aj(this._delegate,O)}updatePassword(O){return F.ak(this._delegate,O)}updatePhoneNumber(O){return F.u(this._delegate,O)}updateProfile(O){return F.ai(this._delegate,O)}verifyBeforeUpdateEmail(O,R){return F.af(this._delegate,O,R)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ze.USER_MAP=new WeakMap;const Hn=F.aA;let Vn=(()=>{class N{constructor(R,W){if(this.app=R,W.isInitialized())return this._delegate=W.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:he}=R.options;Hn(he,"invalid-api-key",{appName:R.name}),Hn(he,"invalid-api-key",{appName:R.name});const tt=typeof window<"u"?Pn:void 0;this._delegate=W.initialize({options:{persistence:zn(he,R.name),popupRedirectResolver:tt}}),this._delegate._updateErrorMap(F.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ze.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(R){this._delegate.languageCode=R}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(R){this._delegate.tenantId=R}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(R,W){F.I(this._delegate,R,W)}applyActionCode(R){return F.a5(this._delegate,R)}checkActionCode(R){return F.a6(this._delegate,R)}confirmPasswordReset(R,W){return F.a4(this._delegate,R,W)}createUserWithEmailAndPassword(R,W){var he=this;return(0,d.Z)(function*(){return jt(he._delegate,F.a8(he._delegate,R,W))})()}fetchProvidersForEmail(R){return this.fetchSignInMethodsForEmail(R)}fetchSignInMethodsForEmail(R){return F.ad(this._delegate,R)}isSignInWithEmailLink(R){return F.ab(this._delegate,R)}getRedirectResult(){var R=this;return(0,d.Z)(function*(){Hn(ur(),R._delegate,"operation-not-supported-in-this-environment");const W=yield F.j(R._delegate,Pn);return W?jt(R._delegate,Promise.resolve(W)):{credential:null,user:null}})()}addFrameworkForLogging(R){!function et(N,O){(0,F.aH)(N)._logFramework(O)}(this._delegate,R)}onAuthStateChanged(R,W,he){const{next:tt,error:At,complete:Ct}=Ar(R,W,he);return this._delegate.onAuthStateChanged(tt,At,Ct)}onIdTokenChanged(R,W,he){const{next:tt,error:At,complete:Ct}=Ar(R,W,he);return this._delegate.onIdTokenChanged(tt,At,Ct)}sendSignInLinkToEmail(R,W){return F.aa(this._delegate,R,W)}sendPasswordResetEmail(R,W){return F.a3(this._delegate,R,W||void 0)}setPersistence(R){var W=this;return(0,d.Z)(function*(){let he;switch(function Pt(N,O){fi(Object.values(bn).includes(O),N,"invalid-persistence-type"),(0,ae.b$)()?fi(O!==bn.SESSION,N,"unsupported-persistence-type"):(0,ae.UG)()?fi(O===bn.NONE,N,"unsupported-persistence-type"):Xr()?fi(O===bn.NONE||O===bn.LOCAL&&(0,ae.hl)(),N,"unsupported-persistence-type"):fi(O===bn.NONE||yr(),N,"unsupported-persistence-type")}(W._delegate,R),R){case bn.SESSION:he=F.a;break;case bn.LOCAL:he=(yield F.aC(F.i)._isAvailable())?F.i:F.b;break;case bn.NONE:he=F.N;break;default:return F.av("argument-error",{appName:W._delegate.name})}return W._delegate.setPersistence(he)})()}signInAndRetrieveDataWithCredential(R){return this.signInWithCredential(R)}signInAnonymously(){return jt(this._delegate,F._(this._delegate))}signInWithCredential(R){return jt(this._delegate,F.$(this._delegate,R))}signInWithCustomToken(R){return jt(this._delegate,F.a2(this._delegate,R))}signInWithEmailAndPassword(R,W){return jt(this._delegate,F.a9(this._delegate,R,W))}signInWithEmailLink(R,W){return jt(this._delegate,F.ac(this._delegate,R,W))}signInWithPhoneNumber(R,W){return ei(this._delegate,F.s(this._delegate,R,W))}signInWithPopup(R){var W=this;return(0,d.Z)(function*(){return Hn(ur(),W._delegate,"operation-not-supported-in-this-environment"),jt(W._delegate,F.c(W._delegate,R,Pn))})()}signInWithRedirect(R){var W=this;return(0,d.Z)(function*(){return Hn(ur(),W._delegate,"operation-not-supported-in-this-environment"),yield _n(W._delegate),F.f(W._delegate,R,Pn)})()}updateCurrentUser(R){return this._delegate.updateCurrentUser(R)}verifyPasswordResetCode(R){return F.a7(this._delegate,R)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return N.Persistence=bn,N})();function Ar(N,O,R){let W=N;"function"!=typeof N&&({next:W,error:O,complete:R}=N);const he=W;return{next:At=>he(At&&ze.getOrCreate(At)),error:O,complete:R}}function zn(N,O){const R=function qt(N,O){const R=Ke();if(!R)return[];const W=F.aD(Mn,N,O);switch(R.getItem(W)){case bn.NONE:return[F.N];case bn.LOCAL:return[F.i,F.a];case bn.SESSION:return[F.a];default:return[]}}(N,O);if(typeof self<"u"&&!R.includes(F.i)&&R.push(F.i),typeof window<"u")for(const W of[F.b,F.a])R.includes(W)||R.push(W);return R.includes(F.N)||R.push(F.N),R}class Gn{constructor(){this.providerId="phone",this._delegate=new F.P(Ln(B.Z.auth()))}static credential(O,R){return F.P.credential(O,R)}verifyPhoneNumber(O,R){return this._delegate.verifyPhoneNumber(O,R)}unwrap(){return this._delegate}}Gn.PHONE_SIGN_IN_METHOD=F.P.PHONE_SIGN_IN_METHOD,Gn.PROVIDER_ID=F.P.PROVIDER_ID;const ti=F.aA;class Wr{constructor(O,R,W=B.Z.app()){var he;ti(null===(he=W.options)||void 0===he?void 0:he.apiKey,"invalid-api-key",{appName:W.name}),this._delegate=new F.R(O,R,W.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function U(N){N.INTERNAL.registerComponent(new Le.wA("auth-compat",O=>{const R=O.getProvider("app-compat").getImmediate(),W=O.getProvider("auth");return new Vn(R,W)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:F.A.EMAIL_SIGNIN,PASSWORD_RESET:F.A.PASSWORD_RESET,RECOVER_EMAIL:F.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:F.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:F.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:F.A.VERIFY_EMAIL}},EmailAuthProvider:F.Q,FacebookAuthProvider:F.U,GithubAuthProvider:F.W,GoogleAuthProvider:F.V,OAuthProvider:F.X,SAMLAuthProvider:F.Y,PhoneAuthProvider:Gn,PhoneMultiFactorGenerator:F.m,RecaptchaVerifier:Wr,TwitterAuthProvider:F.Z,Auth:Vn,AuthCredential:F.J,Error:ae.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),N.registerVersion("@firebase/auth-compat","0.4.1")}(B.Z)},5861:(Dt,Se,V)=>{"use strict";function d(F,ae,_e,pe,Le,Ee,Oe){try{var G=F[Ee](Oe),q=G.value}catch(Q){return void _e(Q)}G.done?ae(q):Promise.resolve(q).then(pe,Le)}function B(F){return function(){var ae=this,_e=arguments;return new Promise(function(pe,Le){var Ee=F.apply(ae,_e);function Oe(q){d(Ee,pe,Le,Oe,G,"next",q)}function G(q){d(Ee,pe,Le,Oe,G,"throw",q)}Oe(void 0)})}}V.d(Se,{Z:()=>B})}},Dt=>{Dt(Dt.s=6459)}]);